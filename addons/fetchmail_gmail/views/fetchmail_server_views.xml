<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <recordid="fetchmail_server_view_form"model="ir.ui.view">
        <fieldname="name">fetchmail.server.view.form.inherit.gmail</field>
        <fieldname="model">fetchmail.server</field>
        <fieldname="priority">100</field>
        <fieldname="inherit_id"ref="fetchmail.view_email_server_form"/>
        <fieldname="arch"type="xml">
            <fieldname="server"position="before">
                <fieldname="use_google_gmail_service"string="Gmail"attrs="{'readonly':[('state','=','done')]}"/>
            </field>
            <fieldname="user"position="after">
                <fieldname="google_gmail_uri"invisible="1"/>
                <fieldname="google_gmail_refresh_token"invisible="1"/>
                <div></div>
                <divattrs="{'invisible':[('use_google_gmail_service','=',False)]}">
                    <spanattrs="{'invisible':['|',('use_google_gmail_service','=',False),('google_gmail_refresh_token','=',False)]}"
                        class="badgebadge-success">
                        GmailTokenValid
                    </span>
                    <buttontype="object"
                        name="open_google_gmail_uri"class="btn-linkpx-0"
                        attrs="{'invisible':['|','|',('google_gmail_uri','=',False),('use_google_gmail_service','=',False),('google_gmail_refresh_token','!=',False)]}">
                        <iclass="fafa-arrow-right"/>
                        ConnectyourGmailaccount
                    </button>
                    <buttontype="object"
                        name="open_google_gmail_uri"class="btn-linkpx-0"
                        attrs="{'invisible':['|','|',('google_gmail_uri','=',False),('use_google_gmail_service','=',False),('google_gmail_refresh_token','=',False)]}">
                        <iclass="fafa-cog"/>
                        EditSettings
                    </button>
                    <divclass="alertalert-warning"role="alert"
                        attrs="{'invisible':['|',('use_google_gmail_service','=',False),('google_gmail_uri','!=',False)]}">
                        SetupyourGmailAPIcredentialsinthegeneralsettingstolinkaGmailaccount.
                    </div>
                </div>
            </field>
            <fieldname="password"position="attributes">
                <attributename="attrs">{'required':[('server_type','!=','local'),('use_google_gmail_service','=',False),('password','!=',False)],'invisible':[('use_google_gmail_service','=',True)]}</attribute>
            </field>
        </field>
    </record>
</flectra>
