<?xmlversion="1.0"encoding="UTF-8"?>
<flectranoupdate="1">

        <!--goaldefinitions-->
        <recordmodel="gamification.goal.definition"id="definition_crm_tot_invoices">
            <fieldname="name">TotalInvoiced</field>
            <fieldname="description"></field>
            <fieldname="computation_mode">sum</field>
            <fieldname="monetary">True</field>
            <fieldname="model_id"ref="account.model_account_invoice_report"/>
            <fieldname="field_id"ref="account.field_account_invoice_report__price_subtotal"/>
            <fieldname="field_date_id"ref="account.field_account_invoice_report__invoice_date"/>
            <fieldname="domain">[('state','!=','cancel'),('move_type','=','out_invoice')]</field>
            <fieldname="batch_mode">True</field>
            <fieldname="batch_distinctive_field"ref="account.field_account_invoice_report__invoice_user_id"/>
            <fieldname="batch_user_expression">user.id</field>
        </record>

        <recordmodel="gamification.goal.definition"id="definition_crm_nbr_new_leads">
            <fieldname="name">NewLeads</field>
            <fieldname="description">Basedonthecreationdate</field>
            <fieldname="computation_mode">count</field>
            <fieldname="suffix">leads</field>
            <fieldname="model_id"ref="crm.model_crm_lead"/>
            <fieldname="field_date_id"search="[('model','=','crm.lead'),('name','=','create_date')]"/>
            <!--leadANDopportunityasdon'twanttobepenalisedforleadconvertedtoopportunity-->
            <fieldname="domain">['|',('type','=','lead'),('type','=','opportunity')]</field>
            <fieldname="batch_mode">True</field>
            <fieldname="batch_distinctive_field"ref="crm.field_crm_lead__user_id"/>
            <fieldname="batch_user_expression">user.id</field>
        </record>

        <recordmodel="gamification.goal.definition"id="definition_crm_lead_delay_open">
            <fieldname="name">TimetoQualifyaLead</field>
            <fieldname="description">Theaveragenumberofdaystoopenthecase(lowerthan)</field>
            <fieldname="computation_mode">sum</field>
            <fieldname="condition">lower</field>
            <fieldname="suffix">days</field>
            <fieldname="model_id"ref="crm.model_crm_lead"/>
            <fieldname="field_id"ref="crm.field_crm_lead__day_close"/>
            <fieldname="field_date_id"ref="crm.field_crm_lead__date_closed"/>
            <fieldname="domain">[('type','=','lead')]</field>
            <fieldname="batch_mode">True</field>
            <fieldname="batch_distinctive_field"ref="crm.field_crm_lead__user_id"/>
            <fieldname="batch_user_expression">user.id</field>
        </record>

        <recordmodel="gamification.goal.definition"id="definition_crm_lead_delay_close">
            <fieldname="name">DaystoCloseaDeal</field>
            <fieldname="description">Theaveragenumberofdaystoclosethecase(lowerthan)</field>
            <fieldname="computation_mode">sum</field>
            <fieldname="condition">lower</field>
            <fieldname="suffix">days</field>
            <fieldname="model_id"ref="crm.model_crm_lead"/>
            <fieldname="field_id"ref="crm.field_crm_lead__day_open"/>
            <fieldname="field_date_id"ref="crm.field_crm_lead__date_open"/>
            <fieldname="domain">[]</field>
            <fieldname="batch_mode">True</field>
            <fieldname="batch_distinctive_field"ref="crm.field_crm_lead__user_id"/>
            <fieldname="batch_user_expression">user.id</field>
        </record>


        <recordmodel="gamification.goal.definition"id="definition_crm_nbr_new_opportunities">
            <fieldname="name">NewOpportunities</field>
            <fieldname="description">Basedontheopeningdate</field>
            <fieldname="computation_mode">count</field>
            <fieldname="suffix">opportunities</field>
            <fieldname="model_id"ref="crm.model_crm_lead"/>
            <fieldname="field_date_id"ref="crm.field_crm_lead__date_open"/>
            <fieldname="domain">[('type','=','opportunity')]</field>
            <fieldname="batch_mode">True</field>
            <fieldname="batch_distinctive_field"ref="crm.field_crm_lead__user_id"/>
            <fieldname="batch_user_expression">user.id</field>
        </record>

        <recordmodel="gamification.goal.definition"id="definition_crm_nbr_sale_order_created">
            <fieldname="name">NewSalesOrders</field>
            <fieldname="description">Basedonthecreationdate</field>
            <fieldname="computation_mode">count</field>
            <fieldname="suffix">orders</field>
            <fieldname="model_id"ref="sale.model_sale_order"/>
            <fieldname="field_date_id"ref="sale.field_sale_order__date_order"/>
            <fieldname="domain">[('state','notin',('draft','sent','cancel'))]</field>
            <fieldname="batch_mode">True</field>
            <fieldname="batch_distinctive_field"ref="sale.field_sale_order__user_id"/>
            <fieldname="batch_user_expression">user.id</field>
        </record>

        <recordmodel="gamification.goal.definition"id="definition_crm_nbr_paid_sale_order">
            <fieldname="name">PaidSalesOrders</field>
            <fieldname="description">Basedontheinvoicedate</field>
            <fieldname="computation_mode">count</field>
            <fieldname="suffix">orders</field>
            <fieldname="model_id"ref="account.model_account_invoice_report"/>
            <fieldname="field_date_id"ref="account.field_account_invoice_report__invoice_date"/>
            <fieldname="domain">[('payment_state','in',('paid','in_payment')),('move_type','=','out_invoice')]</field>
            <fieldname="batch_mode">True</field>
            <fieldname="batch_distinctive_field"ref="account.field_account_invoice_report__invoice_user_id"/>
            <fieldname="batch_user_expression">user.id</field>
        </record>
        <recordmodel="gamification.goal.definition"id="definition_crm_tot_paid_sale_order">
            <fieldname="name">TotalPaidSalesOrders</field>
            <fieldname="description">Basedontheinvoicedate</field>
            <fieldname="computation_mode">count</field>
            <fieldname="monetary">True</field>
            <fieldname="model_id"ref="account.model_account_invoice_report"/>
            <fieldname="field_id"ref="account.field_account_invoice_report__price_subtotal"/>
            <fieldname="field_date_id"ref="account.field_account_invoice_report__invoice_date"/>
            <fieldname="domain">[('payment_state','in',('paid','in_payment')),('move_type','=','out_invoice')]</field>
            <fieldname="batch_mode">True</field>
            <fieldname="batch_distinctive_field"ref="account.field_account_invoice_report__invoice_user_id"/>
            <fieldname="batch_user_expression">user.id</field>
        </record>


        <recordmodel="gamification.goal.definition"id="definition_crm_nbr_customer_refunds">
            <fieldname="name">CustomerCreditNotes</field>
            <fieldname="description">Addcreditnotetotheleastcustomers(lowerthan)</field>
            <fieldname="computation_mode">count</field>
            <fieldname="condition">lower</field>
            <fieldname="suffix">invoices</field>
            <fieldname="model_id"ref="account.model_account_invoice_report"/>
            <fieldname="field_date_id"ref="account.field_account_invoice_report__invoice_date"/>
            <fieldname="domain">[('state','!=','cancel'),('move_type','=','out_refund')]</field>
            <fieldname="batch_mode">True</field>
            <fieldname="batch_distinctive_field"ref="account.field_account_invoice_report__invoice_user_id"/>
            <fieldname="batch_user_expression">user.id</field>
        </record>
        <recordmodel="gamification.goal.definition"id="definition_crm_tot_customer_refunds">
            <fieldname="name">TotalCustomerCreditNotes</field>
            <fieldname="description">Thetotalcreditnotevalueisnegative.Validatedwhenhigher(mincreditnotevalue).</field>
            <fieldname="computation_mode">sum</field>
            <fieldname="condition">higher</field>
            <fieldname="monetary">True</field>
            <fieldname="model_id"ref="account.model_account_invoice_report"/>
            <fieldname="field_id"ref="account.field_account_invoice_report__price_subtotal"/>
            <fieldname="field_date_id"ref="account.field_account_invoice_report__invoice_date"/>
            <fieldname="domain">[('state','!=','cancel'),('move_type','=','out_refund')]</field>
            <fieldname="batch_mode">True</field>
            <fieldname="batch_distinctive_field"ref="account.field_account_invoice_report__invoice_user_id"/>
            <fieldname="batch_user_expression">user.id</field>
        </record>



        <!--challenges-->
        <recordmodel="gamification.challenge"id="challenge_crm_sale">
            <fieldname="name">MonthlySalesTargets</field>
            <fieldname="period">monthly</field>
            <fieldname="visibility_mode">ranking</field>
            <fieldname="user_domain"eval="str([('groups_id','in',[ref('sales_team.group_sale_salesman')])])"/>
            <fieldname="report_message_frequency">weekly</field>
        </record>

        <recordmodel="gamification.challenge"id="challenge_crm_marketing">
            <fieldname="name">LeadAcquisition</field>
            <fieldname="period">monthly</field>
            <fieldname="visibility_mode">ranking</field>
            <fieldname="user_domain"eval="str([('groups_id','in',[ref('sales_team.group_sale_salesman')])])"/>
            <fieldname="report_message_frequency">weekly</field>
        </record>

         <!--lines-->
        <recordmodel="gamification.challenge.line"id="line_crm_sale1">
            <fieldname="definition_id"ref="definition_crm_tot_invoices"/>
            <fieldname="target_goal">20000</field>
            <fieldname="challenge_id"ref="challenge_crm_sale"/>
        </record>


        <recordmodel="gamification.challenge.line"id="line_crm_marketing1">
            <fieldname="definition_id"ref="definition_crm_nbr_new_leads"/>
            <fieldname="target_goal">7</field>
            <fieldname="challenge_id"ref="challenge_crm_marketing"/>
            <fieldname="sequence">1</field>
        </record>
        <recordmodel="gamification.challenge.line"id="line_crm_marketing2">
            <fieldname="definition_id"ref="definition_crm_lead_delay_open"/>
            <fieldname="target_goal">15</field>
            <fieldname="challenge_id"ref="challenge_crm_marketing"/>
            <fieldname="sequence">2</field>
        </record>
        <recordmodel="gamification.challenge.line"id="line_crm_marketing3">
            <fieldname="definition_id"ref="definition_crm_nbr_new_opportunities"/>
            <fieldname="target_goal">5</field>
            <fieldname="challenge_id"ref="challenge_crm_marketing"/>
            <fieldname="sequence">3</field>
        </record>

</flectra>
