<?xmlversion="1.0"encoding="utf-8"?>
<flectra>

    <!--equiment.request:views-->
    <recordid="maintenance_request_view_search_inherit_hr"model="ir.ui.view">
        <fieldname="name">maintenance.request.view.search.inherit.hr</field>
        <fieldname="model">maintenance.request</field>
        <fieldname="inherit_id"ref="maintenance.hr_equipment_request_view_search"/>
        <fieldname="arch"type="xml">
            <xpathexpr="field[@name='user_id']"position="after">
                <fieldname="employee_id"/>
            </xpath>
            <xpathexpr="//filter[@name='my_maintenances']"position="replace">
                <filterstring="MyMaintenances"name="my_maintenances"domain="[('employee_id.user_id','=',uid)]"/>
            </xpath>
            <xpathexpr="//filter[@name='created_by']"position="replace">
                <filterstring='CreatedBy'name='created_by'domain="[]"context="{'group_by':'employee_id'}"/>
            </xpath>
        </field>
    </record>

    <recordid="maintenance_request_view_form_inherit_hr"model="ir.ui.view">
        <fieldname="name">maintenance.request.view.form.inherit.hr</field>
        <fieldname="model">maintenance.request</field>
        <fieldname="inherit_id"ref="maintenance.hr_equipment_request_view_form"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//field[@name='owner_user_id']"position="replace">
                <fieldname="employee_id"string="CreatedBy"
                       options="{'no_create_edit':True,'no_open':True}"/>
            </xpath>
        </field>
    </record>

    <recordid="maintenance_request_view_kanban_inherit_hr"model="ir.ui.view">
        <fieldname="name">maintenance.request.view.kanban.inherit.hr</field>
        <fieldname="model">maintenance.request</field>
        <fieldname="inherit_id"ref="maintenance.hr_equipment_request_view_kanban"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//span[@name='owner_user_id']"position="replace">
                <spant-if="record.employee_id.raw_value"><fieldname="employee_id"/><br/></span>
            </xpath>
        </field>
    </record>

    <recordid="maintenance_request_view_tree_inherit_hr"model="ir.ui.view">
        <fieldname="name">maintenance.request.view.tree.inherit.hr</field>
        <fieldname="model">maintenance.request</field>
        <fieldname="inherit_id"ref="maintenance.hr_equipment_request_view_tree"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//field[@name='owner_user_id']"position="replace">
                <fieldname="employee_id"/>
            </xpath>
        </field>
    </record>

    <!--equiment:views-->
    <recordid="maintenance_equipment_view_search_inherit_hr"model='ir.ui.view'>
      <fieldname="name">maintenance.equipment.view.search.inherit.hr</field>
      <fieldname="model">maintenance.equipment</field>
      <fieldname="inherit_id"ref="maintenance.hr_equipment_view_search"/>
      <fieldname="arch"type="xml">
        <filtername="assigned"position="attributes">
          <attributename="domain">['|',('employee_id','!=',False),('department_id','!=',False)]</attribute>
        </filter>
        <filtername="available"position="attributes">
          <attributename="domain">[('employee_id','=',False),('department_id','=',False)]</attribute>
        </filter>
        <fieldname="owner_user_id"position="after">
          <fieldname="employee_id"/>
          <fieldname="department_id"/>
        </field>
        <groupposition="inside">
          <filterstring="Employee"name="employee"domain="[]"context="{'group_by':'employee_id'}"/>
          <filterstring="Department"name="department"domain="[]"context="{'group_by':'department_id'}"/>
        </group>
      </field>
    </record>

    <recordid="maintenance_equipment_view_form_inherit_hr"model="ir.ui.view">
        <fieldname="name">maintenance.equipment.view.form.inherit.hr</field>
        <fieldname="model">maintenance.equipment</field>
        <fieldname="inherit_id"ref="maintenance.hr_equipment_view_form"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//field[@name='owner_user_id']"position="replace">
                <fieldname="equipment_assign_to"widget="radio"/>
                <fieldname="employee_id"string="Employee"attrs="{'invisible':['|',('equipment_assign_to','=','department'),('equipment_assign_to','=',False)]}"/>
                <fieldname="department_id"string="Department"attrs="{'invisible':['|',('equipment_assign_to','=','employee'),('equipment_assign_to','=',False)]}"/>
            </xpath>
        </field>
    </record>

    <recordid="maintenance_equipment_view_kanban_inherit_hr"model="ir.ui.view">
        <fieldname="name">maintenance.equipment.view.kanban.inherit.hr</field>
        <fieldname="model">maintenance.equipment</field>
        <fieldname="inherit_id"ref="maintenance.hr_equipment_view_kanban"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//field[@name='technician_user_id']"position="after">
                <fieldname="employee_id"/>
                <fieldname="department_id"/>
            </xpath>
            <xpathexpr="//templates//field[@name='owner_user_id']"position='replace'>
                <fieldname="employee_id"widget="many2one_avatar_employee"/>
            </xpath>
            <divt-if="record.serial_no.raw_value"position='after'>
                <divt-if="!record.employee_id.raw_value">Unassigned</div>
                <divt-if="record.employee_id.value"><fieldname="employee_id"/></div>
                <divt-if="record.department_id.value"><fieldname="department_id"/>
            </div>
            </div>
        </field>
    </record>

    <recordid="maintenance_equipment_view_tree_inherit_hr"model="ir.ui.view">
        <fieldname="name">maintenance.equipment.view.tree.inherit.hr</field>
        <fieldname="model">maintenance.equipment</field>
        <fieldname="inherit_id"ref="maintenance.hr_equipment_view_tree"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//field[@name='owner_user_id']"position="replace">
                <fieldname="employee_id"string="Employee"/>
                <fieldname="department_id"string="Department"/>
            </xpath>
        </field>
    </record>
</flectra>
