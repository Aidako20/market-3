<?xmlversion="1.0"?>
<flectra>
    <!--noteStageFormView-->
    <recordid="view_note_stage_form"model="ir.ui.view">
      <fieldname="name">note.stage.form</field>
      <fieldname="model">note.stage</field>
      <fieldname="arch"type="xml">
        <formstring="StageofNotes">
          <group>
            <fieldname="name"/>
            <fieldname="fold"/>
          </group>
        </form>
      </field>
    </record>

    <!--noteStageTreeView-->
    <recordid="view_note_stage_tree"model="ir.ui.view">
      <fieldname="name">note.stage.tree</field>
      <fieldname="model">note.stage</field>
      <fieldname="field_parent"></field>
      <fieldname="arch"type="xml">
        <treestring="StagesofNotes"editable="bottom">
            <fieldname="sequence"widget="handle"/>
            <fieldname="name"/>
            <fieldname="fold"/>
        </tree>
      </field>
    </record>

    <!--noteStageAction-->
    <recordid="action_note_stage"model="ir.actions.act_window">
        <fieldname="name">Stages</field>
        <fieldname="res_model">note.stage</field>
        <fieldname="view_mode">tree,form</field>
        <fieldname="domain">[('user_id','=',uid)]</field>
    </record>

    <!--noteTagFormView-->
    <recordid="note_tag_view_form"model="ir.ui.view">
      <fieldname="name">note.tag.form</field>
      <fieldname="model">note.tag</field>
      <fieldname="arch"type="xml">
        <formstring="Tags">
          <group>
            <fieldname="name"/>
          </group>
        </form>
      </field>
    </record>

    <!--noteTagTreeView-->
    <recordid="note_tag_view_tree"model="ir.ui.view">
      <fieldname="name">note.tag.tree</field>
      <fieldname="model">note.tag</field>
      <fieldname="arch"type="xml">
        <treestring="Tags"editable="bottom">
            <fieldname="name"/>
        </tree>
      </field>
    </record>

    <!--noteTagAction-->
    <recordid="note_tag_action"model="ir.actions.act_window">
      <fieldname="name">Tags</field>
      <fieldname="res_model">note.tag</field>
      <fieldname="view_mode">tree,form</field>
      <fieldname="help"type="html">
        <pclass="o_view_nocontent_smiling_face">
          Addanewtag
        </p>
      </field>
    </record>

    <!--NewnoteKanbanView-->
    <recordid="view_note_note_kanban"model="ir.ui.view">
      <fieldname="name">note.note.kanban</field>
      <fieldname="model">note.note</field>
      <fieldname="arch"type="xml">
        <kanbandefault_group_by="stage_id"class="oe_notesoe_kanban_quickcreate_textareao_kanban_small_column">
          <fieldname="color"/>
          <fieldname="sequence"/>
          <fieldname="name"/>
          <fieldname="stage_id"/>
          <fieldname="open"/>
          <fieldname="memo"/>
          <fieldname="date_done"/>
          <fieldname="message_partner_ids"/>
          <fieldname="activity_ids"/>
          <fieldname="activity_state"/>
          <progressbarfield="activity_state"colors='{"planned":"success","today":"warning","overdue":"danger"}'/>
          <templates>
            <tt-name="kanban-box">

              <divt-attf-class="#{!selection_mode?kanban_color(record.color.raw_value):''}oe_kanban_global_click_editoe_semantic_html_overrideoe_kanban_card">

                <fieldname="tag_ids"widget="many2many_tags"options="{'color_field':'color'}"/>

                <divclass="o_dropdown_kanbandropdown">
                    <arole="button"class="dropdown-toggleo-no-caretbtn"data-toggle="dropdown"data-display="static"href="#"aria-label="Dropdownmenu"title="Dropdownmenu">
                        <spanclass="fafa-ellipsis-v"/>
                    </a>
                    <divclass="dropdown-menu"role="menu">
                        <arole="menuitem"type="delete"class="dropdown-item">Delete</a>
                        <ulclass="oe_kanban_colorpicker"data-field="color"/>
                    </div>
                </div>
                  <span>
                    <aname="action_close"type="object"t-if="record.open.raw_value"><iclass="fafa-check"role="img"aria-label="Opened"title="Opened"/></a>
                    <aname="action_open"type="object"t-if="!record.open.raw_value"><iclass="fafa-undo"role="img"aria-label="Closed"title="Closed"/></a>
                  </span>
                <!--kanbannote-->
                <spant-attf-class="oe_kanban_content#{record.open.raw_value?'':'note_text_line_through'}">
                  <!--title-->
                  <fieldname="name"/>
                  <divclass="o_kanban_inline_blockfloat-rightmr4">
                    <fieldname="activity_ids"widget="kanban_activity"/>
                  </div>
                </span>
                <tt-if="record.message_partner_ids.raw_value.length&gt;1">
                    <divclass="clearfix"></div>
                      <tt-foreach="record.message_partner_ids.raw_value"t-as="follower">
                        <imgt-att-src="kanban_image('res.partner','image_128',follower)"class="oe_kanban_avataro_image_24_coverfloat-rightmt-2"t-att-data-member_id="follower"alt="Follower"/>
                      </t>
                    <divclass="clearfix"></div>
                </t>
              </div>
            </t>
          </templates>
        </kanban>
      </field>
    </record>

    <!--NewnoteTreeView-->
    <recordid="view_note_note_tree"model="ir.ui.view">
      <fieldname="name">note.note.tree</field>
      <fieldname="model">note.note</field>
      <fieldname="arch"type="xml">
        <treestring="Stages">
          <fieldname="name"/>
          <fieldname="open"/>
          <fieldname="stage_id"/>
          <fieldname="tag_ids"widget="many2many_tags"options="{'color_field':'color'}"/>
          <fieldname="activity_ids"widget="list_activity"optional="show"/>
        </tree>
      </field>
    </record>

    <!--NewnoteFormView-->
    <recordid="view_note_note_form"model="ir.ui.view">
        <fieldname="name">note.note.form</field>
        <fieldname="model">note.note</field>
        <fieldname="arch"type="xml">
            <formstring="Note"class="oe_form_nomargino_note_form_view">
                <header>
                    <fieldname="tag_ids"widget="many2many_tags"options="{'color_field':'color'}"placeholder="Tags"/>
                    <fieldname="stage_id"domain="[('user_id','=',uid)]"widget="statusbar"options="{'clickable':'1'}"/>
                </header>
                <sheet>
                  <fieldname="memo"type="html"class="oe_memo"/>
                </sheet>
                <divclass="oe_chatter">
                    <fieldname="message_follower_ids"/>
                    <fieldname="activity_ids"/>
                    <fieldname="message_ids"/>
                </div>
            </form>
        </field>
    </record>

    <!--Searchnote -->
    <recordid="view_note_note_filter"model="ir.ui.view">
      <fieldname="name">note.note.search</field>
      <fieldname="model">note.note</field>
      <fieldname="arch"type="xml">
        <searchstring="Notes">
          <fieldname="memo"string="Note"/>
          <fieldname="tag_ids"/>
          <filtername="open_true"string="Active"domain="[('open','=',True)]"/>
          <filtername="open_false"string="Archive"domain="[('open','=',False)]"/>
          <filterinvisible="1"string="LateActivities"name="activities_overdue"
                  domain="[('my_activity_date_deadline','&lt;',context_today().strftime('%Y-%m-%d'))]"
                  help="Showallrecordswhichhasnextactiondateisbeforetoday"/>
          <filterinvisible="1"string="TodayActivities"name="activities_today"
                  domain="[('my_activity_date_deadline','=',context_today().strftime('%Y-%m-%d'))]"/>
          <filterinvisible="1"string="FutureActivities"name="activities_upcoming_all"
                        domain="[('my_activity_date_deadline','&gt;',context_today().strftime('%Y-%m-%d'))
                        ]"/>
          <groupexpand="0"string="GroupBy">
            <filterstring="Stage"name="stage"help="BystickynoteCategory"context="{'group_by':'stage_id'}"/>
          </group>
        </search>
      </field>
    </record>

    <!--Action-->
    <recordid="action_note_note"model="ir.actions.act_window">
      <fieldname="name">Notes</field>
      <fieldname="res_model">note.note</field>
      <fieldname="view_mode">kanban,tree,form,activity</field>
      <fieldname="search_view_id"ref="view_note_note_filter"/>
      <fieldname="context">{}</field>
      <fieldname="help"type="html">
          <pclass="o_view_nocontent_smiling_face">
            Addanewpersonalnote
          </p><p>
            Notesareprivate,unlessyousharethembyinvitingfolloweronanote.
            (Usefulformeetingminutes).
          </p>
        </field>
    </record>

    <menuitem
      id="menu_note_notes"
      name="Notes"
      sequence="3"
      action="note.action_note_note"
      web_icon="note,static/description/icon.png">
        <menuitem
          id="menu_note_configuration"
          name="Configuration"
          sequence="100"
          groups="base.group_no_one">
            <menuitem
              id="menu_notes_stage"
              name="Stages"
              action="note.action_note_stage"
              sequence="21"/>
            <menuitem
              id="notes_tag_menu"
              action="note_tag_action"
              sequence="22"/>
        </menuitem>
    </menuitem>

</flectra>
