<?xmlversion="1.0"encoding="utf-8"?>
<flectra>

    <recordid="lunch_order_view_search"model="ir.ui.view">
        <fieldname="name">lunch.order.search</field>
        <fieldname="model">lunch.order</field>
        <fieldname="arch"type="xml">
            <searchstring="Search">
                <fieldname="name"string="Product"filter_domain="['|',('name','ilike',self),('note','ilike',self)]"/>
                <fieldname="user_id"/>
                <filtername='is_mine'string="MyOrders"domain="[('user_id','=',uid)]"/>
                <separator/>
                <filtername="not_confirmed"string="NotReceived"domain="[('state','!=',('confirmed'))]"/>
                <filtername="confirmed"string="Received"domain="[('state','=','confirmed')]"/>
                <filtername="cancelled"string="Cancelled"domain="[('state','=','cancelled')]"/>
                <separator/>
                <filtername="date_filter"string="Today"domain="[('date','=',context_today().strftime('%Y-%m-%d'))]"/>
                <separator/>
                <filterstring="Archived"name="inactive"domain="[('active','=',False)]"/>
                <groupexpand="0"string="GroupBy">
                    <filtername="group_by_user"string="User"context="{'group_by':'user_id'}"/>
                    <filtername="group_by_supplier"string="Vendor"context="{'group_by':'supplier_id'}"/>
                    <filtername="group_by_date"string="OrderDate"context="{'group_by':'date:day'}"help="VendorOrdersbyDate"/>
                </group>
            </search>
        </field>
    </record>

    <recordid="lunch_order_view_tree"model="ir.ui.view">
        <fieldname="name">lunch.order.tree</field>
        <fieldname="model">lunch.order</field>
        <fieldname="arch"type="xml">
            <treestring="OrderlinesTree"create="false"edit="false"decoration-muted="state=='cancelled'"class="o_lunch_list">
                <header>
                    <buttonname="action_confirm"type="object"string="Receive"/>
                </header>
                <fieldname='date'/>
                <fieldname='supplier_id'invisible='1'/>
                <fieldname='product_id'/>
                <fieldname="display_toppings"class="o_text_overflow"/>
                <fieldname='note'class="o_text_overflow"/>
                <fieldname='user_id'/>
                <fieldname="currency_id"invisible="1"/>
                <fieldname='price'sum="Total"string="Price"widget="monetary"/>
                <fieldname='state'/>
                <fieldname="company_id"groups="base.group_multi_company"/>
                <buttonname="action_confirm"string="Confirm"type="object"icon="fa-check"attrs="{'invisible':[('state','!=','ordered')]}"groups="lunch.group_lunch_manager"/>
                <buttonname="action_cancel"string="Cancel"type="object"icon="fa-times"attrs="{'invisible':[('state','in',['cancelled','confirmed'])]}"groups="lunch.group_lunch_manager"/>
            </tree>
        </field>
    </record>

    <recordid='lunch_order_view_kanban'model='ir.ui.view'>
        <fieldname="name">lunch.order.kanban</field>
        <fieldname="model">lunch.order</field>
        <fieldname="arch"type="xml">
            <kanbancreate="false"edit="false">
                <fieldname="product_id"/>
                <fieldname="note"/>
                <fieldname="state"/>
                <fieldname="user_id"/>
                <fieldname="date"/>
                <fieldname="price"/>
                <templates>
                    <tt-name="kanban-box">
                        <divclass="oe_kanban_global_click">
                            <divclass="o_kanban_record_top">
                                <divclass="o_kanban_record_headings">
                                    <strongclass="o_kanban_record_title"><fieldname="product_id"/></strong>
                                </div>
                                <fieldname="state"widget="label_selection"options="{'classes':{'new':'default','confirmed':'success','cancelled':'danger'}}"/>
                            </div>
                            <div>
                                <fieldname="note"/>
                            </div>
                            <divclass="row">
                                <divclass="col-6">
                                    <iclass="fafa-money"role="img"aria-label="Money"title="Money"/><fieldname="price"/>
                                </div>
                                <divclass="col-6text-right">
                                    <iclass="fafa-clock-o"role="img"aria-label="Date"title="Date"/><fieldname="date"/>
                                </div>
                            </div>
                            <divclass="rowmt4">
                                <divclass="col-6">
                                    <aclass="btnbtn-smbtn-success"role="button"name="action_order"string="Order"type="object"attrs="{'invisible':['|',('state','=','confirmed'),('state','=','ordered')]}"groups="lunch.group_lunch_manager">
                                        <iclass="fafa-phone"role="img"aria-label="Orderbutton"title="Orderbutton"/>
                                    </a>
                                    <aclass="btnbtn-smbtn-info"role="button"name="action_confirm"string="Receive"type="object"attrs="{'invisible':[('state','!=','ordered')]}"groups="lunch.group_lunch_manager">
                                        <iclass="fafa-check"role="img"aria-label="Receivebutton"title="Receivebutton"/>
                                    </a>
                                    <aclass="btnbtn-smbtn-danger"role="button"name="action_cancel"string="Cancel"type="object"attrs="{'invisible':[('state','=','cancelled')]}"groups="lunch.group_lunch_manager">
                                        <iclass="fafa-times"role="img"aria-label="Cancelbutton"title="Cancelbutton"/>
                                    </a>
                                </div>
                                <divclass="col-6">
                                    <spanclass="float-right">
                                        <fieldname="user_id"widget="many2one_avatar_user"/>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <recordid="lunch_order_view_pivot"model="ir.ui.view">
        <fieldname="name">lunch.order.pivot</field>
        <fieldname="model">lunch.order</field>
        <fieldname="arch"type="xml">
            <pivotsample="1">
                <fieldname="date"type="col"/>
                <fieldname="supplier_id"type="row"/>
            </pivot>
        </field>
    </record>

    <recordid="lunch_order_view_graph"model="ir.ui.view">
        <fieldname="name">lunch.order.graph</field>
        <fieldname="model">lunch.order</field>
        <fieldname="arch"type="xml">
            <graphsample="1">
                <fieldname="product_id"type="col"/>
            </graph>
        </field>
    </record>

    <recordid="lunch_order_action"model="ir.actions.act_window">
        <fieldname="name">MyOrders</field>
        <fieldname="res_model">lunch.order</field>
        <fieldname="view_mode">tree,kanban,pivot</field>
        <fieldname="search_view_id"ref="lunch_order_view_search"/>
        <fieldname="context">{"search_default_is_mine":1,"search_default_group_by_date":1}</field>
        <fieldname="help"type="html">
        <pclass="o_view_nocontent_empty_folder">
            Nopreviousorderfound
        </p><p>
            Thereisnopreviousorderrecorded.Clickon"MyLunch"andthencreateanewlunchorder.
        </p>
        </field>
    </record>

    <recordid="lunch_order_action_by_supplier"model="ir.actions.act_window">
        <fieldname="name">Today'sOrders</field>
        <fieldname="res_model">lunch.order</field>
        <fieldname="view_mode">tree,kanban</field>
        <fieldname="search_view_id"ref="lunch_order_view_search"/>
        <fieldname="context">{"search_default_group_by_supplier":1,"search_default_date_filter":1}</field>
        <fieldname="help"type="html">
          <pclass="o_view_nocontent_empty_folder">
            Nothingtoordertoday
          </p><p>
            Hereyoucanseetoday'sordersgroupedbyvendors.
          </p>
        </field>
    </record>

    <recordid="lunch_order_action_control_suppliers"model="ir.actions.act_window">
        <fieldname="name">ControlVendors</field>
        <fieldname="res_model">lunch.order</field>
        <fieldname="view_mode">tree,kanban,pivot</field>
        <fieldname="search_view_id"ref="lunch_order_view_search"/>
        <fieldname="context">{"search_default_group_by_supplier":1}</field>
        <fieldname="help"type="html">
          <pclass="o_view_nocontent_empty_folder">
            Nolunchorderyet
          </p><p>
            Summaryofalllunchorders,groupedbyvendorandbydate.
          </p><p>
            Clickonthe<spanclass="fafa-phonetext-success"role="img"aria-label="Orderbutton"title="Orderbutton"/>toannouncethattheorderisordered.<br/>
            Clickonthe<spanclass="fafa-checktext-success"role="img"aria-label="Receivebutton"title="Receivebutton"/>toannouncethattheorderisreceived.<br/>
            Clickonthe<spanclass="fafa-times-circletext-danger"role="img"aria-label="Cancelbutton"title="Cancelbutton"/>redXtoannouncethattheorderisn'tavailable.
          </p>
        </field>
    </record>

    <recordid="lunch_order_view_form"model="ir.ui.view">
        <fieldname="name">lunch.order.view.form</field>
        <fieldname="model">lunch.order</field>
        <fieldname="arch"type="xml">
            <form>
                <fieldname="currency_id"invisible="1"/>
                <fieldname="quantity"invisible="1"/>
                <fieldname="product_id"invisible="1"/>
                <fieldname="category_id"invisible="1"/>
                <fieldname="available_toppings_1"invisible="1"/>
                <fieldname="available_toppings_2"invisible="1"/>
                <fieldname="available_toppings_3"invisible="1"/>
                <divclass="d-flex">
                    <divclass="flex-grow-0pr-5">
                        <fieldname="image_1920"widget="image"class="o_lunch_image"options="{'image_preview':'image_128'}"/>
                    </div>
                    <divclass="flex-grow-1pr-5">
                        <h2><fieldname="name"/></h2>
                        <h3class="pt-3"><fieldname="price"widget="monetary"/></h3>
                    </div>
                </div>
                <divclass="o_lunch_wizard">
                    <divclass="row">
                        <divclass="col-2">
                            <fieldname="topping_label_1"nolabel="1"attrs="{'invisible':[('available_toppings_1','=',False)]}"class="font-weight-bold"/>
                        </div>
                        <divclass="col-10">
                            <fieldname="topping_ids_1"attrs="{'invisible':[('available_toppings_1','=',False)]}"widget="many2many_checkboxes"nolabel="1"/>
                        </div>
                    </div>
                    <divclass="row">
                        <divclass="col-2">
                            <fieldname="topping_label_2"nolabel="1"attrs="{'invisible':[('available_toppings_2','=',False)]}"class="font-weight-bold"/>
                        </div>
                        <divclass="col-10">
                            <fieldname="topping_ids_2"attrs="{'invisible':[('available_toppings_2','=',False)]}"widget="many2many_checkboxes"nolabel="1"/>
                        </div>
                    </div>
                    <divclass="row">
                        <divclass="col-2">
                            <fieldname="topping_label_3"nolabel="1"attrs="{'invisible':[('available_toppings_3','=',False)]}"class="font-weight-bold"/>
                        </div>
                        <divclass="col-10">
                            <fieldname="topping_ids_3"attrs="{'invisible':[('available_toppings_3','=',False)]}"widget="many2many_checkboxes"nolabel="1"/>
                        </div>
                    </div>
                    <divclass="row">
                        <divclass="col-2">
                            <labelfor="product_description"class="font-weight-bold"/>
                        </div>
                        <divclass="col-10">
                            <fieldname="product_description"nolabel="1"/>
                        </div>
                    </div>
                    <divclass="row">
                        <divclass="col-2">
                            <labelfor="note"class="font-weight-bold"/>
                        </div>
                        <divclass="col-10">
                            <fieldname="note"nolabel="1"placeholder="Information,allergens,..."/>
                        </div>
                    </div>
                </div>
                <footer>
                    <buttonstring="Save"special="save"class="oe_highlight"invisible="notcontext.get('active_id',False)"/>
                    <buttonstring="AddToCart"name="add_to_cart"type="object"class="oe_highlight"invisible="context.get('active_id',False)"/>
                    <buttonstring="Discard"special="cancel"/>
                </footer>
            </form>
        </field>
    </record>

</flectra>
