<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <data>
        <recordid="isr_invoice_form"model="ir.ui.view">
            <fieldname="name">l10n_ch.account.invoice.form</field>
            <fieldname="model">account.move</field>
            <fieldname="inherit_id"ref="account.view_move_form"/>
            <fieldname="arch"type="xml">
                <xpathexpr="//field[@name='is_move_sent']"position="after">
                    <fieldname="l10n_ch_isr_sent"invisible="1"/>
                    <fieldname="l10n_ch_currency_name"invisible="1"readonly="1"/>
                </xpath>

                <xpathexpr="//button[@id='account_invoice_payment_btn']"position="before">
                    <button
                        name="print_ch_qr_bill"
                        string="PrintQR-bill"
                        type="object"
                        attrs="{'invisible':['|',('state','!=','posted'),
                                             '|',('l10n_ch_isr_sent','=',True),
                                             '|',('move_type','!=','out_invoice'),
                                             ('l10n_ch_currency_name','notin',['EUR','CHF'])]}"
                        groups="base.group_user"
                        class="oe_highlight"
                        />
                    <button
                        name="print_ch_qr_bill"
                        string="PrintQR-bill"
                        type="object"
                        attrs="{'invisible':['|',('state','!=','posted'),
                                             '|',('l10n_ch_isr_sent','=',False),
                                             '|',('move_type','!=','out_invoice'),
                                             ('l10n_ch_currency_name','notin',['EUR','CHF'])]}"
                        groups="base.group_user"
                        />
                </xpath>
                <headerposition="after">
                    <fieldname="l10n_ch_isr_needs_fixing"invisible="1"/>
                    <divgroups="account.group_account_invoice"class="alertalert-warning"role="alert"style="margin-bottom:0px;"attrs="{'invisible':[('l10n_ch_isr_needs_fixing','=',False)]}">
                        PleasefillinacorrectISRreferenceinthepaymentreference. Thebankswillrefuseyourpaymentfileotherwise.
                    </div>
                </header>
            </field>
        </record>

        <recordid="isr_invoice_search_view"model="ir.ui.view">
            <fieldname="name">l10n_ch.invoice.select</field>
            <fieldname="model">account.move</field>
            <fieldname="inherit_id"ref="account.view_account_invoice_filter"/>
            <fieldname="mode">primary</field>
            <fieldname="arch"type="xml">
                <xpathexpr="//search"position="inside">
                    <fieldname="l10n_ch_isr_number"string="ISRreferencenumber"/>
                </xpath>
            </field>
        </record>

        <!--Overriddenaction(andprimarychildview),sothefilterareonly
        availableforcustomerinvoices-->
        <recordid="account.action_move_out_invoice_type"model="ir.actions.act_window">
            <fieldname="name">CustomerInvoices</field>
            <fieldname="res_model">account.move</field>
            <fieldname="search_view_id"ref="isr_invoice_search_view"/>
        </record>
    </data>
</flectra>
