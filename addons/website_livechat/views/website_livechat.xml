<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <data>
        <!--
            IntegrateLivechatinCommonFrontendforWebsite
            TemplateregisteringalltheassetsrequiredtoexecutetheLivechatfromapagecontainingFlectra
        -->
        <templateid="assets_frontend"name="im_livechatassetsfrontend"inherit_id="website.assets_frontend">
            <xpathexpr="."position="inside">
                <scripttype="text/javascript"src="/mail/static/src/js/utils.js"></script>
                <scripttype="text/javascript"src="/website_livechat/static/src/bugfix/public_bugfix.js"></script>
                <scripttype="text/javascript"src="/im_livechat/static/src/legacy/public_livechat.js"></script>
                <!--ChatRequest-->
                <scripttype="text/javascript"src="/website_livechat/static/src/legacy/public_livechat.js"></script>
                <!--Stylesheets-->
                <linkrel="stylesheet"type="text/scss"href="/im_livechat/static/src/legacy/public_livechat.scss"/>
                <linkrel="stylesheet"type="text/scss"href="/website_livechat/static/src/bugfix/public_bugfix.scss"/>
            </xpath>
        </template>

        <templateid="assets_editor_inherit_website_livechat"inherit_id="website.assets_editor"name="website_livechatAssetsEditor">
            <xpathexpr="."position="inside">
                <scripttype="text/javascript"src="/website_livechat/static/src/js/website_livechat.editor.js"></script>
            </xpath>
        </template>

        <templateid="loader"inherit_id="website.layout"name="Livechat:includeloaderonWebsite">
            <xpathexpr="//div[@id='wrapwrap']"position="after">
                <tt-if="websiteandwebsite.channel_idandnotno_livechat">
                    <script>
                        <tt-call="im_livechat.loader">
                            <tt-set="info"t-value="website.get_livechat_channel_info()"/>
                        </t>
                    </script>
                </t>
            </xpath>
        </template>

        <!--PageLayout-->
        <templateid="channel_page"name="LivechatChannelSatisfactionPage">
            <tt-call="website.layout">
              <divid="wrap">
                <divclass="container">
                    <h1><span>LivechatChannel</span> <smallt-field="channel.name"/></h1>
                    <divt-field="channel.website_description"class="oe_structuremt16"/>
                    <divclass="rowmt32">
                        <divclass="col-lg-8">
                            <tt-if="len(ratings)&gt;0">
                                <divclass="row">
                                    <divclass="col-lg-12mb32">
                                        <h3>Statistics</h3>
                                        <divclass="row">
                                            <divclass="col-lg-4d-flexjustify-content-endflex-column">
                                                <divclass="cardbg-successtext-white"t-attf-style="height:#{160+int(percentage['great'])}px;">
                                                    <divclass="card-bodytext-center">
                                                        <imgsrc="/rating/static/src/img/rating_5.png"style="height:40px"alt="Happyface"/>
                                                    </div>
                                                    <divclass="card-bodytext-center">
                                                        <h2style="margin:0">
                                                            <bstyle="font-size:30px">
                                                                <tt-esc="percentage['great']"/>
                                                            </b>
                                                            <small>%</small>
                                                        </h2>
                                                    </div>
                                                </div>
                                            </div>
                                            <divclass="col-lg-4d-flexjustify-content-endflex-column">
                                                <divclass="cardbg-warningtext-white"t-attf-style="height:#{160+int(percentage['okay'])}px;">
                                                    <divclass="card-bodytext-center">
                                                        <imgsrc="/rating/static/src/img/rating_3.png"style="height:40px"alt="Neutralface"/>
                                                    </div>
                                                    <divclass="card-bodytext-center">
                                                        <h2style="margin:0">
                                                            <bstyle="font-size:30px">
                                                                <tt-esc="percentage['okay']"/>
                                                            </b>
                                                            <small>%</small>
                                                        </h2>
                                                    </div>
                                                </div>
                                            </div>
                                            <divclass="col-lg-4d-flexjustify-content-endflex-column">
                                                <divclass="cardbg-dangertext-white"t-attf-style="height:#{160+int(percentage['bad'])}px;">
                                                    <divclass="card-bodytext-center">
                                                        <imgsrc="/rating/static/src/img/rating_1.png"style="height:40px"alt="Sadface"/>
                                                    </div>
                                                    <divclass="card-bodytext-center">
                                                        <h2style="margin:0">
                                                            <bstyle="font-size:30px">
                                                                <tt-esc="percentage['bad']"/>
                                                            </b>
                                                            <small>%</small>
                                                        </h2>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <divclass="row">
                                    <divclass="col-lg-12mb32">
                                        <h3>The<tt-esc="len(ratings)"/>lastfeedbacks</h3>
                                        <div>
                                            <tt-foreach="ratings"t-as="rating">
                                                <imgt-attf-src='/rating/static/src/img/rating_#{int(rating.rating)}.png't-att-alt="rating.res_name"width="48px"height="48px"/>
                                                <tt-if="(rating_index+1)%5==0">
                                                    <br/>
                                                </t>
                                            </t>
                                        </div>
                                    </div>
                                </div>
                            </t>
                            <tt-if="len(ratings)==0">
                                <h4style="text-align:center">Therearenoratingsforthischannelfornow.</h4>
                            </t>
                        </div>
                        <divclass="col-lg-4mb32">
                            <h3>TheTeam</h3>
                            <tt-foreach="team"t-as="user">
                                <divclass="mediamt-3">
                                    <imgt-if="user.image_128"t-att-src="image_data_uri(user.image_128)"class="o_image_64_coverroundedo_livechat_operator_avatar"t-att-alt="user.livechat_usernameoruser.name"/>
                                    <divclass="media-body">
                                        <h5>
                                            <tt-if="user.livechat_username">
                                                <tt-esc="user.livechat_username"/>
                                            </t>
                                            <tt-else="">
                                                <tt-esc="user.name"/>
                                            </t>
                                        </h5>
                                        <divclass="col-lg-12">
                                            <divclass="row">
                                                <tt-if="user.partner_id.idinratings_per_user">
                                                    <divclass="col-lg-4pl-0pr-0">
                                                        <imgt-attf-src='/rating/static/src/img/rating_5.png'alt="Great"width="16px"height="16px"/>
                                                        <spanclass="align-middle"><tt-esc="ratings_per_user[user.partner_id.id]['great']"/>%</span>
                                                    </div>
                                                    <divclass="col-lg-4pl-0pr-0">
                                                        <imgt-attf-src='/rating/static/src/img/rating_3.png'alt="Okay"width="16px"height="16px"/>
                                                        <spanclass="align-middle"><tt-esc="ratings_per_user[user.partner_id.id]['okay']"/>%</span>
                                                    </div>
                                                    <divclass="col-lg-4pl-0pr-0">
                                                        <imgt-attf-src='/rating/static/src/img/rating_1.png'alt="Bad"width="16px"height="16px"/>
                                                        <spanclass="align-middle"><tt-esc="ratings_per_user[user.partner_id.id]['bad']"/>%</span>
                                                    </div>
                                                </t>
                                                <tt-else="">
                                                    <divclass="col-lg-12pl-0pr-0o_livechat_no_rating">Notratedyet</div>
                                                </t>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </t>
                        </div>
                    </div>
                </div>
              </div>
            </t>
        </template>


        <templateid="channel_list_page"name="LivechatChannelListPage">
            <tt-call="website.layout">
                <divid="wrap">
                    <divclass="oe_structure"id="oe_structure_website_livechat_channel_list_1"/>
                    <divclass="container">
                        <h1class="pt-3">LivechatSupportChannels</h1>
                        <divclass="rowmt32mb32">
                            <tt-if="notlen(channels)">
                                <divclass="col-lg-6offset-lg-3">
                                    Therearenopubliclivechatchannelstoshow.
                                </div>
                            </t>
                            <tt-if="len(channels)">
                                <divclass="col-lg-6">
                                    <tt-foreach="channels"t-as="channel">
                                        <divt-attf-class="media#{'mt-3'ifchannel_indexelse''}">
                                            <at-attf-href="/livechat/channel/#{slug(channel)}">
                                                <imgt-att-src="channel.image_128andimage_data_uri(channel.image_128)or'/web/static/src/img/placeholder.png'"t-att-alt="channel.name"class="o_image_64_cover"/>
                                            </a>
                                            <divclass="media-bodyh-100my-auto">
                                                <h4><tt-esc="channel.name"/></h4>
                                            </div>
                                        </div>
                                    </t>
                                </div>
                            </t>
                        </div>
                    </div>
                    <divclass="oe_structure"id="oe_structure_website_livechat_channel_list_2"/>
                </div>
            </t>
        </template>

        <!--UserNavbar-->
        <templateid="user_navbar_inherit_website_livechat"inherit_id="website.user_navbar">
            <xpathexpr="//div[@id='o_new_content_menu_choices']//div[@name='module_website_livechat']"position="replace">
            </xpath>
        </template>

    </data>
</flectra>
