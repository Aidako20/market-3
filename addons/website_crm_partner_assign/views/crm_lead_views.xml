<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
        <recordid="view_crm_lead_opportunity_geo_assign_form"model="ir.ui.view">
            <fieldname="name">crm.lead.geo_assign.inherit</field>
            <fieldname="model">crm.lead</field>
            <fieldname="inherit_id"ref="crm.crm_lead_view_form"/>
            <fieldname="arch"type="xml">
                <xpathexpr="//notebook/page[last()]"position="after">
                    <pagestring="AssignedPartner"name="assigned_partner"groups="sales_team.group_sale_salesman">
                        <groupcol="3">
                            <labelfor="partner_latitude"string="Geolocation"/>
                            <divclass="o_row">
                                <spanclass="oe_grey">(</span>
                                <fieldname="partner_latitude"/>
                                <spanclass="oe_grey"attrs="{'invisible':[('partner_latitude','&lt;=',0)]}">N</span>
                                <spanclass="oe_grey"attrs="{'invisible':[('partner_latitude','&gt;=',0)]}">S</span>
                                <fieldname="partner_longitude"/>
                                <spanclass="oe_grey"attrs="{'invisible':[('partner_longitude','&lt;=',0)]}">E</span>
                                <spanclass="oe_grey"attrs="{'invisible':[('partner_longitude','&gt;=',0)]}">W</span>
                                <spanclass="oe_grey">)</span>
                            </div>
                            <buttonstring="AutomaticAssignment"name="action_assign_partner"type="object"class="btn-link"/>

                            <fieldname="partner_assigned_id"domain="[('grade_id','!=',False)]"/>
                            <buttonstring="SendEmail"type="action"class="btn-link"
                                attrs="{'invisible':[('partner_assigned_id','=',False)]}"
                                name="%(crm_lead_forward_to_partner_act)d"
                                context="{'default_composition_mode':'forward','hide_forward_type':1,'default_partner_ids':[partner_assigned_id]}"/>
                        </group>
                    </page>
                </xpath>
            </field>
        </record>

        <recordid="view_crm_opportunity_geo_assign_tree"model="ir.ui.view">
            <fieldname="name">crm.lead.geo_assign.tree.inherit</field>
            <fieldname="model">crm.lead</field>
            <fieldname="inherit_id"ref="crm.crm_case_tree_view_oppor"/>
            <fieldname="arch"type="xml">
                <fieldname="priority"position="after">
                    <fieldname="partner_assigned_id"optional="hide"/>
                    <fieldname="date_partner_assign"invisible="1"/>
                 </field>
            </field>
        </record>

        <recordmodel="ir.ui.view"id="crm_opportunity_partner_filter">
            <fieldname="name">crm.opportunity.partner.filter.assigned</field>
            <fieldname="model">crm.lead</field>
            <fieldname="inherit_id"ref="crm.view_crm_case_opportunities_filter"/>
            <fieldname="arch"type="xml">
                <filtername="stage"position="after">
                    <filterstring="AssignedPartner"name="assigned_partner"domain="[]"context="{'group_by':'partner_assigned_id'}"/>
                </filter>
                <filtername="unassigned"position="after">
                    <filterstring="MyAssignedPartners"name="my_assigned_partners"domain="[('partner_assigned_id.user_id','=',uid)]"/>
                </filter>
                <fieldname="phone_mobile_search"position="after">
                    <fieldname="partner_assigned_id"/>
                </field>
            </field>
        </record>

        <recordid="view_crm_lead_geo_assign_tree"model="ir.ui.view">
            <fieldname="name">crm.lead.lead.geo_assign.tree.inherit</field>
            <fieldname="model">crm.lead</field>
            <fieldname="inherit_id"ref="crm.crm_case_tree_view_leads"/>
            <fieldname="arch"type="xml">
                <fieldname="partner_id"position="after">
                    <fieldname="partner_assigned_id"optional="show"/>
                </field>
            </field>
        </record>

        <recordmodel="ir.ui.view"id="crm_lead_partner_filter">
            <fieldname="name">crm.lead.partner.filter.assigned</field>
            <fieldname="model">crm.lead</field>
            <fieldname="inherit_id"ref="crm.view_crm_case_leads_filter"/>
            <fieldname="arch"type="xml">
                <filtername="company"position="after">
                    <filterstring="AssignedPartner"name="assigned_partner"domain="[]"context="{'group_by':'partner_assigned_id'}"/>
                </filter>
                <filtername="unassigned_leads"position="after">
                    <filterstring="MyAssignedPartners"name="my_assigned_partners"domain="[('partner_assigned_id.user_id','=',uid)]"/>
                </filter>
                <fieldname="campaign_id"position="after">
                    <fieldname="partner_assigned_id"/>
                </field>
            </field>
        </record>

        <recordid="crm_lead_view_pivot"model="ir.ui.view">
            <fieldname="name">crm.lead.view.pivot.inherit.partner.assign</field>
            <fieldname="model">crm.lead</field>
            <fieldname="inherit_id"ref="crm.crm_lead_view_pivot"/>
            <fieldname="arch"type="xml">
                <xpathexpr="//pivot"position="inside">
                    <fieldname="partner_latitude"invisible="1"/>
                    <fieldname="partner_longitude"invisible="1"/>
                </xpath>
            </field>
        </record>

        <recordid="crm_lead_view_graph"model="ir.ui.view">
            <fieldname="name">crm.lead.view.graph.inherit.partner.assign</field>
            <fieldname="model">crm.lead</field>
            <fieldname="inherit_id"ref="crm.crm_lead_view_graph"/>
            <fieldname="arch"type="xml">
                <xpathexpr="//graph"position="inside">
                    <fieldname="partner_latitude"invisible="1"/>
                    <fieldname="partner_longitude"invisible="1"/>
                </xpath>
            </field>
        </record>

        <recordid="crm_lead_view_graph_report_opportunity"model="ir.ui.view">
            <fieldname="name">crm.lead.view.graph.report.opportunity.inherit.partner.assign</field>
            <fieldname="model">crm.lead</field>
            <fieldname="inherit_id"ref="crm.crm_opportunity_report_view_graph"/>
            <fieldname="arch"type="xml">
                <xpathexpr="//graph"position="inside">
                    <fieldname="partner_latitude"invisible="1"/>
                    <fieldname="partner_longitude"invisible="1"/>
                </xpath>
            </field>
        </record>

        <recordid="crm_lead_view_graph_report_lead"model="ir.ui.view">
            <fieldname="name">crm.lead.view.graph.report.lead.inherit.partner.assign</field>
            <fieldname="model">crm.lead</field>
            <fieldname="inherit_id"ref="crm.crm_opportunity_report_view_graph_lead"/>
            <fieldname="arch"type="xml">
                <xpathexpr="//graph"position="inside">
                    <fieldname="partner_latitude"invisible="1"/>
                    <fieldname="partner_longitude"invisible="1"/>
                </xpath>
            </field>
        </record>
</flectra>
