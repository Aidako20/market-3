<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <!--producthistory-->
    <recordid="website_sale_visitor_page_view_tree"model="ir.ui.view">
        <fieldname="name">website.track.view.tree</field>
        <fieldname="model">website.track</field>
        <fieldname="arch"type="xml">
            <treestring="VisitorProductViewsHistory"create="0">
                <fieldname="visitor_id"/>
                <fieldname="product_id"/>
                <fieldname="visit_datetime"/>
            </tree>
        </field>
    </record>

    <recordid="website_sale_visitor_page_view_graph"model="ir.ui.view">
        <fieldname="name">website.track.view.graph</field>
        <fieldname="model">website.track</field>
        <fieldname="arch"type="xml">
            <graphstring="VisitorProductViews"sample="1">
                <fieldname="product_id"/>
            </graph>
        </field>
    </record>

    <recordid="website_sale_visitor_product_action"model="ir.actions.act_window">
        <fieldname="name">ProductViewsHistory</field>
        <fieldname="res_model">website.track</field>
        <fieldname="view_mode">tree</field>
        <fieldname="view_ids"eval="[(5,0,0),
            (0,0,{'view_mode':'tree','view_id':ref('website_sale_visitor_page_view_tree')}),
            (0,0,{'view_mode':'graph','view_id':ref('website_sale_visitor_page_view_graph')}),
        ]"/>
        <fieldname="domain">[('visitor_id','=',active_id),('product_id','!=',False)]</field>
        <fieldname="help"type="html">
            <pclass="o_view_nocontent_empty_folder">
              Noproductviewsyetforthisvisitor
            </p>
        </field>
    </record>

    <recordid="website_sale_visitor_page_view_search"model="ir.ui.view">
        <fieldname="name">website.track.view.search</field>
        <fieldname="model">website.track</field>
        <fieldname="inherit_id"ref="website.website_visitor_page_view_search"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//field[@name='url']"position="after">
                <fieldname="product_id"/>
            </xpath>
            <xpathexpr="//filter[@name='type_url']"position="after">
                <filterstring="Products"name="type_product"domain="[('product_id','!=',False)]"/>
            </xpath>
            <xpathexpr="//filter[@name='group_by_url']"position="after">
                <filterstring="Product"name="group_by_product"domain="[]"context="{'group_by':'product_id'}"/>
            </xpath>
        </field>
    </record>

    <!--websitevisitorviews-->
    <recordid="website_sale_visitor_view_form"model="ir.ui.view">
        <fieldname="name">website.visitor.view.form</field>
        <fieldname="model">website.visitor</field>
        <fieldname="inherit_id"ref="website.website_visitor_view_form"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//button[@name='%(website.website_visitor_page_action)d']"position="after">
                <buttonname="%(website_sale.website_sale_visitor_product_action)d"type="action"
                    class="oe_stat_button"
                    icon="fa-tags">
                    <fieldname="visitor_product_count"widget="statinfo"string="Productviews"/>
                </button>
            </xpath>
            <xpathexpr="//group[@id='visits']/field[@name='page_ids']"position="after">
                <fieldname="product_ids"widget="many2many_tags"/>
            </xpath>
        </field>
    </record>

    <recordid="website_sale_visitor_view_tree"model="ir.ui.view">
        <fieldname="name">website.visitor.view.tree</field>
        <fieldname="model">website.visitor</field>
        <fieldname="inherit_id"ref="website.website_visitor_view_tree"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//field[@name='page_ids']"position="after">
                <fieldname="product_ids"widget="many2many_tags"/>
            </xpath>
        </field>
    </record>

    <recordid="website_sale_visitor_view_kanban"model="ir.ui.view">
        <fieldname="name">website.visitor.view.kanban</field>
        <fieldname="model">website.visitor</field>
        <fieldname="inherit_id"ref="website.website_visitor_view_kanban"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//field[@name='page_ids']"position="after">
                <fieldname="product_ids"/>
            </xpath>
            <xpathexpr="//div[@id='o_page_count']"position="after">
                 <divid="o_product_count">VisitedProducts<spanclass="float-rightfont-weight-bold"><fieldname="product_count"/></span></div>
            </xpath>
        </field>
    </record>

    <!--websitetrackviews-->
    <recordid="website_sale_visitor_track_view_tree"model="ir.ui.view">
        <fieldname="name">website.track.view.tree</field>
        <fieldname="model">website.track</field>
        <fieldname="inherit_id"ref="website.website_visitor_track_view_tree"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//field[@name='url']"position="after">
                <fieldname="product_id"/>
            </xpath>
        </field>
    </record>

    <recordid="website_sale_visitor_track_view_graph"model="ir.ui.view">
        <fieldname="name">website.track.view.graph</field>
        <fieldname="model">website.track</field>
        <fieldname="inherit_id"ref="website.website_visitor_track_view_graph"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//field[@name='url']"position="after">
                <fieldname="product_id"/>
            </xpath>
        </field>
    </record>
</flectra>
