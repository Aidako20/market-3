flectra.define('website_sale.tour',function(require){
'usestrict';

vartour=require("web_tour.tour");

tour.register('shop_buy_product',{
    test:true,
    url:'/shop',
},
    [
        {
            content:"searchconferencechair",
            trigger:'forminput[name="search"]',
            run:"textconferencechair",
        },
        {
            content:"searchconferencechair",
            trigger:'form:has(input[name="search"]).oe_search_button',
        },
        {
            content:"selectconferencechair",
            trigger:'.oe_product_cart:firsta:contains("ConferenceChair")',
        },
        {
            content:"selectConferenceChairAluminium",
            extra_trigger:'#product_detail',
            trigger:'label:contains(Aluminium)input',
        },
        {
            content:"selectConferenceChairSteel",
            extra_trigger:'#product_detail',
            trigger:'label:contains(Steel)input',
        },
        {
            id:'add_cart_step',
            content:"clickonaddtocart",
            extra_trigger:'label:contains(Steel)input:propChecked',
            trigger:'#product_detailform[action^="/shop/cart/update"].btn-primary',
        },
        {
            content:"addsuggested",
            extra_trigger:'#wrap:not(:has(#cart_products:contains("StorageBox")))',
            trigger:'.oe_cart:has(tr:contains("StorageBox"))a:contains("AddtoCart")',
        },
        {
            content:"addonemore",
            extra_trigger:'#cart_productstr:contains("StorageBox")',
            trigger:'#cart_productstr:contains("Steel")a.js_add_cart_json:eq(1)',
        },
        {
            content:"removeStorageBox",
            extra_trigger:'#cart_productstr:contains("Steel")input.js_quantity:propValue(2)',
            trigger:'#cart_productstr:contains("StorageBox")a.js_add_cart_json:first',
        },
        {
            content:"setthree",
            extra_trigger:'#wrap:not(:has(#cart_productstr:contains("StorageBox")))',
            trigger:'#cart_productsinput.js_quantity',
            run:'text3',
        },
        {
            content:"checkamount",
            //waitforcart_update_jsontopreventconcurrentupdate
            trigger:'#order_totalspan.oe_currency_value:contains("49.50")',
            run:function(){},//it'sacheck
        },
        {
            content:"gotocheckout",
            extra_trigger:'#cart_productsinput.js_quantity:propValue(3)',
            trigger:'a[href*="/shop/checkout"]',
        },
        {
            content:"selectpayment",
            trigger:'#payment_methodlabel:contains("WireTransfer")',
        },
        {
            content:"PayNow",
            //Eithertherearemultiplepaymentmethods,andoneischecked,eitherthereisonlyone,andthereforetherearenoradioinputs
            extra_trigger:'#payment_methodlabel:contains("WireTransfer")input:checked,#payment_method:not(:has("input:radio:visible"))',
            trigger:'button[id="o_payment_form_pay"]:visible:not(:disabled)',
        },
        {
            content:"finish",
            trigger:'.oe_website_sale:contains("Pleasemakeapaymentto:")',
            //Leave/shop/confirmationtopreventRPCloopto/shop/payment/get_status.
            //TheRPCcouldbehandledinpythonwhilethetouriskilled(andthesession),leadingtocrashes
            run:function(){
                window.location.href='/contactus';//RedirectinJStoavoidtheRPCloop(20x1sec)
            },
            timeout:30000,
        },
        {
            content:"waitpageloaded",
            trigger:'h1:contains("Contactus")',
            run:function(){},//it'sacheck
        },
    ]
);

});
