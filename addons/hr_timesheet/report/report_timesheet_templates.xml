<flectra>
    <templateid="report_timesheet">
        <tt-call="web.html_container">
            <tt-call="web.external_layout">
                <tt-set="company"t-value="docs.mapped('project_id')[0].company_idiflen(docs.mapped('project_id'))==1elsedocs.env.company"/>
                <tt-set="show_task"t-value="bool(docs.mapped('task_id'))"/>
                <tt-set="show_project"t-value="len(docs.mapped('project_id'))>1"/>
                <divclass="page">
                    <divclass="oe_structure"/>
                    <divclass="row"style="margin-top:10px;">
                        <divclass="col-lg-12">
                            <h2>
                                <span>TimesheetEntries
                                    <tt-if="len(docs.mapped('project_id'))==1">
                                        forthe<tt-esc="docs.mapped('project_id')[0].name"/>Project
                                    </t>
                                </span>
                            </h2>
                        </div>
                    </div>

                    <divclass="row"style="margin-top:10px;">
                        <divclass="col-lg-12">
                            <tt-set='is_uom_day't-value='docs._is_timesheet_encode_uom_day()'/>
                            <tableclass="tabletable-sm">
                                <thead>
                                    <tr>
                                        <thclass="align-middle"><span>Date</span></th>
                                        <thclass="align-middle"><span>Responsible</span></th>
                                        <thclass="align-middle"><span>Description</span></th>
                                        <thclass="align-middle"t-if="show_project"><span>Project</span></th>
                                        <thclass="align-middle"t-if="show_task"><span>Task</span></th>
                                        <thclass="text-right">
                                            <spant-if="is_uom_day">TimeSpent(Days)</span>
                                            <spant-else="">TimeSpent(Hours)</span>
                                        </th>
                                    </tr>
                               </thead>
                               <tbody>
                                    <trt-foreach="docs"t-as="l">
                                        <td>
                                           <spant-field="l.date"/>
                                        </td>
                                        <td>
                                           <spant-field="l.user_id.partner_id.name"/>
                                           <spant-if="notl.user_id.partner_id.name"t-field="l.employee_id"/>
                                        </td>
                                        <td>
                                            <spant-field="l.name"t-options="{'widget':'text'}"/>
                                        </td>
                                        <tdt-if="show_project">
                                            <spant-field="l.project_id.sudo().name"/>
                                        </td>
                                        <tdt-if="show_task">
                                            <tt-if="l.task_id"><spant-field="l.task_id.sudo().name"/></t>
                                        </td>
                                        <tdclass="text-right">
                                            <spant-if="is_uom_day"t-esc="l._get_timesheet_time_day()"t-options="{'widget':'timesheet_uom'}"/>
                                            <spant-else=""t-field="l.unit_amount"t-options="{'widget':'duration','digital':True,'unit':'hour','round':'minute'}"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <tt-set="nbCols"t-value="4"/>
                                        <tt-if="show_project"t-set="nbCols"t-value="nbCols+1"/>
                                        <tt-if="show_task"t-set="nbCols"t-value="nbCols+1"/>
                                        <tdclass="text-right"t-attf-colspan="{{nbCols}}">
                                            <strongt-if="is_uom_day">
                                                <spanstyle="margin-right:15px;">Total(Days)</span>
                                                <tt-esc="docs._convert_hours_to_days(sum(docs.mapped('unit_amount')))"t-options="{'widget':'timesheet_uom'}"/>
                                            </strong>
                                            <strongt-else="">
                                                <spanstyle="margin-right:15px;">Total(Hours)</span>
                                                <tt-esc="sum(docs.mapped('unit_amount'))"t-options="{'widget':'duration','digital':True,'unit':'hour','round':'minute'}"/>
                                            </strong>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <divclass="oe_structure"/>
                </div>
            </t>
        </t>
    </template>

    <recordid="timesheet_report"model="ir.actions.report">
        <fieldname="name">TimesheetEntries</field>
        <fieldname="model">account.analytic.line</field>
        <fieldname="report_type">qweb-pdf</field>
        <fieldname="report_name">hr_timesheet.report_timesheet</field>
        <fieldname="report_file">report_timesheet</field>
        <fieldname="binding_model_id"ref="model_account_analytic_line"/>
        <fieldname="binding_type">report</field>
    </record>
</flectra>
