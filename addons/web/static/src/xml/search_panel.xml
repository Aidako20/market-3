<?xmlversion="1.0"encoding="UTF-8"?>
<templatesid="template"xml:space="preserve">

<tt-name="web.SearchPanel"owl="1">
    <divclass="o_search_panel"t-att-class="props.className">
        <sectiont-foreach="model.get('sections',s=>!s.empty)"t-as="section"t-key="section.id"
            t-attf-class="o_search_panel_sectiono_search_panel_{{section.type}}"
            >
            <headerclass="o_search_panel_section_headertext-uppercase">
                <it-attf-class="fa{{section.icon}}o_search_panel_section_iconmr-2"
                    t-att-style="section.colorand('color:'+section.color)"
                />
                <bt-esc="section.description"/>
            </header>
            <divt-if="section.errorMsg"class="alertalert-warning">
                <span><tt-esc="section.errorMsg"/></span>
            </div>
            <ult-else=""class="list-groupd-blocko_search_panel_field">
                <tt-if="section.type==='category'"t-call="web.SearchPanel.Category">
                    <tt-set="values"t-value="section.rootIds"/>
                </t>
                <tt-elif="section.groups">
                    <lit-foreach="section.sortedGroupIds"t-as="groupId"t-key="groupId"
                        class="o_search_panel_filter_grouplist-group-itemborder-0"
                        >
                        <!--TODO:thisisaworkaroundforissuehttps://github.com/flectra/owl/issues/695(removewhensolved)-->
                        <tt-set="_section"t-value="section"/>
                        <tt-set="group"t-value="section.groups.get(groupId)"/>
                        <headerclass="o_search_panel_group_header">
                            <divclass="custom-controlcustom-checkbox">
                                <!--TODO:"indeterminate"couldnotbesetinthetemplateandhadtobesetin
                                     JSmanually.Seehttps://github.com/flectra/owl/issues/713(adaptwhensolved)
                                -->
                                <inputtype="checkbox"
                                    class="custom-control-input"
                                    t-attf-id="{{section.id}}_input_{{groupId}})"
                                    t-on-click="_toggleFilterGroup(section.id,group)"
                                />
                                <labelt-attf-for="{{section.id}}_input_{{groupId}})"
                                    class="o_search_panel_labelcustom-control-label"
                                    t-att-class="{o_with_counters:group.enableCounters}"
                                    t-att-title="group.tooltiporfalse"
                                    >
                                    <spanclass="o_search_panel_label_title">
                                        <spant-if="group.hex_color"class="mr-1"t-attf-style="color:{{group.hex_color}};">‚óè</span>
                                        <tt-esc="group.name"/>
                                    </span>
                                </label>
                            </div>
                        </header>
                        <ulclass="list-groupd-block">
                            <tt-call="web.SearchPanel.FiltersGroup">
                                <tt-set="values"t-value="group.values"/>
                                <!--TODO:thisisaworkaroundforissuehttps://github.com/flectra/owl/issues/695(removewhensolved)-->
                                <tt-set="section"t-value="_section"/>
                            </t>
                        </ul>
                    </li>
                    <ult-if="section.groups.get(false)"class="list-groupd-block">
                        <tt-call="web.SearchPanel.FiltersGroup">
                            <tt-set="group"t-value="section.groups.get(false)"/>
                            <tt-set="values"t-value="group.values"/>
                            <!--TODO:thisisaworkaroundforissuehttps://github.com/flectra/owl/issues/695(removewhensolved)-->
                            <tt-set="section"t-value="section"/>
                        </t>
                    </ul>
                </t>
                <tt-else=""t-call="web.SearchPanel.FiltersGroup">
                    <tt-set="values"t-value="section.values"/>
                </t>
            </ul>
        </section>
    </div>
</t>

<tt-name="web.SearchPanel.Category"owl="1">
    <tt-foreach="values"t-as="valueId"t-key="valueId">
        <tt-set="value"t-value="section.values.get(valueId)"/>
        <liclass="o_search_panel_category_valuelist-group-itemborder-0">
            <headerclass="list-group-item-action"
                t-att-class="{active:state.active[section.id]===valueId}"
                t-on-click="_toggleCategory(section,value)"
                >
                <labelclass="o_search_panel_labelmb0"t-att-class="{o_with_counters:section.enableCounters}">
                    <divclass="o_toggle_fold">
                        <it-if="value.childrenIds.length"
                            t-attf-class="fafa-caret-{{state.expanded[section.id][valueId]?'down':'right'}}"
                        />
                    </div>
                    <bt-if="value.bold"class="o_search_panel_label_title"t-esc="value.display_name"/>
                    <spant-else=""class="o_search_panel_label_title"t-esc="value.display_name"/>
                </label>
                <spant-if="section.enableCountersandvalue.__countgt0"
                    class="o_search_panel_countertext-mutedml-2small"
                    t-esc="value.__count"
                />
            </header>
            <ult-if="value.childrenIds.lengthandstate.expanded[section.id][valueId]"class="list-groupd-block">
                <tt-call="web.SearchPanel.Category">
                    <tt-set="values"t-value="value.childrenIds"/>
                </t>
            </ul>
        </li>
    </t>
</t>

<tt-name="web.SearchPanel.FiltersGroup"owl="1">
    <lit-foreach="[...values.keys()]"t-as="valueId"t-key="valueId"
        class="o_search_panel_filter_valuelist-group-itemborder-0"
        >
        <tt-set="value"t-value="values.get(valueId)"/>
        <divclass="custom-controlcustom-checkboxw-100">
            <inputtype="checkbox"
                t-attf-id="{{section.id}}_input_{{valueId}}"
                t-att-checked="state.active[section.id][valueId]"
                class="custom-control-input"
                t-on-click="_toggleFilterValue(section.id,valueId)"
            />
            <labelclass="o_search_panel_labelcustom-control-label"
                t-attf-for="{{section.id}}_input_{{valueId}}"
                t-att-title="(groupandgroup.tooltip)orfalse">
                <spanclass="o_search_panel_label_title"t-esc="value.display_name"/>
                <spant-if="section.enableCountersandvalue.__countgt0"
                    class="o_search_panel_countertext-mutedml-2small"
                    t-esc="value.__count"
                />
            </label>
        </div>
    </li>
</t>

</templates>
