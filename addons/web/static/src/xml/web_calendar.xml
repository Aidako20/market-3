<template>
    <divt-name="CalendarView"class="o_calendar_container">
        <divclass="o_calendar_view">
            <divclass="o_calendar_buttons"role="toolbar"aria-label="Calendartoolbar"/>
            <divclass="o_calendar_widget"/>
        </div>
        <divclass="o_calendar_sidebar_containerd-noned-md-block">
            <divclass="o_calendar_sidebar">
                <divclass="o_calendar_mini"/>
            </div>
        </div>
    </div>

    <tt-name="calendar-box">
        <divt-att-style="typeofcolor==='string'?('background-color:'+color)+';':''"t-attf-class="#{record.is_highlighted?'o_event_hightlight':''}#{typeofcolor==='number'?_.str.sprintf('o_calendar_color_%s',color):'o_calendar_color_1'}">
            <spant-if="showTime"class="fc-time"/>
            <divclass="o_event_title"t-esc="record.display_name"/>
        </div>
    </t>

    <tt-name="CalendarView.event.popover.placeholder">
        <divt-attf-class="o_cw_popoverpopovercardshadow#{typeofcolor==='number'?_.str.sprintf('o_calendar_color_%s',color):''}"role="tooltip">
            <divclass="arrow"/>
            <divclass="card-headerd-flexjustify-content-betweenpy-2pr-2">
                <h4class="popover-headerborder-0p-0pt-1"/>
                <spanclass="o_cw_popover_closeml-4"><iclass="fafa-closesmall"/></span>
            </div>
            <divclass="o_cw_body">
            </div>
        </div>
    </t>

    <tt-name="CalendarView.event.popover">
        <divclass="o_cw_body">
            <ulclass="list-grouplist-group-flush">
                <lit-if="!widget.hideDateandwidget.eventDate.date"class="list-group-item">
                    <iclass="fafa-fwfa-calendar-o"/>
                    <bclass="text-capitalize"t-esc="widget.eventDate.date"/><smallt-if="widget.eventDate.duration"><bt-esc="_.str.sprintf('(%s)',widget.eventDate.duration)"/></small>
                </li>
                <lit-if="!widget.hideTimeandwidget.eventTime.time"class="list-group-item">
                    <iclass="fafa-fwfa-clock-o"/>
                    <bt-esc="widget.eventTime.time"/><smallt-if="widget.eventTime.duration"><bt-esc="_.str.sprintf('(%s)',widget.eventTime.duration)"/></small>
                </li>
            </ul>
            <ult-if="widget.isEventDetailsVisible()"class="list-grouplist-group-flusho_cw_popover_fields_secondary"/>
            <divclass="card-footerborder-top">
                <at-if="widget.isEventEditable()"href="#"class="btnbtn-primaryo_cw_popover_edit">Edit</a>
                <at-if="widget.isEventDeletable()"href="#"class="btnbtn-secondaryo_cw_popover_deleteml-2">Delete</a>
            </div>
        </div>
    </t>

    <tt-name="CalendarView.sidebar.filter">
        <tt-set="needCollapse"t-value="widget.filters.length>2andwidget.title"></t>
        <tt-set="collapseTitle"t-value="widget.titleandwidget.title.split('').join('')"></t>
        <divclass="o_calendar_filter">
            <h5t-if="needCollapse"type="button"data-toggle="collapse"t-attf-data-target="#o_cw_filter_collapse_#{collapseTitle}"class="d-flexjustify-content-betweenalign-items-center">
                <tt-esc="widget.title"/><iclass="o_cw_filter_collapse_iconfafa-chevron-down"/>
            </h5>

            <h5t-elif="widget.title"t-esc="widget.title"/>

            <divt-attf-class="o_calendar_filter_items#{needCollapse?'collapseshow':0}"aria-expanded="true"t-attf-id="o_cw_filter_collapse_#{collapseTitle}">
                <tt-foreach="widget.filters"t-as="filter"t-if="filter.display==null||filter.display">
                    <tt-set="idForLabel"t-value="_.uniqueId('o_calendar_filter_item_')"/>
                    <tt-set="color"t-value="widget.getColor(filter.color_index)"/>
                    <tt-set="isColorNumber"t-value="typeofcolor==='number'"/>

                    <divt-attf-class="o_calendar_filter_itemw-100position-relativemb-2#{isColorNumber?_.str.sprintf('o_cw_filter_color_%s',color):''}"
                         t-att-data-value="filter.value"t-att-data-id="filter.id">

                        <inputtype="checkbox"t-att-id="idForLabel"name="selection"class="position-absolute"t-att-checked="filter.active?true:undefined"/>

                        <labelt-att-for="idForLabel"class="d-flexalign-items-centerm-0">
                            <spant-attf-class="o_cw_filter_input_bgalign-items-centerd-flexflex-shrink-0justify-content-centerposition-relativemr-1#{widget.avatar_field?'o_beside_avatar':''}"
                                t-att-style="colorand!isColorNumber?_.str.sprintf('border-color:%s;background-color:%s',color,color):''">
                                <iclass="fafa-checkposition-relative"/>
                            </span>
                            <it-if="filter.value=='all'"class="o_cw_filter_avatarfafa-usersfa-fw flex-shrink-0mr-1"role="img"aria-label="Avatar"title="Avatar"/>
                            <imgt-elif="widget.avatar_fieldandfilter.value"t-attf-src="/web/image/#{widget.avatar_model}/#{filter.value}/#{widget.avatar_field}"class="o_cw_filter_avatarflex-shrink-0mr-1"alt="Avatar"/>
                            <spanclass="o_cw_filter_titletext-truncateflex-grow"t-esc="filter.label"t-attf-title="#{['all',false].includes(filter.value)or!widget.avatar_field?filter.label:''}"/>
                        </label>

                        <buttont-if="filter.id"class="o_removebtnbg-whitetext-700py-0px-2"title="Removethisfavoritefromthelist"role="img"aria-label="Removethisfavoritefromthelist">
                            <iclass="fafa-times"/>
                        </button>
                    </div>
                </t>
            </div>
        </div>
    </t>

    <tt-name="CalendarView.buttons">
        <divclass="o_calendar_buttons">
            <spanclass="o_calendar_navigation_buttons">
                <tt-call="CalendarView.navigation_buttons"/>
            </span>
            <tt-if="!scaleDrop">
                <spanclass="o_calendar_scale_buttons">
                    <tt-call="CalendarView.scale_buttons"/>
                </span>
            </t>
        </div>
    </t>

    <tt-name="CalendarView.navigation_buttons">
        <buttonclass="o_calendar_button_prevbtnbtn-primary"aria-label="Previous"title="Previous"><spanclass="fafa-arrow-left"/></button>
        <buttonclass="o_calendar_button_todaybtnbtn-primary">Today</button>
        <buttonclass="o_calendar_button_nextbtnbtn-primary"aria-label="Next"title="Next"><spanclass="fafa-arrow-right"/></button>
    </t>

    <tt-name="CalendarView.scale_buttons">
        <divclass="btn-group">
            <buttontype="button"t-if="scales.includes('day')"class="o_calendar_button_daybtnbtn-secondary">Day</button>
            <buttontype="button"t-if="scales.includes('week')"class="o_calendar_button_weekbtnbtn-secondary">Week</button>
            <buttontype="button"t-if="scales.includes('month')"class="o_calendar_button_monthbtnbtn-secondary">Month</button>
            <buttontype="button"t-if="scales.includes('year')"class="o_calendar_button_yearbtnbtn-secondary">Year</button>
        </div>
    </t>

    <maint-name="CalendarView.quick_create"class="o_calendar_quick_create">
        <divclass="form-group">
            <labelfor='name'class='col-form-labelo_form_label'>Summary:</label>
            <inputtype='text'name='name'class="o_inputo_required_modifier"t-att-value="widget.dataTemplate.nameorNone"/>
        </div>
    </main>

    <tt-name="CalendarView.yearEvent.popover">
        <divclass="o_cw_body">
            <tt-foreach="groupKeys"t-as="groupKey">
                <divclass="font-weight-boldmt-2"t-esc="groupKey"/>
                <tt-foreach="groupedEvents[groupKey]"t-as="event">
                    <tt-set="record"t-value="event.extendedProps.record"/>
                    <ahref="#"class="o_cw_popover_linkbtn-linkd-block"
                        t-att-data-id="record.id"
                        t-att-data-title="record.display_name"
                        t-esc="record.display_name"/>
                </t>
            </t>
            <divclass="mt-2">
                <at-if="canCreate"href="#"class="btn-linko_cw_popover_create">
                    <iclass="fafa-plus"/>Create
                </a>
            </div>
        </div>
    </t>

    <tt-name="CalendarView.yearEvent.popover.placeholder">
        <divclass="popovero_cw_popover"style="position:relative">
            <divclass="arrow"></div>
            <divclass="popover-header"></div>
            <divstyle="position:absolute;top:0;right:0.5rem;">
                <spanclass="o_cw_popover_close"><iclass="fafa-closesmall"></i></span>
            </div>
            <divclass="popover-body"></div>
        </div>
    </t>
</template>
