<template>

<tt-name="KanbanView.buttons">
    <div>
        <buttont-if="!noCreate"type="button"t-attf-class="btn#{btnClass}o-kanban-button-new"accesskey="c">
            <tt-esc="create_text||_t('Create')"/>
        </button>
    </div>
</t>

<tt-name="KanbanView.Group">
    <divt-attf-class="o_kanban_group#{widget.data_records.length==0?'o_kanban_no_records':''}"t-att-data-id="widget.idorwidget.db_id"
        role="feed"t-attf-aria-labelledby="kanban_header_#{widget.idorwidget.db_id}">
        <divclass="o_kanban_header">
            <divclass="o_kanban_header_title">
                <spant-attf-id="#kanban_header_#{widget.idorwidget.db_id}"class="o_column_title"><tt-esc="widget.title"/></span>
                <spanclass="o_column_unfold"><iclass="fafa-arrows-h"role="img"aria-label="Unfold"title="Unfold"/></span>
                <spanclass="o_kanban_configdropdown">
                    <aclass="dropdown-toggleo-no-caret"data-toggle="dropdown"href="#"><iclass="fafa-gear"role="img"aria-label="Settings"title="Settings"/></a>
                    <divclass="dropdown-menu"role="menu">
                        <arole="menuitem"class="dropdown-itemo_kanban_toggle_fold"href="#">Fold</a>
                        <tt-if="widget.grouped_by_m2o">
                            <at-if="widget.editableandwidget.id"role="menuitem"class="dropdown-itemo_column_edit"href="#">EditStage</a>
                            <at-if="widget.deletableandwidget.id"role="menuitem"class="dropdown-itemo_column_delete"href="#">Delete</a>
                        </t>
                        <tt-if="widget.has_active_fieldandwidget.archivable">
                            <arole="menuitem"href="#"class="dropdown-itemo_column_archive_records">ArchiveAll</a>
                            <arole="menuitem"href="#"class="dropdown-itemo_column_unarchive_records">UnarchiveAll</a>
                        </t>
                    </div>
                </span>
                <spant-if="widget.quick_create"class="o_kanban_quick_add"><iclass="fafa-plus"role="img"aria-label="Quickadd"title="Quickadd"/></span>
            </div>
        </div>
        <divt-if="widget.remaining>0"class="o_kanban_load_more">
            <tt-call="KanbanView.LoadMore"/>
        </div>
    </div>
</t>

<tt-name="KanbanView.LoadMore">
    <ahref="#">Loadmore...(<tt-esc="widget.remaining"/>remaining)</a>
</t>

<tt-name="KanbanView.ColumnQuickCreate">
    <divclass="o_column_quick_create">
        <divclass="o_quick_create_folded">
            <spanclass="o_kanban_add_column"><iclass="fafa-plus"role="img"aria-label="Addcolumn"title="Addcolumn"/></span>
            <spanclass="o_kanban_title">AddaColumn</span>
        </div>
        <divclass="o_quick_create_unfolded">
            <divclass="o_kanban_header">
                <divclass="input-group">
                    <inputtype="text"class="form-controlo_input"placeholder="Columntitle"/>
                    <spanclass="input-group-append">
                        <buttonclass="btnbtn-primaryo_kanban_add"type="button">Add</button>
                    </span>
                </div>
                <spant-if="!widget.isMobile"class="o_discard_msgtext-mutedfloat-right">Esctodiscard</span>
                <tt-if="widget.examples&amp;&amp;!widget.isMobile">
                    <buttontype="button"class="btnbtn-linko_kanban_examples">Seeexamples</button>
                </t>
            </div>
            <divclass="o_kanban_muted_record"/>
            <divclass="o_kanban_muted_record"/>
            <divclass="o_kanban_muted_record"/>
        </div>
    </div>
</t>

<tt-name="KanbanView.RecordQuickCreate.buttons">
    <div>
        <buttonclass="btnbtn-primaryo_kanban_add">Add</button>
        <buttonclass="btnbtn-primaryo_kanban_edit">Edit</button>
        <buttonclass="btnbtn-secondaryo_kanban_cancelml8">Discard</button>
    </div>
</t>

<tt-name="KanbanColorPicker">
    <tt-foreach="colors"t-as="color">
        <li>
            <arole="menuitem"
               href="#"
               t-att-data-color="color_index"
               t-attf-class="oe_kanban_color_#{color_index}"
               t-att-title="color"
               t-att-aria-label="color"/>
        </li>
    </t>
</t>

<tt-name="GraphCustomTooltip">
    <table>
        <tbody>
            <tr>
                <tdclass="legend-color-guide">
                    <divt-attf-style="background-color:#{color};"></div>
                </td>
                <tdclass="key"><tt-esc="key"/></td>
                <tdclass="value"><tt-esc="value"/></td>
            </tr>
        </tbody>
    </table>
</t>

<tt-name="KanbanView.ColumnProgressBar">
    <divclass="o_kanban_counter">
        <divclass="o_kanban_counter_progressprogress">
            <tt-foreach="widget.colors"t-as="color">
                <tt-set="count"t-value="widget.subgroupCountsandwidget.subgroupCounts[color]or0"/>
                <divt-attf-class="progress-bartransition-offbg-#{color_value}-full#{count?'o_bar_has_records':''}#{widget.activeFilter?'progress-bar-animatedprogress-bar-striped':''}"
                    t-att-data-filter="color"
                    t-attf-data-original-title="#{count}#{color}"
                    aria-valuemin="0"aria-valuemax="100"t-att-aria-valuenow="count*100"role="progressbar"
                    t-attf-style="width:#{count?(count*100/widget.groupCount):0}%;"/>
            </t>
        </div>
        <divclass="o_kanban_counter_side"><b><tt-esc="widget.totalCounterValue||0"/></b></div>
    </div>
</t>

<tt-name="KanbanView.SetCoverModal">
    <divt-if="attachmentIds.length"class="ml32mr0o_kanban_cover_container">
        <tt-foreach="attachmentIds"t-as="attachment">
            <divt-attf-class="o_kanban_cover_image#{coverId===attachment.id?'o_selected':''}">
                <imgt-attf-src="/web/image/#{attachment.id}?unique=1"t-att-data-id="attachment.id"t-att-data-name="attachment.name"alt="Attachment"/>
            </div>
        </t>
    </div>
    <divt-else="">Thereisnoavailableimagetobesetascover.</div>
    <spanclass="d-none">
        <tt-call="HiddenInputFile">
            <tt-set="fileupload_id"t-value="widget.imageUploadID"/>
            <tt-set="fileupload_action"t-translation="off">/web/binary/upload_attachment</t>
            <inputtype="hidden"name="model"t-att-value="widget.modelName"/>
            <inputtype="hidden"name="id"t-att-value="widget.id"/>
        </t>
    </span>
</t>

<!--Note:thisdialogisn'tresponsive,butitisnotaccessibleonmobile-->
<divt-name="KanbanView.ExamplesDialog"class="o_kanban_examples_dialog">
    <divclass="o_kanban_examples_dialog_nav">
        <ulclass="navnav-pillsflex-column">
            <tt-foreach="examples"t-as="example">
                <liclass="nav-item">
                    <at-attf-aria-controls="example_#{example_index}"data-toggle="tab"role="tab"t-att-data-example-index="example_index"t-attf-href="#example_#{example_index}"t-attf-class="nav-link#{example_index==0and'active'or''}"><tt-esc="example.name"/></a>
                </li>
            </t>
        </ul>
    </div>
    <divclass="o_kanban_examples_dialog_content">
        <divclass="tab-content">
            <tt-foreach="examples"t-as="example">
                <divrole="tabpanel"t-attf-id="example_#{example_index}"t-attf-class="tab-pane#{example_index==0and'activein'or''}">
                    <divt-if="example.description"class="o_kanban_examples_description">
                        <tt-raw="example.description"/><!--descriptionissupposedtobeproperlyescaped-->
                    </div>
                    <divclass="o_kanban_examples">
                        <tt-foreach="example.columns"t-as="column">
                            <divclass="o_kanban_examples_group">
                                <h6><b><tt-esc="column"/></b></h6>
                                <tt-foreach="_.random(1,4)">
                                    <tt-call="KanbanView.ExamplesDialog.RecordGhost"/>
                                </t>
                            </div>
                        </t>
                    </div>
                </div>
            </t>
        </div>
    </div>
</div>
<tt-name="KanbanView.ExamplesDialog.RecordGhost">
    <divclass="o_kanban_examples_ghost">
        <divclass="o_ghost_content"/>
        <divclass="o_ghost_contento_ghost_tag"/>
            <tt-if="example.bullets">
                <tt-if="_.random(0,5)>3">
                    <tt-raw="example.bullets[_.random(0,example.bullets.length-1)]"/>
                </t>
            </t>
        <imgclass="float-righto_ghost_avatar"src="/base/static/img/avatar.png"alt="Avatar"/>
    </div>
</t>

<!--KanbanExampleBackground-->
<tt-name="KanbanView.ExamplesBackground">
    <divclass="o_kanban_example_background_container">
        <divclass="o_kanban_example_background">
            <divclass="o_kanban_examples">
                <tt-foreach="ghostColumns"t-as="column">
                    <divclass="o_kanban_examples_group">
                        <h6><b><tt-esc="column"/></b></h6>
                        <tt-foreach="_.random(2,6)">
                            <tt-call="KanbanView.ExamplesBackground.RecordGhost"/>
                        </t>
                    </div>
                </t>
            </div>
        </div>
    </div>
</t>
<tt-name="KanbanView.ExamplesBackground.RecordGhost">
    <divclass="o_kanban_examples_ghost">
        <divclass="o_ghost_content"/>
        <divclass="o_ghost_contento_ghost_tag"/>
        <imgclass="float-righto_ghost_avatar"src="/base/static/img/avatar.png"alt="Avatar"/>
    </div>
</t>

<!--Mobiletemplates-->
<tt-name="KanbanView.MobileTabs">
    <divclass="o_kanban_mobile_tabs_container">
        <divclass="o_kanban_mobile_tabs">
            <tt-foreach="data"t-as="group">
                <divclass="o_kanban_mobile_tab"t-att-data-id="group.res_idorgroup.id">
                    <spanclass="o_column_title"><tt-esc="group.value"/></span>
                </div>
            </t>
            <divclass="o_kanban_mobile_add_column"t-if="quickCreateEnabled">
                <iclass="fafa-plus"role="img"aria-label="Addcolumn"title="Addcolumn"/>
            </div>
        </div>
    </div>
</t>
</template>
