<?xmlversion="1.0"encoding="UTF-8"?>
<flectra>
    <recordid="view_employee_form_inherit_hr_attendance"model="ir.ui.view">
        <fieldname="name">hr.employee</field>
        <fieldname="model">hr.employee</field>
        <fieldname="inherit_id"ref="hr.view_employee_form"/>
        <fieldname="priority">20</field>
        <fieldname="groups_id"eval="[(4,ref('hr_attendance.group_hr_attendance_user'))]"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//button[@id='hr_presence_button']"position="attributes">
                <attributename="attrs">
                    {'invisible':['|','|',('user_id','=',False),('hr_presence_state','=','absent'),('attendance_state','=','checked_in')]}
                </attribute>
            </xpath>
            <xpathexpr="//div[@name='button_box']"position="inside">
                <fieldname="attendance_state"invisible="1"/>
                <buttonname="%(hr_attendance_action_employee)d"
                    id="hr_attendance_button"
                    class="oe_stat_button"
                    type="action"attrs="{'invisible':[
                        '|',('attendance_state','=',False),
                        '&amp;',
                            ('hr_presence_state','=','present'),
                            ('attendance_state','=','checked_out')]}"
                    context="{'search_default_employee_id':id}">
                    <divrole="img"id="oe_hr_attendance_status"class="fafa-fwfa-circleo_button_iconoe_hr_attendance_status_green"attrs="{'invisible':[('attendance_state','=','checked_out')]}"aria-label="Available"title="Available"/>
                    <divrole="img"id="oe_hr_attendance_status"class="fafa-fwfa-circleo_button_iconoe_hr_attendance_status_red"attrs="{'invisible':[('attendance_state','=','checked_in')]}"aria-label="Notavailable"title="Notavailable"/>
                    <divclass="o_stat_info"attrs="{'invisible':['|',('last_check_in','=',False),('last_check_out','!=',False)]}">
                        <spanclass="o_stat_text">AttendedSince</span>
                        <spanclass="o_stat_value"><fieldname="last_check_in"widget="relative_time"/></span>
                    </div>
                    <divclass="o_stat_info"attrs="{'invisible':[('last_check_out','=',False)]}">
                        <spanclass="o_stat_text">NotAttendedSince</span>
                        <spanclass="o_stat_value"><fieldname="last_check_out"widget="relative_time"/></span>
                    </div>
                    <divclass="o_stat_info"attrs="{'invisible':[('last_check_in','!=',False)]}">
                        <spanclass="o_stat_text">Attendance</span>
                    </div>
                </button>
                <buttonname="%(hr_attendance_action)d"
                        class="oe_stat_button"
                        icon="fa-clock-o"
                        type="action"
                        context="{'search_default_employee_id':id,'search_default_check_in_filter':'1'}"
                        groups="base.group_user"
                        help="Workedhourslastmonth">
                    <divclass="o_field_widgeto_stat_info">
                        <spanclass="o_stat_value">
                            <fieldname="hours_last_month_display"widget="float_time"/>Hours
                        </span>
                        <spanclass="o_stat_text">
                            LastMonth
                        </span>
                    </div>
                </button>
            </xpath>
        </field>
    </record>

    <recordid="hr_user_view_form"model="ir.ui.view">
        <fieldname="name">hr.user.preferences.view.form.attendance.inherit</field>
        <fieldname="model">res.users</field>
        <fieldname="inherit_id"ref="hr.res_users_view_form_profile"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//button[@id='hr_presence_button']"position="attributes">
                <attributename="attrs">
                    {'invisible':['|',('hr_presence_state','=','absent'),('attendance_state','=','checked_in')]}
                </attribute>
            </xpath>
            <xpathexpr="//div[@name='button_box']"position="inside">
                <fieldname="attendance_state"invisible="1"/>
                <buttonname="%(hr_attendance_action_my_attendances)d"
                    id="hr_attendance_button"
                    class="oe_stat_button"
                    invisible="context.get('from_my_profile',False)"
                    type="action"attrs="{'invisible':['|',('attendance_state','=',False),'&amp;',('hr_presence_state','=','present'),('attendance_state','=','checked_out')]}">
                    <divrole="img"id="oe_hr_attendance_status"class="fafa-fwfa-circleo_button_iconoe_hr_attendance_status_green"attrs="{'invisible':[('attendance_state','=','checked_out')]}"aria-label="Available"title="Available"/>
                    <divrole="img"id="oe_hr_attendance_status"class="fafa-fwfa-circleo_button_iconoe_hr_attendance_status_red"attrs="{'invisible':[('attendance_state','=','checked_in')]}"aria-label="Notavailable"title="Notavailable"/>
                    <divclass="o_stat_info"attrs="{'invisible':['|',('last_check_in','=',False),('last_check_out','!=',False)]}">
                        <spanclass="o_stat_text">AttendedSince</span>
                        <spanclass="o_stat_value"><fieldname="last_check_in"widget="relative_time"/></span>
                    </div>
                    <divclass="o_stat_info"attrs="{'invisible':[('last_check_out','=',False)]}">
                        <spanclass="o_stat_text">NotAttendedSince</span>
                        <spanclass="o_stat_value"><fieldname="last_check_out"widget="relative_time"/></span>
                    </div>
                    <divclass="o_stat_info"attrs="{'invisible':[('last_check_in','!=',False)]}">
                        <spanclass="o_stat_text">Attendance</span>
                    </div>
                </button>
            </xpath>
            <xpathexpr="//div[@name='button_box']"position="inside">
                <fieldname="employee_ids"invisible="1"/>
                <buttonname="%(hr_attendance_action_employee)d"
                        class="oe_stat_button"
                        icon="fa-calendar"
                        type="action"
                        context="{'search_default_employee_id':employee_ids,'search_default_check_in_filter':'1'}"
                        groups="base.group_user"
                        help="Workedhourslastmonth">
                    <divclass="o_field_widgeto_stat_info">
                        <spanclass="o_stat_value">
                            <fieldname="hours_last_month_display"widget="float_time"/>Hours
                        </span>
                        <spanclass="o_stat_text">
                            LastMonth
                        </span>
                    </div>
                </button>
            </xpath>
        </field>
    </record>

    <!--employeekanbanviewspecificallyforhr_attendance(tocheckin/out)-->
    <recordid="hr_employees_view_kanban"model="ir.ui.view">
        <fieldname="name">hr.employee.kanban</field>
        <fieldname="model">hr.employee</field>
        <fieldname="priority">99</field>
        <fieldname="arch"type="xml">
            <kanbanclass="o_hr_employee_attendance_kanban"create="false">
                <fieldname="attendance_state"/>
                <fieldname="hours_today"/>
                <fieldname="id"/>
                <templates>
                    <tt-name="kanban-box">
                    <divclass="oe_kanban_global_click">
                        <divclass="o_kanban_image">
                            <imgt-att-src="kanban_image('hr.employee','image_128',record.id.raw_value)"alt="Employee"/>
                        </div>
                        <divclass="oe_kanban_details">
                            <divid="textbox">
                                <divclass="float-right"t-if="record.attendance_state.raw_value=='checked_in'">
                                    <spanid="oe_hr_attendance_status"class="fafa-circleoe_hr_attendance_status_green"role="img"aria-label="Available"title="Available"></span>
                                </div>
                                <divclass="float-right"t-if="record.attendance_state.raw_value=='checked_out'">
                                    <spanid="oe_hr_attendance_status"class="fafa-circleoe_hr_attendance_status_orange"
                                          role="img"aria-label="Notavailable"title="Notavailable">
                                    </span>
                                </div>
                                <strong>
                                    <fieldname="name"/>
                                </strong>
                            </div>
                            <ul>
                                <lit-if="record.job_id.raw_value"><fieldname="job_id"/></li>
                                <lit-if="record.work_location.raw_value"><fieldname="work_location"/></li>
                            </ul>
                        </div>
                    </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <recordid="hr_employee_attendance_action_kanban"model="ir.actions.act_window">
        <fieldname="name">Employees</field>
        <fieldname="res_model">hr.employee.public</field>
        <fieldname="view_mode">kanban</field>
        <fieldname="view_id"ref="hr_employees_view_kanban"/>
        <fieldname="target">fullscreen</field>
        <fieldname="help"type="html">
            <pclass="o_view_nocontent_smiling_face">
                Createanewemployee
            </p><p>
                Addafewemployeestobeabletoselectanemployeehereandperformhischeckin/checkout.
                TocreateemployeesgototheEmployeesmenu.
            </p>
        </field>
    </record>

</flectra>
