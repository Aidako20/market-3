flectra.define('website_event_sale.tour.last_ticket',function(require){
'usestrict';

vartour=require('web_tour.tour');

tour.register('event_buy_last_ticket',{
    test:true,
    url:'/event',
},[{
        content:"OpentheLasttickettesteventpage",
        trigger:'.o_wevent_events_lista:contains("Lasttickettest")',
    },
    {
        content:"ShowavailableTickets",
        trigger:'.btn-primary:contains("Register")',
    },
    {
        content:"Select2unitsof`VIP`tickettype",
        extra_trigger:'#wrap:not(:has(a[href*="/event"]:contains("Lasttickettest")))',
        trigger:'select:eq(0)',
        run:'text2',
    },
    {
        content:"Clickon`OrderNow`button",
        extra_trigger:'select:eq(0):has(option:contains(2):propSelected)',
        trigger:'.a-submit:contains("Register")',
    },
    {
        content:"Fillattendeesdetails",
        trigger:'form[id="attendee_registration"].btn:contains("Continue")',
        run:function(){
            $("input[name='1-name']").val("Att1");
            $("input[name='1-phone']").val("111111");
            $("input[name='1-email']").val("att1@example.com");
            $("input[name='2-name']").val("Att2");
            $("input[name='2-phone']").val("222222");
            $("input[name='2-email']").val("att2@example.com");
        },
    },
    {
        content:"Validateattendeesdetails",
        extra_trigger:"input[name='1-name'],input[name='2-name']",
        trigger:'button:contains("Continue")',
    },
    {
        content:"Filladdress",
        trigger:'form.checkout_autoformat',
        run:function(){
            $("input[name='name']").val("test1");
            $("input[name='email']").val("test@example.com");
            $("input[name='phone']").val("111111");
            $("input[name='street']").val("streettest1");
            $("input[name='city']").val("testCity");
            $("input[name='zip']").val("123");
            $('#country_idoption:eq(1)').attr('selected',true);
        },
    },
    {
        content:"Validateaddress",
        trigger:'.btn-primary:contains("Next")',
    },
    {
        //iftheseats_availablecheckinglogicisnotcorrect,
        //theshoppingcartwillbeclearedwhensellingthelastticket
        //thetourtestwillbefailedhere
        content:"Select`WireTransfer`paymentmethod",
        trigger:'#payment_methodlabel:contains("WireTransfer")',
    },
    //followingstepsarebasedonthewebsite_sale_buy.js
    {
        content:"Pay",
        //Eithertherearemultiplepaymentmethods,andoneischecked,eitherthereisonlyone,andthereforetherearenoradioinputs
        extra_trigger:'#payment_methodlabel:contains("WireTransfer")input:checked,#payment_method:not(:has("input:radio:visible"))',
        trigger:'button[id="o_payment_form_pay"]:visible',
    },
    {
        content:"paymentfinish",
        trigger:'.oe_website_sale:contains("Pleasemakeapaymentto:")',
        //Leave/shop/confirmationtopreventRPCloopto/shop/payment/get_status.
        //TheRPCcouldbehandledinpythonwhilethetouriskilled(andthesession),leadingtocrashes
        run:function(){
            window.location.href='/contactus';//RedirectinJStoavoidtheRPCloop(20x1sec)
        },
        timeout:30000,
    },
    {
        content:"waitpageloaded",
        trigger:'h1:contains("Contactus")',
        run:function(){},//it'sacheck
    },
]);
});
