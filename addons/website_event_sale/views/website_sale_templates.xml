<?xmlversion="1.0"encoding="utf-8"?>
<flectra>

    <!--Ifthesaleorderlineconcernsanevent,wewantthe"product"linktopointtotheeventitselfandnottotheproductontheecommerce-->
    <templateid="cart_line_product_link_inherit_website_event_sale"inherit_id="website_sale.cart_line_product_link"name="EventShoppingCartLineProductLink">
        <xpathexpr="//a"position="attributes">
            <attributename="t-attf-href"/>
            <attributename="t-att-href">
                line.event_idand('/event/%s/register'%slug(line.event_id))orline.product_id.website_url
            </attribute>
        </xpath>
    </template>

    <!--Ifthesaleorderlineconcernsanevent,wewanttoshowanadditionallinewiththeeventnameevenonsmallscreens-->
    <templateid="cart_lines_inherit_website_event_sale"inherit_id="website_sale.cart_lines"name="EventShoppingCartLines">
        <xpathexpr="//t[@t-call='website_sale.cart_line_description_following_lines']/t[@t-set='div_class']"position="after">
            <tt-if="line.event_id">
                <tt-set="div_class"t-value="''"/>
            </t>
        </xpath>
        <xpathexpr="//del"position="attributes">
            <attributename="t-attf-class"separator=""add="#{line.event_idand'd-none'or''}"/>
        </xpath>
    </template>

    <!--Ifthesaleorderlineconcernsanevent,wewanttoshowanadditionallinewiththeeventname-->
    <templateid="cart_popover_inherit_website_event_sale"inherit_id="website_sale.cart_popover"name="EventCartPopover">
        <xpathexpr="//t[@t-call='website_sale.cart_line_product_link']"position="after">
            <tt-if="line.event_id"t-call="website_sale.cart_line_description_following_lines"/>
        </xpath>
    </template>

    <!--Ifthesaleorderlineconcernsanevent,wewanttoshowanadditionallinewiththeeventname-->
    <templateid="cart_summary_inherit_website_event_sale"inherit_id="website_sale.cart_summary"name="EventCartrightcolumn">
        <xpathexpr="//td[hasclass('td-product_name')]/div/strong"position="after">
            <tt-if="line.event_id"t-call="website_sale.cart_line_description_following_lines"/>
        </xpath>
    </template>

</flectra>
