<?xmlversion="1.0"encoding="utf-8"?>
<flectra>

<templateid="index"name="OurReferences">
    <tt-call="website.layout">
        <divid="wrap">
            <divclass="oe_structure">
                <section>
                    <h1class="text-center">
                        OurReferences
                    </h1><h2class="text-centertext-muted">
                        Trustedbymillionsworldwide
                    </h2>
                </section>
            </div>
            <divclass="container">
                <divclass="row">
                    <divclass="col-lg-3mb32"id="ref_left_column">
                    </div>
                    <divclass="col-lg-8offset-lg-1"id="ref_content">
                        <divclass='d-flexm-2'>
                            <tt-call="website.pager">
                               <tt-set="classname"t-value="'float-left'"/>
                            </t>
                            <formaction=""method="get"class="navbar-searchml-autopaginationform-inline">
                                <divclass="form-group">
                                    <inputtype="text"name="search"class="search-queryform-control"
                                        placeholder="Search"t-att-value="post.get('search','')"/>
                                </div>
                            </form>
                        </div>

                        <div>

                    <pt-if="notpartners">Noresultfound</p>
                    <tt-foreach="partners"t-as="partner">
                        <divclass="mediamt-3">
                            <at-attf-href="/customers/#{slug(partner)}"
                               t-field="partner.image_128"
                               class="d-blockmr-3text-centero_width_128"
                               t-options='{"widget":"image","qweb_img_responsive":False,"class":"o_image_128_max"}'
                            ></a>
                            <divclass="media-body"style="min-height:64px;">
                                <at-attf-href="/customers/#{slug(partner)}">
                                    <spant-field="partner.display_name"/>
                                </a>
                                <tt-if="partner.industry_id">
                                    <aclass="badgebadge-secondary"t-attf-href="/customers/#{'industry/%s/'%slug(partner.industry_id)}#{current_country_idand'country/%s'%slug(current_country)or''}"t-esc="partner.industry_id.name"/>
                                </t>
                                <divt-field="partner.website_short_description"/>
                            </div>
                        </div>
                    </t>
                        </div>
                    </div>

                </div>
            </div>
            <divclass="oe_structure"/>
        </div>
    </t>
</template>

<!--Option:leftcolumn:WorldMap-->
<templateid="opt_country"inherit_id="website_customer.index"customize_show="True"name="ShowMap">
    <xpathexpr="//div[@id='ref_left_column']"position="inside">
        <tt-if="google_maps_api_key">
            <!--modalforlargemap-->
            <divrole="dialog"class="modalfadecustomer_map_modal"tabindex="-1">
              <divclass="modal-dialogmodal-lg">
                <divclass="modal-content">
                    <headerclass="modal-header">
                        <h4class="modal-title">WorldMap</h4>
                        <buttontype="button"class="close"data-dismiss="modal"aria-label="Close">Ã—</button>
                    </header>
                    <iframet-attf-src="/google_map/?width=898&amp;height=485&amp;partner_ids=#{google_map_partner_ids}&amp;partner_url=/customers/"
                    style="width:898px;height:485px;border:0;padding:0;margin:0;"></iframe>
                </div>
              </div>
            </div>
            <!--modalend-->
            <h3>WorldMap<buttonclass="btnbtn-link"data-toggle="modal"data-target=".customer_map_modal"><spanclass="fafa-external-link"role="img"aria-label="Externallink"title="Externallink"/></button></h3>
            <ulclass="nav">
                <iframet-attf-src="/google_map?width=260&amp;height=240&amp;partner_ids=#{google_map_partner_ids}&amp;partner_url=/customers/"
                    style="width:260px;height:240px;border:0;padding:0;margin:0;"scrolling="no"></iframe>
            </ul>
        </t>
    </xpath>
</template>

<templateid="opt_industry_list"inherit_id="website_customer.index"customize_show="True"name="FilteronIndustry"priority="20">
    <xpathexpr="//div[@id='ref_left_column']"position="inside">
        <h3>ReferencesbyIndustries</h3>
        <ulclass="navnav-pillsflex-columnmt16mb32">
            <tt-foreach="industries"t-as="industry_dict">
                <tt-if="industry_dict['industry_id']">
                    <liclass="nav-item">
                        <at-attf-href="/customers/#{industry_dict['industry_id'][0]and'industry/%s/'%slug(industry_dict['industry_id'])or''}#{current_country_idand'country/%s'%current_country_idor''}#{search_path}"
                           t-attf-class="nav-link#{industry_dict['industry_id'][0]==current_industry_idand'active'or''}">
                            <spanclass="badgebadge-pillfloat-right"t-esc="industry_dict['industry_id_count']or'0'"/>
                            <tt-esc="industry_dict['industry_id'][1]"/>
                        </a>
                    </li>
                </t>
            </t>
        </ul>
    </xpath>
</template>

<templateid="opt_country_list"inherit_id="website_customer.index"customize_show="True"name="FilteronCountries"priority="30">
    <xpathexpr="//div[@id='ref_left_column']"position="inside">
        <h3>ReferencesbyCountry</h3>
        <ulclass="navnav-pillsflex-columnmt16mb32">
            <tt-foreach="countries"t-as="country_dict">
                <tt-if="country_dict['country_id']">
                    <liclass="nav-item">
                        <at-attf-href="/customers/#{current_industry_idand'industry/%s/'%slug(current_industry)or''}#{country_dict['country_id'][0]and'country/%s'%slug(country_dict['country_id'])or''}#{search_path}"
                           t-attf-class="nav-link#{country_dict['country_id'][0]==current_country_idand'active'or''}">
                            <spanclass="badgebadge-pillfloat-right"t-esc="country_dict['country_id_count']or'0'"/>
                            <tt-esc="country_dict['country_id'][1]"/>
                        </a>
                    </li>
                </t>
            </t>
        </ul>
    </xpath>
</template>


<templateid="opt_tag_list"inherit_id="website_customer.index"customize_show="True"name="FilteronTags"priority="40">
    <xpathexpr="//div[@id='ref_left_column']"position="inside">

        <h3t-if="len(tags)">ReferencesbyTag</h3>
        <ulclass="navnav-pillsflex-columnmt16mb32"t-if="len(tags)">
            <liclass="nav-item"><aclass="nav-linkmr8"t-attf-href="/customers/#{current_industry_idand'industry/%s/'%slug(current_industry)or''}#{current_country_idand'country/%s'%slug(current_country)or''}">
                <spanclass="fafa-1xfa-tags"/>All</a></li>
            <lit-foreach="tags"t-as="o_tag"class="nav-item">
                <at-attf-class="nav-linkbadgebadge-#{o_tag.classname}"t-esc="o_tag.name"t-att-style="tagandtag.id==o_tag.idand'text-decoration:underline'"
                    t-attf-href="/customers/#{current_industry_idand'industry/%s/'%slug(current_industry)or''}#{current_country_idand'country/%s'%slug(current_country)or''}?tag_id=#{slug(o_tag)}"/>
            </li>
        </ul>
    </xpath>
</template>

<templateid="contact_edit_options"inherit_id="website.user_navbar"name="EditCustomerOptions">
    <xpathexpr="//li[@id='edit-page-menu']"position="after">
        <tt-if="main_object._name=='res.partner'"t-set="action"t-value="'contacts.action_contacts'"/>
    </xpath>
</template>

<templateid="details"name="CustomerDetail">
  <tt-call="website.layout">
    <divid="wrap">
        <divclass="oe_structure"id="oe_structure_website_customer_details_1"/>
        <divclass="containermt16">
            <divclass="row">
                <divclass="col-lg-5">
                    <olt-if="notedit_page"class="breadcrumb">
                        <liclass="breadcrumb-item"><ahref="/customers">OurReferences</a></li>
                        <liclass="breadcrumb-itemactive"><spant-field="partner.display_name"/></li>
                    </ol>
                </div>
                <tt-call="website_partner.partner_detail">
                    <tt-set="left_column">
                        <divid="left_column"><tt-call="website_customer.implemented_by_block"/></div>
                    </t>
                    <tt-set="right_column">
                        <divid="right_column"><tt-call="website_customer.references_block"/></div>
                    </t>
                </t>
            </div>
        </div>
        <divclass="oe_structure"id="oe_structure_website_customer_details_2"/>
    </div>
  </t>
</template>

<templateid="partner_details"inherit_id="website_partner.partner_page"name="PartnerDetailColumns">
 <xpathexpr="//t[@t-call='website_partner.partner_detail']"position="inside">
    <tt-set="left_column"><divid="left_column"><tt-call="website_customer.implemented_by_block"/></div></t>
    <tt-set="right_column"><divid="right_column"><tt-call="website_customer.references_block"/></div></t>
 </xpath>
</template>

<templateid="partner_detail"inherit_id="website_partner.partner_detail"name="PartnerDetails">
    <xpathexpr="//address"position="inside">
        <tt-if="partner.industry_id">
            <spanclass="badgebadge-secondary"><tt-esc="partner.industry_id.name"/></span>
        </t>
    </xpath>
</template>

<templateid="implemented_by_block"name="PartnerImplementedByBlock">
        <tt-if="partner.assigned_partner_idandpartner.assigned_partner_id.website_published">
            <divclass="card">
                <divclass="card-header">
                    <h4>ImplementedBy</h4>
                </div>
                <divclass="card-bodytext-center">
        <h4>
            <at-attf-href="/partners/#{slug(partner.assigned_partner_id)}">
              <spant-field="partner.assigned_partner_id"/>
              <spanclass="small">(<tt-esc="len([pforpinpartner.assigned_partner_id.implemented_partner_idsifp.website_published])"/>reference(s))</span>
            </a>
        </h4>
        <div><at-attf-href="/partners/#{slug(partner.assigned_partner_id)}"
                t-field="partner.assigned_partner_id.image_128"
                class="d-block"
                t-options='{"widget":"image","qweb_img_responsive":False,"class":"o_image_128_max"}'
             />
        </div>
        <addressclass="text-left">
             <divt-field="partner.assigned_partner_id"t-options='{
                 "widget":"contact",
                 "fields":["address","website","phone","email"]
             }'/>
        </address>
                </div>
            </div>
        </t>
</template>

<templateid="references_block"name="PartnerReferencesBlock">
        <tt-if="any(p.website_publishedforpinpartner.implemented_partner_ids)">
            <h3id="references">References</h3>
            <divt-foreach="partner.implemented_partner_ids"t-as="reference"class="mediamt-3">
              <tt-if="reference.website_published">
                <at-attf-href="/customers/#{slug(reference)}">
                    <spant-field="reference.image_128"class="d-blockmr-3text-centero_width_128"t-options='{"widget":"image","qweb_img_responsive":False,"class":"o_image_128_max"}'/>
                </a>
                <divclass="media-body"style="min-height:64px;">
                    <at-attf-href="/customers/#{slug(reference)}">
                        <spant-field="reference.self"/>
                    </a>
                    <tt-if="reference.industry_id">
                        <spanclass="badgebadge-secondary"><tt-esc="reference.industry_id.name"/></span>
                    </t>
                    <divt-field='reference.website_short_description'/>
                </div>
              </t>
            </div>
        </t>
</template>

<templateid="references_block_href"inherit_id="website_crm_partner_assign.references_block"name="PartnerReferencesBlock">
    <xpathexpr="//div/span"position="replace">
        <at-attf-href="/customers/#{slug(reference)}">$0</a>
    </xpath>
    <xpathexpr="//div[hasclass('media-body')]/span"position="replace">
        <at-attf-href="/customers/#{slug(reference)}">$0</a>
    </xpath>
</template>

</flectra>
