flectra.define('crm.crm_email_and_phone_propagation',function(require){
    'usestrict';

    consttour=require('web_tour.tour');

    tour.register('crm_email_and_phone_propagation_edit_save',{
        test:true,
        url:'/web',
    },[
        tour.stepUtils.showAppsMenuItem(),
        {
            trigger:'.o_app[data-menu-xmlid="crm.crm_menu_root"]',
            content:'opencrmapp',
        },{
            trigger:'.o_kanban_record.o_kanban_record_titlespan:contains(TestLeadPropagation)',
            content:'Openthefirstlead',
            run:'click',
        },{
            trigger:'.o_form_button_edit',
            extra_trigger:'.o_lead_opportunity_form.o_form_readonly',
            content:'Editthelead',
            run:'click',
        },{
            trigger:'.o_form_button_save',
            extra_trigger:'.o_form_editableinput[name="email_from"]',
            content:'Savethelead',
            run:'click',
        },{
            trigger:'.o_form_readonly',
        },
    ]);

    tour.register('crm_email_and_phone_propagation_remove_email_and_phone',{
        test:true,
        url:'/web',
    },[
        tour.stepUtils.showAppsMenuItem(),
        {
            trigger:'.o_app[data-menu-xmlid="crm.crm_menu_root"]',
            content:'opencrmapp',
        },{
            trigger:'.o_kanban_record.o_kanban_record_titlespan:contains(TestLeadPropagation)',
            content:'Openthefirstlead',
            run:'click',
        },{
            trigger:'.o_form_button_edit',
            content:'Editthelead',
            run:'click',
        },{
            trigger:'.o_form_editableinput[name="email_from"]',
            extra_trigger:'.o_form_editableinput[name="phone"]',
            content:'Removetheemailandthephone',
            run:function(){
                $('input[name="email_from"]').val('').trigger("change");
                $('input[name="phone"]').val('').trigger("change");
            },
        },{
            trigger:'.o_form_button_save',
            //waitthethewarningmessagetobevisible
            extra_trigger:'.o_form_sheet_bg.alert:not(.o_invisible_modifier)span[name="ribbon_message"]',
            content:'Savethelead',
            run:'click',
        },{
            trigger:'.o_form_readonly',
        },
    ]);

});
