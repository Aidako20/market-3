<?xmlversion="1.0"encoding="utf-8"?>
<flectra>

        <!--OpportunitiesbyuserandteampivotView-->
        <recordid="crm_opportunity_report_view_pivot"model="ir.ui.view">
            <fieldname="name">crm.opportunity.report.pivot</field>
            <fieldname="model">crm.lead</field>
            <fieldname="priority">60</field>
            <fieldname="arch"type="xml">
                <pivotstring="PipelineAnalysis"sample="1">
                    <fieldname="create_date"interval="month"type="col"/>
                    <fieldname="stage_id"type="row"/>
                    <fieldname="prorated_revenue"type="measure"/>
                </pivot>
            </field>
        </record>

        <recordid="crm_opportunity_report_view_pivot_lead"model="ir.ui.view">
            <fieldname="name">crm.opportunity.report.view.pivot.lead</field>
            <fieldname="model">crm.lead</field>
            <fieldname="priority">60</field>
            <fieldname="arch"type="xml">
                <pivotstring="LeadsAnalysis"sample="1">
                    <fieldname="create_date"interval="month"type="row"/>
                    <fieldname="team_id"type="col"/>
                </pivot>
            </field>
        </record>

        <!--OpportunitiesbyuserandteamGraphView-->
        <recordid="crm_opportunity_report_view_graph"model="ir.ui.view">
            <fieldname="name">crm.opportunity.report.graph</field>
            <fieldname="model">crm.lead</field>
            <fieldname="arch"type="xml">
                <graphstring="PipelineAnalysis"stacked="True"sample="1">
                    <fieldname="stage_id"type="row"/>
                    <fieldname="date_deadline"type="row"interval="month"/>
                    <fieldname="prorated_revenue"type="measure"/>
                    <fieldname="color"invisible="1"/>
                </graph>
            </field>
        </record>

        <recordid="crm_opportunity_report_view_graph_lead"model="ir.ui.view">
            <fieldname="name">crm.opportunity.report.graph.lead</field>
            <fieldname="model">crm.lead</field>
            <fieldname="priority">20</field>
            <fieldname="arch"type="xml">
                <graphstring="LeadsAnalysis"stacked="True"sample="1">
                    <fieldname="create_date"interval="month"type="col"/>
                    <fieldname="team_id"type="col"/>
                    <fieldname="color"invisible="1"/>
                </graph>
            </field>
        </record>

        <!--OpportunitiesbyuserandteamSearchView-->
        <recordid="crm_opportunity_report_view_search"model="ir.ui.view">
            <fieldname="name">crm.lead.search</field>
            <fieldname="model">crm.lead</field>
            <fieldname="priority">32</field>
            <fieldname="arch"type="xml">
                <searchstring="OpportunitiesAnalysis">
                    <filterstring="MyOpportunities"name="my"
                            domain="[('user_id','=',uid)]"/>
                    <separator/>
                    <filtername="lead"string="Lead"domain="[('type','=','lead')]"help="Showonlylead"/>
                    <filtername="opportunity"string="Opportunity"domain="[('type','=','opportunity')]"help="Showonlyopportunity"/>
                    <separator/>
                    <filterstring="Won"name="won"
                            domain="[('probability','=',100)]"/>
                    <filterstring="Lost"name="lost"
                            domain="[('probability','=',0),('active','=',False)]"/>
                    <fieldname="team_id"context="{'invisible_team':False}"/>
                    <fieldname="user_id"string="Salesperson"/>
                    <separator/>
                    <filterstring="CreationDate"name="filter_create_date"date="create_date"default_period="this_year"/>
                    <filterstring="ExpectedClosing"name="filter_date_deadline"date="date_deadline"/>
                    <filterstring="DateClosed"name="date_closed_filter"date="date_closed"/>
                    <groupexpand="0"string="ExtendedFilters">
                        <fieldname="partner_id"filter_domain="[('partner_id','child_of',self)]"/>
                        <fieldname="stage_id"domain="['|',('team_id','=',False),('team_id','=','team_id')]"/>
                        <fieldname="campaign_id"/>
                        <fieldname="medium_id"/>
                        <fieldname="source_id"/>
                        <fieldname="company_id"options="{'no_create':True}"groups="base.group_multi_company"/>
                        <newline/>
                        <fieldname="create_date"/>
                        <fieldname="date_open"/>
                        <fieldname="date_closed"/>
                    </group>
                    <groupexpand="1"string="GroupBy">
                        <filterstring="Salesperson"name="salesperson"context="{'group_by':'user_id'}"/>
                        <filterstring="SalesTeam"name="saleschannel"context="{'group_by':'team_id'}"/>
                        <filterstring="City"name="city"context="{'group_by':'city'}"/>
                        <filterstring="Country"name="country"context="{'group_by':'country_id'}"/>
                        <filterstring="Company"name="company"context="{'group_by':'company_id'}"groups="base.group_multi_company"/>
                        <filterstring="Stage"name="stage"context="{'group_by':'stage_id'}"/>
                        <separatororientation="vertical"/>
                        <filterstring="CreationDate"context="{'group_by':'create_date:month'}"name="month"/>
                        <filterstring="ConversionDate"context="{'group_by':'date_conversion:month'}"name="conversion_date"help="ConversionDatefromLeadtoOpportunity"/>
                        <filterstring="ExpectedClosing"context="{'group_by':'date_deadline:month'}"name="date_deadline"/>
                        <filterstring="ClosedDate"context="{'group_by':'date_closed'}"name="date_closed_groupby"/>
                        <filterstring="LostReason"name="lostreason"context="{'group_by':'lost_reason'}"/>
                    </group>
                </search>
            </field>
        </record>

        <recordid="crm_opportunity_report_action"model="ir.actions.act_window">
            <fieldname="name">PipelineAnalysis</field>
            <fieldname="res_model">crm.lead</field>
            <fieldname="view_mode">pivot,graph,tree,form</field>
            <fieldname="search_view_id"ref="crm.crm_opportunity_report_view_search"/>
            <fieldname="context">{'search_default_opportunity':True,'search_default_current':True}</field>
            <fieldname="view_ids"
                   eval="[(5,0,0),
                          (0,0,{'view_mode':'graph','view_id':ref('crm_opportunity_report_view_graph')}),
                          (0,0,{'view_mode':'pivot','view_id':ref('crm_opportunity_report_view_pivot')}),
                          (0,0,{'view_mode':'tree','view_id':ref('crm_case_tree_view_oppor')})]"/>
             <fieldname="help">PipelineAnalysisgivesyouaninstantaccessto
                youropportunitieswithinformationsuchastheexpectedrevenue,plannedcost,
                misseddeadlinesorthenumberofinteractionsperopportunity.Thisreportis
                mainlyusedbythesalesmanagerinordertodotheperiodicreviewwiththe
                teamsofthesalespipeline.</field>
        </record>

        <recordid="crm_opportunity_report_menu"model="ir.ui.menu">
            <fieldname="action"ref="crm.crm_opportunity_report_action"/>
        </record>

        <recordid="crm_opportunity_report_action_lead"model="ir.actions.act_window">
            <fieldname="name">LeadsAnalysis</field>
            <fieldname="res_model">crm.lead</field>
            <fieldname="view_mode">pivot,graph,tree,form</field>
            <fieldname="search_view_id"ref="crm.crm_opportunity_report_view_search"/>
            <fieldname="context">{'search_default_current':True,'search_default_archived':True}</field>
            <fieldname="view_ids"
                   eval="[(5,0,0),
                          (0,0,{'view_mode':'graph','view_id':ref('crm_opportunity_report_view_graph_lead')}),
                          (0,0,{'view_mode':'pivot','view_id':ref('crm_opportunity_report_view_pivot_lead')})]"/>
            <fieldname="help">Thisreportanalysesthesourceofyourleads.</field>
        </record>

        <recordid="crm_opportunity_report_menu_lead"model="ir.ui.menu">
            <fieldname="action"ref="crm.crm_opportunity_report_action_lead"/>
        </record>

</flectra>
