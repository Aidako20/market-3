<?xmlversion="1.0"encoding="utf-8"?>
<flectra>

        <!--CRMleadsearchbySalesteams-->
        <recordid="crm_case_form_view_salesteams_lead"model="ir.actions.act_window">
            <fieldname="name">Leads</field>
            <fieldname="res_model">crm.lead</field>
            <fieldname="view_mode">tree,kanban,form</field>
            <fieldname="domain">['|',('type','=','lead'),('type','=',False)]</field>
            <fieldname="view_ids"
                   eval="[(5,0,0),
                          (0,0,{'view_mode':'tree','view_id':ref('crm_case_tree_view_leads')}),
                          (0,0,{'view_mode':'kanban','view_id':ref('view_crm_lead_kanban')})]"/>
            <fieldname="search_view_id"ref="crm.view_crm_case_leads_filter"/>
            <fieldname="context">{
                    'search_default_team_id':[active_id],
                    'default_team_id':active_id,
                    'default_type':'lead',
                }
            </field>
            <fieldname="help"type="html">
                <pclass="o_view_nocontent_smiling_face">
                    Createanewlead
                </p><p>
                    Useleadsifyouneedaqualificationstepbeforecreatingan
                    opportunityoracustomer.Itcanbeabusinesscardyoureceived,
                    acontactformfilledinyourwebsite,orafileofunqualified
                    prospectsyouimport,etc.
                </p>
            </field>
        </record>

        <!--CRMopportunitysearchbySalesteams-->
        <recordid="crm_case_form_view_salesteams_opportunity"model="ir.actions.act_window">
            <fieldname="name">Opportunities</field>
            <fieldname="res_model">crm.lead</field>
            <fieldname="view_mode">kanban,tree,graph,form,calendar,pivot</field>
            <fieldname="domain">[('type','=','opportunity')]</field>
            <fieldname="view_id"ref="crm.crm_case_kanban_view_leads"/>
            <fieldname="search_view_id"ref="crm.view_crm_case_opportunities_filter"/>
            <fieldname="context">{
                    'search_default_team_id':[active_id],
                    'default_team_id':active_id,
                    'default_type':'opportunity',
                    'default_user_id':uid,
                }
            </field>
            <fieldname="help"type="html">
                <pclass="o_view_nocontent_smiling_face">
                    Createanewlead
                </p><p>
                    Flectrahelpsyoukeeptrackofyoursalespipelinetofollow
                    uppotentialsalesandbetterforecastyourfuturerevenues.
                </p><p>
                    Youwillbeabletoplanmeetingsandphonecallsfrom
                    opportunities,convertthemintoquotations,attachrelated
                    documents,trackalldiscussions,andmuchmore.
                </p>
            </field>
        </record>

         <recordid="crm_lead_action_team_overdue_opportunity"model="ir.actions.act_window">
            <fieldname="name">OverdueOpportunities</field>
            <fieldname="res_model">crm.lead</field>
            <fieldname="view_mode">kanban,tree,graph,form,calendar,pivot</field>
            <fieldname="domain">[('type','=','opportunity')]</field>
            <fieldname="view_id"ref="crm.crm_case_kanban_view_leads"/>
            <fieldname="search_view_id"ref="crm.view_crm_case_opportunities_filter"/>
            <fieldname="context">{
                    'search_default_team_id':[active_id],
                    'search_default_overdue_opp':1,
                    'default_team_id':active_id,
                    'default_type':'opportunity',
                    'default_user_id':uid,
                }
            </field>
        </record>

       <recordid="action_report_crm_lead_salesteam"model="ir.actions.act_window">
           <fieldname="name">LeadsAnalysis</field>
           <fieldname="res_model">crm.lead</field>
           <fieldname="context">{'search_default_team_id':[active_id],'search_default_filter_create_date':1}}</field>
           <fieldname="domain">[]</field>
           <fieldname="view_mode">graph,pivot,tree,form</field>
           <fieldname="search_view_id"ref="crm.crm_opportunity_report_view_search"/>
           <fieldname="help">LeadsAnalysisallowsyoutocheckdifferentCRMrelatedinformationlikethetreatmentdelaysornumberofleadsperstate.Youcansortoutyourleadsanalysisbydifferentgroupstogetaccurategrainedanalysis.</field>
       </record>

       <recordid="action_report_crm_opportunity_salesteam"model="ir.actions.act_window">
            <fieldname="name">PipelineAnalysis</field>
            <fieldname="res_model">crm.lead</field>
            <fieldname="view_mode">graph,pivot,tree,form</field>
            <fieldname="search_view_id"ref="crm.crm_opportunity_report_view_search"/>
            <fieldname="context">{
                'search_default_team_id':[active_id],
                'tree_view_ref':'crm.crm_case_tree_view_oppor',
                'search_default_opportunity':True,
                'search_default_filter_create_date':1}</field>
            <fieldname="domain">[]</field>
            <fieldname="help">OpportunitiesAnalysisgivesyouaninstantaccesstoyouropportunitieswithinformationsuchastheexpectedrevenue,plannedcost,misseddeadlinesorthenumberofinteractionsperopportunity.Thisreportismainlyusedbythesalesmanagerinordertodotheperiodicreviewwiththechannelsofthesalespipeline.</field>
        </record>

        <recordid="sales_team_form_view_in_crm"model="ir.ui.view">
            <fieldname="name">crm.team.form.inherit</field>
            <fieldname="model">crm.team</field>
            <fieldname="inherit_id"ref="sales_team.crm_team_view_form"/>
            <fieldname="priority">12</field>
            <fieldname="arch"type="xml">
                <xpathexpr="//div[@name='options_active']"position="inside">
                    <divclass="o_row">
                        <spanname="opportunities">
                            <fieldname="use_opportunities"/>
                            <labelfor="use_opportunities"/>
                        </span>
                        <spanclass="o_row"groups="crm.group_use_lead">
                            <fieldname="use_leads"/>
                            <labelfor="use_leads"string="Leads"/>
                        </span>
                    </div>
                </xpath>
                <xpathexpr="//field[@name='user_id']"position="after">
                    <labelfor="alias_name"string="EmailAlias"
                        attrs="{'invisible':[('use_leads','=',False),('use_opportunities','=',False)]}"/>
                    <divclass="oe_inline"name="alias_def"
                        attrs="{'invisible':[('use_leads','=',False),('use_opportunities','=',False)]}">
                        <fieldname="alias_id"class="oe_read_onlyoe_inline"
                            string="EmailAlias"required="0"/>
                        <divclass="oe_edit_onlyoe_inline"name="edit_alias"style="display:inline;">
                            <divattrs="{'invisible':[('alias_domain','=',False)]}">
                                <fieldname="alias_name"class="oe_inline"/>@<fieldname="alias_domain"class="oe_inline"readonly="1"/>
                            </div>
                            <buttonicon="fa-arrow-right"type="action"name="%(base_setup.action_general_configuration)d"string="Configureacustomdomain"class="p-0btn-link"attrs="{'invisible':[('alias_domain','!=',False)]}"/>
                        </div>
                    </div>
                    <fieldname="alias_contact"
                        string="AcceptEmailsFrom"
                        attrs="{'invisible':[('use_leads','=',False),('use_opportunities','=',False)]}"/>
                </xpath>
            </field>
        </record>

        <!--CaseTeamsAction-->
        <recordid="action_crm_tag_kanban_view_salesteams_oppor11"model="ir.actions.act_window.view">
            <fieldname="sequence"eval="0"/>
            <fieldname="view_mode">kanban</field>
            <fieldname="view_id"ref="crm_case_kanban_view_leads"/>
            <fieldname="act_window_id"ref="crm_case_form_view_salesteams_opportunity"/>
        </record>

        <recordid="action_crm_tag_tree_view_salesteams_oppor11"model="ir.actions.act_window.view">
            <fieldname="sequence"eval="1"/>
            <fieldname="view_mode">tree</field>
            <fieldname="view_id"ref="crm_case_tree_view_oppor"/>
            <fieldname="act_window_id"ref="crm_case_form_view_salesteams_opportunity"/>
        </record>

        <recordid="action_opportunity_form"model="ir.actions.act_window">
            <fieldname="name">NewOpportunity</field>
            <fieldname="res_model">crm.lead</field>
            <fieldname="type">ir.actions.act_window</field>
            <fieldname="view_mode">form</field>
            <fieldname="view_id"ref="crm_lead_view_form"/>
            <fieldname="domain">[('type','=','opportunity')]</field>
            <fieldname="context">{
                    'search_default_team_id':[active_id],
                    'default_team_id':active_id,
                    'default_type':'opportunity',
                    'default_user_id':uid,
            }
            </field>
            <fieldname="search_view_id"ref="crm.view_crm_case_opportunities_filter"/>
        </record>

        <recordid="sales_team.crm_team_salesteams_pipelines_act"model="ir.actions.act_window">
            <fieldname="domain">[('use_opportunities','=',True)]</field>
        </record>

        <recordid="crm_team_salesteams_view_kanban"model="ir.ui.view">
            <fieldname="name">crm.team.kanban</field>
            <fieldname="model">crm.team</field>
            <fieldname="inherit_id"ref="sales_team.crm_team_salesteams_view_kanban"/>
            <fieldname="arch"type="xml">
                <data>
                    <xpathexpr="//templates"position="before">
                        <fieldname="alias_id"/>
                        <fieldname="alias_name"/>
                        <fieldname="alias_domain"/>
                        <fieldname="use_opportunities"/>
                        <fieldname="use_leads"/>
                    </xpath>

                    <xpathexpr="//div[hasclass('o_primary')]"position="after">
                        <divt-if="record.use_leads.raw_valueandrecord.alias_name.valueandrecord.alias_domain.value">
                            <smallt-translation="off"><iclass="fafa-envelope-o"aria-label="Leads"title="Leads"role="img"></i>&amp;nbsp;<fieldname="alias_id"/></small>
                        </div>
                    </xpath>

                    <xpathexpr="//t[@name='first_options']"position="after">
                        <divclass="row"t-if="record.lead_unassigned_count.raw_value">
                            <divclass="col-8">
                                <aname="%(crm_case_form_view_salesteams_lead)d"type="action"context="{'search_default_unassigned_leads':1}">
                                    <fieldname="lead_unassigned_count"/>
                                    <tt-if="record.lead_unassigned_count.raw_value==1">UnassignedLead</t>
                                    <tt-else="">UnassignedLeads</t>
                                </a>
                            </div>
                        </div>
                        <divclass="row"t-if="record.opportunities_count.raw_value">
                            <divclass="col-8">
                                <aname="%(crm_case_form_view_salesteams_opportunity)d"type="action"context="{'search_default_open_opportunities':True}"><!--context="{'search_default_probability':NOTor<100}"-->
                                    <fieldname="opportunities_count"/>
                                    <tt-if="record.opportunities_count.raw_value==1">OpenOpportunity</t>
                                    <tt-else="">OpenOpportunities</t>
                                </a>
                            </div>
                            <divclass="col-4text-righttext-truncate">
                                <fieldname="opportunities_amount"widget="monetary"options="{'currency_field':'currency_id'}"/>
                            </div>
                        </div>
                        <divclass="row"t-if="record.opportunities_overdue_count.raw_value">
                            <divclass="col-8">
                                <aname="%(crm_lead_action_team_overdue_opportunity)d"type="action">
                                    <fieldname="opportunities_overdue_count"/>
                                    <tt-if="record.opportunities_overdue_count.raw_value==1">OverdueOpportunity</t>
                                    <tt-else="">OverdueOpportunities</t>
                                </a>
                            </div>
                             <divclass="col-4text-righttext-truncate">
                                <fieldname="opportunities_overdue_amount"widget="monetary"options="{'currency_field':'currency_id'}"/>
                            </div>
                        </div>
                    </xpath>

                    <xpathexpr="//div[hasclass('o_kanban_manage_view')]"position="inside">
                        <divt-if="record.use_leads.raw_value"groups="crm.group_use_lead">
                            <aname="%(crm_case_form_view_salesteams_lead)d"type="action">
                                Leads
                            </a>
                        </div>
                        <divt-if="record.use_opportunities.raw_value">
                            <aname="%(crm_case_form_view_salesteams_opportunity)d"type="action">
                                Opportunities
                            </a>
                        </div>
                    </xpath>

                    <xpathexpr="//div[hasclass('o_kanban_manage_new')]"position="inside">
                        <divt-if="record.use_opportunities.raw_value">
                            <a name="%(action_opportunity_form)d"type="action">
                                Opportunity
                            </a>
                        </div>
                    </xpath>

                    <xpathexpr="//div[hasclass('o_kanban_manage_reports')]"position="inside">
                        <divt-if="record.use_leads.raw_value"groups="crm.group_use_lead">
                            <aname="%(action_report_crm_lead_salesteam)d"type="action">
                                Leads
                            </a>
                        </div>
                        <divt-if="record.use_opportunities.raw_value">
                            <aname="%(action_report_crm_opportunity_salesteam)d"type="action">
                                Opportunities
                            </a>
                        </div>
                        <divt-if="record.use_opportunities.raw_value">
                            <aname="%(crm.crm_activity_report_action_team)d"type="action">
                                Activities
                            </a>
                        </div>
                    </xpath>
                </data>
            </field>
        </record>

</flectra>
