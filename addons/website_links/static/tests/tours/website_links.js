flectra.define('website_links.website_links_tour',function(require){
'usestrict';

vartour=require("web_tour.tour");

tour.register('website_links_tour',{
    test:true,
    url:'/r',
},
    [
        //1.CreateatrackedURL
        {
            content:"checkthatexistinglinksareshown",
            trigger:'#o_website_links_recent_links.btn_shorten_url_clipboard',
            run:function(){},//it'sacheck
        },
        {
            content:"filltheformandsubmitit",
            trigger:'#o_website_links_link_tracker_forminput#url',
            run:function(){
                varurl=window.location.host+'/contactus';
                $('#o_website_links_link_tracker_forminput#url').val(url);
                $('.o_website_links_utm_formsinput#campaign-select').val(1).change();
                $('.o_website_links_utm_formsinput#channel-select').val(1).change();
                $('.o_website_links_utm_formsinput#source-select').val(1).change();
                $('#btn_shorten_url').click();
            },
        },
        //2.Visitit
        {
            content:"checkthatlinkwascreatedandvisitit",
            extra_trigger:'#o_website_links_recent_links.truncate_text:first():contains("ContactUs")',
            trigger:'#o_website_links_link_tracker_form#generated_tracked_link:contains("/r/")',
            run:function(){
                window.location.href=$('#generated_tracked_link').text();
            },
        },
        {
            content:"checkthatwelandedoncorrectpagewithcorrectquerystrings",
            trigger:'.s_titleh1:containsExact("Contactus")',
            run:function(){
                varexpectedUrl="/contactus?utm_campaign=Sale&utm_source=Search+engine&utm_medium=Website";
                if(window.location.pathname+window.location.search!==expectedUrl){
                    console.error("Thelinkwasnotcorrectlycreated.");
                }
                window.location.href='/r';
            },
        },
        //3.Checkthatcountergotincrementedandchartsarecorrectlydisplayed
        {
            content:"filterrecentlyusedlinks",
            trigger:'#filter-recently-used-links',
        },
        {
            content:"visitlinkstatspage",
            trigger:'#o_website_links_recent_linksa:containsExact("Stats"):first',
        },
        {
            content:"checkclicknumberandensuregraphsareinitialized",
            extra_trigger:'.website_links_click_chart.title:contains("1clicks")',
            trigger:'canvas',
            run:function(){},//it'sacheck
        },
        {
            content:"clickonLastMonthtab",
            trigger:'.o_website_links_chart.graph-tabsa:contains("LastMonth")',
        },
        {
            content:"ensuretabiscorrectlyresized",
            trigger:'#last_month_charts#last_month_clicks_chart',
            run:function(){
                varwidth=$('#last_month_charts#last_month_clicks_chart').width();
                if(width<50){
                    console.error("Thegraphsareprobablynotresizedontabchange.");
                }
            },
        },
    ]
);

});
