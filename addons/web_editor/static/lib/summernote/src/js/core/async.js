define('summernote/core/async',function(){
  /**
   *@classcore.async
   *
   *Asyncfunctionswhichreturns`Promise`
   *
   *@singleton
   *@alternateClassNameasync
   */
  varasync=(function(){
    /**
     *@methodreadFileAsDataURL
     *
     *readcontentsoffileasrepresentingURL
     *
     *@param{File}file
     *@return{Promise}-then:sDataUrl
     */
    varreadFileAsDataURL=function(file){
      return$.Deferred(function(deferred){
        $.extend(newFileReader(),{
          onload:function(e){
            varsDataURL=e.target.result;
            deferred.resolve(sDataURL);
          },
          onerror:function(){
            deferred.reject(this);
          }
        }).readAsDataURL(file);
      }).promise();
    };
  
    /**
     *@methodcreateImage
     *
     *create`<image>`fromurlstring
     *
     *@param{String}sUrl
     *@param{String}filename
     *@return{Promise}-then:$image
     */
    varcreateImage=function(sUrl,filename){
      return$.Deferred(function(deferred){
        var$img=$('<img>');

        $img.one('load',function(){
          $img.off('errorabort');
          deferred.resolve($img);
        }).one('errorabort',function(){
          $img.off('load').detach();
          deferred.reject($img);
        }).css({
          display:'none'
        }).appendTo(document.body).attr({
          'src':sUrl,
          'data-filename':filename
        });
      }).promise();
    };

    return{
      readFileAsDataURL:readFileAsDataURL,
      createImage:createImage
    };
  })();

  returnasync;
});
