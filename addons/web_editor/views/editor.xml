<?xmlversion="1.0"encoding="utf-8"?>
<flectra>

<templateid="wysiwyg_iframe_editor_assets"name="Editorassetsforwysiwygiframecontent"groups="base.group_user">
    <tt-call-assets="web.assets_common"/>
    <tt-call-assets="web.assets_frontend"t-js="false"/>
    <tt-call-assets="web_editor.assets_wysiwyg"/>
</template>

<templateid="compiled_assets_wysiwyg"name="WysiwygEditor"groups="base.group_user,base.group_portal">
    <tt-call-assets="web_editor.assets_wysiwyg"/>
</template>

<templateid="web_editor.assets_wysiwyg"name="WysiwygEditorAssets">
    <!--lib-->

    <tt-call-assets="web_editor.assets_summernote"/>

    <linkrel="stylesheet"type="text/css"href="/web_editor/static/lib/cropperjs/cropper.css"/>
    <scripttype="text/javascript"src="/web_editor/static/lib/cropperjs/cropper.js"/>
    <scripttype="text/javascript"src="/web_editor/static/lib/jquery-cropper/jquery-cropper.js"/>
    <scripttype="text/javascript"src="/web_editor/static/lib/jQuery.transfo.js"/>
    <scripttype="text/javascript"src="/web/static/lib/nearest/jquery.nearest.js"/>
    <scripttype="text/javascript"src="/web_editor/static/lib/webgl-image-filter/webgl-image-filter.js"/>

    <!--flectrautils-->

    <tt-call="web._assets_helpers">
        <linkrel="stylesheet"type="text/scss"href="/web_editor/static/src/scss/bootstrap_overridden.scss"/>
    </t>

    <!--integration-->

    <linkrel="stylesheet"type="text/scss"href="/web_editor/static/src/scss/wysiwyg.scss"/>
    <linkrel="stylesheet"type="text/scss"href="/web_editor/static/src/scss/wysiwyg_iframe.scss"/>
    <linkrel="stylesheet"type="text/scss"href="/web_editor/static/src/scss/wysiwyg_snippets.scss"/>

    <scripttype="text/javascript"src="/web_editor/static/src/js/wysiwyg/fonts.js"/>
    <scripttype="text/javascript"src="/web_editor/static/src/js/base.js"/>
    <scripttype="text/javascript"src="/web_editor/static/src/js/editor/editor.js"/>
    <scripttype="text/javascript"src="/web_editor/static/src/js/editor/rte.js"/>
    <scripttype="text/javascript"src="/web_editor/static/src/js/editor/rte.summernote.js"/>
    <scripttype="text/javascript"src="/web_editor/static/src/js/editor/image_processing.js"/>
    <scripttype="text/javascript"src="/web_editor/static/src/js/editor/custom_colors.js"/>

    <!--widgets&plugins-->

    <scripttype="text/javascript"src="/web_editor/static/src/js/wysiwyg/widgets/media.js"/>
    <scripttype="text/javascript"src="/web_editor/static/src/js/wysiwyg/widgets/dialog.js"/>
    <scripttype="text/javascript"src="/web_editor/static/src/js/wysiwyg/widgets/alt_dialog.js"/>
    <scripttype="text/javascript"src="/web_editor/static/src/js/wysiwyg/widgets/color_palette.js"/>
    <scripttype="text/javascript"src="/web_editor/static/src/js/wysiwyg/widgets/image_crop_widget.js"/>
    <scripttype="text/javascript"src="/web_editor/static/src/js/wysiwyg/widgets/link_dialog.js"/>
    <scripttype="text/javascript"src="/web_editor/static/src/js/wysiwyg/widgets/media_dialog.js"/>
    <scripttype="text/javascript"src="/web_editor/static/src/js/wysiwyg/widgets/widgets.js"/>

    <scripttype="text/javascript"src="/web_editor/static/src/js/editor/snippets.editor.js"/>
    <scripttype="text/javascript"src="/web_editor/static/src/js/editor/snippets.options.js"/>

    <!--Launcher-->
    <scripttype="text/javascript"src="/web_editor/static/lib/jabberwock/jabberwock.js"/>
    <linkrel="stylesheet"type="text/css"href="/web_editor/static/lib/jabberwock/jabberwock.css"/>
    <scripttype="text/javascript"src="/web_editor/static/src/js/wysiwyg/wysiwyg_translate_attributes.js"/>
    <scripttype="text/javascript"src="/web_editor/static/src/js/wysiwyg/wysiwyg.js"/>
    <scripttype="text/javascript"src="/web_editor/static/src/js/wysiwyg/wysiwyg_snippets.js"/>
    <scripttype="text/javascript"src="/web_editor/static/src/js/wysiwyg/wysiwyg_iframe.js"/>
</template>

<templateid="assets_summernote"name="Summernote">
    <scripttype="text/javascript"src="/web_editor/static/lib/summernote/src/js/enable_summernote.js"/>
    <scripttype="text/javascript">
        (function(){
            "usestrict";
            flectra.define('jquery',function(){return$;});

            varuniqId=0;
            flectra.__define__=window.define;
            window.define=function(id){
                if(!flectra.__enable_summernote__)return;
                varargs=Array.prototype.slice.call(arguments);
                varfactorie=args.pop();
                varid=args[0];

                if(idinstanceofArray){
                    varname="summernote_factorie_"+(++uniqId);
                    flectra[name]=factorie;

                    varhead='';
                    varfn='varfn=flectra.'+name+';\ndeleteflectra.'+name+';\n';
                    fn+='returnfn(';
                    for(vark=0;k&lt;id.length;k++){
                        head+='vara'+(++uniqId)+'=require("'+id[k]+'");\n';
                        fn+='a'+uniqId+',';
                    }
                    fn+='null);';

                    flectra.define(flectra.website_next_define,newFunction('require',head+fn));
                }else{
                    flectra.define(id,factorie);
                }
            };
        })();
    </script>
    <tt-set="summer_js_files"t-value="['core/async','core/func','core/agent','core/list',
        'core/dom','core/key','core/range','editing/Bullet','editing/History','editing/Style',
        'editing/Table','editing/Typing','module/Editor','module/Button','module/Clipboard',
        'module/Codeview','module/DragAndDrop','module/Fullscreen','module/Handle',
        'module/HelpDialog','module/ImageDialog','module/LinkDialog','module/Popover',
        'module/Statusbar','module/Toolbar','Renderer','EventHandler','defaults','summernote']"/>
    <tt-foreach="summer_js_files"t-as="file">
        <script>flectra.website_next_define='summernote/<tt-esc="file"/>';</script>
        <scripttype="text/javascript"t-attf-src="/web_editor/static/lib/summernote/src/js/{{file}}.js"></script>
    </t>
    <scripttype="text/javascript"src="/web_editor/static/src/js/editor/summernote.js"/>
    <scripttype="text/javascript">
        window.define=flectra.__define__;
        deleteflectra.__define__;
        deleteflectra.website_next_define;
        deleteflectra.__enable_summernote__;
    </script>
    <linkrel="stylesheet"type="text/css"href="/web_editor/static/lib/summernote/src/css/summernote.css"/>
</template>

<templateid="_assets_primary_variables"inherit_id="web._assets_primary_variables">
    <xpathexpr="//link[last()]"position="after">
        <linkrel="stylesheet"type="text/scss"href="/web_editor/static/src/scss/web_editor.variables.scss"/>
    </xpath>
</template>

<templateid="_assets_13_0_color_system_support_primary_variables"inherit_id="web_editor._assets_primary_variables"active="False">
    <xpathexpr="//link[last()]"position="after">
        <linkrel="stylesheet"type="text/scss"href="/web_editor/static/src/scss/13_0_color_system_support_primary_variables.scss"/>
    </xpath>
</template>

<templateid="_assets_secondary_variables"inherit_id="web._assets_secondary_variables">
    <xpathexpr="//link"position="before">
        <linkrel="stylesheet"type="text/scss"href="/web_editor/static/src/scss/secondary_variables.scss"/>
    </xpath>
</template>

<templateid="assets_common"inherit_id="web.assets_common"name="WebEditorCommonAssets(usedinbackendinterfaceandwebsite)">
    <xpathexpr="script[last()]"position="after">
        <scripttype="text/javascript"src="/web_editor/static/lib/vkbeautify/vkbeautify.0.99.00.beta.js"/>
        <scripttype="text/javascript"src="/web_editor/static/src/js/common/ace.js"/>
        <scripttype="text/javascript"src="/web_editor/static/src/js/common/utils.js"/>
        <scripttype="text/javascript"src="/web_editor/static/src/js/wysiwyg/root.js"/>
    </xpath>
</template>

<templateid="_assets_backend_helpers"inherit_id="web._assets_backend_helpers">
    <xpathexpr="//link"position="before">
        <linkrel="stylesheet"type="text/scss"href="/web_editor/static/src/scss/bootstrap_overridden_backend.scss"/>
        <linkrel="stylesheet"type="text/scss"href="/web_editor/static/src/scss/bootstrap_overridden.scss"/>
    </xpath>
</template>

<templateid="assets_backend"inherit_id="web.assets_backend"name="WebEditorBackendAssets(usedinbackendinterface)">
    <xpathexpr="link[last()]"position="after">
        <linkrel="stylesheet"type="text/scss"href="/web_editor/static/src/scss/web_editor.common.scss"/><!--notincommonbecausecompileddifferentlywithcontext-->
        <linkrel="stylesheet"type="text/scss"href="/web_editor/static/src/scss/web_editor.backend.scss"/>
    </xpath>
    <xpathexpr="script[last()]"position="after">
        <scripttype="text/javascript"src="/web_editor/static/src/js/frontend/loader.js"/>
        <scripttype="text/javascript"src="/web_editor/static/src/js/backend/field_html.js"/>
        <scripttype="text/javascript"src="/web_editor/static/src/js/backend/convert_inline.js"/>
    </xpath>
</template>

<templateid="_assets_frontend_helpers"inherit_id="web._assets_frontend_helpers">
    <xpathexpr="//link"position="before">
        <linkrel="stylesheet"type="text/scss"href="/web_editor/static/src/scss/bootstrap_overridden.scss"/>
    </xpath>
</template>

<templateid="_assets_frontend_minimal_js"inherit_id="web._assets_frontend_minimal_js">
    <xpathexpr="//script[last()]"position="after">
        <scripttype="text/javascript"src="/web_editor/static/src/js/frontend/loader_loading.js"/>
    </xpath>
</template>

<templateid="assets_frontend"inherit_id="web.assets_frontend"name="WebEditorFrontendAssets(usedinpublicflectra)"priority="15">
    <xpathexpr="//link[last()]"position="after">
        <linkrel="stylesheet"type="text/scss"href="/web_editor/static/src/scss/web_editor.common.scss"/><!--notincommonbecausecompileddifferentlywithcontext-->
        <linkrel="stylesheet"type="text/scss"href="/web_editor/static/src/scss/web_editor.frontend.scss"/>
    </xpath>
    <xpathexpr="//script[last()]"position="after">
        <scripttype="text/javascript"src="/web_editor/static/src/js/frontend/loader.js"/>
    </xpath>
</template>

<templateid="qunit_suite"inherit_id="web.qunit_suite_tests">
    <xpathexpr="//script[last()]"position="after">
        <scripttype="text/javascript">
            flectra.define('web_editor.wysiwyg.root.test',function(require){
                'usestrict';
                varWysiwygRoot=require('web_editor.wysiwyg.root');
                if(WysiwygRoot){
                    WysiwygRoot.include({
                        assetLibs:null//Weneedtoaddtheassetbecausetestsperformedoverwrites(Dialog,Unbreakable...)
                    });
                }
            });
        </script>
        <tt-call="web_editor.assets_wysiwyg"/>

        <scripttype="text/javascript"src="/web_editor/static/tests/test_utils.js"/>
        <scripttype="text/javascript"src="/web_editor/static/tests/field_html_tests.js"/>
    </xpath>
</template>

<templateid="assets_edit_html_field"name="WysiwygEditorAssetsforhtmlfield(style-inline)"groups="base.group_user,base.group_portal">
    <tt-call-assets="web.assets_common"t-js="false"/>
    <tt-call-assets="web_editor.assets_wysiwyg"t-js="false"/>
</template>

<!--
    Theweb_editor.colorpickertemplateregroupssectionofcolorpickermenuforwebsitecustomization
    (textforeground/backgroundbutalsosnippetbackgroundcoloroption).
    Asitispresentendbelow,thecolorpickertagregroupsasetof.o_colorpicker_sectionwithname,
    icon-classandicon-contentasdata.Thesewillbeusedtobuildthecolorpickerdropdowns.

    Redefinitioncaneditsectioncontent,addsectionsorevenremovethem.Ifnosectionisfoundwhen
    buildingacolorpickerdropdown,thetemplatecontentwillbeusedwithoutchangesasthecolorpicker
    dropdowncontent.

    Sectionsshouldcontainasetofbuttonwithadata-colorattribute.Whenselectingsuchabuttonto
    editstyle,the"bg-x"classorthe"text-x"willbeautomaticallyadded.

    Ifacolorisnolongerusedyouneedtoaddthed-noneclasstoitandnotremoveitfromthisfile!!
    Elseyouwillnolongerbeabletousethem.
-->
<templateid="web_editor.colorpicker"name="Color-Picker"groups="base.group_user">
    <colorpicker>
        <divclass="o_colorpicker_section"data-name="theme">
            <buttont-foreach="5"t-as="i"t-attf-data-color="o-color-#{i+1}"></button>
        </div>
        <divclass="o_colorpicker_section"data-name="common">
            <buttondata-color="black"></button>
            <buttondata-color="900"></button>
            <buttondata-color="800"></button>
            <buttondata-color="700"class="d-none"></button>
            <buttondata-color="600"></button>
            <buttondata-color="500"class="d-none"></button>
            <buttondata-color="400"></button>
            <buttondata-color="300"class="d-none"></button>
            <buttondata-color="200"></button>
            <buttondata-color="100"></button>
            <buttondata-color="white"></button>
        </div>
        <divclass="o_colorpicker_section"data-name="transparent_grayscale">
            <buttondata-color="black-15"></button>
            <buttondata-color="black-25"></button>
            <buttondata-color="black-50"></button>
            <buttondata-color="black-75"></button>
            <buttondata-color="white-25"></button>
            <buttondata-color="white-50"></button>
            <buttondata-color="white-75"></button>
            <buttondata-color="white-85"></button>
        </div>
    </colorpicker>
</template>
</flectra>
