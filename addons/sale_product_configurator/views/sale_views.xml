<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <recordid="product_template_view_form"model="ir.ui.view">
        <fieldname="name">product.template.form.inherit.sale.product.configurator</field>
        <fieldname="model">product.template</field>
        <fieldname="inherit_id"ref="product.product_template_form_view"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//group[@name='sale']"position="after">
                <groupname="options"groups="product.group_product_variant">
                    <groupstring="Options">
                        <fieldname="optional_product_ids"widget="many2many_tags"options="{'color_field':'color'}"domain="[('id','!=',active_id),'|',('company_id','=',company_id),('company_id','=',False)]"/>
                    </group>
                </group>
            </xpath>
        </field>
    </record>

    <recordid="sale_order_view_form"model="ir.ui.view">
        <fieldname="name">sale.order.form.inherit.sale.product.configurator</field>
        <fieldname="model">sale.order</field>
        <fieldname="inherit_id"ref="sale.view_order_form"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//tree/field[@name='product_template_id']"position="attributes">
                <attributename="invisible">0</attribute>
            </xpath>
            <xpathexpr="//tree/field[@name='product_template_id']"position="after">
                <fieldname="product_template_attribute_value_ids"invisible="1"/>
                <fieldname="product_custom_attribute_value_ids"invisible="1">
                    <tree>
                        <fieldname="custom_product_template_attribute_value_id"/>
                        <fieldname="custom_value"/>
                    </tree>
                </field>
                <fieldname="product_no_variant_attribute_value_ids"invisible="1"/>
                <fieldname="is_configurable_product"invisible="1"/>
            </xpath>
            <xpathexpr="//tree/field[@name='product_id']"position="attributes">
                <attributename="optional">hide</attribute>
                <attributename="string">ProductVariant</attribute>
            </xpath>
        </field>
    </record>
</flectra>
