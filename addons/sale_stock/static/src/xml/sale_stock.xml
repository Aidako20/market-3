<templates>
    <divt-name="sale_stock.qtyAtDate">
        <divt-att-class="!widget.data.display_qty_widget?'invisible':''">
            <atabindex="0"t-attf-class="fafa-area-chart{{widget.data.forecasted_issue?'text-danger':'text-primary'}}"/>
        </div>
    </div>

    <divt-name="sale_stock.QtyDetailPopOver">
        <tableclass="tabletable-borderlesstable-sm">
            <tbody>
                <tt-if="!data.is_mtoand['draft','sent'].includes(data.state)">
                    <tr>
                        <td><strong>ForecastedStock</strong><br/><small>On<spant-esc="data.delivery_date"/></small></td>
                        <td><bt-esc='data.virtual_available_at_date'/>
                        <tt-esc='data.product_uom.data.display_name'/></td>
                    </tr>
                    <tr>
                        <td><strong>Available</strong><br/><small>Allplannedoperationsincluded</small></td>
                        <td><bt-esc='data.free_qty_today't-att-class="!data.will_be_fulfilled?'text-danger':''"/>
                        <tt-esc='data.product_uom.data.display_name'/></td>
                    </tr>
                </t>
                <tt-elif="data.is_mtoand['draft','sent'].includes(data.state)">
                    <tr>
                        <td><strong>ExpectedDelivery</strong></td>
                        <tdclass="oe-right"><spant-esc="data.delivery_date"/></td>
                    </tr>
                    <tr>
                        <p>Thisproductisreplenishedondemand.</p>
                    </tr>
                </t>
                <tt-elif="data.state=='sale'">
                    <tr>
                        <td>
                            <strong>Reserved</strong><br/>
                        </td>
                        <tdstyle="min-width:50px;text-align:right;">
                            <bt-esc='data.qty_available_today'/><tt-esc='data.product_uom.data.display_name'/>
                        </td>
                    </tr>
                    <trt-if="data.qty_available_today&lt;data.qty_to_deliver">
                        <td>
                            <spant-if="data.will_be_fulfilledanddata.forecast_expected_date_str">
                                Remainingdemandavailableat<bt-esc="data.forecast_expected_date_str"t-att-class="data.scheduled_date&lt;data.forecast_expected_date?'text-danger':''"/>
                            </span>
                            <spant-elif="!data.will_be_fulfilledanddata.forecast_expected_date_str"class="text-danger">
                                Noenoughfutureavailaibility
                            </span>
                            <spant-elif="!data.will_be_fulfilled"class="text-danger">
                                Nofutureavailaibility
                            </span>
                            <spant-else="">
                                Availableinstock
                            </span>
                        </td>
                    </tr>
                </t>
            </tbody>
        </table>
        <buttont-if="!data.is_mto"class="text-leftbtnbtn-linkaction_open_forecast"
            type="button">
            <iclass="fafa-fwo_button_iconfa-arrow-right"></i>
            ViewForecast
        </button>
    </div>

    <divt-name="sale_stock.DelayAlertWidget">
        <p>Thedelivery
            <tt-foreach="late_elements"t-as="late_element">
                <at-esc="late_element.name"href="#"t-att-element-id="late_element.id"t-att-element-model="model"/>,
            </t>willbelate.
        </p>
    </div>
</templates>
