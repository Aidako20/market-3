<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <data>
        <templateid="exception_on_so">
            <div>
                Exception(s)occurredonthesaleorder(s):
                <tt-foreach="sale_order_ids"t-as="sale_order">
                    <ahref="#"data-oe-model="sale.order"t-att-data-oe-id="sale_order.id"><tt-esc="sale_order.name"/></a>.
                </t>
                Manualactionsmaybeneeded.
                <divclass="mt16">
                    <p>Exception(s):</p>
                    <ult-foreach="order_exceptions"t-as="exception">
                        <li>
                            <tt-set="order_line"t-value="exception[0]"/>
                            <tt-set="new_qty"t-value="exception[1][0]"/>
                            <tt-set="old_qty"t-value="exception[1][1]"/>
                                <ahref="#"data-oe-model="sale.order"t-att-data-oe-id="order_line.order_id.id"><tt-esc="order_line.order_id.name"/></a>:
                                <tt-esc="new_qty"/><tt-esc="order_line.product_uom.name"/>of<tt-esc="order_line.product_id.name"/>
                                <tt-if="cancel">
                                    cancelled
                                </t>
                                <tt-if="notcancel">
                                    orderedinsteadof<tt-esc="old_qty"/><tt-esc="order_line.product_uom.name"/>
                                </t>
                          </li>
                    </ul>
                </div>
                <divclass="mt16"t-if="notcancelandimpacted_pickings">
                    <p>ImpactedTransfer(s):</p>
                    <ult-foreach="impacted_pickings"t-as="picking">
                        <li><ahref="#"data-oe-model="stock.picking"t-att-data-oe-id="picking.id"><tt-esc="picking.name"/></a></li>
                    </ul>
                </div>
            </div>
        </template>

        <templateid="exception_on_picking">
            <div>
                Exception(s)occurredonthepicking:
                <ahref="#"data-oe-model="stock.picking"t-att-data-oe-id="origin_picking.id"><tt-esc="origin_picking.name"/></a>.
                Manualactionsmaybeneeded.
                <divclass="mt16">
                    <p>Exception(s):</p>
                    <ult-foreach="moves_information"t-as="exception">
                        <tt-set="move"t-value="exception[0]"/>
                        <tt-set="new_qty"t-value="exception[1][0]"/>
                        <tt-set="old_qty"t-value="exception[1][1]"/>
                        <li>
                        <tt-esc="new_qty"/><tt-esc="move.product_uom.name"/>
                        of<tt-esc="move.product_id.display_name"/>processedinsteadof<tt-esc="old_qty"/><tt-esc="move.product_uom.name"/></li>
                    </ul>
                </div>
            </div>
        </template>

        <menuitemid="menu_aftersale"name="After-Sale"
            groups="sales_team.group_sale_salesman"
            parent="sale.sale_menu_root"sequence="5"/>
        <menuitemid="menu_invoiced"name="Invoicing"parent="menu_aftersale"sequence="1"/>

        <recordid="stock_location_route_view_form_inherit_sale_stock"model="ir.ui.view">
            <fieldname="name">stock.location.route.form</field>
            <fieldname="inherit_id"ref="stock.stock_location_route_form_view"/>
            <fieldname="model">stock.location.route</field>
            <fieldname="arch"type="xml">
                <xpathexpr="//field[@name='warehouse_ids']"position="after">
                    <br/><fieldname="sale_selectable"string="SalesOrderLines"/>
                </xpath>
            </field>
        </record>

        <recordid="product_template_view_form_inherit_sale"model="ir.ui.view">
            <fieldname="name">product.template.inherit.form</field>
            <fieldname="inherit_id"ref="sale.product_template_form_view_sale_order_button"/>
            <fieldname="model">product.template</field>
            <fieldname="arch"type="xml">
                <xpathexpr="//button[@name='action_view_sales']"position="replace"/>
            </field>
        </record>

        <recordid="product_template_view_form_inherit_stock"model="ir.ui.view">
            <fieldname="name">product.template.inherit.form</field>
            <fieldname="inherit_id"ref="stock.product_template_form_view_procurement_button"/>
            <fieldname="model">product.template</field>
            <fieldname="arch"type="xml">
                <buttonname="action_view_orderpoints"position="after">
                    <buttonclass="oe_stat_button"name="action_view_sales"
                        type="object"icon="fa-signal"attrs="{'invisible':[('sale_ok','=',False)]}"
                        groups="sales_team.group_sale_salesman"help="Soldinthelast365days">
                        <divclass="o_field_widgeto_stat_info">
                            <spanclass="o_stat_value">
                                <fieldname="sales_count"widget="statinfo"nolabel="1"class="mr4"/>
                                <fieldname="uom_name"/>
                            </span>
                            <spanclass="o_stat_text">Sold</span>
                        </div>
                    </button>
                </button>
            </field>
        </record>
    </data>
</flectra>
