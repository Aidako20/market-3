<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <templateid="sale_order_portal_content_inherit_sale_stock"name="OrdersShippingFollowup"inherit_id="sale.sale_order_portal_content">
        <xpathexpr="//div[@id='so_date']"position="after">
            <divclass="row"t-if="sale_order.incoterm">
                <divclass="mb-3col-6ml-auto">
                    <strong>Incoterm:</strong><spant-field="sale_order.incoterm"/>
                </div>
            </div>
        </xpath>
        <xpathexpr="//div[@id='informations']"position="inside">
            <tt-set="delivery_orders"t-value="sale_order.picking_ids.filtered(lambdapicking:picking.picking_type_id.code=='outgoing')"/>
            <tt-if="delivery_orders">
                <div>
                    <strong>DeliveryOrders</strong>
                </div>
                <div>
                    <tt-foreach="delivery_orders"t-as="i">
                        <tt-set="delivery_report_url"t-value="'/my/picking/pdf/%s?%s'%(i.id,keep_query())"/>
                        <divclass="d-flexflex-wrapalign-items-centerjustify-content-betweeno_sale_stock_picking">
                            <div>
                                <at-att-href="delivery_report_url">
                                    <spant-esc="i.name"/>
                                </a>
                                <divclass="smalld-lg-inline-blockml-3">Date:
                                    <spanclass="text-muted"t-field="i.date_done"t-options="{'date_only':True}"/>
                                    <spant-if="i.statein['draft','waiting','confirmed','assigned']"class="text-muted"t-field="i.scheduled_date"t-options="{'date_only':True}"/>
                                </div>
                            </div>
                            <spant-if="i.state=='done'"class="smallbadgebadge-successorders_label_text_align"><iclass="fafa-fwfa-truck"/><b>Shipped</b></span>
                            <spant-if="i.state=='cancel'"class="smallbadgebadge-dangerorders_label_text_align"><iclass="fafa-fwfa-times"/><b>Cancelled</b></span>
                            <spant-if="i.statein['draft','waiting','confirmed','assigned']"class="smallbadgebadge-infoorders_label_text_align"><iclass="fafa-fwfa-clock-o"/><b>Preparation</b></span>
                        </div>
                    </t>
                </div>
            </t>
        </xpath>
  </template>

</flectra>
