<?xmlversion="1.0"encoding="utf-8"?>
<flectra>

<templateid="assets_tests"name="WebsiteSaleCouponAssetsTests"inherit_id="web.assets_tests">
    <xpathexpr="."position="inside">
        <scripttype="text/javascript"src="/website_sale_coupon/static/tests/tours/website_sale_coupon.js"></script>
    </xpath>
</template>
<templateid="website_sale_coupon_cart_summary_show_img"inherit_id="website_sale.cart_summary">
    <xpathexpr="//td[hasclass('td-img')]/span"position="attributes">
        <attributename="t-if">notline.is_reward_lineornotline.sudo().product_id.image_128</attribute>
    </xpath>
    <xpathexpr="//td[hasclass('td-img')]/span"position="after">
        <spant-if="line.is_reward_lineandline.sudo().product_id.image_128">
            <imgt-att-src="image_data_uri(line.sudo().product_id.image_128)"class="imgo_image_64_maxrounded"/>
        </span>
    </xpath>
</template>
<templateid="website_sale_coupon_cart_hide_qty"inherit_id="website_sale.cart_lines">
    <xpathexpr="//td[hasclass('td-img')]/span"position="replace">
        <tt-if="line.is_reward_lineandline.sudo().product_id.image_128">
            <span>
                <imgt-att-src="image_data_uri(line.sudo().product_id.image_128)"class="imgo_image_64_maxrounded"t-att-alt="line.name_short"/>
            </span>
        </t>
        <tt-else="">
            <t>$0</t>
        </t>
    </xpath>
    <xpathexpr="//td[hasclass('td-qty')]/div"position="attributes">
        <attributename="t-att-style">line.is_reward_lineand"display:none;"</attribute>
    </xpath>
    <xpathexpr="//table[@id='cart_products']/tbody//tr//td[hasclass('td-product_name')]//div"position="attributes">
    <!--Can'txpath"//table[@id='cart_products']/tbody//tr"sinceoptional_productalreadyxpaththatone.
         Therewillbethesamexpathattributeclassonthesameelement.Lastinstalledmodulewillonlybetakenintoaccount-->
        <attributename="t-att-class">'reward_product'ifline.is_reward_lineelseNone</attribute>
    </xpath>
    <xpathexpr="//td[hasclass('td-qty')]/div"position="after">
        <tt-if="line.is_reward_line">
            <spanclass="js_quantitytext-muted"t-esc="int(line.product_uom_qty)"/>
        </t>
    </xpath>
    <xpathexpr="//del"position="attributes">
        <attributename="t-if">notline.is_reward_line</attribute>
    </xpath>
</template>
<templateid="cart_popover"inherit_id="website_sale.cart_popover"name="CartPopover">
    <xpathexpr="//div[hasclass('cart_line')]/div[1]/span"position="replace">
        <tt-if="line.is_reward_lineandline.sudo().product_id.image_128">
            <span>
                <imgt-att-src="image_data_uri(line.sudo().product_id.image_128)"class="imgo_image_64_maxrounded"t-att-alt="line.name_short"/>
            </span>
        </t>
        <tt-else="">
            <t>$0</t>
        </t>
    </xpath>
</template>
<templateid="sale_coupon_result"inherit_id="website_sale.coupon_form">
    <xpathexpr="//form[@name='coupon_code']"position="after">
        <tt-if="website_sale_orderandwebsite_sale_order.applied_coupon_ids">
            <tt-foreach="website_sale_order.applied_coupon_ids"t-as="coupon">
                <divclass="alertalert-successtext-leftmt16"role="alert">
                    Youhavesuccessfullyappliedfollowingpromocode:<strongt-esc="coupon.code"/>
                </div>
            </t>
        </t>
        <tt-if="website_sale_orderandwebsite_sale_order.promo_code">
            <divclass="alertalert-successtext-leftmt16"role="alert">
                Youhavesuccessfullyappliedfollowingpromocode:<strongt-esc="website_sale_order.promo_code"/>
            </div>
        </t>
        <tt-if="website_sale_orderandwebsite_sale_order.generated_coupon_ids">
            <tt-foreach="website_sale_order.generated_coupon_ids.filtered(lambdac:c.state!='expired')"t-as="coupon">
                <divclass="alertalert-successtext-leftmt16"role="alert">
                    Yourreward<strongt-esc="coupon.discount_line_product_id.name"/>isavailableonanextorderwiththispromocode:<strongt-esc="coupon.code"/>
                </div>
            </t>
        </t>
        <tt-if="request.params.get('code_not_available')">
            <divclass="alertalert-dangertext-leftmt16"role="alert">
                Invalidorexpiredpromocode.
            </div>
        </t>
        <tt-if="website_sale_order.get_promo_code_error(delete=False)">
            <divclass="alertalert-dangertext-leftmt16"role="alert">
                <tt-esc="website_sale_order.get_promo_code_error()"/>
            </div>
        </t>
    </xpath>
    <xpathexpr="//t[@name='code_not_available']"position="replace"/>
</template>

<templateid="cart_discount"name="ShowDiscountinSubtotal"customize_show="True"active="False"inherit_id="website_sale.total">
    <xpathexpr="//tr[@id='order_total_untaxed']"position="before">
        <trt-if="website_sale_orderandwebsite_sale_order.reward_amount">
          <tdclass="text-rightborder-0text-muted"title="Discountedamount">Discount:</td>
          <tdclass="text-xl-rightborder-0text-muted">
               <spant-field="website_sale_order.reward_amount"style="white-space:nowrap;"
                 class="monetary_field"
                 t-options='{
                          "widget":"monetary",
                          "display_currency":website_sale_order.currency_id,
                 }'/>
          </td>
        </tr>
    </xpath>
</template>

<templateid="reduction_coupon_code"inherit_id="website_sale.reduction_code">
    <xpathexpr="//t[@t-set='force_coupon']"position="replace">
        <tt-set='force_coupon't-value="website_sale_order.pricelist_id.codeorrequest.params.get('code_not_available')orwebsite_sale_order.promo_codeorwebsite_sale_order.generated_coupon_idsorwebsite_sale_order.applied_coupon_idsorwebsite_sale_order.get_promo_code_error(delete=False)"/>
    </xpath>
</template>

<templateid="cart_summary"name="Payment"inherit_id="website_sale.cart_summary">
    <xpathexpr="//table[@id='cart_products']/tbody/tr/td[hasclass('td-price')]/child::*"position="attributes">
        <attributename="t-att-style">'display:None;'iffree_shipping_linesandlineinfree_shipping_lineselse''</attribute>
    </xpath>
</template>
</flectra>
