<?xmlversion="1.0"encoding="utf-8"?>
<flectra>


<templateid="event_details"name="EventHeader">
    <tt-call="website_event.layout">
        <divname="event"itemscope="itemscope"itemtype="http://schema.org/Event">
            <tt-call="website.record_cover">
                <tt-set="_record"t-value="event"/>
                <tt-set="use_filters"t-value="True"/>
                <tt-set="use_size"t-value="True"/>
                <tt-set="use_text_align"t-value="True"/>

                <divclass="containerd-flexflex-columnflex-grow-1justify-content-around">
                    <divclass="o_wevent_event_title">
                        <spant-if="event.is_participating"class="badgebadge-successo_wevent_badge"><iclass="fafa-checkmr-2"/>Registered</span>
                        <h1t-field="event.name"class="o_wevent_event_name"itemprop="name"placeholder="EventTitle"/>
                        <h2t-field="event.subtitle"class="o_wevent_event_subtitle"placeholder="EventSubtitle"/>
                    </div>
                </div>
                <divclass="container">
                    <tt-call="website_event.registration_template"/>
                </div>
            </t>
            <tt-raw="0"/>
        </div>
    </t>
</template>

<!--Event-Description-->
<templateid="event_description_full"name="EventDescription"track="1">
    <tt-call="website_event.event_details">
        <sectionclass="bg-200mt-n5">
            <divclass="containeroverflow-hidden">
                <divclass="rowno-guttersmt-n4mb-3">
                    <!--Description-->
                    <divid="o_wevent_event_main_col"class="col-lg-8bg-whitepx-3pt-5pb-0shadow-sm">
                        <spant-field="event.description"itemprop="description"/>
                    </div>
                    <divclass="col-lg-4bg-lightshadow-smd-print-none">
                        <!--Date&Time-->
                        <divclass="o_wevent_sidebar_block">
                            <h6class="o_wevent_sidebar_title">Date&amp;Time</h6>
                            <divclass="d-flex">
                                <h5t-field="event.with_context(tz=event.date_tz).date_begin"class="my-1mr-1"t-options="{'date_only':'true','format':'EEEE'}"/>
                                <h5class="my-1"t-field="event.with_context(tz=event.date_tz).date_begin"t-options="{'date_only':'true','format':'long'}"itemprop="startDate"t-att-datetime="event.date_begin"/>
                            </div>
                            <tt-if="notevent.is_one_day">Start-</t>
                            <spant-field="event.with_context(tz=event.date_tz).date_begin"t-options="{'time_only':'true','format':'short'}"/>
                            <tt-if="event.is_one_day">
                                <iclass="fafa-long-arrow-rightmx-1"/>
                                <spant-field="event.with_context(tz=event.date_tz).date_end"t-options="{'time_only':'true','format':'short'}"/>
                            </t>
                            <tt-else="">
                                <iclass="fafa-long-arrow-downd-blocktext-mutedmx-3my-2"style="font-size:1.5rem"/>
                                <divclass="d-flex">
                                    <h5t-field="event.with_context(tz=event.date_tz).date_end"class="my-1mr-1"t-options="{'date_only':'true','format':'EEEE'}"/>
                                    <h5class="my-1"t-field="event.with_context(tz=event.date_tz).date_end"t-options="{'date_only':'true','format':'long'}"/>
                                </div>
                                <tt-if="notevent.is_one_day">End-</t>
                                <spant-field="event.with_context(tz=event.date_tz).date_end"t-options="{'time_only':'true','format':'short'}"/>
                            </t>
                            <!--Timezone-->
                            <smallt-esc="event.date_tz"class="d-blockmy-3text-muted"/>

                            <divclass="dropdown">
                                <iclass="fafa-calendarmr-1"/>
                                <ahref="#"role="button"data-toggle="dropdown">AddtoCalendar</a>
                                <divclass="dropdown-menu">
                                    <at-att-href="iCal_url"class="dropdown-item">iCal/Outlook</a>
                                    <at-att-href="google_url"class="dropdown-item"target="_blank">Google</a>
                                </div>
                            </div>
                        </div>
                        <!--Location-->
                        <divt-if="event.address_id"class="o_wevent_sidebar_block">
                            <h6class="o_wevent_sidebar_title">Location</h6>
                            <h4t-field="event.address_id"class=""t-options='{
                                "widget":"contact",
                                "fields":["name"]
                            }'/>
                            <divitemprop="location"class="mb-2"t-field="event.address_id"t-options='{
                                "widget":"contact",
                                "fields":["address"],
                                "no_marker":True
                            }'/>
                            <divclass="mb-3"t-field="event.address_id"t-options='{
                                "widget":"contact",
                                "fields":["phone","mobile","email"]
                            }'/>
                            <iclass="fafa-map-markerfa-fw"role="img"/>
                            <at-att-href="event._google_map_link()"target="_blank">Getthedirection</a>
                        </div>
                        <!--Organizer-->
                        <divt-if="event.organizer_id"class="o_wevent_sidebar_block">
                            <h6class="o_wevent_sidebar_title">Organizer</h6>
                            <h4t-field="event.organizer_id"/>
                            <divitemprop="location"t-field="event.organizer_id"t-options="{'widget':'contact','fields':['phone','mobile','email']}"/>
                        </div>
                        <!--Social-->
                        <divclass="o_wevent_sidebar_block">
                            <h6class="o_wevent_sidebar_title">SHARE</h6>
                            <pclass="mb-2">Findoutwhatpeopleseeandsayaboutthisevent,andjointheconversation.</p>
                            <tt-snippet-call="website.s_share">
                                <tt-set="_no_title"t-value="True"/>
                                <tt-set="_classes"t-valuef="o_wevent_sidebar_socialmx-n1"/>
                                <tt-set="_link_classes"t-valuef="o_wevent_social_link"/>
                            </t>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </t>
</template>

<!--Event-Registration-->
<templateid="registration_template"name="Registration">
    <divt-if="request.env.user.has_group('event.group_event_manager')"class="alertalert-inforounded-0o_website_event_configurationo_not_editable"role="status">
        <at-attf-href="/web#id=#{event.id}&amp;menu_id=#{backend_menu_id}&amp;view_type=form&amp;model=event.event">
            <iclass="fafa-pencilmr-2"role="img"aria-label="Edit"title="Editeventregistrationinbackend"/><em>ConfigureEventTickets</em>
        </a>
    </div>
    <divt-if="toast_message"class="o_wevent_register_toasterd-none"t-att-data-message="toast_message"/>
    <divt-if="notevent.event_registrations_open"class="bg-whitemb-5">
        <divclass="alertalert-infomb-0d-flexjustify-content-betweenalign-items-center"role="status">
            <tt-if="event.start_sale_dateandevent.start_sale_date&gt;datetime.date.today()">
                <emclass="col-md-8">TicketSalesstartingon<tt-esc="event.start_sale_date"/></em>
                <buttonclass="btnbtn-dangermr-1ml-3col-md-4" disabled="1">Registrationsnotyetopen</button>
            </t>
            <tt-else="">
                <divclass="col-md-8">
                    <emt-if="event.event_registrations_sold_out">TicketsforthisEventare<b>SoldOut</b></em>
                    <emt-else="">Registrationsare<b>closed</b></em>
                </div>
                <buttonclass="btnbtn-dangerml-3col-md-4py-2"disabled="1">
                    <spant-if="event.event_registrations_sold_out">SoldOut</span>
                    <spant-else="">RegistrationsClosed</span>
                </button>
            </t>
        </div>
    </div>
    <formt-if="event.event_registrations_openand(notevent.event_ticket_idsorany(notticket.is_expiredforticketinevent.event_ticket_ids))"
        id="registration_form"
        class="mb-5"
        t-attf-action="/event/#{slug(event)}/registration/new"method="post"
        itemscope="itemscope"itemprop="offers"itemtype="http://schema.org/AggregateOffer">
        <inputtype="hidden"name="csrf_token"t-att-value="request.csrf_token()"/>
        <divid="o_wevent_tickets"class="bg-whiteshadow-smo_wevent_js_ticket_details"data-folded-by-default="0">
            <tt-set="tickets"t-value="event.event_ticket_ids.filtered(lambdaticket:notticket.is_expired)"/>
            <!--Ifsometicketsexpiredandthereisonlyonetypeleft,wekeepthesamelayout-->
            <tt-if="len(event.event_ticket_ids)&gt;1">
                <divclass="d-flexjustify-content-betweenalign-items-centerpy-2pl-3pr-2border-bottom">
                    <divid="price-range"class="pr-3d-none"/>
                    <spant-if="notevent.event_registrations_open"class="text-danger">
                        <iclass="fafa-banmr-2"/>SoldOut
                    </span>
                    <divt-if="event.is_participating"id="registered"class="ml-autopr-3d-none">
                        <spanclass="o_wevent_badgebadgebadge-successml-3">
                            <iclass="fafa-checkmr-2"/>Registered
                        </span>
                    </div>
                    <ahref="#"role="button"class="btno_wevent_registration_btntext-left"data-target="#o_wevent_tickets_collapse">
                        <spanclass="py-2">Tickets</span>
                        <spanclass="closed-none">×</span>
                    </a>
                </div>
                <divid="o_wevent_tickets_collapse"class="collapseshow">
                    <divt-foreach="tickets"t-as="ticket"class="rowpx-3py-3mx-0bg-lightborder-bottom">
                        <divclass="col-md-8col-xs-12p-0"itemscope="itemscope"itemtype="http://schema.org/Offer">
                            <h5itemprop="name"t-field="ticket.name"class="my-0"/>
                            <tt-if="ticket.description">
                                <smallt-field="ticket.description"class="text-mutedpy-2"/>
                                <br/>
                            </t>
                            <smallt-if="ticket.end_sale_dateandticket.sale_availableandnotticket.is_expired"class="text-mutedmr-3"itemprop="availabilityEnds">Salesendon<spanitemprop="priceValidUntil"t-field="ticket.end_sale_date"/></small>
                            <smallt-if="ticket.start_sale_dateandnotticket.sale_availableandnotticket.is_expired"class="text-mutedmr-3"itemprop="availabilityEnds">Salesstarton<spanitemprop="priceValidUntil"t-field="ticket.start_sale_date"/></small>
                        </div>
                        <divclass="col-md-4col-xs-12p-0d-flexalign-items-centerjustify-content-between">
                            <divclass="o_wevent_registration_multi_select"/>
                            <divclass="w-automl-auto">
                                <selectt-if="notticket.is_expiredandticket.sale_available"
                                    t-attf-name="nb_register-#{ticket.id}"
                                    class="custom-select">
                                    <tt-set="seats_max_ticket"t-value="(notticket.seats_limitedorticket.seats_available&gt;9)and10orticket.seats_available+1"/>
                                    <tt-set="seats_max_event"t-value="(notevent.seats_limitedorevent.seats_available&gt;9)and10orevent.seats_available+1"/>
                                    <tt-set="seats_max"t-value="min(seats_max_ticket,seats_max_event)"/>
                                    <tt-foreach="range(0,seats_max)"t-as="nb">
                                        <optiont-esc="nb"t-att-selected="len(ticket)==0andnb==0and'selected'"/>
                                    </t>
                                </select>
                                <divt-else=""class="text-danger">
                                    <spant-if="notticket.sale_availableandnotticket.is_expiredandticket.is_launched()">SoldOut</span>
                                    <spant-if="ticket.is_expired">Expired</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <divclass="rowno-gutters">
                        <divclass="col-md-4offset-md-8py-2pl-md-0pr-md-2">
                            <buttontype="submit"class="btnbtn-primaryo_wait_lazy_jsbtn-blocka-submit"disabled=""t-attf-id="#{event.id}">
                                Register
                                <tt-if="event.seats_limitedandevent.seats_maxandevent.seats_available&lt;=(event.seats_max*0.2)">
                                    (only<tt-esc="event.seats_available"/>available)
                                </t>
                            </button>
                        </div>
                    </div>
                </div>
            </t>
            <divt-else=""class="o_wevent_registration_single">
                <divclass="rowp-2pl-3">
                    <divclass="col-lg-8d-flexflex-columnsalign-items-center"itemscope="itemscope"itemtype="http://schema.org/Offer">
                        <h6itemprop="name"class="my-0pr-3border-righttext-dark">
                            <spant-if="tickets"t-field="tickets.name"/>
                            <spant-else="">Registration</span>
                        </h6>
                        <smallt-if="tickets.end_sale_dateandtickets.sale_availableandnottickets.is_expired"class="text-mutedmr-3"itemprop="availabilityEnds">Salesendon<spanitemprop="priceValidUntil"t-field="tickets.end_sale_date"/></small>
                        <divclass="ml-autoo_wevent_nowrap">
                            <tt-if="event.event_registrations_open">
                                <spanclass="text-darkfont-weight-boldalign-middlepr-2">Qty</span>
                                <linkitemprop="availability"content="http://schema.org/InStock"/>
                                <selectt-att-name="'nb_register-%s'%(tickets.idifticketselse0)"class="w-autocustom-select">
                                    <tt-set="seats_max_ticket"t-value="(notticketsornottickets.seats_limitedortickets.seats_available&gt;9)and10ortickets.seats_available+1"/>
                                    <tt-set="seats_max_event"t-value="(notevent.seats_limitedorevent.seats_available&gt;9)and10orevent.seats_available+1"/>
                                    <tt-set="seats_max"t-value="min(seats_max_ticket,seats_max_event)ifticketselseseats_max_event"/>
                                    <tt-foreach="range(0,seats_max)"t-as="nb">
                                        <optiont-esc="nb"t-att-selected="nb==1and'selected'"/>
                                    </t>
                                </select>
                            </t>
                            <tt-else="">
                                <spanitemprop="availability"content="http://schema.org/SoldOut"class="text-danger">
                                    <iclass="fafa-banmr-2"/>SoldOut
                                </span>
                            </t>
                        </div>
                    </div>
                    <divclass="col-lg-4pt-3pt-lg-0pl-2pl-lg-0">
                        <buttontype="submit"class="btnbtn-primaryo_wait_lazy_jsbtn-blocka-submit"t-attf-id="#{event.id}"disabled="disabled">
                            Register
                            <tt-if="event.seats_limitedandevent.seats_maxandevent.seats_available&lt;=(event.seats_max*0.2)">
                                (only<tt-esc="event.seats_available"/>available)
                            </t>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </form>
</template>

<templateid="registration_attendee_details"name="RegistrationAttendeeDetails">
    <divid="modal_attendees_registration"class="modalfade"tabindex="-1"role="dialog">
        <divclass="modal-dialogmodal-lg"role="document">
            <formid="attendee_registration"t-attf-action="/event/#{slug(event)}/registration/confirm"method="post"class="js_website_submit_form">
                <inputtype="hidden"name="csrf_token"t-att-value="request.csrf_token()"/>
                <divclass="modal-content">
                    <divclass="modal-headeralign-items-center">
                        <h4class="modal-title">Attendees</h4>
                        <buttontype="button"class="close"data-dismiss="modal"aria-label="Close"><span>×</span></button>
                    </div>
                    <tt-set="counter_type"t-value="1"/>
                    <tt-set="counter"t-value="0"/>
                    <tt-foreach="tickets"t-as="ticket"t-if="availability_check">
                        <tt-foreach="range(1,ticket['quantity']+1)"t-as="att_counter"name="attendee_loop">
                            <tt-set="counter"t-value="counter+1"/>
                            <divclass="modal-bodybg-lightborder-bottom">
                                <h5class="mt-1pb-2border-bottom">Ticket#<spant-esc="counter"/><smallclass="text-muted">-<spant-esc="ticket['name']"/></small></h5>
                                <divclass="row">
                                    <divclass="col-lgmy-2">
                                        <label>Name</label>
                                        <inputclass="form-control"type="text"t-attf-name="#{counter}-name"required="Thisfieldisrequired"/>
                                    </div>
                                    <divclass="col-lgmy-2">
                                        <label>Email</label>
                                        <inputclass="form-control"type="email"t-attf-name="#{counter}-email"required="Thisfieldisrequired"/>
                                    </div>
                                    <divclass="col-lgmy-2">
                                        <label>Phone<small>(Optional)</small></label>
                                        <inputclass="form-control"type="tel"t-attf-name="#{counter}-phone"/>
                                    </div>
                                    <inputclass="d-none"type="text"t-attf-name="#{counter}-event_ticket_id"t-attf-value="#{ticket['id']}"/>
                                </div>
                            </div>
                        </t>
                        <tt-set="counter_type"t-value="counter_type+1"/>
                    </t>
                    <tt-if="notavailability_check">
                        <divclass="modal-bodybg-lightborder-bottom">
                            <strong>Youorderedmoreticketsthanavailableseats</strong>
                        </div>
                    </t>
                    <divclass="modal-footerborder-0justify-content-between">
                        <buttontype="button"class="btnbtn-secondaryjs_goto_event"data-dismiss="modal">Cancel</button>
                        <buttontype="submit"class="btnbtn-primary"t-if="availability_check">Continue</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</template>

<templateid="registration_complete"name="RegistrationCompleted">
    <tt-call="website_event.layout">
        <divclass="containermy-5o_wereg_confirmed">
            <divclass="rowmb-3">
                <divclass="col-12">
                    <h3>Registrationconfirmed!</h3>
                    <spanclass="h4text-muted"t-esc="event.name"/>
                </div>
            </div>
            <divclass="rowmb-3o_wereg_confirmed_attendees">
                <divclass="col-md-4col-xs-12mt-3"t-foreach="attendees"t-as="attendee">
                    <divclass="d-flexflex-column">
                        <spanclass="font-weight-bold">
                            <tt-if="attendee.name"t-esc="attendee.name"/>
                            <tt-else="">N/A</t>
                        </span>
                        <span>
                            <iclass="fafa-envelopemr-2  "></i>
                            <tt-if="attendee.email"t-esc="attendee.email"/>
                            <tt-else="">N/A</t>
                        </span>
                        <span>
                            <iclass="fafa-phonemr-2"></i>
                            <tt-if="attendee.phone"t-esc="attendee.phone"/>
                            <tt-else="">N/A</t>
                        </span>
                        <span>
                            <iclass="fafa-ticketmr-2"></i>
                            <tt-if="attendee.event_ticket_id"t-esc="attendee.event_ticket_id.name"/>
                            <tt-else="">N/A</t>
                            (ref:<tt-esc="attendee.id"/>)
                        </span>
                    </div>
                </div>
            </div>
            <divclass="rowmb-3">
                <divclass="col">
                    <p><b>Start</b><spanitemprop="startDate"t-esc="event.date_begin_located"/><br/><b>End</b><spanitemprop="endDate"t-esc="event.date_end_located"/></p>
                    <divclass="mt-4">
                        <h5t-field="event.address_id"class="text-secondaryfont-weight-bold"t-options='{
                            "widget":"contact",
                            "fields":["name"]
                            }'/>
                        <aitemprop="location"t-att-href="event.google_map_link()"target="_BLANK"temprop="location"t-field="event.address_id"t-options='{
                            "widget":"contact",
                            "fields":["address"]
                            }'/>
                        <divitemprop="location"t-field="event.address_id"t-options='{
                            "widget":"contact",
                            "fields":["phone","mobile","email"]
                            }'/>
                    </div>
                    <divid="add_to_calendar"class="mt-4d-flexflex-columnflex-md-row">
                        <arole="button"class="btnbtn-primary"t-att-href="iCal_url">
                            <iclass="fafa-fwfa-calendar"/>AddtoiCal/Outlook
                        </a>
                        <arole="button"class="btnbtn-primaryml-md-2mt-2mt-md-0"t-att-href="google_url"target='_blank'>
                            <iclass="fafa-fwfa-calendar"/>AddtoGoogleCalendar
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </t>
</template>

<!--EditOptions-->
<templateid="fold_register_details"inherit_id="website_event.registration_template"active="False"customize_show="True"name="Foldticketdetails">
    <xpathexpr="//div[@id='o_wevent_tickets']"position="attributes">
        <attributename="data-folded-by-default">1</attribute>
    </xpath>
    <xpathexpr="//div[@id='registered']"position="attributes">
        <attributename="class">ml-autopr-3</attribute>
    </xpath>
    <xpathexpr="//div[@id='price-range']"position="attributes">
        <attributename="class">ml-0pr-3</attribute>
    </xpath>
    <xpathexpr="//div[@id='o_wevent_tickets_collapse']"position="attributes">
        <attributename="class">collapse</attribute>
    </xpath>
    <xpathexpr="//a[hasclass('o_wevent_registration_btn')]"position="attributes">
        <attributename="class">btnbtn-primaryo_wevent_registration_btncollapsed</attribute>
        <attributename="data-toggle">collapse</attribute>
    </xpath>
    <xpathexpr="//span[hasclass('close')]"position="attributes">
        <attributename="class">closed-none</attribute>
    </xpath>
</template>

</flectra>
