<?xmlversion="1.0"?>
<flectra>
    <data>
        <!--FORUMACTIONS-->
        <recordid="action_forum_favorites"model="ir.actions.act_window">
            <fieldname="name">Usersfavoriteposts</field>
            <fieldname="res_model">forum.post</field>
            <fieldname="view_mode">tree,form</field>
            <fieldname="domain">[('forum_id','=',active_id),('favourite_count','>',0),('state','in',('active','close'))]</field>
        </record>

        <recordid="action_forum_posts"model="ir.actions.act_window">
            <fieldname="name">Posts</field>
            <fieldname="res_model">forum.post</field>
            <fieldname="view_mode">tree,form</field>
            <fieldname="domain">[('forum_id','=',active_id),('parent_id','=',False),('state','in',('active','close'))]</field>
        </record>

        <!--MAINFORUMMENU-->
        <menuitemname="Forum"id="menu_website_forum"
            parent="website.menu_website_configuration"sequence="50"groups="website.group_website_designer"/>

        <menuitemname="Forum"id="menu_website_forum_global"
            parent="website.menu_website_global_configuration"sequence="170"groups="website.group_website_designer"/>

        <!--FORUMVIEWS-->
        <recordid="view_forum_forum_list"model="ir.ui.view">
            <fieldname="name">forum.forum.list</field>
            <fieldname="model">forum.forum</field>
            <fieldname="arch"type="xml">
                <treestring="Forums">
                    <fieldname="sequence"widget="handle"/>
                    <fieldname="name"/>
                    <fieldname="website_id"groups="website.group_multi_website"/>
                    <fieldname="total_posts"/>
                    <fieldname="total_views"/>
                    <fieldname="total_answers"/>
                    <fieldname="total_favorites"/>
                    <fieldname="active"invisible="1"/>
                </tree>
            </field>
        </record>

        <recordid="view_forum_forum_form"model="ir.ui.view">
            <fieldname="name">forum.forum.form</field>
            <fieldname="model">forum.forum</field>
            <fieldname="arch"type="xml">
                <formstring="Forum">
                    <sheet>
                        <divclass="oe_button_box"name="button_box">
                            <buttonname="%(action_forum_posts)d"type="action"class="oe_stat_button"icon="fa-comments">
                                <divclass="o_form_fieldo_stat_info">
                                    <spanclass="o_stat_value">
                                        <fieldname="total_posts"/>
                                    </span>
                                    <spanclass="o_stat_text">Posts</span>
                                </div>
                            </button>
                            <buttonname="%(action_forum_favorites)d"class="oe_stat_button"icon="fa-star"type="action">
                                <divclass="o_form_fieldo_stat_info">
                                    <spanclass="o_stat_value">
                                        <fieldname="total_favorites"/>
                                    </span>
                                    <spanclass="o_stat_text">Favorites</span>
                                </div>
                            </button>
                            <buttontype="object"class="oe_stat_button"icon="fa-globe"name="go_to_website">
                                <divclass="o_form_fieldo_stat_info">
                                    <spanclass="o_stat_text">Goto<br/>Website</span>
                                </div>
                            </button>
                        </div>
                        <fieldname="active"invisible="1"/>
                        <widgetname="web_ribbon"title="Archived"bg_color="bg-danger"attrs="{'invisible':[('active','=',True)]}"/>
                        <fieldname="image_1920"widget="image"options="{'preview_image':'image_128'}"class="oe_avatar"/>
                        <divclass="oe_title">
                            <labelfor="name"class="oe_edit_only"/>
                            <h1>
                                <fieldname="name"/>
                            </h1>
                        </div>
                        <group>
                            <group>
                                <fieldname="mode"widget="radio"required="True"/>
                                <fieldname="website_id"options="{'no_create':True}"groups="website.group_multi_website"/>
                            </group>
                        </group>
                        <notebook>
                            <pagename="options"string="Options">
                                <group>
                                    <groupstring="OrderandVisibility"name="group_order">
                                        <fieldname="default_order"string="DefaultSort"/>
                                        <fieldname="privacy"widget="radio"attrs="{'required':True}"/>
                                        <fieldname="authorized_group_id"options="{'no_create':True}"attrs="{'invisible':[('privacy','!=','private')],'required':[('privacy','=','private')]}"/>
                                        <labelfor="relevancy_post_vote"string="RelevanceComputation"groups="base.group_no_one"attrs="{'invisible':[('default_order','!=','relevancydesc')]}"/>
                                        <divgroups="base.group_no_one"class="o_row"attrs="{'invisible':[('default_order','!=','relevancydesc')]}">
                                            (votes-1)**<fieldname="relevancy_post_vote"/>/(days+2)**<fieldname="relevancy_time_decay"/>
                                        </div>
                                    </group>
                                </group>
                                <group>
                                    <fieldname="description"nolabel="1"placeholder="Descriptionvisibleonwebsite"/>
                                </group>
                            </page>
                            <pagename="karma_gains"string="KarmaGains">
                                <groupname="karma_gain_details">
                                    <group>
                                        <fieldname="karma_gen_question_new"/>
                                        <fieldname="karma_gen_question_upvote"/>
                                        <fieldname="karma_gen_question_downvote"/>
                                        <fieldname="karma_gen_answer_upvote"/>
                                        <fieldname="karma_gen_answer_downvote"/>
                                        <fieldname="karma_gen_answer_accept"/>
                                        <fieldname="karma_gen_answer_accepted"/>
                                        <fieldname="karma_gen_answer_flagged"/>
                                    </group>
                                </group>
                            </page>
                            <pagename="karma_rights"string="KarmaRelatedRights">
                                <group>
                                    <groupname="karma_rights_left">
                                        <fieldname="karma_ask"/>
                                        <fieldname="karma_answer"/>
                                        <fieldname="karma_upvote"/>
                                        <fieldname="karma_downvote"/>
                                        <fieldname="karma_edit_own"/>
                                        <fieldname="karma_edit_all"/>
                                        <fieldname="karma_close_own"/>
                                        <fieldname="karma_close_all"/>
                                        <fieldname="karma_unlink_own"/>
                                        <fieldname="karma_unlink_all"/>
                                        <fieldname="karma_dofollow"/>
                                        <fieldname="karma_answer_accept_own"/>
                                        <fieldname="karma_answer_accept_all"/>
                                    </group>
                                    <groupname="karma_rights_right">
                                        <fieldname="karma_editor"/>
                                        <fieldname="karma_comment_own"/>
                                        <fieldname="karma_comment_all"/>
                                        <fieldname="karma_comment_convert_own"/>
                                        <fieldname="karma_comment_convert_all"/>
                                        <fieldname="karma_comment_unlink_own"/>
                                        <fieldname="karma_comment_unlink_all"/>
                                        <fieldname="karma_post"/>
                                        <fieldname="karma_flag"/>
                                        <fieldname="karma_moderate"/>
                                        <fieldname="karma_edit_retag"/>
                                        <fieldname="karma_tag_create"/>
                                    </group>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                    <divclass="oe_chatter">
                        <fieldname="message_follower_ids"groups="base.group_user"/>
                        <fieldname="message_ids"/>
                    </div>
                </form>
            </field>
        </record>

        <recordid="forum_view_search"model="ir.ui.view">
            <fieldname="name">forum.forum.search</field>
            <fieldname="model">forum.forum</field>
            <fieldname="arch"type="xml">
                <searchstring="Forum">
                    <fieldname="name"/>
                    <filterstring="Archived"name="inactive"domain="[('active','=',False)]"/>
                </search>
            </field>
        </record>

        <recordid="action_forum_forum"model="ir.actions.act_window">
            <fieldname="name">Forums</field>
            <fieldname="res_model">forum.forum</field>
            <fieldname="view_mode">tree,form</field>
        </record>

        <menuitemid="menu_forum_global"parent="menu_website_forum_global"name="Forums"action="action_forum_forum"sequence="10"/>

        <!--POSTVIEWS-->
        <recordid="view_forum_post_list"model="ir.ui.view">
            <fieldname="name">forum.post.list</field>
            <fieldname="model">forum.post</field>
            <fieldname="arch"type="xml">
                <treestring="ForumPosts">
                    <fieldname="name"/>
                    <fieldname="active"invisible="1"/>
                    <fieldname="forum_id"/>
                    <fieldname="views"sum="TotalViews"/>
                    <fieldname="child_count"sum="TotalAnswers"/>
                    <fieldname="favourite_count"sum="TotalFavorites"/>
                    <fieldname="website_id"groups="website.group_multi_website"/>
                    <fieldname="state"/>
                </tree>
            </field>
        </record>

        <recordid="view_forum_post_form"model="ir.ui.view">
            <fieldname="name">forum.post.form</field>
            <fieldname="model">forum.post</field>
            <fieldname="arch"type="xml">
                <formstring="ForumPost">
                    <sheet>
                        <divclass="oe_button_box"name="button_box">
                            <buttontype="object"class="oe_stat_button"icon="fa-globe"name="go_to_website">
                                <divclass="o_form_fieldo_stat_info">
                                    <spanclass="o_stat_text">Goto<br/>Website</span>
                                </div>
                            </button>
                        </div>
                        <widgetname="web_ribbon"title="Archived"bg_color="bg-danger"attrs="{'invisible':[('active','=',True)]}"/>
                        <labelfor="name"class="oe_edit_only"/>
                        <h1>
                            <fieldname="name"placeholder="Name"/>
                        </h1>
                        <group>
                            <groupname="forum_details">
                                <fieldname="active"invisible="1"/>
                                <fieldname="forum_id"/>
                                <fieldname="website_id"groups="website.group_multi_website"/>
                                <fieldname="parent_id"/>
                            </group>
                            <groupname="post_details">
                                <fieldname="tag_ids"widget="many2many_tags"/>
                                <fieldname="state"/>
                                <fieldname="closed_reason_id"/>
                                <fieldname="closed_uid"/>
                                <fieldname="closed_date"/>
                            </group>
                            <groupname="creation_details">
                                <fieldname="create_uid"/>
                                <fieldname="create_date"/>
                                <fieldname="write_uid"/>
                                <fieldname="write_date"/>
                            </group>
                            <groupname="post_statistics">
                                <fieldname="is_correct"/>
                                <fieldname="views"/>
                                <fieldname="vote_count"/>
                                <fieldname="favourite_count"/>
                                <fieldname="child_count"/>
                                <fieldname="relevancy"/>
                            </group>
                        </group>
                        <groupname="answers"string="Answers"attrs="{'invisible':[('parent_id','!=',False)]}">
                            <fieldname="child_ids"nolabel="1">
                                <tree>
                                    <fieldname="create_uid"string="Answeredby"/>
                                    <fieldname="vote_count"/>
                                    <fieldname="state"/>
                                    <fieldname="is_correct"/>
                                </tree>
                            </field>
                        </group>
                    </sheet>
                    <divclass="oe_chatter">
                        <fieldname="message_follower_ids"groups="base.group_user"/>
                        <fieldname="message_ids"/>
                    </div>
                </form>
            </field>
        </record>

        <recordid="view_forum_post_search"model="ir.ui.view">
            <fieldname="name">forum.post.search</field>
            <fieldname="model">forum.post</field>
            <fieldname="arch"type="xml">
                <searchstring="SearchinPost">
                    <fieldname="name"string="Content"filter_domain="['|',('name','ilike',self),('content','ilike',self)]"/>
                    <fieldname="create_uid"/>
                    <fieldname="forum_id"/>
                    <fieldname="tag_ids"string="Tag"/>
                    <filterstring="Posts"name="posts"domain="[('parent_id','=',False)]"/>
                    <filterstring="Answers"name="answers"domain="[('parent_id','!=',False)]"/>
                    <filterstring="AcceptedAnswer"name="accepted_answer"domain="[('is_correct','!=',False),('parent_id','!=',False)]"/>
                    <filterstring="AnsweredPosts"name="answered_posts"domain="[('child_count','!=',0),('parent_id','=',False)]"/>
                    <separator/>
                    <filtername="filter_create_date"date="create_date"/>
                    <filtername="filter_write_date"date="write_date"/>
                    <separator/>
                    <filterstring="Archived"name="inactive"domain="[('active','=',False)]"/>
                    <groupexpand="0"string="GroupBy">
                        <filterstring="Forum"name="forum"domain="[]"context="{'group_by':'forum_id'}"/>
                        <filterstring="Author"name="author"domain="[]"context="{'group_by':'create_uid'}"/>
                        <filterstring="Post"name="post"domain="[]"context="{'group_by':'parent_id'}"/>
                    </group>
                </search>
            </field>
        </record>

        <recordmodel="ir.ui.view"id="view_forum_post_graph">
            <fieldname="name">forum.post.graph</field>
            <fieldname="model">forum.post</field>
            <fieldname="arch"type="xml">
                <graphstring="GraphofPosts"sample="1">
                    <fieldname="write_date"interval="month"type="col"/>
                    <fieldname="forum_id"type="row"/>
                </graph>
            </field>
        </record>

        <recordid="action_forum_post"model="ir.actions.act_window">
            <fieldname="name">ForumPosts</field>
            <fieldname="res_model">forum.post</field>
            <fieldname="view_mode">tree,form,graph</field>
            <fieldname="view_id"ref="view_forum_post_list"/>
            <fieldname="search_view_id"ref="view_forum_post_search"/>
            <fieldname="context">{'search_default_posts':1}</field>
            <fieldname="help"type="html">
                <pclass="o_view_nocontent_smiling_face">
                    Createanewforumpost
                </p>
            </field>
        </record>

        <menuitemid="menu_forum_posts"parent="menu_website_forum"name="Posts"action="action_forum_post"sequence="20"/>

        <!--TAGVIEWS-->
        <recordid="forum_tag_view_list"model="ir.ui.view">
            <fieldname="name">forum.tag.list</field>
            <fieldname="model">forum.tag</field>
            <fieldname="arch"type="xml">
                <treestring="Tags"editable="bottom">
                    <fieldname="name"/>
                    <fieldname="forum_id"options="{'no_create_edit':True}"/>
                </tree>
            </field>
        </record>

        <recordid="forum_tag_view_form"model="ir.ui.view">
            <fieldname="name">forum.tag.form</field>
            <fieldname="model">forum.tag</field>
            <fieldname="arch"type="xml">
                <formstring="Tag">
                    <sheet>
                        <group>
                            <fieldname="name"/>
                            <fieldname="forum_id"options="{'no_create_edit':True}"/>
                        </group>
                    </sheet>
                    <divclass="oe_chatter">
                        <fieldname="message_follower_ids"groups="base.group_user"/>
                        <fieldname="message_ids"/>
                    </div>
                </form>
            </field>
        </record>

        <recordid="forum_tag_action"model="ir.actions.act_window">
            <fieldname="name">Tags</field>
            <fieldname="res_model">forum.tag</field>
            <fieldname="view_mode">tree,form</field>
            <fieldname="help"type="html">
                <pclass="o_view_nocontent_smiling_face">
                    Createanewtag
                </p>
            </field>
        </record>

        <menuitemid="menu_forum_tag_global"parent="menu_website_forum_global"name="Tags"action="forum_tag_action"sequence="30"/>

        <!--POSTREASONVIEWS-->
        <recordid="forum_post_reason_view_list"model="ir.ui.view">
            <fieldname="name">forum.post.reason.list</field>
            <fieldname="model">forum.post.reason</field>
            <fieldname="arch"type="xml">
                <treestring="Reasons"editable="bottom">
                    <fieldname="name"/>
                    <fieldname="reason_type"/>
                </tree>
            </field>
        </record>

        <recordid="forum_post_reasons_action"model="ir.actions.act_window">
            <fieldname="name">PostCloseReasons</field>
            <fieldname="res_model">forum.post.reason</field>
            <fieldname="view_mode">tree</field>
        </record>


        <menuitemid="menu_forum_rank_global"parent="menu_website_forum_global"name="Ranks"action="gamification.gamification_karma_ranks_action"sequence="5"/>
        <menuitemid="menu_forum_badges"parent="menu_website_forum_global"name="Badges"action="gamification.badge_list_action"sequence="40"/>
        <menuitemid="menu_forum_post_reasons"parent="menu_website_forum_global"name="CloseReasons"action="forum_post_reasons_action"sequence="50"/>
    </data>
</flectra>
