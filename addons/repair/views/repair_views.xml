<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <data>

    <recordid="view_repair_order_tree"model="ir.ui.view">
        <fieldname="name">repair.tree</field>
        <fieldname="model">repair.order</field>
        <fieldname="arch"type="xml">
            <treestring="Repairsorder"multi_edit="1"sample="1">
                <fieldname="name"/>
                <fieldname="product_id"readonly="1"optional="show"/>
                <fieldname="product_qty"optional="hide"string="Quantity"/>
                <fieldname="product_uom"string="UnitofMeasure"readonly="1"groups="uom.group_uom"optional="hide"/>
                <fieldname="user_id"optional="hide"widget='many2one_avatar_user'/>
                <fieldname="partner_id"readonly="1"optional="show"/>
                <fieldname="address_id"optional="show"/>
                <fieldname="guarantee_limit"optional="show"/>
                <fieldname="location_id"optional="hide"/>
                <fieldname="company_id"groups="base.group_multi_company"readonly="1"optional="show"/>
                <fieldname="state"optional="show"widget='badge'decoration-success="state=='done'"decoration-info="statenotin('done','cancel')"/>
                <fieldname="activity_exception_decoration"widget="activity_exception"/>
            </tree>
        </field>
    </record>

    <recordid="view_repair_order_form"model="ir.ui.view">
        <fieldname="name">repair.form</field>
        <fieldname="model">repair.order</field>
        <fieldname="arch"type="xml">
            <formstring="RepairOrder">
               <header>
                   <buttonname="action_validate"states="draft"type="object"string="ConfirmRepair"class="oe_highlight"/>
                   <buttonname="action_repair_start"attrs="{'invisible':['&amp;',('state','!=','confirmed'),'!','&amp;',('state','=','ready'),('invoice_method','=','b4repair')]}"
                    type="object"string="StartRepair"class="oe_highlight"/>
                   <buttonname="action_repair_end"states="under_repair"type="object"string="EndRepair"class="oe_highlight"/>
                   <buttonname="action_repair_invoice_create"type="object"string="CreateInvoice"class="oe_highlight"groups="account.group_account_invoice"attrs="{'invisible':['|',('state','!=','2binvoiced'),('invoice_id','!=',False)]}"/>
                   <buttonname="action_send_mail"states="draft"string="SendQuotation"type="object"/>
                   <buttonname="print_repair_order"states="draft"string="PrintQuotation"type="object"/>
                   <buttonname="action_repair_cancel_draft"states="cancel"string="SettoDraft"type="object"/>
                   <buttonname="action_repair_cancel"string="CancelRepair"type="object"confirm="Draftinvoicesforthisorderwillbecancelled.Doyouconfirmtheaction?"attrs="{'invisible':['|',('state','in',('cancel','done')),('invoice_state','!=','draft')]}"/>
                   <buttonname="action_repair_cancel"string="CancelRepair"type="object"attrs="{'invisible':['|',('state','in',('cancel','done')),('invoice_state','=','draft')]}"/>
                   <fieldname="state"widget="statusbar"statusbar_visible="draft,confirmed,done"/>
               </header>
               <sheetstring="Repairsorder">
                    <divclass="oe_button_box"name="button_box">
                        <fieldname="invoice_id"invisible="1"/>
                        <buttonname="action_created_invoice"
                            type="object"
                            class="oe_stat_button"
                            icon="fa-pencil-square-o"
                            attrs="{'invisible':[('invoice_id','=',False)]}"
                            groups="account.group_account_invoice">
                            <divclass="o_field_widgeto_stat_info">
                                <spanclass="o_stat_text">1</span>
                                <spanclass="o_stat_text">Invoices</span>
                            </div>
                        </button>
                    </div>
                    <labelfor="name"/>
                    <h1>
                        <fieldname="name"/>
                    </h1>
                    <group>
                        <group>
                            <fieldname="invoice_state"invisible="1"/>
                            <fieldname="tracking"invisible="1"attrs="{'readonly':1}"/>
                            <fieldname="product_id"/>
                            <fieldname="product_uom_category_id"invisible="1"/>
                            <labelfor="product_qty"/>
                            <divclass="o_row">
                                <fieldname="product_qty"attrs="{'readonly':[('tracking','in',['serial'])]}"/>
                                <fieldname="product_uom"groups="uom.group_uom"/>
                            </div>
                            <fieldname="lot_id"context="{'default_product_id':product_id,'default_company_id':company_id}"groups="stock.group_production_lot"attrs="{'required':[('tracking','in',['serial','lot'])],'invisible':[('tracking','notin',['serial','lot'])],'readonly':[('state','=','done')]}"/>
                            <fieldname="partner_id"widget="res_partner_many2one"attrs="{'required':[('invoice_method','!=','none')]}"context="{'res_partner_search_mode':'customer','show_vat':True}"/>
                            <fieldname="address_id"groups="sale.group_delivery_invoice_address"/>
                            <fieldname="user_id"domain="[('share','=',False)]"/>
                        </group>
                        <group>
                            <fieldname="location_id"options="{'no_create':True}"/>
                            <fieldname="company_id"groups="base.group_multi_company"options="{'no_create':True}"/>
                            <fieldname="guarantee_limit"/>
                            <fieldname="invoice_method"/>
                            <fieldname="partner_invoice_id"attrs="{'invisible':[('invoice_method','=','none')],'required':[('invoice_method','!=','none')]}"groups="sale.group_delivery_invoice_address"/>
                            <fieldname="pricelist_id"groups="product.group_product_pricelist"context="{'product_id':product_id}"attrs="{'invisible':[('invoice_method','=','none')]}"/>
                            <fieldname="tag_ids"widget="many2many_tags"options="{'color_field':'color','no_create_edit':True}"/>
                            <fieldname="currency_id"invisible="1"/>
                        </group>
                    </group>
                <notebook>
                    <pagestring="Parts"name="parts">
                        <fieldname="operations"context="{'default_product_uom_qty':product_qty,'default_company_id':company_id}">
                            <formstring="Operations">
                                <group>
                                    <group>
                                        <fieldname="company_id"invisible="1"force_save="1"/>
                                        <fieldname="type"/>
                                        <fieldname="product_id"/>
                                        <fieldname="name"/>
                                        <fieldname="product_uom_category_id"invisible="1"/>
                                        <labelfor="product_uom_qty"/>
                                        <divclass="o_row">
                                            <fieldname="product_uom_qty"/>
                                            <fieldname="product_uom"groups="uom.group_uom"/>
                                        </div>
                                        <fieldname="price_unit"/>
                                        <fieldname="tax_id"widget="many2many_tags"/>
                                        <fieldname="invoiced"invisible="1"/>
                                        <fieldname="price_subtotal"widget="monetary"invisible="1"/>
                                        <fieldname="currency_id"invisible="1"/>
                                    </group>
                                    <group>
                                        <fieldname="lot_id"context="{'default_product_id':product_id,'default_company_id':company_id}"groups="stock.group_production_lot"/>
                                        <fieldname="location_id"options="{'no_create':True}"groups="stock.group_stock_multi_locations"/>
                                        <fieldname="location_dest_id"options="{'no_create':True}"groups="stock.group_stock_multi_locations"/>
                                    </group>
                                </group>
                                <groupname="History"string="History"attrs="{'invisible':[('move_id','=',False)]}">
                                    <fieldname="move_id"/>
                                    <fieldname="invoice_line_id"invisible="1"/>
                                </group>
                            </form>
                            <treestring="Operations"editable="bottom">
                                <fieldname="company_id"invisible="1"force_save="1"/>
                                <fieldname="type"/>
                                <fieldname="product_id"/>
                                <fieldname='name'optional="show"/>
                                <fieldname="product_uom_category_id"invisible="1"/>
                                <fieldname="lot_id"context="{'default_product_id':product_id,'default_company_id':company_id}"groups="stock.group_production_lot"/>
                                <fieldname="location_id"options="{'no_create':True}"groups="stock.group_stock_multi_locations"optional="show"/>
                                <fieldname="location_dest_id"options="{'no_create':True}"groups="stock.group_stock_multi_locations"optional="show"/>
                                <fieldname="product_uom_qty"string="Quantity"/>
                                <fieldname="product_uom"string="UoM"groups="uom.group_uom"optional="show"/>
                                <fieldname="price_unit"/>
                                <fieldname="tax_id"widget="many2many_tags"optional="show"/>
                                <fieldname="price_subtotal"widget="monetary"groups="account.group_show_line_subtotals_tax_excluded"/>
                                <fieldname="price_total"widget="monetary"groups="account.group_show_line_subtotals_tax_included"/>
                                <fieldname="currency_id"invisible="1"/>
                            </tree>
                        </field>
                        <groupclass="oe_subtotal_footeroe_right">
                            <fieldname="amount_untaxed"sum="Untaxedamount"/>
                            <fieldname="amount_tax"/>
                            <divclass="oe_subtotal_footer_separatoroe_inline">
                                <labelfor="amount_total"/>
                                <buttonname="button_dummy"
                                    states="draft"string="(update)"type="object"class="oe_edit_onlyoe_link"/>
                            </div>
                            <fieldname="amount_total"nolabel="1"sum="Totalamount"class="oe_subtotal_footer_separator"/>
                        </group>
                        <divclass="oe_clear"/>
                    </page>
                    <pagestring="Operations"name="operations">
                        <fieldname="fees_lines"context="{'default_company_id':company_id}">
                            <formstring="Fees">
                                <group>
                                    <fieldname="company_id"invisible="1"force_save="1"/>
                                    <fieldname="product_id"required="True"/>
                                    <fieldname="name"/>
                                    <fieldname="product_uom_category_id"invisible="1"/>
                                    <labelfor="product_uom_qty"/>
                                    <divclass="o_row">
                                        <fieldname="product_uom_qty"string="Quantity"/>
                                        <fieldname="product_uom"groups="uom.group_uom"/>
                                    </div>
                                    <fieldname="price_unit"/>
                                    <fieldwidget="many2many_tags"name="tax_id"/>
                                    <fieldname="price_subtotal"widget="monetary"invisible="1"/>
                                    <fieldname="currency_id"invisible="1"/>
                                </group>
                            </form>
                            <treestring="Fees"editable="bottom">
                                <fieldname="company_id"invisible="1"force_save="1"/>
                                <fieldname="product_id"required="True"context="{'default_type':'service'}"/>
                                <fieldname='name'optional="show"/>
                                <fieldname="product_uom_qty"string="Quantity"/>
                                <fieldname="product_uom_category_id"invisible="1"/>
                                <fieldname="product_uom"string="UnitofMeasure"groups="uom.group_uom"optional="show"/>
                                <fieldname="price_unit"/>
                                <fieldname="tax_id"widget="many2many_tags"optional="show"/>
                                <fieldname="price_subtotal"widget="monetary"groups="account.group_show_line_subtotals_tax_excluded"/>
                                <fieldname="price_total"widget="monetary"groups="account.group_show_line_subtotals_tax_included"/>
                                <fieldname="currency_id"invisible="1"/>
                            </tree>
                        </field>
                    </page>
                    <pagestring="ExtraInfo"name="extra_info"groups="base.group_no_one">
                        <group>
                            <group>
                                <fieldname="move_id"/>
                            </group>
                            <group>
                                <fieldname="repaired"/>
                                <fieldname="invoiced"/>
                            </group>
                        </group>
                    </page>
                    <pagestring="Notes"name="notes">
                        <fieldname="internal_notes"placeholder="Addinternalnotes."/>
                        <fieldname="quotation_notes"placeholder="Addquotationnotes."/>
                    </page>
                </notebook>
                </sheet>
                <divclass="oe_chatter">
                    <fieldname="message_follower_ids"/>
                    <fieldname="activity_ids"/>
                    <fieldname="message_ids"/>
                </div>
            </form>
        </field>
    </record>


    <recordid="view_repair_kanban"model="ir.ui.view">
        <fieldname="name">repair.kanban</field>
        <fieldname="model">repair.order</field>
        <fieldname="arch"type="xml">
            <kanbanclass="o_kanban_mobile"sample="1">
                <fieldname="company_id"invisible="1"/>
                <fieldname="name"/>
                <fieldname="product_id"/>
                <fieldname="partner_id"/>
                <fieldname="address_id"/>
                <fieldname="guarantee_limit"/>
                <fieldname="state"/>
                <fieldname="activity_state"/>
                <progressbarfield="activity_state"colors='{"planned":"success","today":"warning","overdue":"danger"}'/>
                <templates>
                    <tt-name="kanban-box">
                        <divt-attf-class="oe_kanban_cardoe_kanban_global_click">
                            <divclass="rowmb4">
                                <divclass="col-6">
                                    <strong><span><tt-esc="record.name.value"/></span></strong>
                                </div>
                                <divclass="col-6text-right">
                                    <fieldname="state"widget="label_selection"options="{'classes':{'draft':'info','cancel':'danger','done':'success','under_repair':'secondary'}}"/>
                                </div>
                            </div>
                            <divclass="row">
                                <divclass="col-6text-muted">
                                    <span><tt-esc="record.product_id.value"/></span>
                                    <fieldname="tag_ids"widget="many2many_tags"options="{'color_field':'color'}"/>
                                </div>
                                <divclass="col-6">
                                    <spanclass="float-right">
                                        <fieldname="partner_id"/>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <recordid="view_repair_order_form_filter"model="ir.ui.view">
        <fieldname="name">repair.select</field>
        <fieldname="model">repair.order</field>
        <fieldname="arch"type="xml">
            <searchstring="SearchRepairOrders">
                <fieldname="name"string="RepairOrder"filter_domain="['|',('name','ilike',self),('product_id','ilike',self)]"/>
                <fieldname="product_id"/>
                <fieldname="partner_id"filter_domain="[('partner_id','child_of',self)]"/>
                <filterstring="Quotations"name="quotations"domain="[('state','=','draft')]"/>
                <filterstring="Confirmed"domain="[('state','=','confirmed')]"name="current"/>
                <filterstring="ReadyToRepair"name="ready_to_repair"domain="[('state','=','ready')]"/>
                <separator/>
                <filterstring="Invoiced"name="invoiced"domain="[('invoiced','=',True)]"/>
                <separator/>
                <filtername="filter_create_date"date="create_date"/>
                <separator/>
                <filterinvisible="1"string="LateActivities"name="activities_overdue"
                    domain="[('my_activity_date_deadline','&lt;',context_today().strftime('%Y-%m-%d'))]"
                    help="Showallrecordswhichhasnextactiondateisbeforetoday"/>
                <filterinvisible="1"string="TodayActivities"name="activities_today"
                    domain="[('my_activity_date_deadline','=',context_today().strftime('%Y-%m-%d'))]"/>
                <filterinvisible="1"string="FutureActivities"name="activities_upcoming_all"
                    domain="[('my_activity_date_deadline','&gt;',context_today().strftime('%Y-%m-%d'))]"/>
                <groupexpand="0"string="GroupBy">
                    <filterstring="Customer"name="partner"domain="[]"context="{'group_by':'partner_id'}"/>
                    <filterstring="Product"name="product"domain="[]"context="{'group_by':'product_id'}"/>
                    <filterstring="Status"name="status"domain="[]"context="{'group_by':'state'}"/>
                    <filterstring="WarrantyExpiration"name="guarantee_limit"domain="[]"context="{'group_by':'guarantee_limit'}"/>
                    <filterstring="Company"name="company"domain="[]"context="{'group_by':'company_id'}"groups="base.group_multi_company"/>
                </group>
            </search>
        </field>
    </record>

    <recordid="view_repair_graph"model="ir.ui.view">
        <fieldname="name">repair.graph</field>
        <fieldname="model">repair.order</field>
        <fieldname="arch"type="xml">
            <graphstring="RepairOrders"sample="1">
                <fieldname="create_date"/>
                <fieldname="product_id"/>
            </graph>
        </field>
    </record>

    <recordid="view_repair_pivot"model="ir.ui.view">
        <fieldname="name">repair.pivot</field>
        <fieldname="model">repair.order</field>
        <fieldname="arch"type="xml">
            <pivotstring="RepairOrders"sample="1">
                <fieldname="create_date"type="row"/>
                <fieldname="product_id"type="col"/>
            </pivot>
        </field>
    </record>

         <recordid="action_repair_order_tree"model="ir.actions.act_window">
            <fieldname="name">RepairOrders</field>
            <fieldname="type">ir.actions.act_window</field>
            <fieldname="res_model">repair.order</field>
            <fieldname="view_mode">tree,kanban,graph,pivot,form</field>
            <fieldname="search_view_id"ref="view_repair_order_form_filter"/>
            <fieldname="help"type="html">
              <pclass="o_view_nocontent_smiling_face">
                Norepairorderfound.Let'screateone!
              </p><p>
                Inarepairorder,youcandetailthecomponentsyouremove,
                addorreplaceandrecordthetimeyouspentonthedifferent
                operations.
              </p>
            </field>
        </record>

        <recordid="action_repair_order_graph"model="ir.actions.act_window">
            <fieldname="name">RepairOrders</field>
            <fieldname="context">{
                'search_default_product':1,
                'search_default_createDate':1,
            }
            </field>
            <fieldname="type">ir.actions.act_window</field>
            <fieldname="res_model">repair.order</field>
            <fieldname="view_mode">tree,kanban,graph,pivot,form</field>
            <fieldname="view_id"ref="view_repair_graph"/>
        </record>

        <recordid="view_repair_tag_form"model="ir.ui.view">
            <fieldname="name">repair.tag.form</field>
            <fieldname="model">repair.tags</field>
            <fieldname="arch"type="xml">
                <formstring="RepairTags">
                    <sheet>
                        <group>
                            <fieldname="name"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <recordid="view_repair_tag_tree"model="ir.ui.view">
            <fieldname="name">repair.tag.tree</field>
            <fieldname="model">repair.tags</field>
            <fieldname="arch"type="xml">
                <treestring="Tags"editable="bottom">
                    <fieldname="name"/>
                </tree>
            </field>
        </record>

        <recordid="view_repair_tag_search"model="ir.ui.view">
            <fieldname="name">repair.tag.search</field>
            <fieldname="model">repair.tags</field>
            <fieldname="arch"type="xml">
                <searchstring="Tags">
                    <fieldname="name"/>
                </search>
            </field>
        </record>

        <recordid="action_repair_order_tag"model="ir.actions.act_window">
            <fieldname="name">Tags</field>
            <fieldname="res_model">repair.tags</field>
            <fieldname="help"type="html">
                <pclass="o_view_nocontent_smiling_face">
                Createanewtag
              </p>
            </field>
        </record>

        <menuitemaction="action_repair_order_tree"id="menu_repair_order"groups="stock.group_stock_user"name="Repairs"sequence="36"
            web_icon="repair,static/description/icon.png"/>

        <menuitemid="repair_menu_reporting"name="Reporting"parent="menu_repair_order"groups="stock.group_stock_manager"/>

        <menuitemid="repair_menu"name="Repairs"parent="repair_menu_reporting"action="action_repair_order_graph"/>

        <menuitemid="repair_menu_config"name="Configuration"parent="menu_repair_order"groups="stock.group_stock_manager"/>

        <menuitemid="repair_menu_tag"name="RepairOrdersTags"parent="repair_menu_config"action="action_repair_order_tag"/>
    </data>
</flectra>
