<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <templateid="variants">
        <tt-set="attribute_exclusions"t-value="product._get_attribute_exclusions(parent_combination,parent_name)"/>
        <ult-attf-class="list-unstyledjs_add_cart_variants#{ul_class}"t-att-data-attribute_exclusions="json.dumps(attribute_exclusions)">
            <tt-foreach="product.valid_product_template_attribute_line_ids"t-as="ptal">
                <!--Attributesselectionishiddenifthereisonlyonevalueavailableandit'snotacustomvalue-->
                <lit-att-data-attribute_id="ptal.attribute_id.id"
                    t-att-data-attribute_name="ptal.attribute_id.name"
                    t-attf-class="variant_attribute#{'d-none'iflen(ptal.product_template_value_ids._only_active())==1andnotptal.product_template_value_ids._only_active()[0].is_customelse''}">

                    <!--Usedtocustomizelayoutiftheonlyavailableattributevalueiscustom-->
                    <tt-set="single"t-value="len(ptal.product_template_value_ids._only_active())==1"/>
                    <tt-set="single_and_custom"t-value="singleandptal.product_template_value_ids._only_active()[0].is_custom"/>
                    <strongt-field="ptal.attribute_id.name"class="attribute_name"/>

                    <tt-if="ptal.attribute_id.display_type=='select'">
                        <select
                            t-att-data-attribute_id="ptal.attribute_id.id"
                            t-attf-class="form-controljs_variant_change#{ptal.attribute_id.create_variant}#{'d-none'ifsingle_and_customelse''}"
                            t-att-name="'ptal-%s'%ptal.id">
                            <tt-foreach="ptal.product_template_value_ids._only_active()"t-as="ptav">
                                <tt-set="combination_info_variant"t-value="product._get_combination_info(ptav,pricelist=pricelist)"/>
                                <optiont-att-value="ptav.id"
                                    t-att-data-value_id="ptav.id"
                                    t-att-data-value_name="ptav.name"
                                    t-att-data-attribute_name="ptav.attribute_id.name"
                                    t-att-data-is_custom="ptav.is_custom"
                                    t-att-selected="ptavincombination"
                                    t-att-data-is_single="single"
                                    t-att-data-is_single_and_custom="single_and_custom">
                                    <spant-field="ptav.name"/>
                                    <spant-if="combination_info_variant['price_extra']"class="badgebadge-pillbadge-secondary">
                                        <!--
                                            price_extraisdisplayedascatalogpriceinsteadof
                                            priceafterpricelistbecauseitisimpossibleto
                                            compute.Indeed,thepricelistrulemightdependonthe
                                            selectedvariant,sotheprice_extrawillbedifferent
                                            dependingontheselectedcombination.Thepriceofan
                                            attributeisthereforevariableandit'snotvery
                                            accuratetodisplayit.
                                            -->
                                        <tt-esc="combination_info_variant['price_extra']>0and'+'or'-'"/>
                                        <spant-esc="abs(combination_info_variant['price_extra'])"class="variant_price_extra"style="white-space:nowrap;"
                                            t-options='{
                                                "widget":"monetary",
                                                "display_currency":(pricelistorproduct).currency_id
                                            }'/>
                                    </span>
                                </option>
                            </t>
                        </select>
                    </t>

                    <tt-if="ptal.attribute_id.display_type=='radio'">
                        <ult-att-data-attribute_id="ptal.attribute_id.id"t-attf-class="list-unstyled#{'d-none'ifsingle_and_customelse''}">
                            <tt-foreach="ptal.product_template_value_ids._only_active()"t-as="ptav">
                                <tt-set="combination_info_variant"t-value="product._get_combination_info(ptav,pricelist=pricelist)"/>
                                <liclass="form-groupjs_attribute_value"style="margin:0;">
                                    <labelclass="col-form-label">
                                        <div>
                                            <inputtype="radio"
                                                t-attf-class="js_variant_changeradio_input#{ptal.attribute_id.create_variant}"
                                                t-att-checked="ptavincombination"
                                                t-att-name="'ptal-%s'%ptal.id"
                                                t-att-value="ptav.id"
                                                t-att-data-value_id="ptav.id"
                                                t-att-data-value_name="ptav.name"
                                                t-att-data-attribute_name="ptav.attribute_id.name"
                                                t-att-data-is_custom="ptav.is_custom"
                                                t-att-data-is_single="single"
                                                t-att-data-is_single_and_custom="single_and_custom"/>
                                            <divclass="radio_input_value">
                                                <spant-field="ptav.name"/>
                                                <spanclass="badgebadge-pillbadge-secondary"t-if="combination_info_variant['price_extra']">
                                                    <!--seenoteaboveaboutprice_extra-->
                                                    <tt-esc="combination_info_variant['price_extra']>0and'+'or'-'"/>
                                                    <spant-esc="abs(combination_info_variant['price_extra'])"class="variant_price_extra"style="white-space:nowrap;"
                                                        t-options='{
                                                            "widget":"monetary",
                                                            "display_currency":(pricelistorproduct).currency_id
                                                        }'/>
                                                </span>
                                            </div>
                                        </div>
                                    </label>
                                </li>
                            </t>
                        </ul>
                    </t>

                    <tt-if="ptal.attribute_id.display_type=='color'">
                        <ult-att-data-attribute_id="ptal.attribute_id.id"t-attf-class="list-inline #{'d-none'ifsingle_and_customelse''}">
                            <lit-foreach="ptal.product_template_value_ids._only_active()"t-as="ptav"class="list-inline-item">
                                <labelt-attf-style="background-color:#{ptav.html_colororptav.product_attribute_value_id.nameifnotptav.is_customelse''}"
                                    t-attf-class="css_attribute_color#{'active'ifptavincombinationelse''}#{'custom_value'ifptav.is_customelse''}">
                                    <inputtype="radio"
                                        t-attf-class="js_variant_change #{ptal.attribute_id.create_variant}"
                                        t-att-checked="ptavincombination"
                                        t-att-name="'ptal-%s'%ptal.id"
                                        t-att-value="ptav.id"
                                        t-att-title="ptav.name"
                                        t-att-data-value_id="ptav.id"
                                        t-att-data-value_name="ptav.name"
                                        t-att-data-attribute_name="ptav.attribute_id.name"
                                        t-att-data-is_custom="ptav.is_custom"
                                        t-att-data-is_single="single"
                                        t-att-data-is_single_and_custom="single_and_custom"/>
                                </label>
                            </li>
                        </ul>
                    </t>
                </li>
            </t>
        </ul>
    </template>
</flectra>
