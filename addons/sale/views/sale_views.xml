<?xmlversion="1.0"encoding="utf-8"?>
<flectra>

        <!--Topmenuitem-->
        <menuitemid="sale_menu_root"
            name="Sales"
            web_icon="sale_management,static/description/icon.png"
            active="False"
            sequence="7"/>

        <menuitemid="sale_order_menu"
            name="Orders"
            parent="sale_menu_root"
            sequence="2"/>

        <menuitemid="report_sales_team"
            name="SalesTeams"
            parent="sale_order_menu"
            groups="sales_team.group_sale_manager"
            action="sales_team.crm_team_salesteams_act"
            sequence="3"/>

        <menuitemid="res_partner_menu"
            parent="sale_order_menu"
            action="account.res_partner_action_customer"
            sequence="4"groups="sales_team.group_sale_salesman"/>

        <menuitemid="menu_sale_report"
            name="Reporting"
            parent="sale_menu_root"
            sequence="5"
            groups="sales_team.group_sale_manager"/>

        <menuitemid="menu_report_product_all"
            name="Sales"
            action="action_order_report_all"
            parent="menu_sale_report"
            sequence="1"/>

        <menuitemid="menu_sale_config"
            name="Configuration"
            parent="sale_menu_root"
            sequence="6"
            groups="sales_team.group_sale_manager"/>

        <menuitemid="sales_team_config"
            name="SalesTeams"
            parent="sale.menu_sale_config"
            action="sales_team.sales_team_config_action"
            sequence="2"/>

        <menuitemid="menu_sales_config"
            parent="menu_sale_config"
            sequence="4"
            name="SalesOrders"/>

        <menuitem
            id="menu_tag_config"
            name="Tags"
            parent="sale.menu_sales_config"
            action="sales_team.sales_team_crm_tag_action"
            sequence="2"/>

        <recordid="product_template_action"model="ir.actions.act_window">
            <fieldname="name">Products</field>
            <fieldname="type">ir.actions.act_window</field>
            <fieldname="res_model">product.template</field>
            <fieldname="view_mode">kanban,tree,form,activity</field>
            <fieldname="view_id"ref="product.product_template_kanban_view"/>
            <fieldname="search_view_id"ref="product.product_template_search_view"/>
            <fieldname="context">{"search_default_filter_to_sell":1,"sale_multi_pricelist_product_template":1}</field>
            <fieldname="help"type="html">
                <pclass="o_view_nocontent_smiling_face">
                    Createanewproduct
                </p><p>
                    Youmustdefineaproductforeverythingyousellorpurchase,
                    whetherit'sastorableproduct,aconsumableoraservice.
                </p>
            </field>
        </record>

        <recordid="product_template_form_view"model="ir.ui.view">
            <fieldname="name">product.template.product.website.form</field>
            <fieldname="model">product.template</field>
            <fieldname="inherit_id"ref="product.product_template_form_view"/>
            <fieldname="arch"type="xml">
                <xpathexpr="//page[@name='sales']"position="attributes">
                    <attributename="invisible">0</attribute>
                </xpath>
            </field>
        </record>

        <menuitemid="product_menu_catalog"name="Products"parent="sale_menu_root"sequence="4"groups="sales_team.group_sale_salesman"/>
        <menuitemid="menu_product"name="ProductVariants"parent="product_menu_catalog"sequence="2"groups="base.group_no_one"active="False"/>
        <menuitemaction="product_template_action"id="menu_product_template_action"parent="product_menu_catalog"sequence="1"active="False"/>
        <menuitemid="prod_config_main"name="Products"parent="menu_sale_config"sequence="5"/>
        <menuitemid="menu_products"action="product.product_normal_action_sell"parent="product_menu_catalog"groups="product.group_product_variant"sequence="2"active="False"/>
        <menuitemid="next_id_16"name="UnitsofMeasure"parent="sale.prod_config_main"sequence="6"groups="uom.group_uom"active="False"/>
        <menuitemaction="uom.product_uom_form_action"id="menu_product_uom_form_action"parent="sale.prod_config_main"sequence="7"groups="uom.group_uom"active="False"/>
        <menuitemaction="uom.product_uom_categ_form_action"id="menu_product_uom_categ_form_action"parent="sale.prod_config_main"sequence="8"groups="uom.group_uom"active="False"/>
        <menuitemid="menu_product_pricelist_main"name="Pricelists"parent="product_menu_catalog"action="product.product_pricelist_action2"groups="product.group_product_pricelist"sequence="3"active="False"/>

        <recordid="sale_order_view_activity"model="ir.ui.view">
            <fieldname="name">sale.order.activity</field>
            <fieldname="model">sale.order</field>
            <fieldname="arch"type="xml">
                <activitystring="SalesOrders">
                    <templates>
                        <divt-name="activity-box">
                            <div>
                                <fieldname="name"display="full"/>
                                <fieldname="partner_id"muted="1"display="full"/>
                            </div>
                        </div>
                    </templates>
                </activity>
            </field>
        </record>

        <recordid="view_sale_order_calendar"model="ir.ui.view">
            <fieldname="name">sale.order.calendar</field>
            <fieldname="model">sale.order</field>
            <fieldname="arch"type="xml">
                <calendarstring="SalesOrders"date_start="date_order"color="state"hide_time="true"event_limit="5"quick_add="False">
                    <fieldname="currency_id"invisible="1"/>
                    <fieldname="partner_id"avatar_field="image_128"/>
                    <fieldname="amount_total"widget="monetary"/>
                    <fieldname="payment_term_id"/>
                    <fieldname="state"filters="1"invisible="1"/>
                </calendar>
            </field>
        </record>
        <recordmodel="ir.ui.view"id="view_sale_order_graph">
            <fieldname="name">sale.order.graph</field>
            <fieldname="model">sale.order</field>
            <fieldname="arch"type="xml">
                <graphstring="SalesOrders"sample="1">
                    <fieldname="partner_id"/>
                    <fieldname="amount_total"type="measure"/>
                </graph>
            </field>
        </record>
        <recordmodel="ir.ui.view"id="view_sale_order_pivot">
            <fieldname="name">sale.order.pivot</field>
            <fieldname="model">sale.order</field>
            <fieldname="arch"type="xml">
                <pivotstring="SalesOrders"sample="1">
                    <fieldname="date_order"type="row"/>
                    <fieldname="amount_total"type="measure"/>
                </pivot>
            </field>
        </record>

        <!--SalesOrdersKanbanView -->
        <recordmodel="ir.ui.view"id="view_sale_order_kanban">
            <fieldname="name">sale.order.kanban</field>
            <fieldname="model">sale.order</field>
            <fieldname="arch"type="xml">
                <kanbanclass="o_kanban_mobile"sample="1"quick_create="false">
                    <fieldname="name"/>
                    <fieldname="partner_id"/>
                    <fieldname="amount_total"/>
                    <fieldname="date_order"/>
                    <fieldname="state"/>
                    <fieldname="currency_id"/>
                    <fieldname="activity_state"/>
                    <progressbarfield="activity_state"colors='{"planned":"success","today":"warning","overdue":"danger"}'/>
                    <templates>
                        <tt-name="kanban-box">
                            <divt-attf-class="oe_kanban_cardoe_kanban_global_click">
                                <divclass="o_kanban_record_topmb16">
                                    <divclass="o_kanban_record_headingsmt4">
                                        <strongclass="o_kanban_record_title"><span><tt-esc="record.partner_id.value"/></span></strong>
                                    </div>
                                    <strong><fieldname="amount_total"widget="monetary"/></strong>
                                </div>
                                <divclass="o_kanban_record_bottom">
                                    <divclass="oe_kanban_bottom_lefttext-muted">
                                        <span><tt-esc="record.name.value"/><tt-esc="record.date_order.value"/></span>
                                        <fieldname="activity_ids"widget="kanban_activity"/>
                                    </div>
                                    <divclass="oe_kanban_bottom_right">
                                        <fieldname="state"widget="label_selection"options="{'classes':{'draft':'default','cancel':'default','done':'success'}}"/>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <recordid="view_order_tree"model="ir.ui.view">
            <fieldname="name">sale.order.tree</field>
            <fieldname="model">sale.order</field>
            <fieldname="priority">2</field>
            <fieldname="arch"type="xml">
                <treestring="SalesOrders"multi_edit="1"sample="1">
                    <fieldname="message_needaction"invisible="1"/>
                    <fieldname="name"string="Number"readonly="1"decoration-bf="1"/>
                    <fieldname="date_order"string="OrderDate"widget="date"optional="show"/>
                    <fieldname="commitment_date"optional="hide"/>
                    <fieldname="expected_date"optional="hide"/>
                    <fieldname="partner_id"readonly="1"/>
                    <fieldname="user_id"optional="show"widget="many2one_avatar_user"/>
                    <fieldname="activity_ids"widget="list_activity"optional="show"/>
                    <fieldname="team_id"optional="hide"/>
                    <fieldname="company_id"groups="base.group_multi_company"optional="show"readonly="1"/>
                    <fieldname="amount_untaxed"sum="TotalTaxExcluded"widget="monetary"optional="hide"/>
                    <fieldname="amount_tax"sum="TaxTotal"widget="monetary"optional="hide"/>
                    <fieldname="amount_total"sum="TotalTaxIncluded"widget="monetary"decoration-bf="1"optional="show"/>
                    <fieldname="currency_id"invisible="1"/>
                    <fieldname="invoice_status"decoration-success="invoice_status=='invoiced'"decoration-info="invoice_status=='toinvoice'"decoration-warning="invoice_status=='upselling'"widget="badge"optional="show"/>
                    <fieldname="tag_ids"optional="hide"widget="many2many_tags"options="{'color_field':'color'}"/>
                    <fieldname="state"invisible="1"/>
                </tree>
            </field>
        </record>

        <recordid="view_quotation_tree"model="ir.ui.view">
            <fieldname="name">sale.order.tree</field>
            <fieldname="model">sale.order</field>
            <fieldname="priority">4</field>
            <fieldname="arch"type="xml">
                <treestring="Quotation"class="o_sale_order"multi_edit="1"sample="1">
                    <fieldname="name"string="Number"readonly="1"decoration-bf="1"/>
                    <fieldname="create_date"string="CreationDate"widget="date"optional="show"/>
                    <fieldname="commitment_date"widget="date"optional="hide"/>
                    <fieldname="expected_date"widget="date"optional="hide"/>
                    <fieldname="partner_id"readonly="1"/>
                    <fieldname="user_id"widget="many2one_avatar_user"optional="show"/>
                    <fieldname="activity_ids"widget="list_activity"optional="show"/>
                    <fieldname="team_id"optional="hide"/>
                    <fieldname="tag_ids"optional="hide"widget="many2many_tags"options="{'color_field':'color'}"/>
                    <fieldname="company_id"groups="base.group_multi_company"optional="show"readonly="1"/>
                    <fieldname="amount_untaxed"sum="TotalTaxExcluded"widget="monetary"optional="hide"/>
                    <fieldname="amount_tax"sum="TaxTotal"widget="monetary"optional="hide"/>
                    <fieldname="amount_total"sum="TotalTaxIncluded"widget="monetary"decoration-bf="1"optional="show"/>
                    <fieldname="state"decoration-success="state=='sale'orstate=='done'"decoration-info="state=='draft'orstate=='sent'"widget="badge"optional="show"/>
                    <fieldname="invoice_status"optional="hide"/>
                    <fieldname="message_needaction"invisible="1"/>
                    <fieldname="currency_id"invisible="1"/>
                </tree>
            </field>
        </record>
        <recordid="view_quotation_tree_with_onboarding"model="ir.ui.view">
            <fieldname="name">sale.order.tree</field>
            <fieldname="model">sale.order</field>
            <fieldname="inherit_id"ref="view_quotation_tree"/>
            <fieldname="mode">primary</field>
            <fieldname="arch"type="xml">
                <xpathexpr="//tree"position="attributes">
                    <attributename="banner_route">/sales/sale_quotation_onboarding_panel</attribute>
                </xpath>
            </field>
        </record>

        <recordid="view_order_form"model="ir.ui.view">
            <fieldname="name">sale.order.form</field>
            <fieldname="model">sale.order</field>
            <fieldname="arch"type="xml">
              <formstring="SalesOrder"class="o_sale_order"js_class="sale_discount_form">
                <header>
                    <fieldname="authorized_transaction_ids"invisible="1"/>
                    <buttonname="payment_action_capture"type="object"
                            string="CaptureTransaction"class="oe_highlight"
                            attrs="{'invisible':[('authorized_transaction_ids','=',[])]}"/>
                    <buttonname="payment_action_void"type="object"
                            string="VoidTransaction"
                            confirm="Areyousureyouwanttovoidtheauthorizedtransaction?Thisactioncan'tbeundone."
                            attrs="{'invisible':[('authorized_transaction_ids','=',[])]}"/>
                    <buttonname="%(sale.action_view_sale_advance_payment_inv)d"string="CreateInvoice"
                        type="action"class="btn-primary"
                        attrs="{'invisible':[('invoice_status','!=','toinvoice')]}"/>
                    <buttonname="%(sale.action_view_sale_advance_payment_inv)d"string="CreateInvoice"
                        type="action"context="{'default_advance_payment_method':'percentage'}"
                        attrs="{'invisible':['|',('invoice_status','!=','no'),('state','!=','sale')]}"/>
                    <buttonname="action_quotation_send"string="SendbyEmail"type="object"states="draft"class="btn-primary"/>
                    <buttonname="action_quotation_send"type="object"string="SendPRO-FORMAInvoice"
                      groups="sale.group_proforma_sales"class="btn-primary"
                      attrs="{'invisible':['|',('state','!=','draft'),('invoice_count','&gt;=',1)]}"context="{'proforma':True}"/>
                    <buttonname="action_confirm"id="action_confirm"
                        string="Confirm"class="btn-primary"type="object"
                        attrs="{'invisible':[('state','notin',['sent'])]}"/>
                    <buttonname="action_confirm"
                        string="Confirm"type="object"
                        attrs="{'invisible':[('state','notin',['draft'])]}"/>
                    <buttonname="action_quotation_send"type="object"string="SendPRO-FORMAInvoice"groups="sale.group_proforma_sales"attrs="{'invisible':['|',('state','=','draft'),('invoice_count','&gt;=',1)]}"context="{'proforma':True}"/>
                    <buttonname="action_quotation_send"string="SendbyEmail"type="object"states="sent,sale"/>
                    <buttonname="action_cancel"type="object"string="Cancel"attrs="{'invisible':['|',('state','notin',['draft','sent','sale']),('id','=',False)]}"/>
                    <buttonname="action_draft"states="cancel"type="object"string="SettoQuotation"/>
                    <fieldname="state"widget="statusbar"statusbar_visible="draft,sent,sale"/>
                </header>
                <sheet>
                    <divclass="oe_button_box"name="button_box">
                        <buttonname="preview_sale_order"
                            type="object"
                            class="oe_stat_button"
                            icon="fa-globeicon">
                            <divclass="o_field_widgeto_stat_info">
                                <spanclass="o_stat_text">Customer</span>
                                <spanclass="o_stat_text">Preview</span>
                            </div>
                        </button>
                        <buttonname="action_view_invoice"
                            type="object"
                            class="oe_stat_button"
                            icon="fa-pencil-square-o"
                            attrs="{'invisible':[('invoice_count','=',0)]}">
                            <fieldname="invoice_count"widget="statinfo"string="Invoices"/>
                        </button>
                    </div>
                    <divclass="oe_title">
                        <h1>
                            <fieldname="name"readonly="1"/>
                        </h1>
                    </div>
                    <groupname="sale_header">
                        <groupname="partner_details">
                            <fieldname="partner_id"widget="res_partner_many2one"context="{'res_partner_search_mode':'customer','show_address':1,'show_vat':True}"options='{"always_reload":True}'/>
                            <fieldname="partner_invoice_id"groups="sale.group_delivery_invoice_address"context="{'default_type':'invoice'}"options='{"always_reload":True}'/>
                            <fieldname="partner_shipping_id"groups="sale.group_delivery_invoice_address"context="{'default_type':'delivery'}"options='{"always_reload":True}'/>
                        </group>
                        <groupname="order_details">
                            <fieldname="validity_date"attrs="{'invisible':[('state','in',['sale','done'])]}"/>
                            <divclass="o_td_label"groups="base.group_no_one"attrs="{'invisible':[('state','in',['sale','done','cancel'])]}">
                                <labelfor="date_order"string="QuotationDate"/>
                            </div>
                            <fieldname="date_order"nolabel="1"groups="base.group_no_one"attrs="{'invisible':[('state','in',['sale','done','cancel'])]}"/>
                            <divclass="o_td_label"attrs="{'invisible':[('state','in',['draft','sent'])]}">
                                <labelfor="date_order"string="OrderDate"/>
                            </div>
                            <fieldname="date_order"attrs="{'required':[('state','in',['sale','done'])],'invisible':[('state','in',['draft','sent'])]}"nolabel="1"/>
                            <fieldname="show_update_pricelist"invisible="1"/>
                            <labelfor="pricelist_id"groups="product.group_product_pricelist"/>
                            <divgroups="product.group_product_pricelist"class="o_row">
                                <fieldname="pricelist_id"options="{'no_open':True,'no_create':True}"/>
                                <buttonname="update_prices"type="object"
                                    string="UpdatePrices"
                                    help="Recomputeallpricesbasedonthispricelist"
                                    class="btn-linkmb-1px-0"icon="fa-refresh"
                                    confirm="Thiswillupdateallunitpricesbasedonthecurrentlysetpricelist."
                                    attrs="{'invisible':['|',('show_update_pricelist','=',False),('state','in',['sale','done','cancel'])]}"/>
                            </div>
                            <fieldname="currency_id"invisible="1"/>
                            <fieldname="payment_term_id"options="{'no_open':True,'no_create':True}"/>
                        </group>
                    </group>
                    <notebook>
                        <pagestring="OrderLines"name="order_lines">
                            <field
                                name="order_line"
                                widget="section_and_note_one2many"
                                mode="tree,kanban"
                                attrs="{'readonly':[('state','in',('done','cancel'))]}"
                            >
                                <form>
                                    <fieldname="display_type"invisible="1"/>
                                    <!--
                                        Weneedthesequencefieldtobeherefornewlinestobeaddedatthecorrectposition.
                                        TODO:atsomepointwewanttofixthisintheframeworksothataninvisiblefieldisnotrequired.
                                    -->
                                    <fieldname="sequence"invisible="1"/>
                                    <fieldname="product_uom_category_id"invisible="1"/>
                                    <group>
                                        <groupattrs="{'invisible':[('display_type','!=',False)]}">
                                            <fieldname="product_updatable"invisible="1"/>
                                            <fieldname="product_id"
                                                domain="[('sale_ok','=',True),'|',('company_id','=',False),('company_id','=',parent.company_id)]"
                                                context="{'partner_id':parent.partner_id,'quantity':product_uom_qty,'pricelist':parent.pricelist_id,'uom':product_uom,'company_id':parent.company_id}"
                                                attrs="{
                                                    'readonly':[('product_updatable','=',False)],
                                                    'required':[('display_type','=',False)],
                                                }"
                                                force_save="1"
                                                widget="many2one_barcode"
                                               />
                                            <fieldname="invoice_status"invisible="1"/>
                                            <fieldname="qty_to_invoice"invisible="1"/>
                                            <fieldname="qty_delivered_manual"invisible="1"/>
                                            <fieldname="qty_delivered_method"invisible="1"/>
                                            <fieldname="price_total"invisible="1"/>
                                            <fieldname="price_tax"invisible="1"/>
                                            <fieldname="price_subtotal"invisible="1"/>
                                            <fieldname="product_uom_readonly"invisible="1"/>
                                            <labelfor="product_uom_qty"/>
                                            <divclass="o_row"name="ordered_qty">
                                                <field
                                                    context="{'partner_id':parent.partner_id,'quantity':product_uom_qty,'pricelist':parent.pricelist_id,'uom':product_uom,'uom_qty_change':True,'company_id':parent.company_id}"
                                                    name="product_uom_qty"/>
                                                <field
                                                    name="product_uom"
                                                    force_save="1"
                                                    groups="uom.group_uom"
                                                    class="oe_no_button"
                                                    attrs="{
                                                        'readonly':[('product_uom_readonly','=',True)],
                                                        'required':[('display_type','=',False)],
                                                    }"
                                                />
                                            </div>
                                            <labelfor="qty_delivered"string="Delivered"attrs="{'invisible':[('parent.state','notin',['sale','done'])]}"/>
                                            <divname="delivered_qty"attrs="{'invisible':[('parent.state','notin',['sale','done'])]}">
                                                <fieldname="qty_delivered"attrs="{'readonly':[('qty_delivered_method','!=','manual')]}"/>
                                            </div>
                                            <labelfor="qty_invoiced"string="Invoiced"attrs="{'invisible':[('parent.state','notin',['sale','done'])]}"/>
                                            <divname="invoiced_qty"attrs="{'invisible':[('parent.state','notin',['sale','done'])]}">
                                                <fieldname="qty_invoiced"attrs="{'invisible':[('parent.state','notin',['sale','done'])]}"/>
                                            </div>
                                            <fieldname="price_unit"/>
                                            <fieldname="tax_id"widget="many2many_tags"options="{'no_create':True}"context="{'search_view_ref':'account.account_tax_view_search'}"domain="[('type_tax_use','=','sale'),('company_id','=',parent.company_id)]"
                                                attrs="{'readonly':[('qty_invoiced','&gt;',0)]}"/>
                                            <labelfor="discount"groups="product.group_discount_per_so_line"/>
                                            <divname="discount"groups="product.group_discount_per_so_line">
                                                <fieldname="discount"class="oe_inline"/>%%
                                            </div>
                                            <!--
                                                Weneedthesequencefieldtobehere
                                                becausewewanttobeabletooverwritethedefaultsequencevalueintheJS
                                                inorderfornewlinestobeaddedatthecorrectposition.
                                                NOTE:atsomepointwewanttofixthisintheframeworksothataninvisiblefieldisnotrequired.
                                            -->
                                            <fieldname="sequence"invisible="1"/>
                                        </group>
                                        <groupattrs="{'invisible':[('display_type','!=',False)]}">
                                            <labelfor="customer_lead"/>
                                            <divname="lead">
                                                <fieldname="customer_lead"class="oe_inline"/>days
                                            </div>
                                            <fieldname="analytic_tag_ids"widget="many2many_tags"groups="analytic.group_analytic_tags"options="{'color_field':'color'}"domain="['|',('company_id','=',False),('company_id','=',parent.company_id)]"/>
                                        </group>
                                    </group>
                                    <labelfor="name"string="Description"attrs="{'invisible':[('display_type','!=',False)]}"/>
                                    <labelfor="name"string="SectionName(eg.Products,Services)"attrs="{'invisible':[('display_type','!=','line_section')]}"/>
                                    <labelfor="name"string="Note"attrs="{'invisible':[('display_type','!=','line_note')]}"/>
                                    <fieldname="name"/>
                                    <divname="invoice_lines"groups="base.group_no_one"attrs="{'invisible':[('display_type','!=',False)]}">
                                        <labelfor="invoice_lines"/>
                                        <fieldname="invoice_lines"/>
                                    </div>
                                    <fieldname="state"invisible="1"/>
                                    <fieldname="company_id"invisible="1"/>
                                </form>
                                <tree
                                    string="SalesOrderLines"
                                    editable="bottom"
                                >
                                    <control>
                                        <createname="add_product_control"string="Addaproduct"/>
                                        <createname="add_section_control"string="Addasection"context="{'default_display_type':'line_section'}"/>
                                        <createname="add_note_control"string="Addanote"context="{'default_display_type':'line_note'}"/>
                                    </control>

                                    <fieldname="sequence"widget="handle"/>
                                    <!--Wedonotdisplaythetypebecausewedon'twanttheusertobebotheredwiththatinformationifhehasnosectionornote.-->
                                    <fieldname="display_type"invisible="1"/>
                                    <fieldname="product_uom_category_id"invisible="1"/>

                                    <fieldname="product_updatable"invisible="1"/>
                                    <field
                                        name="product_id"
                                        attrs="{
                                            'readonly':[('product_updatable','=',False)],
                                            'required':[('display_type','=',False)],
                                        }"
                                        options="{'no_open':True}"
                                        force_save="1"
                                        context="{
                                            'partner_id':parent.partner_id,
                                            'quantity':product_uom_qty,
                                            'pricelist':parent.pricelist_id,
                                            'uom':product_uom,
                                            'company_id':parent.company_id,
                                            'default_lst_price':price_unit,
                                            'default_description_sale':name
                                        }"
                                        domain="[('sale_ok','=',True),'|',('company_id','=',False),('company_id','=',parent.company_id)]"
                                        widget="product_configurator"
                                    />
                                    <fieldname="product_template_id"
                                      string="Product"
                                      invisible="1"
                                      attrs="{
                                          'readonly':[('product_updatable','=',False)],
                                          'required':[('display_type','=',False)],
                                      }"
                                      options="{'no_open':True}"
                                      context="{
                                          'partner_id':parent.partner_id,
                                          'quantity':product_uom_qty,
                                          'pricelist':parent.pricelist_id,
                                          'uom':product_uom,
                                          'company_id':parent.company_id,
                                          'default_list_price':price_unit,
                                          'default_description_sale':name
                                      }"
                                      domain="[('sale_ok','=',True),'|',('company_id','=',False),('company_id','=',parent.company_id)]"
                                      widget="product_configurator"/>
                                    <fieldname="name"widget="section_and_note_text"optional="show"/>
                                    <field
                                        name="analytic_tag_ids"
                                        optional="hide"
                                        groups="analytic.group_analytic_tags"
                                        widget="many2many_tags"
                                        options="{'color_field':'color'}"
                                        domain="['|',('company_id','=',False),('company_id','=',parent.company_id)]"
                                    />
                                    <field
                                        name="product_uom_qty"
                                        decoration-info="(notdisplay_typeandinvoice_status=='toinvoice')"decoration-bf="(notdisplay_typeandinvoice_status=='toinvoice')"
                                        context="{
                                            'partner_id':parent.partner_id,
                                            'quantity':product_uom_qty,
                                            'pricelist':parent.pricelist_id,
                                            'uom':product_uom,
                                            'company_id':parent.company_id
                                        }"
                                    />
                                    <field
                                        name="qty_delivered"
                                        decoration-info="(notdisplay_typeandinvoice_status=='toinvoice')"decoration-bf="(notdisplay_typeandinvoice_status=='toinvoice')"
                                        string="Delivered"
                                        attrs="{
                                            'column_invisible':[('parent.state','notin',['sale','done'])],
                                            'readonly':[('qty_delivered_method','!=','manual')]
                                        }"
                                        optional="show"
                                    />
                                    <fieldname="qty_delivered_manual"invisible="1"/>
                                    <fieldname="qty_delivered_method"invisible="1"/>
                                    <field
                                        name="qty_invoiced"
                                        decoration-info="(notdisplay_typeandinvoice_status=='toinvoice')"decoration-bf="(notdisplay_typeandinvoice_status=='toinvoice')"
                                        string="Invoiced"
                                        attrs="{'column_invisible':[('parent.state','notin',['sale','done'])]}"
                                        optional="show"
                                    />
                                    <fieldname="qty_to_invoice"invisible="1"/>
                                    <fieldname="product_uom_readonly"invisible="1"/>
                                    <field
                                        name="product_uom"
                                        force_save="1"
                                        string="UoM"
                                        attrs="{
                                            'readonly':[('product_uom_readonly','=',True)],
                                            'required':[('display_type','=',False)],
                                        }"
                                        context="{'company_id':parent.company_id}"
                                        groups="uom.group_uom"
                                        options='{"no_open":True}'
                                        optional="show"
                                    />
                                    <field
                                        name="customer_lead"
                                        optional="hide"
                                        attrs="{'readonly':[('parent.state','notin',['draft','sent','sale'])]}"
                                    />
                                    <field
                                        name="price_unit"
                                        attrs="{'readonly':[('qty_invoiced','&gt;',0)]}"
                                    />
                                    <field
                                        name="tax_id"
                                        widget="many2many_tags"
                                        options="{'no_create':True}"
                                        domain="[('type_tax_use','=','sale'),('company_id','=',parent.company_id)]"
                                        context="{'active_test':True}"
                                        attrs="{'readonly':[('qty_invoiced','&gt;',0)]}"
                                        optional="show"
                                    />
                                    <fieldname="discount"string="Disc.%"groups="product.group_discount_per_so_line"optional="show"widget="product_discount"/>
                                    <fieldname="price_subtotal"widget="monetary"groups="account.group_show_line_subtotals_tax_excluded"/>
                                    <fieldname="price_total"widget="monetary"groups="account.group_show_line_subtotals_tax_included"/>
                                    <fieldname="state"invisible="1"/>
                                    <fieldname="invoice_status"invisible="1"/>
                                    <fieldname="currency_id"invisible="1"/>
                                    <fieldname="price_tax"invisible="1"/>
                                    <fieldname="company_id"invisible="1"/>
                                </tree>
                                <kanbanclass="o_kanban_mobile">
                                    <fieldname="name"/>
                                    <fieldname="product_id"/>
                                    <fieldname="product_uom_qty"/>
                                    <fieldname="product_uom"groups="uom.group_uom"/>
                                    <fieldname="price_subtotal"/>
                                    <fieldname="price_total"/>
                                    <fieldname="price_tax"invisible="1"/>
                                    <fieldname="price_total"invisible="1"/>
                                    <fieldname="price_unit"/>
                                    <fieldname="display_type"/>
                                    <fieldname="tax_id"invisible="1"/>
                                    <fieldname="company_id"invisible="1"/>
                                    <templates>
                                        <tt-name="kanban-box">
                                            <divt-attf-class="oe_kanban_cardoe_kanban_global_click{{record.display_type.raw_value?'o_is_'+record.display_type.raw_value:''}}">
                                                <tt-if="!record.display_type.raw_value">
                                                    <divclass="row">
                                                        <divclass="col-8">
                                                            <strong>
                                                                <span>
                                                                    <tt-esc="record.product_id.value"/>
                                                                </span>
                                                            </strong>
                                                        </div>
                                                        <divclass="col-4">
                                                            <strong>
                                                                <spanclass="float-righttext-right">
                                                                    <tt-set="line_price"t-value="record.price_subtotal.value"groups="account.group_show_line_subtotals_tax_excluded"/>
                                                                    <tt-set="line_price"t-value="record.price_total.value"groups="account.group_show_line_subtotals_tax_included"/>
                                                                    <tt-esc="line_price"/>
                                                                </span>
                                                            </strong>
                                                        </div>
                                                    </div>
                                                    <divclass="row">
                                                        <divclass="col-12text-muted">
                                                            <span>
                                                                Quantity:
                                                                <tt-esc="record.product_uom_qty.value"/>
                                                                <tt-esc="record.product_uom.value"/>
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <divclass="row">
                                                        <divclass="col-12text-muted">
                                                            <span>
                                                                UnitPrice:
                                                                <tt-esc="record.price_unit.value"/>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </t>
                                                <tt-if="record.display_type.raw_value==='line_section'||record.display_type.raw_value==='line_note'">
                                                    <divclass="row">
                                                        <divclass="col-12">
                                                            <span>
                                                                <tt-esc="record.name.value"/>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </t>
                                            </div>
                                        </t>
                                    </templates>
                                </kanban>
                            </field>
                            <groupname="note_group"col="6"class="mt-2mt-md-0">
                                <groupcolspan="4">
                                    <fieldname="note"nolabel="1"placeholder="Termsandconditions..."/>
                                </group>
                                <groupclass="oe_subtotal_footeroe_right"colspan="2"name="sale_total">
                                    <fieldname="amount_untaxed"widget='monetary'options="{'currency_field':'currency_id'}"/>
                                    <fieldname="amount_tax"widget='monetary'options="{'currency_field':'currency_id'}"/>
                                    <divclass="oe_subtotal_footer_separatoroe_inlineo_td_label">
                                        <labelfor="amount_total"/>
                                    </div>
                                    <fieldname="amount_total"nolabel="1"class="oe_subtotal_footer_separator"widget='monetary'options="{'currency_field':'currency_id'}"/>
                                </group>
                                <divclass="oe_clear"/>
                            </group>
                        </page>
                        <pagestring="OtherInfo"name="other_information">
                            <group>
                                <groupname="sales_person"string="Sales">
                                    <fieldname="user_id"widget="many2one_avatar_user"/>
                                    <fieldname="team_id"kanban_view_ref="%(sales_team.crm_team_view_kanban)s"options="{'no_create':True}"/>
                                    <fieldname="company_id"options="{'no_create':True}"groups="base.group_multi_company"/>
                                    <fieldname="require_signature"/>
                                    <fieldname="require_payment"/>
                                    <fieldname="reference"readonly="1"attrs="{'invisible':[('reference','=',False)]}"/>
                                    <fieldname="client_order_ref"/>
                                    <fieldname="tag_ids"widget="many2many_tags"options="{'color_field':'color','no_create_edit':True}"/>
                                </group>
                                <groupname="sale_info"string="Invoicing">
                                    <fieldname="fiscal_position_id"options="{'no_create':True}"/>
                                    <fieldname="analytic_account_id"context="{'default_partner_id':partner_invoice_id,'default_name':name}"attrs="{'readonly':[('invoice_count','!=',0),('state','=','sale')]}"groups="analytic.group_analytic_accounting"force_save="1"/>
                                    <fieldname="invoice_status"states="sale,done"groups="base.group_no_one"/>
                                </group>
                            </group>
                            <group>
                                <groupname="sale_shipping">
                                    <labelfor="commitment_date"string="DeliveryDate"/>
                                    <divname="commitment_date_div"class="o_row">
                                        <fieldname="commitment_date"/>
                                        <spanname="expected_date_span"class="text-muted">Expected:<fieldname="expected_date"widget="date"/></span>
                                    </div>
                                </group>
                                <groupstring="Reporting"name="sale_reporting"groups="base.group_no_one">
                                    <groupname="technical"colspan="2"class="mb-0">
                                        <fieldname="origin"/>
                                    </group>
                                    <groupname="utm_link"colspan="2"class="mt-0">
                                        <fieldname="campaign_id"/>
                                        <fieldname="medium_id"/>
                                        <fieldname="source_id"/>
                                    </group>
                                </group>
                            </group>
                        </page>
                        <pagegroups="base.group_no_one"string="CustomerSignature"name="customer_signature"attrs="{'invisible':[('require_signature','=',False),('signed_by','=',False),('signature','=',False),('signed_on','=',False)]}">
                            <group>
                                <fieldname="signed_by"/>
                                <fieldname="signed_on"/>
                                <fieldname="signature"widget="image"/>
                            </group>
                        </page>
                    </notebook>
                </sheet>
                <divclass="oe_chatter">
                    <fieldname="message_follower_ids"/>
                    <fieldname="activity_ids"/>
                    <fieldname="message_ids"/>
                </div>
              </form>
            </field>
        </record>

        <recordid="view_sales_order_auto_done_setting"model="ir.ui.view">
            <fieldname="name">sale.order.form</field>
            <fieldname="model">sale.order</field>
            <fieldname="inherit_id"ref="sale.view_order_form"/>
            <fieldname="groups_id"eval="[(4,ref('sale.group_auto_done_setting'))]"/>
            <fieldname="arch"type="xml">
                <xpathexpr="//form//header//button[@name='action_draft']"position="after">
                   <buttonname="action_done"type="object"string="Lock"states="sale"
                        help="Ifthesaleislocked,youcannotmodifyitanymore.However,youwillstillbeabletoinvoiceordeliver."groups="sales_team.group_sale_manager"/>
                    <buttonname="action_unlock"type="object"string="Unlock"states="done"groups="sales_team.group_sale_manager"/>
                </xpath>
            </field>
        </record>

        <recordid="view_sales_order_filter"model="ir.ui.view">
            <fieldname="name">sale.order.list.select</field>
            <fieldname="model">sale.order</field>
            <fieldname="priority"eval="15"/>
            <fieldname="arch"type="xml">
                <searchstring="SearchSalesOrder">
                    <fieldname="name"string="Order"filter_domain="['|','|',('name','ilike',self),('client_order_ref','ilike',self),('partner_id','child_of',self)]"/>
                    <fieldname="partner_id"operator="child_of"/>
                    <fieldname="user_id"/>
                    <fieldname="team_id"string="SalesTeam"/>
                    <fieldname="order_line"string="Product"filter_domain="[('order_line.product_id','ilike',self)]"/>
                    <fieldname="analytic_account_id"groups="analytic.group_analytic_accounting"/>
                    <!--Weonlyallowtosearchonthefollowingsaleorderlinefields(product,name)becausetheotherfields,suchasprice,quantity,...
                        willnotbesearchedasoften,andiftheyneedtobesearchedit'susuallyinthecontextofproducts
                        andthentheycanbesearchedfromthepagelistingthesaleorderlinesrelatedtoaproduct(fromtheproductitself).
                    -->
                    <filterstring="MyOrders"domain="[('user_id','=',uid)]"name="my_sale_orders_filter"/>
                    <filterinvisible="1"string="LateActivities"name="activities_overdue"
                        domain="[('my_activity_date_deadline','&lt;',context_today().strftime('%Y-%m-%d'))]"
                        help="Showallrecordswhichhasnextactiondateisbeforetoday"/>
                    <filterinvisible="1"string="TodayActivities"name="activities_today"
                        domain="[('my_activity_date_deadline','=',context_today().strftime('%Y-%m-%d'))]"/>
                    <filterinvisible="1"string="FutureActivities"name="activities_upcoming_all"
                        domain="[('my_activity_date_deadline','&gt;',context_today().strftime('%Y-%m-%d'))]"/>
                    <groupexpand="0"string="GroupBy">
                        <filterstring="Salesperson"name="salesperson"domain="[]"context="{'group_by':'user_id'}"/>
                        <filtername="customer"string="Customer"domain="[]"context="{'group_by':'partner_id'}"/>
                        <filterstring="OrderDate"name="order_month"domain="[]"context="{'group_by':'date_order'}"/>
                    </group>
               </search>
            </field>
        </record>

        <recordid="sale_order_view_search_inherit_quotation"model="ir.ui.view">
            <fieldname="name">sale.order.search.inherit.quotation</field>
            <fieldname="model">sale.order</field>
            <fieldname="mode">primary</field>
            <fieldname="inherit_id"ref="sale.view_sales_order_filter"/>
            <fieldname="arch"type="xml">
                <xpathexpr="//filter[@name='my_sale_orders_filter']"position="replace">
                    <fieldname="campaign_id"/>
                    <separator/>
                    <filterstring="MyQuotations"name="my_quotation"domain="[('user_id','=',uid)]"/>
                    <separator/>
                    <filterstring="Quotations"name="draft"domain="[('state','in',('draft','sent'))]"/>
                    <filterstring="SalesOrders"name="sales"domain="[('state','in',('sale','done'))]"/>
                    <separator/>
                    <filterstring="CreateDate"name="filter_create_date"date="create_date"/>
                </xpath>
            </field>
        </record>

        <recordid="sale_order_view_search_inherit_sale"model="ir.ui.view">
            <fieldname="name">sale.order.search.inherit.sale</field>
            <fieldname="model">sale.order</field>
            <fieldname="mode">primary</field>
            <fieldname="inherit_id"ref="sale.view_sales_order_filter"/>
            <fieldname="arch"type="xml">
                <xpathexpr="//filter[@name='my_sale_orders_filter']"position="after">
                    <separator/>
                    <filterstring="ToInvoice"name="to_invoice"domain="[('invoice_status','=','toinvoice')]"/>
                    <filterstring="ToUpsell"name="upselling"domain="[('invoice_status','=','upselling')]"/>
                    <separator/>
                    <filterstring="OrderDate"name="order_date"date="date_order"/>
                </xpath>
            </field>
        </record>

        <recordid="action_orders"model="ir.actions.act_window">
            <fieldname="name">SalesOrders</field>
            <fieldname="type">ir.actions.act_window</field>
            <fieldname="res_model">sale.order</field>
            <fieldname="view_mode">tree,kanban,form,calendar,pivot,graph,activity</field>
            <fieldname="search_view_id"ref="sale_order_view_search_inherit_sale"/>
            <fieldname="context">{}</field>
            <fieldname="domain">[('state','notin',('draft','sent','cancel'))]</field>
            <fieldname="help"type="html">
                <pclass="o_view_nocontent_smiling_face">
                    Createanewquotation,thefirststepofanewsale!
                </p><p>
                    Oncethequotationisconfirmed,itbecomesasalesorder.<br/>Youwillbeabletocreateaninvoiceandcollectthepayment.
                </p>
            </field>
        </record>

        <recordid="sale_order_action_view_order_tree"model="ir.actions.act_window.view">
            <fieldname="sequence"eval="1"/>
            <fieldname="view_mode">tree</field>
            <fieldname="view_id"ref="sale.view_order_tree"/>
            <fieldname="act_window_id"ref="action_orders"/>
        </record>

        <recordid="sale_order_action_view_order_kanban"model="ir.actions.act_window.view">
            <fieldname="sequence"eval="2"/>
            <fieldname="view_mode">kanban</field>
            <fieldname="view_id"ref="sale.view_sale_order_kanban"/>
            <fieldname="act_window_id"ref="action_orders"/>
        </record>

        <recordid="sale_order_action_view_order_form"model="ir.actions.act_window.view">
            <fieldname="sequence"eval="3"/>
            <fieldname="view_mode">form</field>
            <fieldname="view_id"ref="sale.view_order_form"/>
            <fieldname="act_window_id"ref="action_orders"/>
        </record>

        <recordid="sale_order_action_view_order_calendar"model="ir.actions.act_window.view">
            <fieldname="sequence"eval="4"/>
            <fieldname="view_mode">calendar</field>
            <fieldname="view_id"ref="sale.view_sale_order_calendar"/>
            <fieldname="act_window_id"ref="action_orders"/>
        </record>

        <recordid="sale_order_action_view_order_pivot"model="ir.actions.act_window.view">
            <fieldname="sequence"eval="5"/>
            <fieldname="view_mode">pivot</field>
            <fieldname="view_id"ref="sale.view_sale_order_pivot"/>
            <fieldname="act_window_id"ref="action_orders"/>
        </record>

        <recordid="sale_order_action_view_order_graph"model="ir.actions.act_window.view">
            <fieldname="sequence"eval="6"/>
            <fieldname="view_mode">graph</field>
            <fieldname="view_id"ref="sale.view_sale_order_graph"/>
            <fieldname="act_window_id"ref="action_orders"/>
        </record>

        <menuitemid="menu_sale_order"
            name="Orders"
            action="action_orders"
            parent="sale_order_menu"
            sequence="2"groups="sales_team.group_sale_salesman"/>

        <recordid="action_orders_to_invoice"model="ir.actions.act_window">
            <fieldname="name">OrderstoInvoice</field>
            <fieldname="type">ir.actions.act_window</field>
            <fieldname="res_model">sale.order</field>
            <fieldname="view_mode">tree,form,calendar,graph,pivot,kanban,activity</field>
            <fieldname="context">{'create':False}</field>
            <fieldname="domain">[('invoice_status','=','toinvoice')]</field>
            <fieldname="search_view_id"ref="view_sales_order_filter"/>
            <fieldname="help"type="html">
              <pclass="o_view_nocontent_smiling_face">
                Noorderstoinvoicefound
              </p><p>
                Youcanselectallordersandinvoicetheminbatch,<br/>
                orcheckeveryorderandinvoicethemonebyone.
              </p>
            </field>
        </record>

        <recordid="model_sale_order_action_quotation_sent"model="ir.actions.server">
            <fieldname="name">MarkQuotationasSent</field>
            <fieldname="model_id"ref="sale.model_sale_order"/>
            <fieldname="binding_model_id"ref="sale.model_sale_order"/>
            <fieldname="binding_view_types">form,list</field>
            <fieldname="state">code</field>
            <fieldname="code">action=records.action_quotation_sent()</field>
        </record>

        <menuitemid="menu_sale_invoicing"
            name="ToInvoice"
            parent="sale_menu_root"
            sequence="3"groups="sales_team.group_sale_salesman"/>

        <menuitemid="menu_sale_order_invoice"
            action="action_orders_to_invoice"
            parent="sale.menu_sale_invoicing"
            sequence="2"active="False"/>

        <recordid="action_orders_upselling"model="ir.actions.act_window">
            <fieldname="name">OrderstoUpsell</field>
            <fieldname="type">ir.actions.act_window</field>
            <fieldname="res_model">sale.order</field>
            <fieldname="view_mode">tree,form,calendar,graph,pivot,kanban,activity</field>
            <fieldname="domain">[('invoice_status','=','upselling')]</field>
            <fieldname="context">{'create':False}</field>
            <fieldname="search_view_id"ref="view_sales_order_filter"/>
            <fieldname="help"type="html">
              <pclass="o_view_nocontent_smiling_face">
                Noorderstoupsellfound.
              </p><p>
                Anorderistoupsellwhendeliveredquantitiesareaboveinitially
                orderedquantities,andtheinvoicingpolicyisbasedonorderedquantities.
              </p><p>
                Asanexample,ifyousellpre-paidhoursofservices,Flectrarecommendsyou
                tosellextrahourswhenallorderedhourshavebeenconsumed.
              </p>
            </field>
        </record>
        <menuitemaction="action_orders_upselling"
            id="menu_sale_order_upselling"parent="sale.menu_sale_invoicing"
            sequence="5"active="False"/>


        <recordid="action_quotations_with_onboarding"model="ir.actions.act_window">
            <fieldname="name">Quotations</field>
            <fieldname="type">ir.actions.act_window</field>
            <fieldname="res_model">sale.order</field>
            <fieldname="view_id"ref="view_quotation_tree_with_onboarding"/>
            <fieldname="view_mode">tree,kanban,form,calendar,pivot,graph,activity</field>
            <fieldname="search_view_id"ref="sale_order_view_search_inherit_quotation"/>
            <fieldname="context">{'search_default_my_quotation':1}</field>
            <fieldname="help"type="html">
              <pclass="o_view_nocontent_smiling_face">
                Createanewquotation,thefirststepofanewsale!
              </p><p>
                Oncethequotationisconfirmedbythecustomer,itbecomesasalesorder.<br/>Youwillbeabletocreateaninvoiceandcollectthepayment.
              </p>
            </field>
        </record>

        <recordid="action_quotations"model="ir.actions.act_window">
            <fieldname="name">Quotations</field>
            <fieldname="type">ir.actions.act_window</field>
            <fieldname="res_model">sale.order</field>
            <fieldname="view_mode">tree,kanban,form,calendar,pivot,graph,activity</field>
            <fieldname="search_view_id"ref="sale_order_view_search_inherit_quotation"/>
            <fieldname="context">{'search_default_my_quotation':1}</field>
            <fieldname="help"type="html">
              <pclass="o_view_nocontent_smiling_face">
                Createanewquotation,thefirststepofanewsale!
              </p><p>
                Oncethequotationisconfirmedbythecustomer,itbecomesasalesorder.<br/>Youwillbeabletocreateaninvoiceandcollectthepayment.
              </p>
            </field>
        </record>

        <recordid="sale_order_action_view_quotation_tree"model="ir.actions.act_window.view">
            <fieldname="sequence"eval="1"/>
            <fieldname="view_mode">tree</field>
            <fieldname="view_id"ref="sale.view_quotation_tree"/>
            <fieldname="act_window_id"ref="action_quotations"/>
        </record>

        <recordid="sale_order_action_view_quotation_kanban"model="ir.actions.act_window.view">
            <fieldname="sequence"eval="2"/>
            <fieldname="view_mode">kanban</field>
            <fieldname="view_id"ref="sale.view_sale_order_kanban"/>
            <fieldname="act_window_id"ref="action_quotations"/>
        </record>

        <recordid="sale_order_action_view_quotation_form"model="ir.actions.act_window.view">
            <fieldname="sequence"eval="3"/>
            <fieldname="view_mode">form</field>
            <fieldname="view_id"ref="sale.view_order_form"/>
            <fieldname="act_window_id"ref="action_quotations"/>
        </record>

        <recordid="sale_order_action_view_quotation_calendar"model="ir.actions.act_window.view">
            <fieldname="sequence"eval="4"/>
            <fieldname="view_mode">calendar</field>
            <fieldname="view_id"ref="sale.view_sale_order_calendar"/>
            <fieldname="act_window_id"ref="action_quotations"/>
        </record>

        <recordid="sale_order_action_view_quotation_pivot"model="ir.actions.act_window.view">
            <fieldname="sequence"eval="5"/>
            <fieldname="view_mode">pivot</field>
            <fieldname="view_id"ref="sale.view_sale_order_pivot"/>
            <fieldname="act_window_id"ref="action_quotations"/>
        </record>

        <recordid="sale_order_action_view_quotation_graph"model="ir.actions.act_window.view">
            <fieldname="sequence"eval="6"/>
            <fieldname="view_mode">graph</field>
            <fieldname="view_id"ref="sale.view_sale_order_graph"/>
            <fieldname="act_window_id"ref="action_quotations"/>
        </record>

        <menuitemid="menu_sale_quotations"
                action="action_quotations_with_onboarding"
                parent="sale_order_menu"
                sequence="1"groups="sales_team.group_sale_salesman"/>

        <recordid="view_order_line_tree"model="ir.ui.view">
            <fieldname="name">sale.order.line.tree</field>
            <fieldname="model">sale.order.line</field>
            <fieldname="arch"type="xml">
                <treestring="SalesOrderLines"create="false">
                    <fieldname="order_id"/>
                    <fieldname="order_partner_id"/>
                    <fieldname="name"/>
                    <fieldname="salesman_id"/>
                    <fieldname="product_uom_qty"string="Qty"/>
                    <fieldname="qty_delivered"/>
                    <fieldname="qty_invoiced"/>
                    <fieldname="qty_to_invoice"/>
                    <fieldname="product_uom"string="UnitofMeasure"groups="uom.group_uom"/>
                    <fieldname="price_subtotal"sum="Total"widget="monetary"/>
                    <fieldname="currency_id"invisible="1"/>
                </tree>
            </field>
        </record>

        <recordid="sale_order_line_view_form_readonly"model="ir.ui.view">
            <fieldname="name">sale.order.line.form.readonly</field>
            <fieldname="model">sale.order.line</field>
            <fieldname="arch"type="xml">
                <formstring="SalesOrderItem">
                    <sheet>
                        <divclass="oe_title">
                            <h1>
                                <fieldname="display_name"readonly="1"/>
                            </h1>
                        </div>
                        <group>
                            <group>
                                <fieldname="order_id"readonly="1"/>
                                <fieldname="product_id"readonly="1"/>
                                <fieldname="name"readonly="1"/>
                                <fieldname="product_uom_qty"readonly="1"/>
                                <fieldname="qty_delivered"readonly="1"/>
                                <fieldname="qty_invoiced"/>
                                <fieldname="product_uom"readonly="1"/>
                                <fieldname="company_id"options="{'no_create':True}"groups="base.group_multi_company"/>
                                <fieldname="order_partner_id"invisible="1"/>
                                <fieldname="display_type"invisible="1"/>
                                <fieldname="product_updatable"invisible="1"/>
                            </group>
                            <group>
                                <fieldname="price_unit"readonly="1"/>
                                <fieldname="discount"groups="product.group_discount_per_so_line"readonly="1"/>
                                <fieldname="price_subtotal"widget="monetary"/>
                                <fieldname="tax_id"widget="many2many_tags"readonly="1"/>
                                <fieldname="price_tax"widget="monetary"/>
                                <fieldname="price_total"widget="monetary"/>
                                <fieldname="currency_id"invisible="1"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <recordid="view_sales_order_line_filter"model="ir.ui.view">
            <fieldname="name">sale.order.line.select</field>
            <fieldname="model">sale.order.line</field>
            <fieldname="arch"type="xml">
                <searchstring="SearchSalesOrder">
                    <filterstring="ToInvoice"name="to_invoice"domain="[('qty_to_invoice','!=',0)]" help="SalesOrderLinesreadytobeinvoiced"/>
                    <separator/>
                    <filterstring="MySalesOrderLines"name="my_sales_order_lines"domain="[('salesman_id','=',uid)]"help="SalesOrderLinesrelatedtoaSalesOrderofmine"/>
                    <fieldname="order_id"/>
                    <fieldname="order_partner_id"operator="child_of"/>
                    <fieldname="product_id"/>
                    <fieldname="salesman_id"/>
                    <groupexpand="0"string="GroupBy">
                        <filterstring="Product"name="product"domain="[]"context="{'group_by':'product_id'}"/>
                        <filterstring="Order"name="order"domain="[]"context="{'group_by':'order_id'}"/>
                        <filterstring="Salesperson"name="salesperson"domain="[]"context="{'group_by':'salesman_id'}"/>
                    </group>
                </search>
            </field>
        </record>

        <recordid="sale_order_line_view_kanban"model="ir.ui.view">
            <fieldname="name">sale.order.line.kanban</field>
            <fieldname="model">sale.order.line</field>
            <fieldname="arch"type="xml">
                <kanbanclass="o_kanban_mobile">
                    <templates>
                        <tt-name="kanban-box">
                            <divclass="oe_kanban_contentoe_kanban_global_click">
                                <divclass="row">
                                    <divclass="col-12">
                                    <fieldname="display_name"/>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <recordmodel="ir.ui.view"id="product_form_view_sale_order_button">
            <fieldname="name">product.product.sale.order</field>
            <fieldname="model">product.product</field>
            <fieldname="inherit_id"ref="product.product_normal_form_view"/>
            <fieldname="groups_id"eval="[(4,ref('sales_team.group_sale_salesman'))]"/>
            <fieldname="arch"type="xml">
                <divname="button_box"position="inside">
                    <buttonclass="oe_stat_button"name="action_view_sales"
                        type="object"icon="fa-signal"groups="sales_team.group_sale_salesman"help="Soldinthelast365days"attrs="{'invisible':[('sale_ok','=',False)]}">
                        <divclass="o_field_widgeto_stat_info">
                            <spanclass="o_stat_value">
                                <fieldname="sales_count"widget="statinfo"nolabel="1"class="mr4"/>
                                <fieldname="uom_name"/>
                            </span>
                            <spanclass="o_stat_text">Sold</span>
                        </div>
                    </button>
                </div>
                <groupname="description"position="after">
                    <groupstring="WarningwhenSellingthisProduct"groups="sale.group_warning_sale">
                        <fieldname="sale_line_warn"nolabel="1"/>
                        <fieldname="sale_line_warn_msg"colspan="3"nolabel="1"
                                attrs="{'required':[('sale_line_warn','!=','no-message')],'readonly':[('sale_line_warn','=','no-message')]}"/>
                    </group>
                </group>
            </field>
        </record>

        <recordmodel="ir.ui.view"id="product_template_form_view_sale_order_button">
            <fieldname="name">product.template.sale.order.button</field>
            <fieldname="model">product.template</field>
            <fieldname="inherit_id"ref="product.product_template_only_form_view"/>
            <fieldname="groups_id"eval="[(4,ref('sales_team.group_sale_salesman'))]"/>
            <fieldname="arch"type="xml">
                <divname="button_box"position="inside">
                    <buttonclass="oe_stat_button"name="action_view_sales"
                        type="object"icon="fa-signal"groups="sales_team.group_sale_salesman"help="Soldinthelast365days"attrs="{'invisible':[('sale_ok','=',False)]}">
                        <divclass="o_field_widgeto_stat_info">
                            <spanclass="o_stat_value">
                                <fieldname="sales_count"widget="statinfo"nolabel="1"class="mr4"/>
                                <fieldname="uom_name"/>
                            </span>
                            <spanclass="o_stat_text">Sold</span>
                        </div>
                    </button>
                </div>
                <groupname="description"position="after">
                    <groupstring="WarningwhenSellingthisProduct"groups="sale.group_warning_sale">
                        <fieldname="sale_line_warn"nolabel="1"/>
                        <fieldname="sale_line_warn_msg"colspan="3"nolabel="1"
                                attrs="{'required':[('sale_line_warn','!=','no-message')],'readonly':[('sale_line_warn','=','no-message')],'invisible':[('sale_line_warn','=','no-message')]}"/>
                    </group>
                </group>
            </field>
        </record>

        <recordmodel="ir.ui.view"id="product_template_form_view_invoice_policy">
            <fieldname="name">product.template.invoice.policy</field>
            <fieldname="model">product.template</field>
            <fieldname="priority">15</field>
            <fieldname="inherit_id"ref="product.product_template_form_view"/>
            <fieldname="arch"type="xml">
                <xpathexpr="//page[@name='sales']//group[@name='sale']"position="inside">
                    <groupstring="Invoicing"name="invoicing"invisible="1">
                        <fieldname="invoice_policy"widget="radio"/>
                        <fieldname="service_type"widget="radio"invisible="True"/>
                        <fieldname="visible_expense_policy"invisible="1"/>
                        <fieldname="expense_policy"widget="radio"attrs="{'invisible':[('visible_expense_policy','=',False)]}"/>
                    </group>
                </xpath>
            </field>
        </record>

        <!--Updateaccountinvoicesearchview!-->
        <recordid="account_invoice_groupby_inherit"model="ir.ui.view">
            <fieldname="name">account.move.groupby</field>
            <fieldname="model">account.move</field>
            <fieldname="inherit_id"ref="account.view_account_invoice_filter"/>
            <fieldname="arch"type="xml">
                <xpathexpr="//field[@name='invoice_user_id']"position="after">
                    <fieldname="team_id"/>
                </xpath>
                <xpathexpr="//group/filter[@name='status']"position="after">
                    <filterstring="SalesTeam"name="sales_channel"domain="[]"context="{'group_by':'team_id'}"/>
                </xpath>
            </field>
        </record>

        <recordid="account_invoice_view_tree"model="ir.ui.view">
            <fieldname="name">account.move.tree.inherit.sale</field>
            <fieldname="model">account.move</field>
            <fieldname="inherit_id"ref="account.view_invoice_tree"/>
            <fieldname="arch"type="xml">
                <fieldname="invoice_user_id"position="after">
                    <fieldname="team_id"invisible="context.get('default_move_type')notin('out_invoice','out_refund','out_receipt')"optional="hide"/>
                </field>
            </field>
        </record>

        <!--Updateaccountinvoice!-->
        <recordmodel="ir.ui.view"id="account_invoice_form">
            <fieldname="name">AccountInvoice</field>
            <fieldname="model">account.move</field>
            <fieldname="inherit_id"ref="account.view_move_form"/>
            <fieldname="arch"type="xml">
                <data>
                    <xpathexpr="//field[@name='partner_id']"position="after">
                       <fieldname="partner_shipping_id"
                              groups="sale.group_delivery_invoice_address"
                              attrs="{'invisible':[('move_type','notin',('out_invoice','out_refund','out_receipt'))]}"/>
                   </xpath>
                    <xpathexpr="//group[@name='sale_info_group']/field[@name='invoice_user_id']"position="after">
                        <fieldname="team_id"kanban_view_ref="%(sales_team.crm_team_view_kanban)s"/>
                    </xpath>
                    <xpathexpr="//group[@id='other_tab_group']"position="inside">
                        <groupstring="Marketing"
                               name="utm_link"
                               groups="base.group_no_one"
                               attrs="{'invisible':[('move_type','notin',('out_invoice','out_refund'))]}">
                            <fieldname="campaign_id"/>
                            <fieldname="medium_id"/>
                            <fieldname="source_id"/>
                        </group>
                    </xpath>
                </data>
            </field>
        </record>

        <!--searchbySalesteams-->
        <recordid="action_orders_salesteams"model="ir.actions.act_window">
            <fieldname="name">SalesOrders</field>
            <fieldname="type">ir.actions.act_window</field>
            <fieldname="res_model">sale.order</field>
            <fieldname="view_mode">tree,form,calendar,graph,kanban,pivot</field>
            <fieldname="search_view_id"ref="sale.sale_order_view_search_inherit_sale"/>
            <fieldname="domain">[('state','notin',('draft','sent','cancel'))]</field>
            <fieldname="context">{
                    'search_default_team_id':[active_id],
                    'default_team_id':active_id,
                }
            </field>
            <fieldname="help"type="html">
              <pclass="o_view_nocontent_smiling_face">
                Createanewquotation,thefirststepofanewsale!
              </p><p>
                Oncethequotationisconfirmedbythecustomer,itbecomesasalesorder.<br/>Youwillbeabletocreateaninvoiceandcollectthepayment.
              </p>
            </field>
        </record>
        <recordid="action_orders_to_invoice_salesteams"model="ir.actions.act_window">
            <fieldname="name">SalesOrders</field>
            <fieldname="type">ir.actions.act_window</field>
            <fieldname="res_model">sale.order</field>
            <fieldname="view_mode">tree,form,calendar,graph,kanban,pivot</field>
            <fieldname="search_view_id"ref="sale.sale_order_view_search_inherit_sale"/>
            <fieldname="domain">[('invoice_status','=','toinvoice')]</field>
            <fieldname="context">{
                    'search_default_team_id':[active_id],
                    'default_team_id':active_id,
                }
            </field>
        </record>
        <recordid="action_quotations_salesteams"model="ir.actions.act_window">
            <fieldname="name">Quotations</field>
            <fieldname="type">ir.actions.act_window</field>
            <fieldname="res_model">sale.order</field>
            <fieldname="view_id"ref="sale.view_quotation_tree"/>
            <fieldname="view_mode">tree,form,calendar,graph,kanban,pivot</field>
            <fieldname="context">{
                    'search_default_team_id':[active_id],
                    'default_team_id':active_id,
                    'show_address':1,
                }
            </field>
            <fieldname="domain">[]</field>
            <fieldname="search_view_id"ref="sale.sale_order_view_search_inherit_quotation"/>
            <fieldname="help"type="html">
              <pclass="o_view_nocontent_smiling_face">
                Createanewquotation,thefirststepofanewsale!
              </p><p>
                Oncethequotationisconfirmedbythecustomer,itbecomesasalesorder.<br/>Youwillbeabletocreateaninvoiceandcollectthepayment.
              </p>
            </field>
        </record>
        <recordid="action_invoice_salesteams"model="ir.actions.act_window">
            <fieldname="name">Invoices</field>
            <fieldname="res_model">account.move</field>
            <fieldname="view_mode">tree,form,kanban</field>
            <fieldname="view_id"ref="account.view_move_tree"/>
            <fieldname="domain">[
                ('state','=','posted'),
                ('move_type','in',['out_invoice','out_refund'])]</field>
            <fieldname="context">{
                    'search_default_team_id':[active_id],
                    'default_team_id':active_id,
                    'default_move_type':'out_invoice',
                    'move_type':'out_invoice',
                    'journal_type':'sale',
                }
            </field>
            <fieldname="search_view_id"ref="account.view_account_invoice_filter"/>
        </record>

        <recordid="action_invoice_salesteams_view_tree"model="ir.actions.act_window.view">
            <fieldname="sequence">1</field>
            <fieldname="view_mode">tree</field>
            <fieldname="act_window_id"ref="sale.action_invoice_salesteams"/>
        </record>

        <recordid="action_invoice_salesteams_view_form"model="ir.actions.act_window.view">
            <fieldname="sequence">2</field>
            <fieldname="view_mode">form</field>
            <fieldname="view_id"ref="account.view_move_form"/>
            <fieldname="act_window_id"ref="sale.action_invoice_salesteams"/>
        </record>

        <recordid="action_order_report_quotation_salesteam"model="ir.actions.act_window">
            <fieldname="name">QuotationsAnalysis</field>
            <fieldname="res_model">sale.report</field>
            <fieldname="view_mode">graph</field>
            <fieldname="domain">[('state','=','draft'),('team_id','=',active_id)]</field>
            <fieldname="context">{'search_default_order_month':1}</field>
            <fieldname="help">Thisreportperformsanalysisonyourquotations.Analysischeckyoursalesrevenuesandsortitbydifferentgroupcriteria(salesman,partner,product,etc.)Usethisreporttoperformanalysisonsalesnothavinginvoicedyet.Ifyouwanttoanalyseyourturnover,youshouldusetheInvoiceAnalysisreportintheAccountingapplication.</field>
        </record>

        <recordid="action_order_report_so_salesteam"model="ir.actions.act_window">
            <fieldname="name">SalesAnalysis</field>
            <fieldname="res_model">sale.report</field>
            <fieldname="view_mode">graph</field>
            <fieldname="domain">[('state','notin',('draft','cancel'))]</field>
            <fieldname="context">{
                'search_default_Sales':1,
                'search_default_filter_date':1,
                'search_default_team_id':[active_id]}</field>
            <fieldname="help">Thisreportperformsanalysisonyoursalesorders.Analysischeckyoursalesrevenuesandsortitbydifferentgroupcriteria(salesman,partner,product,etc.)Usethisreporttoperformanalysisonsalesnothavinginvoicedyet.Ifyouwanttoanalyseyourturnover,youshouldusetheInvoiceAnalysisreportintheAccountingapplication.</field>
        </record>

        <recordid="action_account_invoice_report_salesteam"model="ir.actions.act_window">
            <fieldname="name">InvoicesAnalysis</field>
            <fieldname="res_model">account.invoice.report</field>
            <fieldname="view_mode">graph</field>
            <fieldname="domain">[('state','notin',['draft','cancel'])]</field>
            <fieldname="context">{'search_default_month':1,'search_default_team_id':[active_id]}</field>
            <fieldname="help">Fromthisreport,youcanhaveanoverviewoftheamountinvoicedtoyourcustomer.ThesearchtoolcanalsobeusedtopersonaliseyourInvoicesreportsandso,matchthisanalysistoyourneeds.</field>
        </record>
</flectra>
