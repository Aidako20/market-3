flectra.define('website_sale_wishlist_admin.tour',function(require){
'usestrict';

varrpc=require('web.rpc');
vartour=require("web_tour.tour");

tour.register('shop_wishlist_admin',{
    test:true,
    url:'/shop',
},
    [
        {
            content:"Createaproductwithalwaysattributeanditsvalues.",
            trigger:'body',
            run:function(){
                rpc.query({
                    model:'product.attribute',
                    method:'create',
                    args:[{
                        'name':"color",
                        'display_type':'color',
                        'create_variant':'always'
                    }],
                }).then(function(attributeId){
                    returnrpc.query({
                        model:'product.template',
                        method:'create',
                        args:[{
                            'name':"Rock",
                            'is_published':true,
                            'attribute_line_ids':[[0,0,{
                                'attribute_id':attributeId,
                                'value_ids':[
                                    [0,0,{
                                        'name':"red",
                                        'attribute_id':attributeId,
                                    }],
                                    [0,0,{
                                        'name':"blue",
                                        'attribute_id':attributeId,
                                    }],
                                    [0,0,{
                                        'name':"black",
                                        'attribute_id':attributeId,
                                    }],
                                ]
                            }]],
                        }],
                    });
                }).then(function(){
                    window.location.href='/shop?search=Rock';
                });
            },
        },
        {
            content:"GotoRockshoppage",
            trigger:'a:contains("Rock"):first',
        },
        {
            content:"checklistviewofvariantsisdisabledinitially(whenon/productpage)",
            trigger:'body:not(:has(.js_product_change))',
            extra_trigger:'#product_details',
        },
        {
            content:"opencustomizemenu",
            trigger:'#customize-menu>a',
            extra_trigger:'body:not(.notReady)',
        },
        {
            content:"clickon'ListViewofVariants'",
            trigger:'#customize-menua:contains(ListViewofVariants)',
        },
        {
            content:"checkpageloadedafterlistofvariantcustomizationenabled",
            trigger:'.js_product_change',
        },
        {
            content:"Addredproductinwishlist",
            trigger:'#product_detail.o_add_wishlist_dyn:not(".disabled")',
        },
        {
            content:"Checkthatwishlistcontains1items",
            extra_trigger:'#product_detail.o_add_wishlist_dyn:disabled',
            trigger:'.my_wish_quantity:contains(1)',
            run:function(){
                window.location.href='/shop/wishlist';
            }
        },
        {
            content:"Checkwishlistcontainsfirstvariant",
            trigger:'#o_comparelist_tabletr:contains("red")',
            run:function(){
                window.location.href='/shop?search=Rock';
            }
        },
        {
            content:"GotoRockshoppage",
            trigger:'a:contains("Rock"):first',
        },
        {
            content:"SwitchtoblackRock",
            trigger:'.js_productspan:contains("black")',
        },
        {
            content:"SwitchtoblackRock",
            trigger:'#product_detail.o_add_wishlist_dyn:not(".disabled")',
        },
        {
            content:"Checkthatblackproductwasadded",
            extra_trigger:'#product_detail.o_add_wishlist_dyn:disabled',
            trigger:'.my_wish_quantity:contains(2)',
            run:function(){
                window.location.href='/shop/wishlist';
            }
        },
        {
            content:"Checkwishlistcontainsbothvariants",
            extra_trigger:'#o_comparelist_tabletr:contains("red")',
            trigger:'#o_comparelist_tabletr:contains("black")',
        },
    ]
);

});
