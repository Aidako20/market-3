<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <recordid="view_move_form_inherit_l10n_cl"model="ir.ui.view">
        <fieldname="name">account.move.form.inherit.l10n.cl</field>
        <fieldname="model">account.move</field>
        <fieldname="inherit_id"ref="account.view_move_form"/>
        <fieldname="arch"type="xml">
            <form>
                <fieldname="l10n_latam_internal_type"invisible="1"/>
            </form>
        </field>
    </record>

    <recordid="view_latam_form_inherit_l10n_cl"model="ir.ui.view">
        <fieldname="name">account.move.latam.form.inherit.l10n.cl</field>
        <fieldname="model">account.move</field>
        <fieldname="inherit_id"ref="l10n_latam_invoice_document.view_move_form"/>
        <fieldname="arch"type="xml">
            <fieldname="l10n_latam_document_number"position="attributes">
                <attributename="attrs">{
                    'invisible':[
                    '|',
                        ('l10n_latam_use_documents','=',False),
                        ('l10n_latam_manual_document_number','=',False),
                    '|','|',
                        ('l10n_latam_use_documents','=',False),
                        ('highest_name','!=',False),
                        ('state','!=','draft'),
                    '|','|','|',
                        ('l10n_latam_use_documents','=',False),
                        ('posted_before','=',False),
                        ('state','!=','draft'),
                        ('country_code','!=','CL')
                    ],
                    'readonly':[('posted_before','=',True),('state','!=','draft')],
                    'required':['|',('l10n_latam_manual_document_number','=',True),('highest_name','=',False)]}
                </attribute>
            </field>
        </field>
    </record>

    <recordid="view_complete_invoice_refund_tree"model="ir.ui.view">
        <fieldname="name">account.move.tree2</field>
        <fieldname="model">account.move</field>
        <fieldname="arch"type="xml">
            <treedecoration-info="state=='draft'"default_order="create_date"string="InvoicesandRefunds"decoration-muted="state=='cancel'"js_class="account_tree">
                <fieldname="l10n_latam_document_type_id_code"/>
                <fieldname="l10n_latam_document_number"string="Folio"/>
                <fieldname="partner_id_vat"/>
                <fieldname="partner_id"/>
                <fieldname="invoice_date"optional="show"/>
                <fieldname="invoice_date_due"optional="show"/>
                <fieldname="date"string="AccountingDate"optional="show"/>
                <fieldname="payment_reference"optional="hide"/>
                <fieldname="invoice_user_id"optional="show"invisible="context.get('default_move_type')notin('out_invoice','out_refund','out_receipt')"string="SalesPerson"/>
                <fieldname="company_id"groups="base.group_multi_company"options="{'no_create':True}"optional="show"/>
                <fieldname="invoice_origin"optional="show"string="SourceDocument"/>
                <fieldname="amount_untaxed_signed"string="AmountUntaxed"sum="Total"optional="show"/>
                <fieldname="amount_tax_signed"string="Tax"sum="Total"optional="show"/>
                <fieldname="amount_total_signed"string="Total"sum="Total"optional="show"/>
                <fieldname="amount_residual_signed"string="AmountDue"sum="AmountDue"optional="show"/>
                <fieldname="currency_id"invisible="1"/>
                <fieldname="company_currency_id"invisible="1"/>
                <fieldname="state"optional="show"/>
                <fieldname="payment_state"optional="hide"/>
                <fieldname="move_type"invisible="context.get('default_move_type',True)"/>
            </tree>
        </field>
    </record>

    <recordmodel="ir.actions.act_window"id="sale_invoices_credit_notes">
        <fieldname="name">SaleInvoicesandCreditNotes</field>
        <fieldname="view_id"ref="view_complete_invoice_refund_tree"/>
        <fieldname="res_model">account.move</field>
        <fieldname="domain">[('move_type','in',['out_invoice','out_refund'])]</field>
        <fieldname="context">{'default_move_type':'out_invoice'}</field>
        <fieldname="target">current</field>
        <fieldname="view_mode">tree,form</field>
    </record>

    <recordmodel="ir.actions.act_window"id="vendor_bills_and_refunds">
        <fieldname="name">VendorBillsandRefunds</field>
        <fieldname="view_id"ref="view_complete_invoice_refund_tree"/>
        <fieldname="res_model">account.move</field>
        <fieldname="domain">[('move_type','in',['in_invoice','in_refund'])]</field>
        <fieldname="context">{'default_move_type':'in_invoice'}</field>
        <fieldname="target">current</field>
        <fieldname="view_mode">tree,form</field>
    </record>

    <menuitemid="menu_sale_invoices_credit_notes"parent="account.menu_finance_receivables"sequence="3"action="sale_invoices_credit_notes"name="SaleInvoicesandCreditNotes(CL)"/>
    <menuitemid="menu_vendor_bills_and_refunds"parent="account.menu_finance_payables"sequence="3"action="vendor_bills_and_refunds"name="VendorBillsandRefunds(CL)"/>

</flectra>
