<?xmlversion="1.0"encoding="utf-8"?>
<flectra>

        <recordid="res_users_view_form"model="ir.ui.view">
            <fieldname="name">res.users.form.inherit</field>
            <fieldname="model">res.users</field>
            <fieldname="inherit_id"ref="base.view_users_form"/>
            <fieldname="arch"type="xml">
                <!--addstatefieldinheader-->
                <xpathexpr="//header"position="inside">
                    <buttonstring="SendPasswordResetInstructions"
                                type="object"name="action_reset_password"
                                attrs="{'invisible':[('state','!=','active')]}"/>
                    <buttonstring="SendanInvitationEmail"
                                type="object"name="action_reset_password"context="{'create_user':1}"
                                attrs="{'invisible':[('state','!=','new')]}"/>
                    <fieldname="state"widget="statusbar"/>
                </xpath>

                <xpathexpr="//sheet"position="before">
                    <divclass="alertalert-successtext-centero_form_header"attrs="{'invisible':[('signup_valid','!=',True)]}"role="status">
                        <aclass="close"data-dismiss="alert"href="#"aria-label="Close">x</a>
                        <divattrs="{'invisible':[('state','!=','active')]}">
                            <strong>Apasswordresethasbeenrequestedforthisuser.Anemailcontainingthefollowinglinkhasbeensent:</strong>
                        </div>
                        <divattrs="{'invisible':[('state','!=','new')]}">
                            <strong>Aninvitationemailcontainingthefollowingsubscriptionlinkhasbeensent:</strong>
                        </div>
                        <div><fieldname="signup_url"widget="url"/></div>
                         <fieldname="signup_valid"invisible="1"/>
                     </div>
                 </xpath>
            </field>
        </record>

        <recordid="view_users_state_tree"model="ir.ui.view">
            <fieldname="name">res.users.tree.inherit</field>
            <fieldname="model">res.users</field>
            <fieldname="inherit_id"ref="base.view_users_tree"/>
            <fieldname="arch"type="xml">
                <xpathexpr="//tree"position="attributes">
                    <attributename="decoration-info">state=='new'</attribute>
                </xpath>
                <xpathexpr="//field[@name='login_date']"position="after">
                    <fieldname="state"invisible="1"/>
                </xpath>
            </field>
        </record>

        <recordid="action_send_password_reset_instructions"model="ir.actions.server">
            <fieldname="name">SendPasswordResetInstructions</field>
            <fieldname="model_id"ref="base.model_res_users"/>
            <fieldname="groups_id"eval="[(4,ref('base.group_erp_manager'))]"/>
            <fieldname="binding_model_id"ref="base.model_res_users"/>
            <fieldname="state">code</field>
            <fieldname="code">records.action_reset_password()</field>
        </record>

</flectra>
