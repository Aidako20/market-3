<?xmlversion="1.0"encoding="utf-8"?>
<flectra>

        <recordid="act_hr_employee_2_hr_contract"model="ir.actions.act_window">
            <fieldname="name">Contracts</field>
            <fieldname="res_model">hr.contract</field>
            <fieldname="view_mode">kanban,tree,form</field>
            <fieldname="context">{
                'search_default_employee_id':[active_id],
                'default_employee_id':active_id,
                'search_default_group_by_state':1
            }</field>
        </record>

        <recordid="hr_hr_employee_view_form2"model="ir.ui.view">
            <fieldname="name">hr.hr.employee.view.form2</field>
            <fieldname="model">hr.employee</field>
            <fieldname="inherit_id"ref="hr.view_employee_form"/>
            <fieldname="arch"type="xml">
                <data>
                    <divname="button_box"position="inside">
                        <fieldname="contract_warning"invisible="1"/>
                        <buttonname="%(act_hr_employee_2_hr_contract)d"
                            class="oe_stat_button"
                            icon="fa-book"
                            type="action"
                            groups="hr_contract.group_hr_contract_manager">
                            <divattrs="{'invisible':[('first_contract_date','=',False)]}"class="o_stat_info">
                                <spanclass="o_stat_texttext-success"attrs="{'invisible':[('contract_warning','=',True)]}"title="InContractSince">InContractSince</span>
                                <spanclass="o_stat_valuetext-success"attrs="{'invisible':[('contract_warning','=',True)]}">
                                    <fieldname="first_contract_date"readonly="1"/>
                                </span>
                                <spanclass="o_stat_texttext-danger"attrs="{'invisible':[('contract_warning','=',False)]}"title="InContractSince">
                                    InContractSince
                                </span>
                                <spanclass="o_stat_valuetext-danger"attrs="{'invisible':[('contract_warning','=',False)]}">
                                    <fieldname="first_contract_date"readonly="1"/>
                                </span>
                            </div>
                            <divattrs="{'invisible':[('first_contract_date','!=',False)]}"class="o_stat_info">
                                <spanclass="o_stat_valuetext-danger">
                                   <fieldname="contracts_count"/>
                                </span>
                                <spanclass="o_stat_texttext-danger">
                                    Contracts
                                </span>
                            </div>
                        </button>
                    </div>
                    <xpathexpr="//field[@name='user_id']"position="before">
                        <fieldname="first_contract_date"attrs="{'invisible':[('first_contract_date','=',False)]}"readonly="1"/>
                    </xpath>
                    <xpathexpr="//field[@name='bank_account_id']"position="replace">
                        <fieldname="bank_account_id"context="{'display_partner':True}"attrs="{'invisible':[('address_home_id','=',False)]}"/>
                    </xpath>
                    <xpathexpr="//field[@name='resource_calendar_id']"position="replace">
                        <fieldname="calendar_mismatch"invisible="1"/>
                        <labelfor="resource_calendar_id"/>
                        <div>
                            <fieldname="resource_calendar_id"required="1"nolabel="1"/>
                            <spanattrs="{'invisible':[('calendar_mismatch','=',False)]}"
                                class="fafa-exclamation-triangletext-dangero_calendar_warningpl-3">
                            </span>
                            <spanclass="o_calendar_warning_tooltiptext-danger">
                                CalendarMismatch:Theemployee'scalendardoesnotmatchitscurrentcontractcalendar.Thiscouldleadtounexpectedbehaviors.
                            </span>
                        </div>
                    </xpath>
                </data>
            </field>
        </record>

        <recordid="hr_employee_view_search"model="ir.ui.view">
            <fieldname="name">hr.employee.view.search</field>
            <fieldname="model">hr.employee</field>
            <fieldname="inherit_id"ref="hr.view_employee_filter"/>
            <fieldname="arch"type="xml">
                <data>
                    <xpathexpr="//filter[@name='message_needaction']"position="after">
                        <separator/>
                        <filterstring="ContractWarning"name="with_contract_warning"domain="[('contract_warning','=',True)]"/>
                    </xpath>
                </data>
            </field>
        </record>

        <recordid="hr_user_view_form"model="ir.ui.view">
        <fieldname="name">hr.user.preferences.view.form.contract.inherit</field>
        <fieldname="model">res.users</field>
        <fieldname="inherit_id"ref="hr.res_users_view_form_profile"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//field[@name='employee_bank_account_id']"position="replace">
                <fieldname="employee_bank_account_id"context="{'display_partner':True}"attrs="{'readonly':[('can_edit','=',False)]}"/>
            </xpath>
        </field>
    </record>

        <recordid="hr_contract_view_search"model="ir.ui.view">
            <fieldname="name">hr.contract.search</field>
            <fieldname="model">hr.contract</field>
            <fieldname="arch"type="xml">
                <searchstring="SearchContract">
                    <fieldname="name"string="Contract"/>
                    <fieldname="date_start"/>
                    <fieldname="date_end"/>
                    <fieldname="employee_id"/>
                    <fieldname="job_id"/>
                    <fieldname="department_id"operator="child_of"/>
                    <fieldname="resource_calendar_id"/>
                    <filterstring="Running"name="running"domain="[('state','=','open')]"/>
                    <filterstring="NeedAction"name="to_renew"domain="['&amp;',('state','=','open'),('kanban_state','=','blocked')]"/>
                    <separator/>
                    <filterstring="Employed"name="current_employee"domain="[('employee_id.active','=',True)]"/>
                    <separator/>
                    <filterstring="Archived"name="inactive"domain="[('active','=',False)]"/>
                    <separator/>
                    <filterstring="LateActivities"name="activities_overdue"
                        domain="[('my_activity_date_deadline','&lt;',context_today().strftime('%Y-%m-%d'))]"
                        help="Showallrecordswhichhaveanextactiondatebeforetoday"/>
                    <filterstring="TodayActivities"name="activities_today"
                        domain="[('my_activity_date_deadline','=',context_today().strftime('%Y-%m-%d'))]"/>
                    <filterstring="FutureActivities"name="activities_upcoming_all"
                        domain="[('my_activity_date_deadline','&gt;',context_today().strftime('%Y-%m-%d'))]"/>
                    <groupexpand="0"string="GroupBy">
                        <filterstring="Employee"name="employee"domain="[]"context="{'group_by':'employee_id'}"/>
                        <filterstring="JobPosition"name="job"domain="[]"context="{'group_by':'job_id'}"/>
                        <filterstring="Status"name='group_by_state'domain="[]"context="{'group_by':'state'}"/>
                    </group>
                </search>
            </field>
        </record>

        <recordid="hr_contract_view_form"model="ir.ui.view">
            <fieldname="name">hr.contract.form</field>
            <fieldname="model">hr.contract</field>
            <fieldname="arch"type="xml">
                <formstring="CurrentContract">
                    <header>
                        <fieldname="state"widget="statusbar"options="{'clickable':'1'}"/>
                    </header>
                    <sheet>
                    <divclass="oe_button_box"name="button_box"/>
                    <widgetname="web_ribbon"title="Archived"bg_color="bg-danger"attrs="{'invisible':[('active','=',True)]}"/>
                    <divclass="oe_titlepr-0"name="title">
                        <h1class="d-flexflex-rowjustify-content-between">
                            <fieldname="name"class="text-truncate"placeholder="ContractReference"/>
                            <fieldname="kanban_state"widget="state_selection"/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <fieldname="active"invisible="1"/>
                            <fieldname="employee_id"/>
                            <fieldname="department_id"/>
                            <fieldname="job_id"/>
                            <fieldname="company_id"groups="base.group_multi_company"/>
                            <fieldname="company_country_id"invisible="1"/>
                            <fieldname="structure_type_id"domain="['|',('country_id','=',False),('country_id','=',company_country_id)]"/>
                        </group>
                        <groupname="duration_group">
                            <fieldname="date_start"/>
                            <fieldname="first_contract_date"attrs="{'invisible':['|',('first_contract_date','=',False),('first_contract_date','=','date_start')]}"/>
                            <fieldname="date_end"/>
                            <fieldname="calendar_mismatch"invisible="1"/>
                            <labelfor="resource_calendar_id"/>
                            <div>
                                <fieldname="resource_calendar_id"required="1"nolabel="1"/>
                                <spanattrs="{'invisible':['|',('calendar_mismatch','=',False),('state','!=','open')]}"
                                    class="fafa-exclamation-triangletext-dangero_calendar_warningpl-3">
                                </span>
                                <spanclass="o_calendar_warning_tooltiptext-danger">
                                    CalendarMismatch:Theemployee'scalendardoesnotmatchthiscontract'scalendar.Thiscouldleadtounexpectedbehaviors.
                                </span>
                            </div>
                            <fieldname="hr_responsible_id"/>
                        </group>
                    </group>
                    <notebook>
                        <pagestring="ContractDetails"name="other">
                            <groupname="notes_group"string="Notes">
                                <fieldname="notes"nolabel="1"/>
                            </group>
                        </page>
                        <pagestring="SalaryInformation"name="information">
                            <groupname="main_info">
                                <groupname="salary_and_advantages"string="MonthlyAdvantagesinCash">
                                    <labelfor="wage"/>
                                    <divclass="o_row"name="wage">
                                        <fieldname="wage"nolabel="1"/>
                                        <span>/month</span>
                                    </div>
                                </group>
                                <groupstring="YearlyAdvantages"name="yearly_advantages"/>
                            </group>
                        </page>
                    </notebook>
                    </sheet>
                    <divclass="oe_chatter">
                        <fieldname="message_follower_ids"groups="base.group_user"/>
                        <fieldname="activity_ids"/>
                        <fieldname="message_ids"/>
                    </div>
                </form>
            </field>
        </record>

        <recordid="hr_contract_view_tree"model="ir.ui.view">
            <fieldname="name">hr.contract.tree</field>
            <fieldname="model">hr.contract</field>
            <fieldname="arch"type="xml">
                <treestring="Contracts"multi_edit="1"sample="1">
                    <fieldname="name"readonly="1"/>
                    <fieldname="employee_id"readonly="1"widget="many2one_avatar_employee"/>
                    <fieldname="job_id"/>
                    <fieldname="resource_calendar_id"/>
                    <fieldname="date_start"readonly="1"/>
                    <fieldname="date_end"readonly="1"/>
                    <fieldname="state"widget="badge"decoration-info="state=='draft'"decoration-warning="state=='close'"decoration-success="state=='open'"/>
                    <fieldname="kanban_state"widget="state_selection"readonly="1"/>
                    <fieldname="wage"invisible="1"/>
                    <fieldname="message_needaction"invisible="1"/>
                    <fieldname="company_id"groups="base.group_multi_company"readonly="1"/>
                </tree>
            </field>
        </record>

        <recordid="hr_contract_view_kanban"model="ir.ui.view">
            <fieldname="name">hr.contract.kanban</field>
            <fieldname="model">hr.contract</field>
            <fieldname="arch"type="xml">
                <kanbanclass="o_kanban_small_column"default_order="date_end"sample="1">
                    <fieldname="employee_id"/>
                    <fieldname="activity_state"/>
                    <fieldname="state"/>
                    <progressbarfield="activity_state"colors='{"planned":"success","today":"warning","overdue":"danger"}'/>
                    <templates>
                    <tt-name="kanban-box">
                        <divclass="oe_kanban_cardoe_kanban_global_click">
                            <divclass="o_dropdown_kanbandropdown"t-if="!selection_mode"groups="base.group_user">
                                <aclass="dropdown-toggleo-no-caretbtn"role="button"data-toggle="dropdown"data-display="static"href="#"aria-label="Dropdownmenu"title="Dropdownmenu">
                                    <spanclass="fafa-ellipsis-v"/>
                                </a>
                                <divclass="dropdown-menu"role="menu">
                                    <tt-if="widget.editable"><arole="menuitem"type="edit"class="dropdown-item">EditContract</a></t>
                                    <tt-if="widget.deletable"><arole="menuitem"type="delete"class="dropdown-item">Delete</a></t>
                                </div>
                            </div>
                            <divclass="oe_kanban_content">
                                <divclass="o_hr_contract_state">
                                    <strongclass="o_kanban_record_title">
                                        <fieldname="name"/>
                                    </strong>
                                </div>
                                <divclass="text-mutedo_kanban_record_subtitleo_hr_contract_job_id">
                                    <fieldname="job_id"/>
                                </div>
                                <divclass="oe_kanban_bottom_right">
                                    <spanclass="float-right">
                                        <fieldname="employee_id"widget="many2one_avatar_employee"/>
                                    </span>
                                    <spanclass="float-rightmr4">
                                        <fieldname="kanban_state"widget="state_selection"/>
                                    </span>
                                </div>
                            </div>
                            <divclass="oe_clear"></div>
                        </div>
                    </t>
                    </templates>
                </kanban>
            </field>
         </record>

        <recordid="hr_contract_view_activity"model="ir.ui.view">
            <fieldname="name">hr.contract.activity</field>
            <fieldname="model">hr.contract</field>
            <fieldname="arch"type="xml">
                <activitystring="Contracts">
                    <fieldname="employee_id"/>
                    <templates>
                        <divt-name="activity-box">
                            <imgt-att-src="activity_image('hr.employee','image_128',record.employee_id.raw_value)"t-att-title="record.employee_id.value"t-att-alt="record.employee_id.value"/>
                            <div>
                                <fieldname="name"display="full"/>
                                <fieldname="job_id"muted="1"display="full"/>
                            </div>
                        </div>
                    </templates>
                </activity>
            </field>
        </record>

        <recordid="action_hr_contract"model="ir.actions.act_window">
            <fieldname="name">Contracts</field>
            <fieldname="res_model">hr.contract</field>
            <fieldname="view_mode">kanban,tree,form,activity</field>
            <fieldname="domain">[('employee_id','!=',False)]</field>
            <fieldname="context">{'search_default_current':1,'search_default_group_by_state':1}</field>
            <fieldname="search_view_id"ref="hr_contract_view_search"/>
            <fieldname="help"type="html">
              <pclass="o_view_nocontent_smiling_face">
                Createanewcontract
              </p>
            </field>
        </record>

        <menuitem
            id="menu_human_resources_configuration_contract"
            name="Contracts"
            parent="hr.menu_human_resources_configuration"
            sequence="3"/>

        <menuitem
            id="hr_menu_contract"
            name="Contracts"
            action="action_hr_contract"
            parent="hr.menu_hr_employee_payroll"
            sequence="4"
            groups="hr_contract.group_hr_contract_manager"/>


</flectra>
