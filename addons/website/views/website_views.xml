<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <data>
        <!--Menuitems-->
        <menuitemname="Website"
            id="menu_website_configuration"
            sequence="9"
            groups="base.group_user"
            web_icon="website,static/description/icon.png"/>

        <recordid="action_website_add_features"model="ir.actions.act_window">
            <fieldname="name">Apps</field>
            <fieldname="type">ir.actions.act_window</field>
            <fieldname="res_model">ir.module.module</field>
            <fieldname="view_mode">kanban,tree,form</field>
            <fieldname="domain">['!',('name','=like','theme_%')]</field>
            <fieldname="context"eval="{'search_default_category_id':ref('base.module_category_website_website'),'searchpanel_default_category_id':ref('base.module_category_website')}"/>
        </record>


        <!--websiteviews-->
        <recordid="view_website_form"model="ir.ui.view">
            <fieldname="name">website.form</field>
            <fieldname="model">website</field>
            <fieldname="arch"type="xml">
                <formstring="WebsiteSettings">
                    <sheet>
                        <divname="domain">
                            <groupname="domain">
                                <fieldname="name"/>
                                <fieldname="domain"/>
                            </group>
                        </div>
                        <divname="logo">
                            <groupname="logo">
                                <fieldname="logo"widget="image"class="oe_avatarfloat-left"/>
                            </group>
                        </div>
                        <divname="other">
                            <groupname="other">
                                <fieldname="company_id"widget="selection"groups="base.group_multi_company"/>
                                <fieldname="default_lang_id"widget="selection"groups="base.group_no_one"/>
                            </group>
                        </div>
                        <notebook>
                            <pagestring="CustomCode"groups="base.group_no_one">
                                <labelfor="custom_code_head"/>
                                <fieldname="custom_code_head"widget="ace"options="{'mode':'xml'}"/>

                                <labelfor="custom_code_footer"/>
                                <fieldname="custom_code_footer"widget="ace"options="{'mode':'xml'}"/>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <recordid="view_arch_only"model="ir.ui.view">
            <fieldname="name">website.ir_ui_view.arch_only</field>
            <fieldname="model">ir.ui.view</field>
            <fieldname="arch"type="xml">
                <form>
                    <sheet>
                        <fieldname="arch"/>
                    </sheet>
                </form>
            </field>
        </record>

        <recordid="view_website_form_view_themes_modal"model="ir.ui.view">
            <fieldname="name">website.modal.form</field>
            <fieldname="model">website</field>
            <fieldname="inherit_id"ref="website.view_website_form"/>
            <fieldname="mode">primary</field>
            <fieldname="arch"type="xml">
                <xpathexpr="//form"position="inside">
                    <footer>
                        <buttonname="create_and_redirect_to_theme"type="object"string="PickaTheme"class="btnbtn-primary"icon="fa-paint-brush"/>
                        <buttonstring="Cancel"class="btnbtn-secondary"special="cancel"/>
                    </footer>
                </xpath>
                <xpathexpr="//notebook"position="replace"/>
            </field>
        </record>

        <recordid="view_website_tree"model="ir.ui.view">
            <fieldname="name">website.tree</field>
            <fieldname="model">website</field>
            <fieldname="arch"type="xml">
                <treestring="Websites">
                    <fieldname="name"/>
                    <fieldname="domain"/>
                    <fieldname="country_group_ids"widget="many2many_tags"/>
                    <fieldname="company_id"groups="base.group_multi_company"/>
                    <fieldname="default_lang_id"/>
                    <fieldname="theme_id"groups="base.group_no_one"/>
                </tree>
            </field>
        </record>

        <recordid="action_website_list"model="ir.actions.act_window">
            <fieldname="name">Websites</field>
            <fieldname="res_model">website</field>
            <fieldname="view_mode">tree,form</field>
            <fieldname="view_id"ref="view_website_tree"/>
            <fieldname="target">current</field>
        </record>


        <!--website.pageviews-->
        <recordid="website_pages_form_view"model="ir.ui.view">
            <fieldname="name">website.page.form</field>
            <fieldname="model">website.page</field>
            <fieldname="arch"type="xml">
                <formstring="WebsitePageSettings">
                    <sheet>
                        <group>
                            <group>
                                <fieldname="name"/>
                                <fieldname="url"/>
                                <fieldname="view_id"context="{'display_website':True}"options="{'always_reload':True}"/>
                                <fieldname="website_id"options="{'no_create':True}"groups="website.group_multi_website"/>
                                <fieldname="track"/>
                            </group>
                            <group>
                                <fieldname="website_indexed"/>
                                <fieldname="is_published"/>
                                <fieldname="date_publish"/>
                                <fieldname="cache_time"groups="base.group_no_one"/>
                                <fieldname="cache_key_expr"groups="base.group_no_one"/>
                            </group>
                        </group>
                        <labelfor="menu_ids"string="RelatedMenuItems"/>
                        <fieldname="menu_ids"/>
                    </sheet>
                </form>
            </field>
        </record>

        <recordid="website_pages_tree_view"model="ir.ui.view">
            <fieldname="name">website.page.list</field>
            <fieldname="model">website.page</field>
            <fieldname="arch"type="xml">
                <treestring="WebsitePages"default_order="name"multi_edit="1">
                    <fieldname="name"/>
                    <fieldname="url"/>
                    <fieldname="website_id"groups="website.group_multi_website"/>
                    <fieldname="website_indexed"/>
                    <fieldname="is_published"string="IsPublished"/>
                    <fieldname="create_uid"invisible="1"/>
                    <fieldname="write_uid"/>
                    <fieldname="write_date"/>
                    <fieldname="track"/>
                </tree>
            </field>
        </record>

        <recordid="website_pages_view_search"model="ir.ui.view">
            <fieldname="name">website.page.view.search</field>
            <fieldname="model">website.page</field>
            <fieldname="arch"type="xml">
                <searchstring="WebsitePages">
                    <fieldname="url"/>
                    <filterstring="Published"name="published"domain="[('website_published','=',True)]"/>
                    <filterstring="Notpublished"name="not_published"domain="[('website_published','=',False)]"/>
                    <separator/>
                    <filterstring="Tracked"name="tracked"domain="[('track','=',True)]"/>
                    <filterstring="Nottracked"name="not_tracked"domain="[('track','=',False)]"/>
                </search>
            </field>
        </record>

        <recordid="action_website_pages_list"model="ir.actions.act_window">
            <fieldname="name">WebsitePages</field>
            <fieldname="res_model">website.page</field>
            <fieldname="view_mode">tree,form</field>
            <fieldname="view_id"ref="website_pages_tree_view"/>
            <fieldname="target">current</field>
        </record>

        <!--website.menuviews-->
        <recordid="website_menus_form_view"model="ir.ui.view">
            <fieldname="name">website.menu.form</field>
            <fieldname="model">website.menu</field>
            <fieldname="arch"type="xml">
                <formstring="WebsiteMenusSettings">
                    <sheet>
                        <group>
                            <group>
                                <fieldname="name"/>
                                <fieldname="url"/>
                                <fieldname="page_id"/>
                                <fieldname="is_mega_menu"/>
                            </group>
                            <group>
                                <fieldname="new_window"/>
                                <fieldname="sequence"/>
                                <fieldname="website_id"options="{'no_create':True}"groups="website.group_multi_website"/>
                            </group>
                            <group>
                                <fieldname="parent_id"context="{'display_website':True}"/>
                                <fieldname="group_ids"/>
                            </group>
                        </group>
                        <labelfor="child_id"string="ChildMenus"/>
                        <fieldname="child_id">
                            <tree>
                                <fieldname="sequence"widget="handle"/>
                                <fieldname="name"/>
                                <fieldname="url"/>
                            </tree>
                        </field>
                    </sheet>
                </form>
            </field>
        </record>

        <recordid="menu_tree"model="ir.ui.view">
            <fieldname="name">website.menu.tree</field>
            <fieldname="model">website.menu</field>
            <fieldname="field_parent">child_id</field>
            <fieldname="arch"type="xml">
                <treestring="Websitemenu"editable="bottom">
                    <fieldname="sequence"widget="handle"/>
                    <fieldname="website_id"options="{'no_create':True}"groups="website.group_multi_website"/>
                    <fieldname="name"/>
                    <fieldname="url"/>
                    <fieldname="is_mega_menu"/>
                    <fieldname="new_window"/>
                    <fieldname="parent_id"context="{'display_website':True}"/>
                    <fieldname="group_ids"widget="many2many_tags"/>
                </tree>
            </field>
        </record>

        <recordid="menu_search"model="ir.ui.view">
            <fieldname="name">website.menu.search</field>
            <fieldname="model">website.menu</field>
            <fieldname="arch"type="xml">
                <searchstring="SearchMenus">
                    <fieldname="name"/>
                    <fieldname="url"/>
                    <fieldname="website_id"groups="website.group_multi_website"/>
                    <groupstring="GroupBy">
                        <filterstring="Name"name="group_by_name"domain="[]"context="{'group_by':'name'}"/>
                        <filterstring="Url"name="group_by_url"domain="[]"context="{'group_by':'url'}"/>
                        <filterstring="Website" name="group_by_website_id"domain="[]"context="{'group_by':'website_id'}"/>
                    </group>
                </search>
            </field>
        </record>

        <recordid="action_website_menu"model="ir.actions.act_window">
            <fieldname="name">WebsiteMenu</field>
            <fieldname="res_model">website.menu</field>
            <fieldname="view_mode">tree,form</field>
            <fieldname="context">{'search_default_group_by_website_id':1}</field>
            <fieldname="view_id"ref="menu_tree"/>
            <fieldname="target">current</field>
        </record>

        <!--ir.ui.viewviews-->
        <recordmodel="ir.ui.view"id="view_view_form_extend">
            <fieldname="model">ir.ui.view</field>
            <fieldname="inherit_id"ref="base.view_view_form"/>
            <fieldname="arch"type="xml">
                <fieldname="inherit_id"position="attributes">
                    <attributename="context">{'display_website':True}</attribute>
                    <attributename="options">{'always_reload':True}</attribute>
                </field>
                <fieldname="type"position="after">
                    <fieldname="website_id"options="{'no_create':True}"groups="website.group_multi_website"/>
                    <fieldname="key"/>
                    <fieldname="page_ids"invisible="1"/>
                    <fieldname="first_page_id"attrs="{'invisible':[('page_ids','=',[])]}"/>
                    <fieldname="visibility"attrs="{'invisible':[('type','!=','qweb')]}"/>
                    <fieldname="visibility_password_display"attrs="{'invisible':[('visibility','!=','password')]}"password="True"string="VisibilityPassword"/>
                </field>
                <sheetposition="before">
                    <header>
                        <buttonname="redirect_to_page_manager"string="GotoPageManager"
                            type="object"attrs="{'invisible':[('page_ids','=',[])]}"/>
                    </header>
                </sheet>
            </field>
        </record>

        <recordid="view_view_tree_inherit_website"model="ir.ui.view">
            <fieldname="model">ir.ui.view</field>
            <fieldname="inherit_id"ref="base.view_view_tree"/>
            <fieldname="arch"type="xml">
                <fieldname="name"position="after">
                    <fieldname="website_id"groups="website.group_multi_website"/>
                </field>
                <fieldname="xml_id"position="before">
                    <fieldname="key"groups="website.group_multi_website"/>
                </field>
            </field>
        </record>

        <recordid="reset_view_arch_wizard_view"model="ir.ui.view">
            <fieldname="model">reset.view.arch.wizard</field>
            <fieldname="inherit_id"ref="base.reset_view_arch_wizard_view"/>
            <fieldname="arch"type="xml">
                <fieldname="compare_view_id"position="attributes">
                    <attributename="context">{'display_website':True}</attribute>
                </field>
            </field>
        </record>

        <!--Dashboard-->
        <recordid="backend_dashboard"model="ir.actions.client">
            <fieldname="name">Analytics</field>
            <fieldname="tag">backend_dashboard</field>
        </record>

        <recordid="ir_actions_server_website_dashboard"model="ir.actions.server">
            <fieldname="name">Website:Dashboard</field>
            <fieldname="model_id"ref="website.model_website"/>
            <fieldname="state">code</field>
            <fieldname="code">action=model.action_dashboard_redirect()</field>
            <fieldname="groups_id"eval="[(4,ref('base.group_user'))]"/>
        </record>

        <recordid="ir_actions_server_website_google_analytics"model="ir.actions.server">
            <fieldname="name">Website:Analytics</field>
            <fieldname="model_id"ref="website.model_website"/>
            <fieldname="state">code</field>
            <fieldname="code">action=model.env.ref('website.backend_dashboard').sudo().read()[0]</field>
            <fieldname="groups_id"eval="[(4,ref('base.group_user'))]"/>
        </record>

        <!--Custommodulekanban:installbutton(evenifalreadyinstalled)which-->
        <!--redirectstowebsiteafter(fakeornot)installation+livepreviewbutton-->
        <recordmodel="ir.ui.view"id="theme_view_kanban">
            <fieldname="name">ThemesKanban</field>
            <fieldname="model">ir.module.module</field>
            <fieldname="arch"type="xml">
                <kanbancreate="false"class="o_theme_kanban"default_order="state,sequence,name"js_class="theme_preview_kanban">
                    <fieldname="icon"/>
                    <fieldname="name"/>
                    <fieldname="state"/>
                    <fieldname="url"/>
                    <fieldname="image_ids"/>
                    <fieldname="category_id"/>
                    <fieldname="display_name"/>
                    <fieldname="is_installed_on_current_website"/>
                    <templates>
                        <divt-name="kanban-box"t-attf-class="o_theme_previewmb16mt16#{record.is_installed_on_current_website.raw_value?'o_theme_installed':''}">
                            <tt-set="has_image"t-value="record.image_ids.raw_value.length>0"/>
                            <tt-set="has_screenshot"t-value="record.image_ids.raw_value.length>1"/>
                            <tt-set="image_url"t-value="has_image?'/web/image/'+record.image_ids.raw_value[0]:record.icon.value"/>

                            <divclass="o_theme_preview_topbg-whitemb4">
                                <divt-attf-class="bg-gray-lighter#{has_screenshot?'o_theme_screenshot':(has_image?'o_theme_cover':'o_theme_logo')}"t-attf-style="background-image:url(#{image_url});"/>
                                <divt-if="record.is_installed_on_current_website.raw_value"class="o_button_area">
                                    <buttontype="object"name="button_refresh_theme"class="btnbtn-primary">Updatetheme</button>
                                    <hr/>
                                    <buttontype="object"name="button_remove_theme"class="btnbtn-secondary">Removetheme</button>
                                </div>
                                <divt-else=""class="o_button_area">
                                    <buttontype="object"name="button_choose_theme"class="btnbtn-primary">Usethistheme</button>
                                    <hrt-if="record.url.value"/>
                                    <buttonrole="button"type="edit"t-if="record.url.value"class="btnbtn-secondary">LivePreview</button>
                                </div>
                                <istates="installed"t-if="record.is_installed_on_current_website.raw_value"
                                    class="fafa-checkposition-absolutep-1m-2rounded-circlebg-primaryshadow"
                                    style="top:0;right:0;"
                                    role="img"aria-label="Installed"title="Installed"/>
                            </div>
                            <divclass="o_theme_preview_bottomclearfix">
                                <h5t-if="record.display_name.value"class="text-uppercasefloat-left">
                                    <imgclass="float-leftmr4" t-att-src="record.icon.value"height="16"width="16"alt="Themepreview"/>
                                    <b><tt-esc="record.display_name.value.replace(('Theme'),'').replace(('theme'),'')"/></b>
                                </h5>
                                <h6t-if="record.category_id.value"class="text-mutedfloat-right">
                                    <b><tt-esc="record.category_id.value"/></b>
                                </h6>
                            </div>
                        </div>
                    </templates>
                </kanban>
            </field>
        </record>
        <recordmodel="ir.ui.view"id="theme_view_search">
            <fieldname="name">ThemesSearch</field>
            <fieldname="model">ir.module.module</field>
            <fieldname="priority">50</field>
            <fieldname="arch"type="xml">
                <search>
                    <fieldname="name"filter_domain="['|','|',('summary','ilike',self),('shortdesc','ilike',self),('name','ilike',self)]"string="Theme"/>
                    <fieldname="category_id"filter_domain="['|','|',('summary','ilike',self),('shortdesc','ilike',self),('category_id','ilike',self)]"string="Category"/>
                    <group>
                        <filterstring="Author"name="author"domain="[]"context="{'group_by':'author'}"/>
                        <filterstring="Category"name="category"domain="[]"context="{'group_by':'category_id'}"/>
                    </group>
                </search>
            </field>
        </record>

        <!--themesshouldbeinstalledthroughwebsitesettings-->
        <recordid="base.open_module_tree"model="ir.actions.act_window">
            <fieldname="domain">['!',('name','=like','theme_%')]</field>
        </record>

        <!--Actionstolistthemeswithcustomkanban(launchedonmoduleinstallation)-->
        <recordid="theme_view_form_preview"model="ir.ui.view">
            <fieldname="name">website.form</field>
            <fieldname="model">ir.module.module</field>
            <fieldname="mode">primary</field>
            <fieldname="arch"type="xml">
                <formcreate="false"edit="false"delete="0"js_class="theme_preview_form">
                  <divclass="o_preview_frameh-100">
                        <fieldname='url'widget='iframe'/>
                        <imgalt='phone'class='img_mobile'style='display:none'src="/website/static/src/img/phone.png"/>
                  </div>

                </form>
            </field>
        </record>

        <recordid="theme_install_kanban_action"model="ir.actions.act_window">
            <fieldname="name">PickaTheme</field>
            <fieldname="res_model">ir.module.module</field>
            <fieldname="view_mode">kanban,form</field>
            <fieldname="view_id"ref="website.theme_view_kanban"/>
            <fieldname="target">fullscreen</field>
            <fieldname="view_ids"
                   eval="[(5,0,0),
                          (0,0,{'view_mode':'kanban','view_id':ref('website.theme_view_kanban')}),
                          (0,0,{'view_mode':'form','view_id':ref('website.theme_view_form_preview')})]"/>
            <fieldname="search_view_id"ref="theme_view_search"/>
            <fieldname="domain"eval="[
                ('category_id','notin',[ref('base.module_category_hidden',False),ref('base.module_category_theme_hidden',False)]),
                '|',('category_id','=',ref('base.module_category_theme',False)),('category_id.parent_id','=',ref('base.module_category_theme',False))
            ]"/>
        </record>

        <recordid="theme_install_act_url"model="ir.actions.act_url">
            <fieldname="name">Website</field>
            <fieldname="url">/web?reload#action=website.theme_install_kanban_action</field>
            <fieldname="target">self</field>
        </record>

        <recordid="theme_install_todo"model="ir.actions.todo">
            <fieldname="name">Gototheme</field>
            <fieldname="action_id"ref="theme_install_act_url"/>
            <fieldname="sequence">0</field>
        </record>

        <!--ONBOARDING-->
        <templateid="onboarding_website_theme_step">
            <tt-call="base.onboarding_step">
                <tt-set="title">WebsiteTheme</t>
                <tt-set="description">Selectathemeforyourwebsite.</t>
                <tt-set="btn_text">Let'sstart!</t>
                <tt-set="method"t-value="'action_open_website_theme_selector'"/>
                <tt-set="model"t-value="'res.company'"/>
                <tt-set="done"t-value="company.website_theme_onboarding_done"/>
            </t>
        </template>

        <menuitemid="menu_dashboard"
            name="Dashboard"
            sequence="1"
            parent="website.menu_website_configuration"/>

        <!--Forceemptyaction,toeaseupgrade-->
        <recordid="menu_dashboard"model="ir.ui.menu">
            <fieldname="action"eval="False"/>
        </record>

        <menuitemid="menu_website_dashboard"parent="menu_dashboard"
            sequence="10"name="eCommerceDashboard"
            action="website.ir_actions_server_website_dashboard"active="0"/>

        <menuitemid="menu_website_google_analytics"parent="menu_dashboard"
            sequence="20"name="Analytics"
            action="website.ir_actions_server_website_google_analytics"/>

    </data>
</flectra>
