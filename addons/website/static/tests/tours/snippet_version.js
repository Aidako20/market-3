flectra.define("website.tour.snippet_version",function(require){
"usestrict";

vartour=require("web_tour.tour");

tour.register("snippet_version",{
    test:true,
    url:"/",
},[{
    content:"Entereditmode",
    trigger:'a[data-action=edit]',
},{
    content:"Drops_test_snipsnippet",
    trigger:'#oe_snippets.oe_snippet:has(.s_test_snip).oe_snippet_thumbnail',
    run:"drag_and_drop#wrap",
},{
    content:"Drops_text_imagesnippet",
    trigger:'#oe_snippets.oe_snippet:has(.s_text_image).oe_snippet_thumbnail:not(.o_we_already_dragging)',
    run:"drag_and_drop#wrap",
},{
    content:"Testt-snippetandt-snippet-call:snippetshavedata-snippetset",
    trigger:'#oe_snippets.o_panel_body>.oe_snippet.ui-draggable',
    run:function(){
        //Testsdonehereasallthesearenotvisibleonthepage
        constdraggableSnippets=document.querySelectorAll('#oe_snippets.o_panel_body>.oe_snippet.ui-draggable>:nth-child(2)');
        if(![...draggableSnippets].every(el=>el.dataset.snippet)){
            console.error("errorSomet-snippetaremissingtheirtemplatename");
        }
        if(!document.querySelector('#oe_snippets[data-snippet="s_test_snip"][data-snippet="s_share"]')){
            console.error("errors_sharet-calledinsides_test_snipismissingtemplatename");
        }
        if(!document.querySelector('#wrap[data-snippet="s_test_snip"][data-snippet="s_share"]')){
            console.error("errorDroppedas_test_snipsnippetbutmissings_sharetemplatenameinit");
        }
    },
},{
    content:"Entereditmode",
    trigger:'button[data-action="save"]',
},{
    content:"Entereditmode",
    extra_trigger:'body:not(.editor_enable)',
    trigger:'a[data-action=edit]',
},{
    content:"Modifytheversionofsnippets",
    trigger:'#oe_snippets.o_panel_body>.oe_snippet',
    run:function(){
        document.querySelector('#oe_snippets.oe_snippet>[data-snippet="s_test_snip"]').dataset.vjs='999';
        document.querySelector('#oe_snippets.oe_snippet>[data-snippet="s_share"]').dataset.vcss='999';
        document.querySelector('#oe_snippets.oe_snippet>[data-snippet="s_text_image"]').dataset.vxml='999';
    },
},{
    content:"Edits_test_snip",
    trigger:'#wrap.o_editable.s_test_snip',
},{
    content:"Edittext_image",
    extra_trigger:'we-customizeblock-options:contains(Testsnip).snippet-option-VersionControl>we-alert',
    trigger:'#wrap.o_editable.s_text_image',
},{
    content:"Edits_share",
    extra_trigger:'we-customizeblock-options:contains(Text-Image).snippet-option-VersionControl >we-alert',
    trigger:'#wrap.o_editable.s_share',
},{
    content:"s_shareisoutdated",
    extra_trigger:'we-customizeblock-options:contains(Share).snippet-option-VersionControl>we-alert',
    trigger:'body',
}]);
});
