flectra.define('website_slides.tour.slide.course.member',function(require){
'usestrict';

vartour=require('web_tour.tour');

/**
 *Globalusecase:
 *anuser(eitheremployee,websitepublisherorportal)joinsapublic
    course;
 *hehasaccesstothefullcoursecontentwhenhe'samemberofthe
    course;
 *heusesfullscreenplayertocompletethecourse;
 *heratesthecourse;
 */
tour.register('course_member',{
    url:'/slides',
    test:true
},[
//eLearning:goonfreecourseandjoinit
{
    trigger:'a:contains("BasicsofGardening-Test")'
},{
    trigger:'a:contains("JoinCourse")'
},{
    trigger:'.o_wslides_js_course_join:contains("You\'reenrolled")',
    run:function(){}//checkmembership
},{
    trigger:'a:contains("Gardening:TheKnow-How")',
},
//eLearning:followcoursebyclikingonfirstlessonandgoingtofullscreenplayer
{
    trigger:'.o_wslides_fs_sidebar_list_itemdiv:contains("HomeGardening")'
},
//eLearning:sharethefirstslide
{
    trigger:'.o_wslides_fs_share'
},{
    trigger:'.o_wslides_js_share_emailinput[type="email"]',
    run:'textfriend@example.com'
},{
    trigger:'.o_wslides_js_share_emailbutton',
},{
    trigger:'.o_wslides_js_share_email:contains("Thankyou")',
    run:function(){} //checkemailhasbeensent
},{
    trigger:'.modal-footerbutton:contains("Cancel")',
},
//eLeaning:coursecompletion
{
    trigger:'.o_wslides_fs_sidebar_header',
    run:function(){
        //checknavigationwitharrowkeys
        varevent=jQuery.Event("keydown");
        event.key="ArrowLeft";
        //gobackonce
        $(document).trigger(event);
        //checkthatitselectedtheprevioustab
        if($('.o_wslides_fs_sidebar_list_item.active:contains("Gardening:TheKnow-How")').length===0){
            return;
        }
        //gettingheremeansthatnavigationworked
        $('.o_wslides_fs_sidebar_header').addClass('navigation-success-1');
    }
},{
    trigger:'.o_wslides_fs_sidebar_header.navigation-success-1',
    extra_trigger:'.o_wslides_progress_percentage:contains("40")',
    run:function(){
        //checknavigationwitharrowkeys
        varevent=jQuery.Event("keydown");
        event.key="ArrowRight";
        $(document).trigger(event);
        //checkthatitselectedthenext/nexttab
        if($('.o_wslides_fs_sidebar_list_item.active:contains("HomeGardening")').length===0){
            return;
        }
        //gettingheremeansthatnavigationworked
        $('.o_wslides_fs_sidebar_header').addClass('navigation-success-2');
    }
},{
    trigger:'.o_wslides_progress_percentage:contains("40")',
    run:function(){}//checkprogression
},{
    trigger:'.o_wslides_fs_sidebar_header.navigation-success-2',
    extra_trigger:'.o_wslides_progress_percentage:contains("40")',
    run:function(){
        //checknavigationwitharrowkeys
        varevent=jQuery.Event("keydown");
        event.key="ArrowRight";
        setTimeout(function(){
            $(document).trigger(event);
            //checkthatitselectedthenext/nexttab
            if($('.o_wslides_fs_sidebar_list_item.active:contains("MightyCarrots")').length===0){
                return;
            }
            //gettingheremeansthatnavigationworked
            $('.o_wslides_fs_sidebar_header').addClass('navigation-success-3');
        },300);
    }
},{
    trigger:'.o_wslides_progress_percentage:contains("60")',
    run:function(){}//checkprogression
},{
    trigger:'.o_wslides_fs_sidebar_header.navigation-success-3',
    extra_trigger:'.o_wslides_progress_percentage:contains("60")',
    run:function(){}//checkthatpreviousstepsucceeded
},{
    trigger:'.o_wslides_fs_sidebar_list_itemdiv:contains("HowtoGrowandHarvestTheBestStrawberries|Basics")'
},{
    trigger:'.o_wslides_fs_sidebar_section_slidesli:contains("HowtoGrowandHarvestTheBestStrawberries|Basics").o_wslides_slide_completed',
    run:function(){}//checkthatvideoslideismarkedas'done'
},{
    trigger:'.o_wslides_progress_percentage:contains("80")',
    run:function(){}//checkprogression
},
//eLearning:lastslideisaquiz,completeit
{
    trigger:'.o_wslides_fs_sidebar_list_itemdiv:contains("Testyourknowledge")'
},{
    trigger:'.o_wslides_js_lesson_quiz_question:first.list-groupa:first'
},{
    trigger:'.o_wslides_js_lesson_quiz_question:last.list-groupa:first'
},{
    trigger:'.o_wslides_js_lesson_quiz_submit'
},{
    trigger:'a:contains("Endcourse")'
},
//eLearning:endingcourseredirectto/slides,courseiscompletednow
{
    trigger:'div:contains("BasicsofGardening")span:contains("Completed")',
    run:function(){}//checkthatthecourseismarkedascompleted
},
//eLearning:gobackoncourseandrateit(newrateorupdateit,bothshouldwork)
{
    trigger:'a:contains("BasicsofGardening")'
},{
    trigger:'button[data-target="#ratingpopupcomposer"]'
},{
    trigger:'form.o_portal_chatter_composer_formi.fa:eq(4)',
    extra_trigger:'div.modal_shown',
    run:'click',
    in_modal:false,
},{
    trigger:'form.o_portal_chatter_composer_formtextarea',
    run:'textThisisagreatcourse.Top!',
    in_modal:false,
},{
    trigger:'button.o_portal_chatter_composer_btn',
    in_modal:false,
},{
    trigger:'a[id="review-tab"]'
},{
    trigger:'.o_portal_chatter_message:contains("Thisisagreatcourse.Top!")',
    run:function(){},//checkreviewiscorrectlyadded
}
]);

});
