<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <data>

        <recordid="account_edi.action_open_edi_documents"model="ir.actions.act_window">
            <fieldname="name">Electronicinvoicing</field>
            <fieldname="res_model">account.edi.document</field>
            <fieldname="view_mode">tree</field>
            <fieldname="domain">[('move_id','=',active_id),('error','!=',False)]</field>
        </record>

        <recordid="view_move_form_inherit"model="ir.ui.view">
            <fieldname="name">account.move.form.inherit</field>
            <fieldname="model">account.move</field>
            <fieldname="inherit_id"ref="account.view_move_form"/>
            <fieldname="arch"type="xml">
                <xpathexpr="//button[@name='button_cancel']"position="after">
                    <fieldname="edi_show_cancel_button"invisible="1"/>
                    <buttonname="button_cancel_posted_moves"
                            string="RequestEDICancellation"
                            type="object"
                            groups="account.group_account_invoice"
                            attrs="{'invisible':[('edi_show_cancel_button','=',False)]}"/>
                </xpath>
                <xpathexpr="//header"position="after">
                    <divclass="alertalert-info"role="alert"style="margin-bottom:0px;"
                        attrs="{'invisible':['|',('edi_web_services_to_process','in',['',False]),('state','=','draft')]}">
                         <div>Theinvoicewillbesentasynchronouslyto:
                            <fieldname="edi_web_services_to_process"class="oe_inline"/>
                         </div>
                         <buttonname="action_process_edi_web_services"type="object"class="oe_link"string="Sendnow"/>
                    </div>
                    <divclass="alertalert-warning"role="alert"style="margin-bottom:0px;"
                         attrs="{'invisible':[('edi_error_count','=',0)]}">
                         <fieldname="edi_error_count"/>
                         Electronicinvoicingerror(s)
                         <buttonname="%(account_edi.action_open_edi_documents)d"type="action"class="oe_linkoe_inline"string="â‡’Seeerrors"/>
                    </div>
                </xpath>
                <xpathexpr="//div[@name='journal_div']"position="after">
                    <fieldname="edi_state"attrs="{'invisible':['|',('edi_state','=',False),('state','=','draft')]}"/>
                </xpath>
                <xpathexpr="//page[@id='other_tab']"position="after">
                    <pageid="edi_documents"
                          string="EDIDocuments"
                          groups="base.group_no_one"
                          attrs="{'invisible':[('edi_document_ids','=',[])]}">
                        <fieldname="edi_document_ids"options="{'no_open':'1'}">
                            <treecreate="false"delete="false"edit="false"decoration-danger="error">
                                <fieldname="name"/>
                                <fieldname="edi_format_name"/>
                                <fieldname="state"/>
                                <fieldname="error"invisible="1"/>
                                <buttonname="action_export_xml"
                                        type="object"
                                        class="oe_linkoe_inline"
                                        string="Download"
                                        groups="base.group_no_one"
                                        attrs="{'invisible':[('error','=',False)]}"/>
                            </tree>
                        </field>
                    </page>
                </xpath>
            </field>
        </record>
    </data>
</flectra>
