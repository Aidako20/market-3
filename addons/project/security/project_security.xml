<?xmlversion="1.0"encoding="utf-8"?>
<flectra>

    <recordid="base.module_category_services_project"model="ir.module.category">
        <fieldname="description">Helpsyoumanageyourprojectsandtasksbytrackingthem,generatingplannings,etc...</field>
        <fieldname="sequence">3</field>
    </record>

    <recordid="group_project_user"model="res.groups">
        <fieldname="name">User</field>
        <fieldname="implied_ids"eval="[(4,ref('base.group_user'))]"/>
        <fieldname="category_id"ref="base.module_category_services_project"/>
    </record>

    <recordid="group_project_manager"model="res.groups">
        <fieldname="name">Administrator</field>
        <fieldname="category_id"ref="base.module_category_services_project"/>
        <fieldname="implied_ids"eval="[(4,ref('group_project_user'))]"/>
        <fieldname="users"eval="[(4,ref('base.user_root')),(4,ref('base.user_admin'))]"/>
    </record>

    <recordid="group_subtask_project"model="res.groups">
        <fieldname="name">UseSubtasks</field>
        <fieldname="category_id"ref="base.module_category_hidden"/>
    </record>

    <recordid="group_project_rating"model="res.groups">
        <fieldname="name">UseRatingonProject</field>
        <fieldname="category_id"ref="base.module_category_hidden"/>
    </record>

    <recordid="group_project_recurring_tasks"model="res.groups">
        <fieldname="name">UseRecurringTasks</field>
        <fieldname="category_id"ref="base.module_category_hidden"/>
    </record>

<datanoupdate="1">
    <recordid="base.default_user"model="res.users">
        <fieldname="groups_id"eval="[(4,ref('project.group_project_manager'))]"/>
    </record>

    <recordmodel="ir.rule"id="project_comp_rule">
        <fieldname="name">Project:multi-company</field>
        <fieldname="model_id"ref="model_project_project"/>
        <fieldname="domain_force">[('company_id','in',company_ids)]</field>
    </record>

    <recordmodel="ir.rule"id="project_project_manager_rule">
        <fieldname="name">Project:projectmanager:seeall</field>
        <fieldname="model_id"ref="model_project_project"/>
        <fieldname="domain_force">[(1,'=',1)]</field>
        <fieldname="groups"eval="[(4,ref('project.group_project_manager'))]"/>
    </record>

    <recordmodel="ir.rule"id="project_public_members_rule">
        <fieldname="name">Project:Onlyinvitedusers</field>
        <fieldname="model_id"ref="model_project_project"/>
        <fieldname="domain_force">[
        '|',
            ('privacy_visibility','!=','followers'),
            ('allowed_internal_user_ids','in',user.ids),
        ]</field>
        <fieldname="groups"eval="[(4,ref('base.group_user'))]"/>
    </record>

    <recordmodel="ir.rule"id="task_comp_rule">
        <fieldname="name">Project/Task:multi-company</field>
        <fieldname="model_id"ref="model_project_task"/>
        <fieldname="domain_force">[('company_id','in',company_ids)]</field>
    </record>

    <recordmodel="ir.rule"id="task_visibility_rule">
        <fieldname="name">Project/Task:employees:followrequiredforfollower-onlyprojects</field>
        <fieldname="model_id"ref="model_project_task"/>
        <fieldname="domain_force">[
        '|',
            ('project_id.privacy_visibility','!=','followers'),
            ('allowed_user_ids','in',user.ids),
        ]</field>
        <fieldname="groups"eval="[(4,ref('base.group_user'))]"/>
    </record>

    <recordmodel="ir.rule"id="project_manager_all_project_tasks_rule">
        <fieldname="name">Project/Task:projectmanager:seeall</field>
        <fieldname="model_id"ref="model_project_task"/>
        <fieldname="domain_force">[(1,'=',1)]</field>
        <fieldname="groups"eval="[(4,ref('project.group_project_manager'))]"/>
    </record>

    <recordmodel="ir.rule"id="report_project_task_user_report_comp_rule">
        <fieldname="name">TaskAnalysismulti-company</field>
        <fieldname="model_id"ref="model_report_project_task_user"/>
        <fieldname="domain_force">[('company_id','in',company_ids)]</field>
    </record>

     <!--Portal-->
    <recordid="project_project_rule_portal"model="ir.rule">
        <fieldname="name">Project:portalusers:portalandfollowing</field>
        <fieldname="model_id"ref="project.model_project_project"/>
        <fieldname="domain_force">[
            ('privacy_visibility','=','portal'),
            ('allowed_portal_user_ids','in',user.ids),
        ]</field>
        <fieldname="groups"eval="[(4,ref('base.group_portal'))]"/>
    </record>

    <recordid="project_task_rule_portal"model="ir.rule">
        <fieldname="name">Project/Task:portalusers:(portalandfollowingproject)or(portalandfollowingtask)</field>
        <fieldname="model_id"ref="project.model_project_task"/>
        <fieldname="domain_force">[
            ('project_id.privacy_visibility','=','portal'),
            ('allowed_user_ids','in',user.ids),
        ]</field>
        <fieldname="groups"eval="[(4,ref('base.group_portal'))]"/>
    </record>

</data>
</flectra>
