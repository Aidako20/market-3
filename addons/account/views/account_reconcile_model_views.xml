<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <data>

        <recordid="view_account_reconcile_model_line_form"model="ir.ui.view">
            <fieldname="name">account.reconcile.model.line.form</field>
            <fieldname="model">account.reconcile.model.line</field>
            <fieldname="arch"type="xml">
                <form>
                    <fieldname="model_id"invisible="1"/>
                    <fieldname="match_total_amount"invisible="1"/>
                    <fieldname="match_total_amount_param"invisible="1"/>
                    <fieldname="rule_type"invisible="1"/>
                    <group>
                        <group>
                            <fieldname="account_id"options="{'no_create':True}"domain="[('company_id','=',company_id)]"
                                   attrs="{'required':['|',('rule_type','!=','invoice_matching'),'&amp;','&amp;',('rule_type','=','invoice_matching'),('match_total_amount','=',True),('match_total_amount_param','!=',100.0)]}"/>
                            <fieldname="amount_type"/>
                            <fieldname="tax_ids"
                                   domain="[('company_id','=',company_id)]"
                                   options="{'no_create':True}"
                                   context="{'append_type_to_tax_name':True}"
                                   widget="many2many_tags"/>
                            <fieldname="show_force_tax_included"invisible="1"/>
                            <fieldname="force_tax_included"
                                   attrs="{'invisible':[('show_force_tax_included','=',False)]}"force_save="1"/>
                            <fieldname="analytic_account_id"domain="['|',('company_id','=',company_id),('company_id','=',False)]"groups="analytic.group_analytic_accounting"/>
                            <fieldname="analytic_tag_ids"groups="analytic.group_analytic_tags"widget="many2many_tags"/>
                            <fieldname="company_id"invisible="1"/>
                        </group>
                        <group>
                            <fieldname="label"/>
                            <labelfor="amount_string"/>
                            <div>
                                <fieldname="amount_string"class="oe_inline"/>
                                <spanclass="o_form_labeloe_inline"attrs="{'invisible':[('amount_type','!=','percentage')]}">%</span>
                            </div>
                        </group>
                    </group>
                </form>
            </field>
        </record>

        <recordid="view_account_reconcile_model_tree"model="ir.ui.view">
            <fieldname="name">account.reconcile.model.tree</field>
            <fieldname="model">account.reconcile.model</field>
            <fieldname="arch"type="xml">
                <treestring="BankReconciliationMovePresets">
                    <fieldname="sequence"widget="handle"/>
                    <fieldname="name"/>
                    <fieldname="rule_type"/>
                    <fieldname="auto_reconcile"/>
                </tree>
            </field>
        </record>

        <recordid="view_account_reconcile_model_form"model="ir.ui.view">
            <fieldname="name">account.reconcile.model.form</field>
            <fieldname="model">account.reconcile.model</field>
            <fieldname="arch"type="xml">
                <formstring="OperationTemplates">
                    <fieldname="active"invisible="1"/>
                    <sheet>
                        <divclass="oe_button_box"name="button_box">
                            <buttontype="object"name="action_reconcile_stat"
                              class="oe_stat_button"icon="fa-book">
                                <fieldname="number_entries"string="JournalEntries"widget="statinfo"/>
                            </button>
                        </div>
                        <divclass="oe_title">
                            <labelfor="name"class="oe_edit_only"/>
                            <h1><fieldname="name"placeholder="e.g.BankFees"/></h1>
                        </div>
                        <group>
                            <group>
                                <fieldname="rule_type"widget="radio"/>
                                <fieldname="company_id"groups="base.group_multi_company"/>
                            </group>
                            <group>
                                <fieldname="auto_reconcile"attrs="{'invisible':[('rule_type','=','writeoff_button')]}"/>
                                <fieldname="to_check"attrs="{'invisible':[('rule_type','!=','writeoff_button')]}"/>
                                <fieldname="past_months_limit"attrs="{'invisible':[('rule_type','!=','invoice_matching')]}"/>
                                <fieldname="matching_order"attrs="{'invisible':[('rule_type','!=','invoice_matching')]}"/>
                            </group>
                        </group>
                        <groupstring="ConditionsonBankStatementLine">
                            <group>
                                <fieldname="match_journal_ids"
                                       options="{'no_create':True}"
                                       widget="many2many_tags"/>
                                <fieldname="match_nature"widget="radio"
                                       attrs="{'invisible':[('rule_type','=','writeoff_button')]}"/>
                            </group>
                            <groupattrs="{'invisible':[('rule_type','=','writeoff_button')]}">
                                <labelfor="match_amount"/>
                                <div>
                                    <fieldname="match_amount"style="width:30%!important"class="oe_inline"/>
                                    <spanclass="o_form_label"style="width:2%!important">  </span><!--Makealittlespace.-->
                                    <fieldname="match_amount_min"style="width:30%!important;"class="oe_inline"
                                           attrs="{'invisible':[('match_amount','in',(False,'lower'))],'required':[('match_amount','!=',False)]}"/>
                                    <spanclass="o_form_label"
                                          attrs="{'invisible':[('match_amount','!=','between')]}">and</span>
                                    <fieldname="match_amount_max"style="width:30%!important;"class="oe_inline"
                                           attrs="{'invisible':[('match_amount','in',(False,'greater'))],'required':[('match_amount','=','between')]}"/>
                                </div>
                                <labelfor="match_label"/>
                                <div>
                                    <fieldname="match_label"style="width:30%!important"class="oe_inline"/>
                                    <spanclass="o_form_label"style="width:2%!important">  </span><!--Makealittlespace.-->
                                    <fieldname="match_label_param"style="width:68%!important;"class="oe_inline"
                                           attrs="{'invisible':[('match_label','=',False)],'required':[('match_label','!=',False)]}"/>
                                </div>
                                <labelfor="match_note"/>
                                <div>
                                    <fieldname="match_note"style="width:30%!important"class="oe_inline"/>
                                    <spanclass="o_form_label"style="width:2%!important">  </span><!--Makealittlespace.-->
                                    <fieldname="match_note_param"style="width:68%!important;"class="oe_inline"
                                           attrs="{'invisible':[('match_note','=',False)],'required':[('match_note','!=',False)]}"/>
                                </div>
                                <labelfor="match_transaction_type"/>
                                <div>
                                    <fieldname="match_transaction_type"style="width:30%!important"class="oe_inline"/>
                                    <spanclass="o_form_label"style="width:2%!important">  </span><!--Makealittlespace.-->
                                    <fieldname="match_transaction_type_param"style="width:68%!important;"class="oe_inline"
                                           attrs="{'invisible':[('match_transaction_type','=',False)],'required':[('match_transaction_type','!=',False)]}"/>
                                </div>
                                <fieldname="match_same_currency"attrs="{'invisible':[('rule_type','!=','invoice_matching')]}"/>

                                <labelfor="match_total_amount"attrs="{'invisible':[('rule_type','!=','invoice_matching')]}"/>
                                <divattrs="{'invisible':[('rule_type','!=','invoice_matching')]}">
                                    <fieldname="match_total_amount"class="oe_inline"/>
                                    <fieldname="match_total_amount_param"class="oe_inline"
                                           attrs="{'invisible':[('match_total_amount','=',False)]}"/>
                                    <spanclass="o_form_labeloe_inline"
                                          attrs="{'invisible':[('match_total_amount','=',False)]}">%</span>
                                    <divclass="text-muted"attrs="{'invisible':[('match_total_amount','=',False)]}">
                                        Thisparameterwillbebypassedincaseofastatementlinecommunicationmatchingexactlyexistingentries
                                    </div>
                                </div>
                            </group>
                            <groupattrs="{'invisible':[('rule_type','=','writeoff_button')]}">
                                <fieldname="match_partner"
                                       attrs="{'invisible':[('rule_type','!=','writeoff_suggestion')]}"/>
                                <fieldname="match_partner"
                                       string="PartnerIsSet&amp;Matches"
                                       attrs="{'invisible':[('rule_type','!=','invoice_matching')]}"/>
                                <labelfor="match_partner_ids"class="ml16"
                                       attrs="{'invisible':[('match_partner','=',False)]}"/>
                                <fieldname="match_partner_ids"nolabel="1"
                                       widget="many2many_tags"
                                       attrs="{'invisible':[('match_partner','=',False)]}"/>
                                <labelfor="match_partner_category_ids"class="ml16"
                                       attrs="{'invisible':[('match_partner','=',False)]}"/>
                                <fieldname="match_partner_category_ids"nolabel="1"
                                       widget="many2many_tags"
                                       attrs="{'invisible':[('match_partner','=',False)]}"/>
                            </group>
                            <groupattrs="{'invisible':[('rule_type','!=','invoice_matching')]}">
                                <spanclass="o_form_labelo_td_label">MatchInvoice/billwith</span>
                                <div>
                                    <spanclass="o_form_label"style="width:2%!important">  </span>
                                    <labelfor="match_text_location_label"string="Label"/>
                                    <fieldname="match_text_location_label"/>
                                    <spanclass="o_form_label"style="width:2%!important">  </span>
                                    <labelfor="match_text_location_note"string="Note"/>
                                    <fieldname="match_text_location_note"/>
                                    <spanclass="o_form_label"style="width:2%!important">  </span>
                                    <labelfor="match_text_location_reference"string="Reference"/>
                                    <fieldname="match_text_location_reference"/>
                                </div>
                            </group>
                        </group>
                        <groupstring="CounterpartValues"
                               attrs="{'invisible':[('rule_type','=','invoice_matching'),'|',('match_total_amount','=',False),'&amp;',('match_total_amount','=',True),('match_total_amount_param','=',100.0)]}">
                           <group>
                               <fieldname="show_decimal_separator"invisible="1"/>
                               <fieldname="decimal_separator"attrs="{'invisible':[('show_decimal_separator','=',False)]}"groups="base.group_no_one"/>
                           </group>
                            <fieldname="line_ids"default="{'default_model_id':self,'default_company_id':self.company_id}"nolabel="1">
                                <treeeditable="bottom">
                                    <fieldname="account_id"/>
                                    <fieldname="amount_type"/>
                                    <fieldname="journal_id"attrs="{'column_invisible':[('parent.rule_type','!=','writeoff_button')]}"optional="hide"/>
                                    <fieldname="amount_string"/>
                                    <fieldname="tax_ids"widget="many2many_tags"optional="hide"/>
                                    <fieldname="analytic_account_id"groups="analytic.group_analytic_accounting"optional="hide"/>
                                    <fieldname="analytic_tag_ids"groups="analytic.group_analytic_tags"widget="many2many_tags" optional="hide"/>
                                    <fieldname="show_force_tax_included"invisible="1"/>
                                    <fieldname="force_tax_included"attrs="{'invisible':[('show_force_tax_included','=',False)]}"widget="boolean_toggle"optional="hide"/>
                                    <fieldname="company_id"invisible="1"/>
                                    <fieldname="label"/>
                                </tree>
                           </field>
                       </group>

                       <groupstring="PartnerMapping"attrs="{'invisible':[('rule_type','notin',('invoice_matching','writeoff_suggestion'))]}">
                           <fieldname="partner_mapping_line_ids"nolabel="1">
                               <treeeditable="bottom">
                                   <fieldname="payment_ref_regex"attrs="{'required':[('narration_regex','=',False)]}"/>
                                   <fieldname="narration_regex"attrs="{'required':[('payment_ref_regex','=',False)]}"/>
                                   <fieldname="partner_id"/>
                               </tree>
                           </field>
                       </group>

                    </sheet>
                </form>
            </field>
        </record>

        <recordid="view_account_reconcile_model_search"model="ir.ui.view">
            <fieldname="name">account.reconcile.model.search</field>
            <fieldname="model">account.reconcile.model</field>
            <fieldname="arch"type="xml">
                <searchstring="BankReconciliationMovepreset">
                        <filterstring="Withtax"name="withtax"domain="[('line_ids.tax_ids','!=',False)]"/>
                        <filterstring="AutoReconcile"name="auto_reconcile"domain="[('auto_reconcile','=',True)]"/>
                        <fieldname="rule_type"/>
                        <separator/>
                        <filtername="inactive"string="Archived"domain="[('active','=',False)]"/>
                </search>
            </field>
        </record>

        <recordid="action_account_reconcile_model"model="ir.actions.act_window">
            <fieldname="name">ReconciliationModels</field>
            <fieldname="res_model">account.reconcile.model</field>
            <fieldname="view_mode">tree,form</field>
            <fieldname="search_view_id"ref="view_account_reconcile_model_search"/>
            <fieldname="help"type="html">
              <pclass="o_view_nocontent_smiling_face">
                Createanewreconciliationmodel
              </p><p>
                Thosecanbeusedtoquicklycreateajournalitemswhenreconciling
                abankstatementoranaccount.
              </p>
            </field>
        </record>

    </data>
</flectra>
