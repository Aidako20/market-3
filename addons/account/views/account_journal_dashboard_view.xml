<flectra>
    <recordid="account_journal_dashboard_kanban_view"model="ir.ui.view">
        <fieldname="name">account.journal.dashboard.kanban</field>
        <fieldname="model">account.journal</field>
        <fieldname="arch"type="xml">
            <kanbancreate="false"class="oe_background_greyo_kanban_dashboardo_account_kanban"banner_route="/account/account_dashboard_onboarding"js_class="account_dashboard_kanban">
                <fieldname="id"/>
                <fieldname="name"/>
                <fieldname="type"/>
                <fieldname="color"/>
                <fieldname="show_on_dashboard"/>
                <fieldname="kanban_dashboard"/>
                <fieldname="activity_ids"/>
                <fieldname="activity_state"/>
                <fieldname="alias_domain"/>
                <templates>
                    <tt-name="kanban-box">
                        <divt-attf-class="#{!selection_mode?kanban_color(record.color.raw_value):''}">
                            <tt-value="JSON.parse(record.kanban_dashboard.raw_value)"t-set="dashboard"/>
                            <tt-value="record.type.raw_value"t-set="journal_type"/>
                            <tt-call="JournalTop"/>
                            <divt-att-class="'containero_kanban_card_content'+(dashboard.is_sample_data?'o_sample_data':'')">
                                <divclass="row">
                                    <tt-if="(journal_type=='bank'||journal_type=='cash')"t-call="JournalBodyBankCash"/>
                                    <tt-if="journal_type=='sale'||journal_type=='purchase'"t-call="JournalBodySalePurchase"/>
                                    <tt-if="journal_type=='general'"t-call="JournalMiscelaneous"/>
                                </div>
                                <tt-if="journal_type=='bank'||journal_type=='cash'||journal_type=='sale'||journal_type=='purchase'"t-call="JournalBodyGraph"/>
                            </div><divclass="containero_kanban_card_manage_panedropdown-menu"role="menu">
                                <tt-call="JournalManage"/>
                            </div>
                        </div>
                    </t>

                    <tt-name="JournalTop">
                        <divt-attf-class="o_kanban_card_header">
                            <divclass="o_kanban_card_header_title">
                                <divclass="o_primary">
                                    <atype="object"name="open_action"><fieldname="name"/></a>
                                    <tt-if="dashboard.company_count>1">
                                        <spangroups="base.group_multi_company"class="small">-<fieldname="company_id"/></span>
                                    </t>
                                </div>
                                <divclass="o_secondary"t-att-title="dashboard.title"t-if="journal_type=='purchase'&amp;&amp;record.alias_domain.raw_value">
                                    <fieldname="alias_id"/>
                                </div>
                            </div>
                            <divclass="o_kanban_manage_button_section">
                                <aclass="o_kanban_manage_toggle_button"href="#"><iclass="fafa-ellipsis-v"aria-label="Selection"role="img"title="Selection"/></a>
                            </div>
                        </div>
                    </t>

                    <tt-name="JournalManage">

                        <!--Forbankandcash-->
                        <divt-if="journal_type=='bank'||journal_type=='cash'"class="row">
                             <divclass="col-4o_kanban_card_manage_sectiono_kanban_manage_view">
                                <divclass="o_kanban_card_manage_title">
                                    <spanrole="separator">View</span>
                                </div>
                                <div>
                                    <at-if="journal_type=='bank'"role="menuitem"type="object"name="open_action_with_context"context="{'action_name':'action_bank_statement_tree','search_default_journal':True}">Statements</a>
                                    <at-if="journal_type=='cash'"role="menuitem"type="object"name="open_action_with_context"context="{'action_name':'action_view_bank_statement_tree','search_default_journal':True}">Statements</a>
                                </div>
                                <div>
                                    <arole="menuitem"type="object"name="open_action_with_context"context="{'action_name':'action_bank_statement_line','search_default_journal':True}">Operations</a>
                                </div>
                                <div>
                                    <arole="menuitem"type="object"name="open_collect_money">CustomerPayments</a>
                                </div>
                                <div>
                                    <arole="menuitem"type="object"name="open_spend_money">VendorPayments</a>
                                </div>
                                <div>
                                    <arole="menuitem"type="object"name="open_transfer_money">InternalTransfers</a>
                                </div>
                                <div>
                                    <arole="menuitem"type="object"name="open_action"context="{'action_name':'action_account_moves_all_a'}"groups="base.group_no_one">JournalItems</a>
                                </div>
                            </div>

                             <divclass="col-4o_kanban_card_manage_sectiono_kanban_manage_new"groups="account.group_account_user">
                                <divclass="o_kanban_card_manage_title">
                                    <spanrole="separator">New</span>
                                </div>
                                <divname="bank_cash_commands">
                                    <tt-if="journal_type=='bank'">
                                        <arole="menuitem"type="object"name="create_bank_statement">Statement</a>
                                    </t>
                                    <tt-if="journal_type=='cash'">
                                        <arole="menuitem"type="object"name="create_cash_statement">Statement</a>
                                    </t>
                                </div>
                                <div>
                                    <arole="menuitem"type="object"name="create_customer_payment">CustomerPayment</a>
                                </div>
                                <div>
                                    <arole="menuitem"type="object"name="create_supplier_payment">VendorPayment</a>
                                </div>
                                <div>
                                    <arole="menuitem"type="object"name="create_internal_transfer">InternalTransfer</a>
                                </div>
                            </div>

                             <divclass="col-4o_kanban_card_manage_sectiono_kanban_manage_reconciliation">
                                <divclass="o_kanban_card_manage_title">
                                    <spanrole="separator">Reconciliation</span>
                                </div>
                                <div>
                                    <arole="menuitem"type="object"name="open_action_with_context"context="{'action_name':'action_account_reconcile_model','use_domain':['|',('match_journal_ids','=',False),('match_journal_ids','in',active_id)]}"groups="account.group_account_manager">ReconciliationModels</a>
                                </div>
                            </div>
                        </div>

                        <!--Forpurchaseandsale-->
                        <divt-if="journal_type=='purchase'||journal_type=='sale'"class="row">
                             <divclass="col-4o_kanban_card_manage_sectiono_kanban_manage_view">
                                <divclass="o_kanban_card_manage_title">
                                    <span>View</span>
                                </div>
                                <div>
                                    <at-if="journal_type=='sale'"type="object"name="open_action"context="{'action_name':'action_move_out_invoice_type'}">Invoices</a>
                                    <at-if="journal_type=='purchase'"type="object"name="open_action"context="{'action_name':'action_move_in_invoice_type'}">Bills</a>
                                </div>
                                <divid="sale_purchase_refund">
                                    <at-if="journal_type=='sale'"type="object"name="open_action"context="{'action_name':'action_move_out_refund_type'}">CreditNotes</a>
                                    <at-if="journal_type=='purchase'"type="object"name="open_action"context="{'action_name':'action_move_in_refund_type'}">Refund</a>
                                </div>
                                <div>
                                    <atype="object"name="open_action"context="{'action_name':'action_account_moves_all_a'}"groups="base.group_no_one">JournalItems</a>
                                </div>
                            </div>

                             <divclass="col-4o_kanban_card_manage_sectiono_kanban_manage_new"groups="account.group_account_invoice">
                                <divclass="o_kanban_card_manage_title">
                                    <span>New</span>
                                </div>
                                <div>
                                    <atype="object"name="action_create_new">
                                        <spant-if="journal_type=='sale'">Invoice</span>
                                        <spant-if="journal_type=='purchase'">Bill</span>
                                    </a>
                                </div>
                                <div>
                                    <atype="object"name="action_create_new" context="{'refund':True}">
                                        <spant-if="journal_type=='sale'">CreditNote</span>
                                        <spant-if="journal_type=='purchase'">Refund</span>
                                    </a>
                                </div>
                                <divt-if="journal_type=='sale'">
                                    <aclass="o_button_upload_bill"journal_type="sale"groups="account.group_account_invoice">
                                        <span>UploadInvoices</span>
                                    </a>
                                </div>
                            </div>

                             <divclass="col-4o_kanban_card_manage_sectiono_kanban_manage_reports">
                                <divclass="o_kanban_card_manage_title">
                                    <span>Reporting</span>
                                </div>
                                <div>
                                    <at-if="journal_type=='sale'"type="action"name="%(action_account_invoice_report_all)d"groups="account.group_account_readonly">InvoicesAnalysis</a>
                                    <at-if="journal_type=='purchase'"type="action"name="%(action_account_invoice_report_all_supp)d"groups="account.group_account_readonly">BillsAnalysis</a>
                                </div>
                            </div>
                        </div>

                        <!--Forgeneralandsituation-->
                        <divt-if="journal_type=='general'||journal_type=='situation'"class="row">
                             <divclass="col-4o_kanban_card_manage_sectiono_kanban_manage_view">
                                <divclass="o_kanban_card_manage_title">
                                    <span>View</span>
                                </div>
                                <div>
                                    <atype="object"name="open_action"context="{'action_name':'action_move_journal_line'}">JournalEntries</a>
                                </div>
                                <div>
                                    <atype="object"name="open_action"context="{'action_name':'action_move_journal_line','search_default_unposted':1}">EntriestoReview</a>
                                </div>
                                <div>
                                    <atype="object"name="open_action"context="{'action_name':'action_account_moves_all_a'}"groups="base.group_no_one">JournalItems</a>
                                </div>
                            </div>

                             <divclass="col-4o_kanban_card_manage_sectiono_kanban_manage_new"groups="account.group_account_user">
                                <divclass="o_kanban_card_manage_title">
                                    <span>New</span>
                                </div>
                                <div>
                                    <atype="object"name="action_create_new">JournalEntry</a>
                                </div>
                            </div>

                             <divclass="col-4o_kanban_card_manage_sectiono_kanban_manage_operations">
                                <divclass="o_kanban_card_manage_title">
                                    <span>Operations</span>
                                </div>
                                <div>
                                    <atype="object"name="open_action_with_context"context="{'action_name':'action_validate_account_move','search_default_journal':True}" groups="account.group_account_user">PostAllEntries</a>
                                </div>
                            </div>
                        </div>

                        <divt-if="widget.editable"class="o_kanban_card_manage_settingsrow">
                            <divclass="col-8">
                                <ulclass="oe_kanban_colorpicker"data-field="color"/>
                            </div>
                        </div>

                        <divgroups="account.group_account_manager"class="rowo_kanban_card_settings">
                            <divclass="col-6">
                                <fieldname="show_on_dashboard"widget="boolean_favorite"/>
                            </div>
                            <divclass="col-6text-rightmt-1">
                                <aclass="dropdown-item"t-if="widget.editable"type="edit">Configuration</a>
                            </div>
                        </div>
                    </t>

                    <tt-name="JournalMiscelaneous">
                        <divclass="col-12col-sm-4mb-3mb-sm-0o_kanban_primary_left">
                            <buttontype="object"name="action_create_new"class="btnbtn-primary"groups="account.group_account_invoice">
                                <span>NewEntry</span>
                            </button>
                        </div>
                        <divclass="col-12col-sm-8o_kanban_primary_right">
                            <fieldname="json_activity_data"widget="kanban_vat_activity"/>
                            <tt-if="dashboard.number_to_check>0">
                                <divclass="row">
                                    <divclass="coloverflow-hiddentext-left">
                                        <atype="object"name="open_action"context="{'action_name':'action_move_journal_line','search_default_to_check':True}"><tt-esc="dashboard.number_to_check"/>tocheck</a>
                                    </div>
                                    <divclass="col-autotext-right">
                                        <span><tt-esc="dashboard.to_check_balance"/></span>
                                    </div>
                                </div>
                            </t>
                        </div>
                    </t>

                    <tt-name="JournalBodyBankCash">
                        <!--Ontheleft,display:
                            -Abuttoncorrespondingtothebank_statements_source,ifitwasn'tconfigured,abuttonforeachofthem
                            -Iftherearestatementstoreconcile,alinktoreconcilethem-->
                        <divid="dashboard_bank_cash_left"class="col-12col-sm-5mb-3mb-sm-0o_kanban_primary_left">
                            <tt-if="journal_type=='bank'">
                                <tt-if="dashboard.bank_statements_source=='undefined'">
                                    <at-if="dashboard.number_to_reconcile>0"name="action_configure_bank_journal"type="object"class="oe_inline"groups="account.group_account_invoice">Connect</a>
                                    <buttont-if="dashboard.number_to_reconcile==0"name="action_configure_bank_journal"type="object"class="btnbtn-primary"groups="account.group_account_invoice">Connect</button>
                                </t>
                                <divname="bank_journal_cta"class="mt-3mt-sm-0">
                                    <divname="bank_statement_create_button"groups="account.group_account_invoice">
                                        <atype="object"name="create_bank_statement"class="oe_inline">Create</a><spanname="button_import_placeholder"/>Statements
                                    </div>
                                </div>
                            </t>
                            <tt-if="journal_type=='cash'">
                                <at-if="dashboard.number_to_reconcile>0"type="object"name="create_cash_statement"class="oe_inline"groups="account.group_account_invoice">NewTransaction</a>
                                <buttont-if="dashboard.number_to_reconcile==0"type="object"name="create_cash_statement"class="btnbtn-primary"groups="account.group_account_invoice">NewTransaction</button>
                            </t>
                        </div>
                        <!--Ontheright,showothercommoninformations/actions-->
                        <divid="dashboard_bank_cash_right"class="col-12col-sm-7o_kanban_primary_right">
                            <divclass="row"t-if="dashboard.nb_lines_bank_account_balance>0">
                                <divid="dashboard_bank_cash_balance"class="coloverflow-hiddentext-left">
                                    <spantitle="BalanceinGeneralLedger">BalanceinGL</span>
                                </div>
                                <divclass="col-autotext-right">
                                    <span><tt-esc="dashboard.account_balance"/></span>
                                </div>
                            </div>
                            <divclass="row"t-if="dashboard.nb_lines_outstanding_pay_account_balance>0">
                                <divid="dashboard_bank_cash_outstanding_balance"class="coloverflow-hiddentext-left">
                                    <spantitle="OutstandingPayments/Receipts">OutstandingPayments/Receipts</span>
                                </div>
                                <divclass="col-autotext-right">
                                    <span><tt-esc="dashboard.outstanding_pay_account_balance"/></span>
                                </div>
                            </div>
                            <tt-if="dashboard.has_at_least_one_statementanddashboard.account_balance!=dashboard.last_balance">
                                <divclass="row"name="latest_statement">
                                    <divclass="coloverflow-hiddentext-left">
                                        <spantitle="LatestStatement">LatestStatement</span>
                                    </div>
                                    <divclass="col-autotext-right">
                                        <span><tt-esc="dashboard.last_balance"/></span>
                                    </div>
                                </div>
                            </t>
                        </div>
                    </t>
                    <tt-name="JournalBodySalePurchase"id="account.JournalBodySalePurchase">
                        <divclass="col-12col-sm-5mb-3mb-sm-0o_kanban_primary_left">
                            <tt-if="journal_type=='sale'">
                                <buttontype="object"name="action_create_new"class="btnbtn-primaryo_invoice_new"groups="account.group_account_invoice">
                                    <span>NewInvoice</span>
                                </button>
                            </t>
                            <tt-if="journal_type=='purchase'">
                                <buttonclass="btnbtn-primaryo_button_upload_billoe_kanban_action_button"journal_type="purchase"groups="account.group_account_invoice">
                                    <span>Upload</span>
                                </button>
                                <atype="object"name="action_create_new"class="o_invoice_new"groups="account.group_account_invoice"><span>Create</span></a><span>Manually</span>
                            </t>
                        </div>
                        <divclass="col-12col-sm-7o_kanban_primary_right">
                            <divclass="row"t-if="dashboard.number_draft">
                                <divclass="coloverflow-hiddentext-left">
                                    <atype="object"name="open_action"context="{'search_default_draft':'1'}">
                                        <spant-if="journal_type=='sale'"title="InvoicestoValidate"><tt-esc="dashboard.number_draft"/>InvoicestoValidate</span>
                                        <spant-if="journal_type=='purchase'"title="BillstoValidate"><tt-esc="dashboard.number_draft"/>BillstoValidate</span>
                                    </a>
                                </div>
                                <divclass="col-autotext-right">
                                    <span><tt-esc="dashboard.sum_draft"/></span>
                                </div>
                            </div>
                            <divclass="row"t-if="dashboard.number_waiting">
                                <divclass="coloverflow-hiddentext-left">
                                    <atype="object"t-if="journal_type=='sale'"name="open_action"
                                    context="{'search_default_unpaid':1,'search_default_posted':1,'search_default_partial':1}"id="account_dashboard_sale_pay_link">
                                        <tt-esc="dashboard.number_waiting"/>UnpaidInvoices
                                    </a>

                                    <atype="object"t-if="journal_type=='purchase'"name="open_action"
                                    context="{'search_default_unpaid':1,'search_default_posted':1,'search_default_partial':1}"id="account_dashboard_purchase_pay_link">
                                        <tt-esc="dashboard.number_waiting"/>BillstoPay
                                    </a>
                                </div>
                                <divclass="col-autotext-right">
                                    <span><tt-esc="dashboard.sum_waiting"/></span>
                                </div>
                            </div>
                            <tt-if="dashboard.number_to_check>0">
                                <divclass="row">
                                    <divclass="coloverflow-hiddentext-left">
                                        <atype="object"name="open_action"context="{'search_default_to_check':True}"><tt-esc="dashboard.number_to_check"/>tocheck</a>
                                    </div>
                                    <divclass="col-autotext-right">
                                        <span><tt-esc="dashboard.to_check_balance"/></span>
                                    </div>
                                </div>
                            </t>
                        </div>
                    </t>
                    <tt-name="JournalBodyGraph">
                        <fieldname="kanban_dashboard_graph"t-att-graph_type="_.contains(['cash','bank'],journal_type)?'line':'bar'"widget="dashboard_graph"/>
                    </t>
            </templates>
            </kanban>
        </field>
    </record>

    <recordid="open_account_journal_dashboard_kanban"model="ir.actions.act_window">
        <fieldname="name">AccountingDashboard</field>
        <fieldname="res_model">account.journal</field>
        <fieldname="view_mode">kanban,form</field>
        <fieldname="view_id"ref="account_journal_dashboard_kanban_view"/>
        <fieldname="usage">menu</field>
        <fieldname="context">{'search_default_dashboard':1}</field>
        <fieldname="domain">[]</field>
        <fieldname="help"type="html">
            <pclass="o_view_nocontent_neutral_face">
                Thisistheaccountingdashboard
            </p><p>
                Ifyouhavenotinstalledachartofaccount,pleaseinstallonefirst.<br/>
               <atype="action"name="%(open_account_charts_modules)d"tabindex="-1">Browseavailablecountries.</a>
            </p>
        </field>
    </record>

</flectra>
