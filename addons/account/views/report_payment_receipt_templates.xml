<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <templateid="report_payment_receipt_document">
        <tt-call="web.external_layout">
            <tt-set="o"t-value="o.with_context(lang=lang)"/>
            <divclass="page">
                <h3><strong>PaymentReceipt:<spant-field="o.name"/></strong></h3>
                <divclass="rowmt64">
                    <divclass="col-6"t-if="o.date">
                        <strong>PaymentDate:</strong><spant-field="o.date"/>
                    </div>
                </div>
                <divclass="row">
                    <divclass="col-6"t-if="o.partner_type">
                        <tt-if="o.partner_type=='customer'">
                            <strong>Customer:</strong>
                        </t>
                        <tt-if="o.partner_type=='supplier'">
                            <strong>Vendor:</strong>
                        </t><spant-field="o.partner_id"/>
                    </div>
                    <divclass="col-6"t-if="o.payment_method_id">
                        <strong>PaymentMethod:</strong><spant-field="o.payment_method_id.name"/>
                    </div>
                </div>
                <divclass="rowmb64">
                    <divclass="col-6"t-if="o.amount">
                        <strong>PaymentAmount:</strong><spant-field="o.amount"t-options="{'widget':'monetary','display_currency':o.currency_id}"/>
                     </div>
                    <divclass="col-6"t-if="o.ref">
                        <strong>Memo:</strong><spant-field="o.ref"/>
                     </div>
                </div>
                <tableclass="tabletable-sm">
                    <thead>
                        <tr>
                            <th><span>InvoiceDate</span></th>
                            <th><span>InvoiceNumber</span></th>
                            <th><span>Reference</span></th>
                            <thclass="text-right"><span>OriginalAmount</span></th>
                            <thclass="text-right"><span>AmountPaid</span></th>
                            <thclass="text-right"><span>Balance</span></th>
                        </tr>
                    </thead>
                    <tbody>
                        <trt-foreach="o.move_id._get_reconciled_invoices_partials()"t-as="rec">
                            <tt-set="amount"t-value="rec[1]"/>
                            <tt-set="inv"t-value="rec[2].move_id"/>
                            <tt-if="inv.move_type!='entry'">
                                <td><spant-field="inv.invoice_date"/></td>
                                <td><spant-field="inv.name"/></td>
                                <td><spant-field="inv.ref"/></td>
                                <tdclass="text-right"><spant-field="inv.amount_total"/></td>
                                <tdclass="text-right"><spant-esc="amount"t-options="{'widget':'monetary','display_currency':o.currency_id}"/></td>
                                <tdclass="text-right"><spant-field="inv.amount_residual"/></td>
                            </t>
                        </tr>
                    </tbody>
                </table>
            </div>
        </t>
    </template>

    <templateid="report_payment_receipt">
        <tt-call="web.html_container">
            <tt-foreach="docs"t-as="o">
                <tt-set="lang"t-value="o.partner_id.langoro.company_id.partner_id.lang"/>
                <tt-call="account.report_payment_receipt_document"t-lang="lang"/>
            </t>
        </t>
    </template>
</flectra>
