<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
<datanoupdate="0">
    <!--
        Thereare4groups
        Thewaythegroupsworkisdifferentwhen`account_accountant`isinstalledornot.

        Invoicingonly:
        ```
         group_account_invoice⇨group_account_manager  (onlythosetwoshouldbeused)
                               ⬂
        group_account_readonly⇨group_account_user     (thosetwoareonlyvisibleindebug)
        ```

        Invoicing+Accounting:
        ```
         group_account_invoice⬂
        group_account_readonly⇨group_account_user⇨group_account_manager
        ```
        `group_account_user`isalmost(abitmorethan)thesumof`group_account_invoice`and`group_account_readonly`
        `group_account_manager`istheking(exceptwhenConsolidationisinstalled,thenthereisasuper-king)

        `group_account_invoice`cancreate/editinvoices,refunds,payments,etcbutcannotseeaccountingrelatedstuff(journalentries,reports,reconciliation,...)
        `group_account_readonly`cansee(andonlysee)everything,includingthejournalentries,advancedconfiguration,reports
        `group_account_user` istheaccountant:hecandoeverythingexceptadvancedconfig(accountingperiodsforinstance)
        `group_account_manager`caneditsomeconfigthat`group_account_user`cannotdo

        WhenyouhaveonlyInvoicinginstalled,only`group_account_invoice`and`group_account_manager`shouldbeused.TheothersaregivingashallowaccesstoAccountingfeatures,butwewanttoremovethat.
    -->

    <recordmodel="ir.module.category"id="base.module_category_accounting_accounting">
        <fieldname="description">Helpsyouhandleyouraccountingneeds,ifyouarenotanaccountant,wesuggestyoutoinstallonlytheInvoicing.</field>
        <fieldname="sequence">7</field>
    </record>

    <recordid="group_show_line_subtotals_tax_excluded"model="res.groups">
        <fieldname="name">TaxdisplayB2B</field>
        <fieldname="comment">Showlinesubtotalswithouttaxes(B2B)</field>
        <fieldname="category_id"ref="base.module_category_hidden"/>
    </record>

    <recordid="group_show_line_subtotals_tax_included"model="res.groups">
        <fieldname="name">TaxdisplayB2C</field>
        <fieldname="comment">Showlinesubtotalswithtaxesincluded(B2C)</field>
        <fieldname="category_id"ref="base.module_category_hidden"/>
    </record>

    <recordid="group_account_readonly"model="res.groups">
        <fieldname="name">ShowAccountingFeatures-Readonly</field>
        <fieldname="category_id"ref="base.module_category_hidden"/>
        <fieldname="implied_ids"eval="[(4,ref('base.group_user'))]"/>
    </record>

    <recordid="group_account_invoice"model="res.groups">
        <fieldname="name">Billing</field>
        <fieldname="category_id"ref="base.module_category_accounting_accounting"/>
        <fieldname="implied_ids"eval="[(4,ref('base.group_user'))]"/>
    </record>

    <recordid="group_account_user"model="res.groups">
        <fieldname="name">ShowFullAccountingFeatures</field>
        <fieldname="category_id"ref="base.module_category_hidden"/>
        <fieldname="implied_ids"eval="[(4,ref('group_account_invoice')),(4,ref('group_account_readonly'))]"/>
    </record>

    <recordid="group_account_manager"model="res.groups">
        <fieldname="name">BillingAdministrator</field>
        <fieldname="category_id"ref="base.module_category_accounting_accounting"/>
        <fieldname="implied_ids"eval="[(4,ref('group_account_invoice')),(4,ref('base.group_private_addresses'))]"/>
    </record>

    <recordid="base.user_admin"model="res.users">
        <fieldname="groups_id"eval="[(4,ref('account.group_account_invoice'))]"/>
    </record>

    <recordid="base.group_system"model="res.groups">
        <fieldname="implied_ids"eval="[(4,ref('account.group_account_manager'))]"/>
    </record>

    <recordid="group_warning_account"model="res.groups">
        <fieldname="name">Awarningcanbesetonapartner(Account)</field>
        <fieldname="category_id"ref="base.module_category_hidden"/>
    </record>

    <recordid="group_cash_rounding"model="res.groups">
        <fieldname="name">Allowthecashroundingmanagement</field>
        <fieldname="category_id"ref="base.module_category_hidden"/>
    </record>

    <recordid="group_sale_receipts"model="res.groups">
        <fieldname="name">SaleReceipt</field>
        <fieldname="category_id"ref="base.module_category_hidden"/>
    </record>
    <recordid="group_purchase_receipts"model="res.groups">
        <fieldname="name">PurchaseReceipt</field>
        <fieldname="category_id"ref="base.module_category_hidden"/>
    </record>

</data>

<datanoupdate="1">

    <recordid="account_analytic_line_rule_billing_user"model="ir.rule">
        <fieldname="name">account.analytic.line.billing.user</field>
        <fieldname="model_id"ref="analytic.model_account_analytic_line"/>
        <fieldname="domain_force">[(1,'=',1)]</field>
        <fieldname="groups"eval="[(4,ref('account.group_account_invoice'))]"/>
    </record>

    <recordid="base.group_public"model="res.groups">
        <fieldname="implied_ids"eval="[(4,ref('account.group_show_line_subtotals_tax_excluded'))]"/>
    </record>
    <recordid="base.group_portal"model="res.groups">
        <fieldname="implied_ids"eval="[(4,ref('account.group_show_line_subtotals_tax_excluded'))]"/>
    </record>
    <recordid="base.group_user"model="res.groups">
        <fieldname="implied_ids"eval="[(4,ref('account.group_show_line_subtotals_tax_excluded'))]"/>
    </record>

    <recordid="base.default_user"model="res.users">
        <fieldname="groups_id"eval="[(4,ref('account.group_account_manager'))]"/>
    </record>

    <recordid="account_move_comp_rule"model="ir.rule">
        <fieldname="name">AccountEntry</field>
        <fieldname="model_id"ref="model_account_move"/>
        <fieldname="domain_force">[('company_id','in',company_ids+[False])]</field>
    </record>

    <recordid="account_move_line_comp_rule"model="ir.rule">
        <fieldname="name">Entrylines</field>
        <fieldname="model_id"ref="model_account_move_line"/>
        <fieldname="domain_force">[('company_id','in',company_ids+[False])]</field>
    </record>

    <recordid="journal_group_comp_rule"model="ir.rule">
        <fieldname="name">JournalGroupmulti-company</field>
        <fieldname="model_id"ref="model_account_journal_group"/>
        <fieldname="domain_force">[('company_id','in',company_ids)]</field>
    </record>

    <recordid="journal_comp_rule"model="ir.rule">
        <fieldname="name">Journalmulti-company</field>
        <fieldname="model_id"ref="model_account_journal"/>
        <fieldname="domain_force">[('company_id','in',company_ids)]</field>
    </record>

    <recordid="account_comp_rule"model="ir.rule">
        <fieldname="name">Accountmulti-company</field>
        <fieldname="model_id"ref="model_account_account"/>
        <fieldname="domain_force">[('company_id','in',company_ids)]</field>
    </record>

    <recordid="account_group_comp_rule"model="ir.rule">
        <fieldname="name">AccountGroupmulti-company</field>
        <fieldname="model_id"ref="model_account_group"/>
        <fieldname="domain_force">[('company_id','in',company_ids)]</field>
    </record>

    <recordid="account_root_comp_rule"model="ir.rule">
        <fieldname="name">AccountRootmulti-company</field>
        <fieldname="model_id"ref="model_account_root"/>
        <fieldname="domain_force">[('company_id','in',company_ids+[False])]</field>
    </record>

    <recordid="tax_comp_rule"model="ir.rule">
        <fieldname="name">Taxmulti-company</field>
        <fieldname="model_id"ref="model_account_tax"/>
        <fieldname="domain_force">[('company_id','in',company_ids)]</field>
    </record>

    <recordid="tax_rep_comp_rule"model="ir.rule">
        <fieldname="name">TaxRepartitionmulti-company</field>
        <fieldname="model_id"ref="model_account_tax_repartition_line"/>
        <fieldname="domain_force">[('company_id','in',company_ids)]</field>
    </record>

    <recordid="invoice_analysis_comp_rule"model="ir.rule">
        <fieldname="name">InvoiceAnalysismulti-company</field>
        <fieldname="model_id"ref="model_account_invoice_report"/>
        <fieldname="domain_force">[('company_id','in',company_ids+[False])]</field>
    </record>

    <recordid="account_fiscal_position_comp_rule"model="ir.rule">
        <fieldname="name">AccountfiscalMappingcompanyrule</field>
        <fieldname="model_id"ref="model_account_fiscal_position"/>
        <fieldname="domain_force">[('company_id','in',company_ids)]</field>
    </record>

    <recordmodel="ir.rule"id="account_bank_statement_comp_rule">
        <fieldname="name">Accountbankstatementcompanyrule</field>
        <fieldname="model_id"ref="model_account_bank_statement"/>
        <fieldname="domain_force">[('company_id','in',company_ids)]</field>
    </record>

    <recordmodel="ir.rule"id="account_bank_statement_line_comp_rule">
        <fieldname="name">Accountbankstatementlinecompanyrule</field>
        <fieldname="model_id"ref="model_account_bank_statement_line"/>
        <fieldname="domain_force">[('company_id','in',company_ids)]</field>
    </record>

    <recordmodel="ir.rule"id="account_reconcile_model_template_comp_rule">
        <fieldname="name">Accountreconcilemodeltemplatecompanyrule</field>
        <fieldname="model_id"ref="model_account_reconcile_model"/>
        <fieldname="domain_force">[('company_id','in',company_ids)]</field>
    </record>

    <recordmodel="ir.rule"id="account_reconcile_model_line_template_comp_rule">
        <fieldname="name">Accountreconcilemodel_linetemplatecompanyrule</field>
        <fieldname="model_id"ref="model_account_reconcile_model_line"/>
        <fieldname="domain_force">[('company_id','in',company_ids)]</field>
    </record>

    <recordmodel="ir.rule"id="account_payment_comp_rule">
        <fieldname="name">Accountpaymentcompanyrule</field>
        <fieldname="model_id"ref="model_account_payment"/>
        <fieldname="domain_force">[('company_id','in',company_ids)]</field>
    </record>

    <recordmodel="ir.rule"id="account_payment_term_comp_rule">
        <fieldname="name">Accountpaymenttermcompanyrule</field>
        <fieldname="model_id"ref="model_account_payment_term"/>
        <fieldname="domain_force">[('company_id','in',company_ids+[False])]</field>
    </record>

    <!--Billingrecordrulesforaccount.move-->

    <recordid="account_move_see_all"model="ir.rule">
        <fieldname="name">AllJournalEntries</field>
        <fieldref="model_account_move"name="model_id"/>
        <fieldname="domain_force">[(1,'=',1)]</field>
        <fieldname="groups"eval="[(4,ref('account.group_account_invoice'))]"/>
    </record>

    <recordid="account_move_line_see_all"model="ir.rule">
        <fieldname="name">AllJournalItems</field>
        <fieldref="model_account_move_line"name="model_id"/>
        <fieldname="domain_force">[(1,'=',1)]</field>
        <fieldname="groups"eval="[(4,ref('account.group_account_invoice'))]"/>
    </record>

    <!--Portalforinvoicemoveandinvoicemovelines-->
    <recordid="account_invoice_rule_portal"model="ir.rule">
        <fieldname="name">PortalPersonalAccountInvoices</field>
        <fieldname="model_id"ref="account.model_account_move"/>
        <fieldname="domain_force">[('state','notin',('cancel','draft')),('move_type','in',('out_invoice','out_refund','in_invoice','in_refund')),('message_partner_ids','child_of',[user.commercial_partner_id.id])]</field>
        <fieldname="groups"eval="[(4,ref('base.group_portal'))]"/>
    </record>

    <recordid="account_invoice_line_rule_portal"model="ir.rule">
        <fieldname="name">PortalInvoiceLines</field>
        <fieldname="model_id"ref="account.model_account_move_line"/>
        <fieldname="domain_force">[('parent_state','notin',('cancel','draft')),('move_id.move_type','in',('out_invoice','out_refund','in_invoice','in_refund')),('move_id.message_partner_ids','child_of',[user.commercial_partner_id.id])]</field>
        <fieldname="groups"eval="[(4,ref('base.group_portal'))]"/>
    </record>

    <!--Somemodules(i.e.sale)restricttheaccessforsomeusers
    Wewantthereadonlygrouptostillhavethereadaccessonallmoves.-->
    <recordid="account_move_rule_group_readonly"model="ir.rule">
        <fieldname="name">ReadonlyMove</field>
        <fieldname="model_id"ref="model_account_move"/>
        <fieldname="domain_force">[(1,'=',1)]</field>
        <fieldname="groups"eval="[(4,ref('account.group_account_readonly'))]"/>
        <fieldname="perm_write"eval="False"/>
        <fieldname="perm_create"eval="False"/>
        <fieldname="perm_unlink"eval="False"/>
    </record>

    <recordid="account_move_line_rule_group_readonly"model="ir.rule">
        <fieldname="name">ReadonlyMoveLine</field>
        <fieldname="model_id"ref="model_account_move_line"/>
        <fieldname="domain_force">[(1,'=',1)]</field>
        <fieldname="groups"eval="[(4,ref('account.group_account_readonly'))]"/>
        <fieldname="perm_write"eval="False"/>
        <fieldname="perm_create"eval="False"/>
        <fieldname="perm_unlink"eval="False"/>
    </record>

    <!--Somemodules(i.e.sale)restricttheaccessforsomeusers
    Wewanttheinvoicegrouptostillhaveallaccessonallmoves.-->
    <recordid="account_move_rule_group_invoice"model="ir.rule">
        <fieldname="name">ReadonlyMove</field>
        <fieldname="model_id"ref="model_account_move"/>
        <fieldname="domain_force">[(1,'=',1)]</field>
        <fieldname="groups"eval="[(4,ref('account.group_account_invoice'))]"/>
    </record>

    <recordid="account_move_line_rule_group_invoice"model="ir.rule">
        <fieldname="name">ReadonlyMoveLine</field>
        <fieldname="model_id"ref="model_account_move_line"/>
        <fieldname="domain_force">[(1,'=',1)]</field>
        <fieldname="groups"eval="[(4,ref('account.group_account_invoice'))]"/>
    </record>

    <recordid="account_invoice_send_rule_group_invoice"model="ir.rule">
        <fieldname="name">ReadonlyInvoiceSendandPrint</field>
        <fieldname="model_id"ref="model_account_invoice_send"/>
        <fieldname="domain_force">[(1,'=',1)]</field>
        <fieldname="groups"eval="[(4,ref('account.group_account_invoice'))]"/>
    </record>

    <!--accountanalyticdefault-->
    <recordid="analytic_default_comp_rule"model="ir.rule">
        <fieldname="name">AnalyticDefaultmulticompanyrule</field>
        <fieldname="model_id"ref="model_account_analytic_default"/>
        <fieldeval="True"name="global"/>
        <fieldname="domain_force">[('company_id','in',company_ids+[False])]</field>
    </record>

</data>
</flectra>
