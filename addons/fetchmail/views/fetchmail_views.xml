<?xmlversion="1.0"?>
<flectra>

        <recordid="view_email_server_tree"model="ir.ui.view">
            <fieldname="name">fetchmail.server.list</field>
            <fieldname="model">fetchmail.server</field>
            <fieldname="arch"type="xml">
                <treedecoration-info="state=='draft'"string="POP/IMAPServers">
                    <fieldname="name"/>
                    <fieldname="server_type"/>
                    <fieldname="is_ssl"/>
                    <fieldname="object_id"/>
                    <fieldname="date"/>
                    <fieldname="message_ids"string="EmailCount"/>
                    <fieldname="state"/>
                </tree>
            </field>
        </record>

        <recordid="view_email_server_form"model="ir.ui.view">
            <fieldname="name">fetchmail.server.form</field>
            <fieldname="model">fetchmail.server</field>
            <fieldname="arch"type="xml">
                <formstring="IncomingMailServer">
                    <headerattrs="{'invisible':[('server_type','=','local')]}">
                        <buttonstring="Test&amp;Confirm"type="object"name="button_confirm_login"states="draft"/>
                        <buttonstring="FetchNow"type="object"name="fetch_mail"states="done"/>
                        <buttonstring="ResetConfirmation"type="object"name="set_draft"states="done"/>
                        <fieldname="state"widget="statusbar"/>
                    </header>
                    <sheet>
                     <groupcol="4">
                        <fieldname="name"/>
                        <fieldname="server_type"/>
                        <fieldname="date"/>
                     </group>
                     <notebook>
                        <pagestring="Server&amp;Login"name="server_login_details">
                            <group>
                                <groupattrs="{'invisible':[('server_type','=','local')]}"string="ServerInformation">
                                    <fieldname="server"colspan="2"attrs="{'required':[('server_type','!=','local')]}"/>
                                    <fieldname="port"
                                        required="1"
                                        attrs="{'required':[('server_type','!=','local')]}"
                                        options="{'format':false}"/>
                                    <fieldname="is_ssl"/>
                                </group>
                                <groupattrs="{'invisible':[('server_type','=','local')]}"string="LoginInformation">
                                    <fieldname="user"attrs="{'required':[('server_type','!=','local')]}"/>
                                    <fieldname="password"password="True"attrs="{'required':[('server_type','!=','local')]}"/>
                                </group>
                                <groupstring="ActionstoPerformonIncomingMails">
                                    <fieldname="object_id"/>
                                </group>
                                <groupattrs="{'invisible':[('server_type','!=','local')]}"string="Configuration">
                                    <fieldname="configuration"/>
                                    <fieldname="script"widget="url"/>
                                </group>
                            </group>
                        </page>
                        <pagestring="Advanced"name="advanced_options"groups="base.group_no_one">
                            <groupstring="AdvancedOptions"col="4">
                                <fieldname="priority"/>
                                <fieldname="attach"/>
                                <fieldname="original"/>
                                <fieldname="active"widget="boolean_toggle"/>
                            </group>
                        </page>
                    </notebook>
                  </sheet>
                </form>
            </field>
        </record>

        <recordid="view_email_server_search"model="ir.ui.view">
            <fieldname="name">fetchmail.server.search</field>
            <fieldname="model">fetchmail.server</field>
            <fieldname="arch"type="xml">
                <searchstring="SearchIncomingMailServers">
                    <fieldname="name"string="IncomingMailServer"/>
                    <filterstring="IMAP"name="imap"domain="[('server_type','=','imap')]"help="ServertypeIMAP."/>
                    <filterstring="POP"name="pop"domain="[('server_type','=','pop')]"help="ServertypePOP."/>
                    <separator/>
                    <filterstring="SSL"name="ssl"domain="[('is_ssl','=',True)]"help="IfSSLrequired."/>
                    <separator/>
                    <filterstring="Archived"name="inactive"domain="[('active','=',False)]"/>
                </search>
            </field>
        </record>

        <recordid="action_email_server_tree"model="ir.actions.act_window">
            <fieldname="name">IncomingMailServers</field>
            <fieldname="res_model">fetchmail.server</field>
            <fieldname="view_mode">tree,form</field>
            <fieldname="view_id"ref="view_email_server_tree"/>
            <fieldname="search_view_id"ref="view_email_server_search"/>
        </record>

        <menuitem
            parent="base.menu_email"
            id="menu_action_fetchmail_server_tree"
            action="action_email_server_tree"
            name="IncomingMailServers"
            sequence="6"
            groups="base.group_no_one"
        />

</flectra>
