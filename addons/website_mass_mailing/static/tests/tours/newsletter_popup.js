flectra.define("website_mass_mailing.tour.newsletter_popup_edition",function(require){
"usestrict";

consttour=require('web_tour.tour');
constwTourUtils=require('website.tour_utils');

tour.register('newsletter_popup_edition',{
    test:true,
    url:'/?enable_editor=1',
},[
    wTourUtils.dragNDrop({
        id:'s_newsletter_subscribe_popup',
        name:'NewsletterPopup',
    }),
    {
        content:"Confirmnewsletterchoice",
        trigger:'.modal-footer.btn-primary',
    },
    {
        content:"Checkthemodalisopenedforedition",
        trigger:'.o_newsletter_popup.modal:visible',
        in_modal:false,
        run:()=>null,
    },
    wTourUtils.clickOnSave(),
    {
        content:"Checkthemodalhasbeensaved,closed",
        trigger:'.o_newsletter_popup',
        extra_trigger:'body:not(.editor_enable)',
        run:function(actions){
            const$modal=this.$anchor.find('.modal');
            if($modal.is(':visible')){
                console.error('Modalisstillopened...');
            }
        },
    },
]);
});

flectra.define("website_mass_mailing.tour.newsletter_popup_use",function(require){
"usestrict";

consttour=require('web_tour.tour');

tour.register('newsletter_popup_use',{
    test:true,
    url:'/',
},[
    {
        content:"Checkthemodalisnotyetopenedandforceitopened",
        trigger:'.o_newsletter_popup',
        run:function(actions){
            const$modal=this.$anchor.find('.modal');
            if($modal.is(':visible')){
                console.error('Modalisalreadyopened...');
            }
            $(document).trigger('mouseleave');
        },
    },
    {
        content:"Checkthemodalisnowopenedandentertextinthesubscribeinput",
        trigger:'.o_newsletter_popup.modalinput',
        in_modal:false,
        run:'texthello@world.com',
    },
    {
        content:"Subscribe",
        trigger:'.modal-dialog.btn-primary',
    },
    {
        content:"Checkthemodalisnowclosed",
        trigger:'.o_newsletter_popup',
        run:function(actions){
            const$modal=this.$anchor.find('.modal');
            if($modal.is(':visible')){
                console.error('Modalisstillopened...');
            }
        },
    }
]);
});
