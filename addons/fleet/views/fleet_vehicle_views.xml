<?xmlversion="1.0"encoding="UTF-8"?>
<flectra>

    <recordid='fleet_vehicle_view_form'model='ir.ui.view'>
        <fieldname="name">fleet.vehicle.form</field>
        <fieldname="model">fleet.vehicle</field>
        <fieldname="arch"type="xml">
            <formstring="Vehicle">
                <header>
                    <fieldname="state_id" widget="statusbar"options="{'clickable':'1'}"/>
                </header>
                <sheet>
                    <fieldname="currency_id"invisible="1"/>
                    <divclass="oe_button_box"name="button_box">
                        <buttonname="open_assignation_logs"
                            type="object"
                            class="oe_stat_button"
                            icon="fa-history">
                            <fieldname="history_count"widget="statinfo"string="DriversHistory"/>
                        </button>
                        <buttonname="return_action_to_open"
                            type="object"
                            class="oe_stat_button"
                            icon="fa-book"
                            context="{'xml_id':'fleet_vehicle_log_contract_action'}"
                            help="showthecontractforthisvehicle">
                            <fieldname="contract_count"widget="statinfo"string="Contracts"/>
                        </button>
                        <buttonname="return_action_to_open"
                            type="object"
                            class="oe_stat_button"
                            icon="fa-wrench"
                            context="{'xml_id':'fleet_vehicle_log_services_action'}"
                            help="showtheserviceslogsforthisvehicle">
                            <fieldname="service_count"widget="statinfo"string="Services"/>
                        </button>
                        <buttonname="return_action_to_open"
                            type="object"
                            class="oe_stat_button"
                            icon="fa-tachometer"
                            context="{'xml_id':'fleet_vehicle_odometer_action'}"
                            help="showtheodometerlogsforthisvehicle"
                            attrs="{'invisible':[('vehicle_type','!=','car')]}">
                            <fieldname="odometer_count"widget="statinfo"string="Odometer"/>
                        </button>
                    </div>
                    <widgetname="web_ribbon"title="Archived"bg_color="bg-danger"attrs="{'invisible':[('active','=',True)]}"/>
                    <fieldname="image_128"widget='image'class="oe_avatar"/>
                    <divclass="oe_title">
                        <labelfor="model_id"class="oe_edit_only"/>
                        <h1>
                            <fieldname="model_id"placeholder="e.g.ModelS"/>
                        </h1>
                        <labelfor="license_plate"class="oe_edit_only"/>
                        <h2>
                            <fieldname="license_plate"class="oe_inline"placeholder="e.g.PAE326"/>
                        </h2>
                        <labelfor="tag_ids"class="oe_edit_only"/>
                        <fieldname="tag_ids"widget="many2many_tags"options="{'color_field':'color','no_create_edit':True}"/>
                    </div>
                    <groupcol="2">
                        <groupstring="Driver">
                            <fieldname="active"invisible="1"/>
                            <fieldname="vehicle_type"invisible="1"/>
                            <fieldname="driver_id"domain="['|',('company_id','=',False),('company_id','=',company_id)]"/>
                            <labelfor="future_driver_id"/>
                            <divclass="o_row">
                                <fieldname="future_driver_id"/>
                                <buttonstring="ApplyChange"
                                    class="btnbtn-primary"
                                    type="object"
                                    name="action_accept_driver_change"
                                    attrs="{'invisible':[('future_driver_id','=',False)]}"/>
                            </div>
                            <fieldname="plan_to_change_car"groups="fleet.fleet_group_manager"/>
                            <fieldname="next_assignation_date"/>
                            <fieldname="location"/>
                        </group>
                        <groupstring="Vehicle">
                            <labelfor="odometer"attrs="{'invisible':[('vehicle_type','!=','car')]}"/>
                            <divclass="o_row"attrs="{'invisible':[('vehicle_type','!=','car')]}">
                                <fieldname="odometer"/>
                                <fieldname="odometer_unit"/>
                            </div>
                            <fieldname="acquisition_date"attrs="{'invisible':[('vehicle_type','!=','car')]}"/>
                            <fieldname="vin_sn"/>
                            <fieldname="car_value"widget="monetary"/>
                            <fieldname="net_car_value"widget="monetary"/>
                            <fieldname="residual_value"widget="monetary"/>
                            <fieldname="company_id"groups="base.group_multi_company"/>
                        </group>
                        <groupstring="Contract"name="contract">
                            <fieldname="manager_id"domain="[('share','=',False)]"/>
                            <fieldname="first_contract_date"/>
                        </group>
                        <groupstring="Model">
                            <fieldname="seats"attrs="{'invisible':[('vehicle_type','!=','car')]}"/>
                            <fieldname="doors"attrs="{'invisible':[('vehicle_type','!=','car')]}"/>
                            <fieldname="color"/>
                            <fieldname="model_year"/>
                        </group>
                        <groupstring="Engine"attrs="{'invisible':[('vehicle_type','!=','car')]}">
                            <fieldname="transmission"/>
                            <fieldname="fuel_type"/>
                            <labelfor="co2"/>
                            <divclass="o_row"name="co2">
                                <fieldname="co2"/><span>g/km</span>
                            </div>
                            <fieldname="horsepower"/>
                            <fieldname="horsepower_tax"widget="monetary"/>
                            <labelfor="power"/>
                            <divclass="o_row">
                                <fieldname="power"/><span>kW</span>
                            </div>
                        </group>
                        <groupstring="Description">
                            <fieldname="description"nolabel="1"placeholder="Writehereanyotherinformationrelatedtothisvehicle"/>
                        </group>
                    </group>
                </sheet>
                <divclass="oe_chatter">
                    <fieldname="message_follower_ids"/>
                    <fieldname="activity_ids"/>
                    <fieldname="message_ids"/>
                </div>
            </form>
        </field>
    </record>

    <recordid='fleet_vehicle_view_tree'model='ir.ui.view'>
        <fieldname="name">fleet.vehicle.tree</field>
        <fieldname="model">fleet.vehicle</field>
        <fieldname="arch"type="xml">
            <treestring="Vehicle"
                decoration-warning="contract_renewal_due_soonandnotcontract_renewal_overdue"
                decoration-danger="contract_renewal_overdue"
                sample="1">
                <fieldname="active"invisible="1"/>
                <fieldname="license_plate"/>
                <fieldname="model_id"widget="many2one_avatar"/>
                <fieldname="driver_id"widget="many2one_avatar"/>
                <fieldname="future_driver_id" widget="many2one_avatar"/>
                <fieldname="log_drivers"invisible="1"/>
                <fieldname="vin_sn"/>
                <fieldname="co2"string="CO2Emissionsg/km"optional="hide"/>
                <fieldname="acquisition_date"/>
                <fieldname="tag_ids"widget="many2many_tags"options="{'color_field':'color'}"/>
                <fieldname="state_id"widget="badge"/>
                <fieldname="company_id"groups="base.group_multi_company"/>
                <fieldname="contract_renewal_due_soon"invisible="1"/>
                <fieldname="contract_renewal_overdue"invisible="1"/>
                <fieldname="contract_renewal_total"invisible="1"/>
                <fieldname="activity_exception_decoration"widget="activity_exception"/>
            </tree>
        </field>
    </record>

    <recordid="fleet_vehicle_view_search"model="ir.ui.view">
        <fieldname="name">fleet.vehicle.search</field>
        <fieldname="model">fleet.vehicle</field>
        <fieldname="arch"type="xml">
            <searchstring="Allvehicles">
                <fieldstring="Vehicle"name="name"filter_domain="['|',('name','ilike',self),('license_plate','ilike',self)]"/>
                <fieldstring="Drivers"name="log_drivers"filter_domain="[('log_drivers.driver_id.name','ilike',self)]"/>
                <fieldstring="CurrentDriver"name="driver_id"/>
                <fieldname="future_driver_id"/>
                <fieldname="tag_ids"/>
                <fieldname="location"/>
                <fieldstring="Status"name="state_id"/>
                <filterstring="Available"name="available"
                    domain="['&amp;',('future_driver_id','=',False),'|',('driver_id','=',False),('plan_to_change_car','=',True)]"/>
                <filtername="planned"string="PlannedforChange"domain="[('plan_to_change_car','=',True)]"/>
                <separator/>
                <filterstring="NeedAction"name="alert_true"domain="['|',('contract_renewal_due_soon','=',True),('contract_renewal_overdue','=',True)]"/>
                <separator/>
                <filterstring="Archived"name="inactive"domain="[('active','=',False)]"/>
                <separator/>
                <filterinvisible="1"string="LateActivities"name="activities_overdue"
                    domain="[('my_activity_date_deadline','&lt;',context_today().strftime('%Y-%m-%d'))]"
                    help="Showallrecordswhichhasnextactiondateisbeforetoday"/>
                <filterinvisible="1"string="TodayActivities"name="activities_today"
                    domain="[('my_activity_date_deadline','=',context_today().strftime('%Y-%m-%d'))]"/>
                <filterinvisible="1"string="FutureActivities"name="activities_upcoming_all"
                    domain="[('my_activity_date_deadline','&gt;',context_today().strftime('%Y-%m-%d'))]"/>
                <groupexpand="1"string="GroupBy">
                    <filterstring="Status"name="groupby_status"context="{'group_by':'state_id'}"/>
                    <filterstring="Model"name="groupby_model"context="{'group_by':'model_id'}"/>
                    <filterstring="Brand"name="groupby_make"context="{'group_by':'brand_id'}"/>
                </group>
           </search>
        </field>
    </record>


    <recordid='fleet_vehicle_view_kanban'model='ir.ui.view'>
        <fieldname="name">fleet.vehicle.kanban</field>
        <fieldname="model">fleet.vehicle</field>
        <fieldname="arch"type="xml">
            <kanbandefault_group_by="state_id"sample="1">
                <fieldname="license_plate"/>
                <fieldname="model_id"/>
                <fieldname="driver_id"/>
                <fieldname="future_driver_id"/>
                <fieldname="location"/>
                <fieldname="state_id"/>
                <fieldname="id"/>
                <fieldname="tag_ids"/>
                <fieldname="contract_renewal_due_soon"/>
                <fieldname="contract_renewal_overdue"/>
                <fieldname="contract_renewal_name"/>
                <fieldname="contract_renewal_total"/>
                <fieldname="contract_count"/>
                <fieldname="activity_ids"/>
                <fieldname="activity_state"/>
                <progressbarfield="activity_state"colors='{"planned":"success","today":"warning","overdue":"danger"}'/>

                <templates>
                    <tt-name="kanban-box">
                        <divclass="oe_kanban_global_clicko_kanban_record_has_image_fill">
                            <divclass="o_kanban_image"t-attf-style="background-image:url('#{kanban_image('fleet.vehicle','image_128',record.id.raw_value)}')"/>
                            <divclass="oe_kanban_details">
                                <strongclass="o_kanban_record_title">
                                    <tt-if="record.license_plate.raw_value"><fieldname="license_plate"/>:</t><fieldname="model_id"/>
                                </strong>
                                <divclass="o_kanban_tags_section">
                                    <fieldname="tag_ids"widget="many2many_tags"options="{'color_field':'color'}"/>
                                </div>
                                <ul>
                                    <li>
                                        <tt-if="record.driver_id.raw_value"><fieldname="driver_id"/></t>
                                    </li>
                                    <li>
                                        <tt-if="record.future_driver_id.raw_value">FutureDriver:<fieldname="future_driver_id"/></t>
                                    </li>
                                    <li>
                                        <tt-if="record.location.raw_value"><fieldname="location"/></t>
                                    </li>
                                </ul>
                                <divclass="o_kanban_record_bottom"t-if="!selection_mode">
                                    <divclass="oe_kanban_bottom_left">
                                        <at-if="record.contract_count.raw_value>0"data-type="object"
                                           data-name="return_action_to_open"href="#"class="oe_kanban_actionoe_kanban_action_a"
                                           data-context='{"xml_id":"fleet_vehicle_log_contract_action"}'>
                                            <fieldname="contract_count"/>
                                            Contract(s)
                                            <spant-if="record.contract_renewal_due_soon.raw_valueand!record.contract_renewal_overdue.raw_value"
                                                class="fafa-exclamation-triangle"t-att-style="'color:orange'"role="img"aria-label="Warning:renewalduesoon"title="Warning:renewalduesoon">
                                            </span>
                                             <spant-if="record.contract_renewal_overdue.raw_value"
                                                class="fafa-exclamation-triangle"t-att-style="'color:red;'"role="img"aria-label="Attention:renewaloverdue"title="Attention:renewaloverdue">
                                            </span>
                                        </a>
                                        <fieldname="activity_ids"widget="kanban_activity"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <recordid="fleet_vehicle_view_activity"model="ir.ui.view">
        <fieldname="name">fleet.vehicle.activity</field>
        <fieldname="model">fleet.vehicle</field>
        <fieldname="arch"type="xml">
            <activitystring="Vehicles">
                <fieldname="license_plate"/>
                <fieldname="id"/>
                <templates>
                    <divt-name="activity-box">
                        <imgt-att-src="activity_image('fleet.vehicle','image_128',record.id.raw_value)"role="img"t-att-title="record.id.value"t-att-alt="record.id.value"/>
                        <div>
                            <fieldname="license_plate"/>:<fieldname="model_id"/>
                        </div>
                    </div>
                </templates>
            </activity>
        </field>
    </record>

    <recordid='fleet_vehicle_action'model='ir.actions.act_window'>
        <fieldname="name">Vehicles</field>
        <fieldname="res_model">fleet.vehicle</field>
        <fieldname="view_mode">kanban,tree,form,activity</field>
        <fieldname="help"type="html">
          <pclass="o_view_nocontent_smiling_face">
            Readytomanageyourfleetmoreefficiently?
          </p><p>
            Let'screateyourfirstvehicle.
          </p>
        </field>
    </record>

    <menuitemname="Vehicles"parent="menu_root"id="fleet_vehicles"sequence="2"groups="fleet_group_user"/>
    <menuitemaction="fleet_vehicle_action"parent="fleet_vehicles"id="fleet_vehicle_menu"groups="fleet_group_user"sequence="1"/>

   <recordid='fleet_vehicle_odometer_view_form'model='ir.ui.view'>
        <fieldname="name">fleet.vehicle.odometer.form</field>
        <fieldname="model">fleet.vehicle.odometer</field>
        <fieldname="arch"type="xml">
            <formstring="OdometerLogs">
                <sheet>
                    <group>
                        <fieldname="vehicle_id"/>
                        <fieldname="value"class="oe_inline"/>
                        <fieldname="unit"class="oe_inline"/>
                        <fieldname="date"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <recordid='fleet_vehicle_odometer_view_tree'model='ir.ui.view'>
        <fieldname="name">fleet.vehicle.odometer.tree</field>
        <fieldname="model">fleet.vehicle.odometer</field>
        <fieldname="arch"type="xml">
            <treestring="OdometerLogs"editable="top">
                <fieldname="date"/>
                <fieldname="vehicle_id"widget="many2one_avatar"/>
                <fieldname="driver_id"widget="many2one_avatar"/>
                <fieldname="value"/>
                <fieldname="unit"/>
            </tree>
        </field>
    </record>

    <recordid='fleet_vehicle_odometer_view_kanban'model='ir.ui.view'>
        <fieldname="name">fleet.vehicle.odometer.kanban</field>
        <fieldname="model">fleet.vehicle.odometer</field>
        <fieldname="arch"type="xml">
            <kanbanclass="o_kanban_mobile">
                <templates>
                    <tt-name="kanban-box">
                        <divt-attf-class="oe_kanban_global_click">
                            <div>
                                <strong>
                                    <fieldname="vehicle_id"widget="res_partner_many2one"/>
                                    <spanclass="float-right"><fieldname="date"/></span>
                                </strong>
                            </div>
                            <div>
                                <span><fieldname="driver_id"widget="res_partner_many2one"/></span>
                                <spanclass="float-right"><fieldname="value"/>Km</span>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <recordid='fleet_vehicle_odometer_view_search'model='ir.ui.view'>
        <fieldname="name">fleet.vehicle.odometer.search</field>
        <fieldname="model">fleet.vehicle.odometer</field>
        <fieldname="arch"type="xml">
            <searchstring="Vehiclesodometers">
                <fieldname="vehicle_id"/>
                <fieldname="driver_id"/>
                <fieldname="value"/>
                <fieldname="date"/>
                <groupexpand="0"string="GroupBy">
                    <filtername="groupby_vehicle"context="{'group_by':'vehicle_id'}"string="Vehicle"/>
                </group>
            </search>
        </field>
    </record>

    <recordid="fleet_vehicle_odometer_view_graph"model="ir.ui.view">
       <fieldname="name">fleet.vehicle.odometer.graph</field>
       <fieldname="model">fleet.vehicle.odometer</field>
       <fieldname="arch"type="xml">
            <graphstring="OdometerValuesPerVehicle"sample="1">
                <fieldname="vehicle_id"type="row"/>
                <fieldname="value"type="measure"/>
            </graph>
        </field>
    </record>

    <recordid='fleet_vehicle_odometer_action'model='ir.actions.act_window'>
        <fieldname="name">Odometers</field>
        <fieldname="res_model">fleet.vehicle.odometer</field>
        <fieldname="view_mode">tree,kanban,form,graph</field>
        <fieldname="context"></field>
        <fieldname="help"type="html">
          <pclass="o_view_nocontent_smiling_face">
            Createanewodometerlog
          </p><p>
            Youcanaddvariousodometerentriesforallvehicles.
          </p>
        </field>
    </record>

    <menuitemaction="fleet_vehicle_odometer_action"parent="fleet_vehicles"id="fleet_vehicle_odometer_menu"groups="fleet_group_user"sequence="10"/>

    <recordid='fleet_vehicle_service_types_view_tree'model='ir.ui.view'>
        <fieldname="name">fleet.service.type.tree</field>
        <fieldname="model">fleet.service.type</field>
        <fieldname="arch"type="xml">
            <treestring="ServiceTypes">
                <fieldname="name"/>
                <fieldname="category"/>
            </tree>
        </field>
    </record>

    <recordid='fleet_vehicle_service_types_action'model='ir.actions.act_window'>
        <fieldname="name">ServiceTypes</field>
        <fieldname="res_model">fleet.service.type</field>
        <fieldname="view_mode">tree,form</field>
        <fieldname="help"type="html">
          <pclass="o_view_nocontent_smiling_face">
            Createanewtypeofservice
          </p><p>
            Eachservicecanusedincontracts,asastandaloneserviceorboth.
          </p>
        </field>
    </record>
    <menuitemaction="fleet_vehicle_service_types_action"parent="fleet_configuration"id="fleet_vehicle_service_types_menu"sequence="3"groups="base.group_no_one"/>

    <recordid='fleet_vehicle_state_view_tree'model='ir.ui.view'>
        <fieldname="name">fleet.vehicle.state.tree</field>
        <fieldname="model">fleet.vehicle.state</field>
        <fieldname="arch"type="xml">
            <treestring="State"editable="bottom">
                <fieldname="sequence"widget="handle"/>
                <fieldname="name"/>
            </tree>
        </field>
    </record>

    <recordid='fleet_vehicle_state_action'model='ir.actions.act_window'>
        <fieldname="name">VehicleStatus</field>
        <fieldname="res_model">fleet.vehicle.state</field>
        <fieldname="view_mode">tree,form</field>
        <fieldname="help"type="html">
          <pclass="o_view_nocontent_smiling_face">
            Createanewvehiclestatus
          </p><p>
            Youcancustomizeavailablestatustotracktheevolutionof
            eachvehicle.Example:active,beingrepaired,sold.
          </p>
        </field>
    </record>

    <menuitemaction="fleet_vehicle_state_action"parent="fleet_configuration"id="fleet_vehicle_state_menu"groups="base.group_no_one"/>

    <recordid="fleet_vehicle_tag_view_view_form"model="ir.ui.view">
        <fieldname="name">fleet.vehicle.tag.form</field>
        <fieldname="model">fleet.vehicle.tag</field>
        <fieldname="arch"type="xml">
            <formstring="VehicleTags">
                <sheet>
                    <group>
                        <fieldname="name"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <recordid="fleet_vehicle_tag_view_view_tree"model="ir.ui.view">
        <fieldname="name">fleet.vehicle.tag.tree</field>
        <fieldname="model">fleet.vehicle.tag</field>
        <fieldname="arch"type="xml">
            <treestring="VehicleTags"editable="bottom">
                <fieldname="name"/>
            </tree>
        </field>
    </record>

    <recordid="fleet_vehicle_tag_action"model="ir.actions.act_window">
        <fieldname="name">VehicleTags</field>
        <fieldname="res_model">fleet.vehicle.tag</field>
        <fieldname="help"type="html">
            <pclass="o_view_nocontent_smiling_face">
                Addanewtag
            </p>
        </field>
    </record>

    <menuitemid="fleet_vehicle_tag_menu"parent="fleet_configuration"action="fleet_vehicle_tag_action"sequence="89"groups="base.group_no_one"/>

    <recordid="fleet_vehicle_assignation_log_view_list"model="ir.ui.view">
        <fieldname="name">fleet.vehicle.assignation.log.view.tree</field>
        <fieldname="model">fleet.vehicle.assignation.log</field>
        <fieldname="arch"type="xml">
            <treestring="AssignmentLogs"editable="bottom">
                <fieldname="vehicle_id"invisible="1"/>
                <fieldname="driver_id"/>
                <fieldname="date_start"/>
                <fieldname="date_end"/>
            </tree>
        </field>
    </record>

</flectra>
