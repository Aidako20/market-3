<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <recordid="digest_digest_view_tree"model="ir.ui.view">
        <fieldname="name">digest.digest.view.tree</field>
        <fieldname="model">digest.digest</field>
        <fieldname="arch"type="xml">
            <treestring="KPIDigest">
                <fieldname="name"/>
                <fieldname="periodicity"/>
                <fieldname="next_run_date"groups="base.group_no_one"/>
                <fieldname="company_id"groups="base.group_multi_company"/>
            </tree>
        </field>
    </record>
    <recordid="digest_digest_view_form"model="ir.ui.view">
        <fieldname="name">digest.digest.view.form</field>
        <fieldname="model">digest.digest</field>
        <fieldname="arch"type="xml">
            <formstring="KPIDigest">
                <fieldname="is_subscribed"invisible="1"/>
                <header>
                    <buttontype="object"name="action_subscribe"string="Subscribe"
                        class="oe_highlight"
                        attrs="{'invisible':['|',('is_subscribed','=',True),('state','=','deactivated')]}"/>
                    <buttontype="object"name="action_unsubcribe"string="Unsubscribeme"
                        class="oe_highlight"
                        attrs="{'invisible':['|',('is_subscribed','=',False),('state','=','deactivated')]}"/>
                    <buttontype="object"name="action_deactivate"string="Deactivateforeveryone"
                        class="oe_highlight"
                        attrs="{'invisible':[('state','=','deactivated')]}"groups="base.group_system"/>
                    <buttontype="object"name="action_activate"string="Activate"
                        class="oe_highlight"
                        attrs="{'invisible':[('state','=','activated')]}"groups="base.group_system"/>
                    <buttontype="object"name="action_send"string="SendNow"
                        class="oe_highlight"
                        attrs="{'invisible':[('state','=','deactivated')]}"groups="base.group_system"/>
                    <fieldname="state"widget="statusbar"/>
                </header>
                <sheet>
                    <divclass="oe_title">
                        <labelfor="name"class="oe_edit_only"/>
                        <h1>
                            <fieldname="name"/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <fieldname="periodicity"widget="radio"options="{'horizontal':true}"/>
                            <fieldname="next_run_date"groups="base.group_system"/>
                            <fieldname="company_id"options="{'no_create':True}"invisible="1"/>
                        </group>
                    </group>
                    <notebook>
                        <pagename="kpis"string="KPIs">
                            <groupname="kpis">
                                <groupname="kpi_general"string="General"groups="base.group_system">
                                    <fieldname="kpi_res_users_connected"/>
                                    <fieldname="kpi_mail_message_total"/>
                                </group>
                                <groupname="kpi_sales"/>
                            </group>
                        </page>
                        <pagename="recipients"string="Recipients"groups="base.group_system">
                            <group>
                                <fieldname="user_ids"options="{'no_create':True}">
                                    <treestring="Recipients">
                                        <fieldname="name"/>
                                        <fieldname="email"/>
                                    </tree>
                                </field>
                            </group>
                        </page>
                        <pagename="how_to"string="Howtocustomizeyourdigest?"groups="base.group_no_one">
                            <divclass="alertalert-info"role="alert">
                                Inordertobuildyourcustomizeddigest,followthesesteps:
                                <ol>
                                    <li>
                                        YoumaywanttoaddnewcomputedfieldswithFlectraStudio:
                                        <ul>
                                            <li>
                                                youmustcreate2fieldsonthe
                                                <code>digest</code>
                                                object:
                                            </li>
                                            <li>
                                                firstcreateabooleanfieldcalled
                                                <code>kpi_myfield</code>
                                                anddisplayitintheKPI'stab;
                                            </li>
                                            <li>
                                                thencreateacomputedfieldcalled
                                                <code>kpi_myfield_value</code>
                                                thatwillcomputeyourcustomizedKPI.
                                            </li>
                                        </ul>
                                    </li>
                                    <li>SelectyourKPIsintheKPI'stab.</li>
                                    <li>
                                        Createoreditthemailtemplate:youmaygetcomputedKPI'svalueusingthesefields:
                                        <code>
                                            <fieldname="available_fields"class="oe_inline"/>
                                        </code>
                                    </li>
                                </ol>
                            </div>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>
    <recordid="digest_digest_view_search"model="ir.ui.view">
        <fieldname="name">digest.digest.view.search</field>
        <fieldname="model">digest.digest</field>
        <fieldname="arch"type="xml">
            <search>
                <fieldname="name"/>
                <fieldname="user_ids"/>
                <groupexpand="1"string="Groupby">
                    <filterstring="Periodicity"name="periodicity"context="{'group_by':'periodicity'}"/>
                </group>
            </search>
        </field>
    </record>
    <recordid="digest_digest_action"model="ir.actions.act_window">
        <fieldname="name">DigestEmails</field>
        <fieldname="res_model">digest.digest</field>
        <fieldname="search_view_id"ref="digest_digest_view_search"/>
    </record>

    <menuitemid="digest_menu"
        action="digest_digest_action"
        parent="base.menu_email"
        groups="base.group_erp_manager"
        sequence="80"/>

    <!--DIGEST.TIP-->
    <recordid="digest_tip_view_tree"model="ir.ui.view">
        <fieldname="name">digest.tip.view.tree</field>
        <fieldname="model">digest.tip</field>
        <fieldname="arch"type="xml">
            <treestring="KPIDigestTips">
                <fieldname="sequence"widget="handle"/>
                <fieldname="name"/>
                <fieldname="group_id"/>
            </tree>
        </field>
    </record>
    <recordid="digest_tip_view_form"model="ir.ui.view">
        <fieldname="name">digest.tip.view.form</field>
        <fieldname="model">digest.tip</field>
        <fieldname="arch"type="xml">
            <formstring="KPIDigestTip">
                <sheet>
                    <group>
                        <fieldname="name"/>
                        <fieldname="tip_description"/>
                        <fieldname="group_id"/>
                        <fieldname="user_ids"widget="many2many_tags"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>
    <recordid="digest_tip_view_search"model="ir.ui.view">
        <fieldname="name">digest.tip.view.search</field>
        <fieldname="model">digest.tip</field>
        <fieldname="arch"type="xml">
            <search>
                <fieldname="name"/>
                <fieldname="tip_description"/>
                <fieldname="group_id"/>
            </search>
        </field>
    </record>
    <recordid="digest_tip_action"model="ir.actions.act_window">
        <fieldname="name">DigestTips</field>
        <fieldname="res_model">digest.tip</field>
        <fieldname="search_view_id"ref="digest_tip_view_search"/>
    </record>

    <menuitemid="digest_tip_menu"
        action="digest_tip_action"
        parent="base.menu_email"
        groups="base.group_erp_manager"
        sequence="81"/>

</flectra>
