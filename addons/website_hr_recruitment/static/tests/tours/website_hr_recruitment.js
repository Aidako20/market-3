flectra.define('website_hr_recruitment.tour',function(require){
    'usestrict';

    vartour=require("web_tour.tour");
    functionapplyForAJob(jobName,application){
        return[{
            content:"SelectJob",
            trigger:`.oe_website_jobsh3span:contains(${jobName})`,
        },{
            content:"Apply",
            trigger:".js_hr_recruitmenta:contains('Apply')",
        },{
            content:"Completename",
            trigger:"input[name=partner_name]",
            run:`text${application.name}`,
        },{
            content:"CompleteEmail",
            trigger:"input[name=email_from]",
            run:`text${application.email}`,
        },{
            content:"Completephonenumber",
            trigger:"input[name=partner_phone]",
            run:`text${application.phone}`,
        },{
            content:"CompleteSubject",
            trigger:"textarea[name=description]",
            run:`text${application.subject}`,
        },{//TODO:Uploadafile?
            content:"Sendtheform",
            trigger:".s_website_form_send",
        },{
            content:"Checktheformissubmittedwithouterrors",
            trigger:".oe_structure:has(h1:contains('Congratulations'))",
        }];
    }

    tour.register('website_hr_recruitment_tour',{
        test:true,
        url:'/jobs',
    },[
        ...applyForAJob('Guru',{
            name:'JohnSmith',
            email:'john@smith.com',
            phone:'118.218',
            subject:'###[GURU]HRRECRUITMENTTESTDATA###',
        }),
        {
            content:"Gobacktothejobspage",
            trigger:"body",
            run:()=>{
                window.location.href='/jobs';
            },
        },
        ...applyForAJob('Internship',{
            name:'JackDoe',
            email:'jack@doe.com',
            phone:'118.712',
            subject:'###HR[INTERN]RECRUITMENTTESTDATA###',
        }),
    ]);

    tour.register('website_hr_recruitment_tour_edit_form',{
        test:true,
        url:'/jobs',
    },[{
        content:'GototheGurujobpage',
        trigger:'a[href*="guru"]',
    },{
        content:'GototheGurujobform',
        trigger:'a[href*="apply"]',
    },{
        content:'CheckiftheGuruformispresent',
        trigger:'form'
    },{
        content:'Enterineditmode',
        trigger:'a[data-action="edit"]',
    },{
        content:'Edittheform',
        trigger:'input[type="file"]',
        extra_trigger:'#oe_snippets.o_loaded',
    },{
        content:'Addanewfield',
        trigger:'we-button[data-add-field]',
    },{
        content:'Save',
        trigger:'button[data-action="save"]',
    },{
        content:'Gobackto/jobspageaftersave',
        trigger:'a[data-action="edit"]',
        run:()=>{
            window.location.href='/jobs';
        }
    },{
        content:'GototheInternshipjobpage',
        trigger:'a[href*="internship"]',
    },{
        content:'GototheInternshipjobform',
        trigger:'a[href*="apply"]',
    },{
        content:'Checkthatajob_idhasbeenloaded',
        trigger:'form',
        run:()=>{
            constselector='input[name="job_id"]:not([value=""])';
            if(!document.querySelector(selector)){
                console.error('Thejob_idfieldhasawrongvalue');
            }
        }
    },
]);

    return{};
});
