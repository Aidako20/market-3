<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <data>

        <!--
            IntegrateLivechatConversationintheDiscuss
        -->
        <templateid="assets_backend"name="im_livechatassetsbackend"inherit_id="web.assets_backend">
            <xpathexpr="."position="inside">
                <scripttype="text/javascript"src="/im_livechat/static/src/js/im_livechat_channel_form_view.js"></script>
                <scripttype="text/javascript"src="/im_livechat/static/src/js/im_livechat_channel_form_controller.js"></script>
                <scripttype="text/javascript"src="/im_livechat/static/src/bugfix/bugfix.js"></script>
                <scripttype="text/javascript"src="/im_livechat/static/src/components/discuss/discuss.js"></script>
                <scripttype="text/javascript"src="/im_livechat/static/src/components/discuss_sidebar/discuss_sidebar.js"></script>
                <scripttype="text/javascript"src="/im_livechat/static/src/components/discuss_sidebar_item/discuss_sidebar_item.js"></script>
                <scripttype="text/javascript"src="/im_livechat/static/src/components/notification_list/notification_list.js"></script>
                <scripttype="text/javascript"src="/im_livechat/static/src/components/thread_needaction_preview/thread_needaction_preview.js"></script>
                <scripttype="text/javascript"src="/im_livechat/static/src/components/thread_preview/thread_preview.js"></script>
                <scripttype="text/javascript"src="/im_livechat/static/src/models/messaging_initializer/messaging_initializer.js"></script>
                <scripttype="text/javascript"src="/im_livechat/static/src/models/messaging_notification_handler/messaging_notification_handler.js"></script>
                <scripttype="text/javascript"src="/im_livechat/static/src/models/partner/partner.js"></script>
                <scripttype="text/javascript"src="/im_livechat/static/src/models/thread/thread.js"></script>
                <scripttype="text/javascript"src="/im_livechat/static/src/widgets/discuss/discuss.js"></script>

                <linkrel="stylesheet"type="text/scss"href="/im_livechat/static/src/bugfix/bugfix.scss"/>
                <linkrel="stylesheet"type="text/scss"href="/im_livechat/static/src/scss/im_livechat_history.scss"/>
                <linkrel="stylesheet"type="text/scss"href="/im_livechat/static/src/scss/im_livechat_form.scss"/>
            </xpath>
        </template>

        <templateid="qunit_suite"name="livechat_tests"inherit_id="web.qunit_suite_tests">
            <xpathexpr="."position="inside">
                <scripttype="text/javascript"src="/im_livechat/static/src/bugfix/bugfix_tests.js"></script>
                <scripttype="text/javascript"src="/im_livechat/static/src/components/chat_window_manager/chat_window_manager_tests.js"/>
                <scripttype="text/javascript"src="/im_livechat/static/src/components/composer/composer_tests.js"></script>
                <scripttype="text/javascript"src="/im_livechat/static/src/components/discuss/discuss_tests.js"></script>
                <scripttype="text/javascript"src="/im_livechat/static/src/components/messaging_menu/messaging_menu_tests.js"/>
                <scripttype="text/javascript"src="/im_livechat/static/src/components/thread_icon/thread_icon_tests.js"></script>
                <scripttype="text/javascript"src="/im_livechat/static/src/components/thread_textual_typing_status/thread_textual_typing_status_tests.js"></script>
                <scripttype="text/javascript"src="/im_livechat/static/src/legacy/public_livechat.js"></script>
                <scripttype="text/javascript"src="/im_livechat/static/tests/helpers/mock_models.js"></script>
                <scripttype="text/javascript"src="/im_livechat/static/tests/helpers/mock_server.js"></script>
            </xpath>
        </template>

        <!--
            TemplaterenderingtheexternalHTMLsupportpage
        -->
        <templateid="support_page"name="Livechat:SupportPage">
            &lt;!DOCTYPEhtml&gt;
            <htmlstyle="height:100%">
                <head>
                    <metahttp-equiv="X-UA-Compatible"content="IE=edge"/>
                    <metahttp-equiv="content-type"content="text/html;charset=utf-8"/>
                    <title><tt-esc="channel_name"/>LivechatSupportPage</title>

                    <!--CalltheexternalBundletorenderthecss,js,andjsloadertags-->
                    <tt-raw="channel.script_external"/>

                    <styletype="text/css">
                        body{
                            height:100%;
                            font-size:16px;
                            font-weight:400;
                            font-family:"Lato","LucidaGrande","Helveticaneue","Helvetica","Verdana","Arial",sans-serif;
                            overflow:hidden;
                            overflow-y:auto;
                            display:block;
                            margin:0;
                            padding:0;
                            border:none;
                            width:100%;
                            height:100%;
                            background:#C9C8E0;
                            background-image:-webkit-linear-gradient(top,#7c7bad,#ddddee);
                            background-image:-moz-linear-gradient(top,#7c7bad,#ddddee);
                            background-image:-ms-linear-gradient(top,#7c7bad,#ddddee);
                            background-image:-o-linear-gradient(top,#7c7bad,#ddddee);
                            background-image:linear-gradient(tobottom,#7c7bad,#ddddee);
                            filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#7c7bad',endColorstr='#ddddee',GradientType=0);
                            -webkit-background-size:cover;
                            -moz-background-size:cover;
                            -o-background-size:cover;
                            background-size:cover;
                            background-repeat:no-repeat;
                            background-attachment:fixed;
                        }
                        .main{
                            position:absolute;
                            opacity:0;
                            top:50%;
                            width:100%;
                            margin-top:-150px;
                            color:white;
                            text-shadow:01px0rgba(34,52,72,0.2);
                            text-align:center;
                        }
                        .mainh1{
                            font-size:54px;
                        }
                        .maindiv{
                            font-style:italic;
                        }
                    </style>
                </head>

                <body>
                     <divclass="main"style="opacity:1;">
                        <h1class="channel_name"><tt-esc="channel.name"/></h1>
                        <div>WebsiteLiveChatPoweredby<strong>Flectra</strong>.</div>
                    </div>
                </body>
            </html>
        </template>

        <!--
            TemplaterenderingallthescriptsrequiredtoexecutetheLivechatfromanexternalpage(whichnotcontainFlectra)
        -->
        <templateid="external_loader"name="Livechat:external_scriptfieldoflivechatchannel">
            <!--cssstyle-->
            <linkt-att-href="'%s/im_livechat/external_lib.css'%(url)"rel="stylesheet"/>
            <!--jsofalltherequiredlib(internalandexternal)-->
            <scriptt-att-src="'%s/im_livechat/external_lib.js'%(url)"type="text/javascript"/>
            <!--theloader-->
            <scriptt-att-src="'%s/im_livechat/loader/%i'%(url,channel_id)"type="text/javascript"/>
        </template>


        <!--
            BundleofExternalLibrairiesoftheLivechat(Flectra+requiredmodules)
        -->
        <templateid="external_lib"name="Livechat:ExternalLibrairiesoftheLivechat,requiredtomakeitwork">
            <!--Momentjs-->
            <scripttype="text/javascript"src="/web/static/lib/moment/moment.js"></script>
            <!--Flectraminimallib-->
            <scripttype="text/javascript"src="/web/static/lib/underscore/underscore.js"></script>
            <scripttype="text/javascript"src="/web/static/lib/underscore.string/lib/underscore.string.js"></script>
            <!--jQuery-->
            <scripttype="text/javascript"src="/web/static/lib/jquery/jquery.js"></script>
            <scripttype="text/javascript"src="/web/static/lib/jquery.ui/jquery-ui.js"></script>
            <scripttype="text/javascript"src="/web/static/lib/jquery/jquery.browser.js"></script>
            <scripttype="text/javascript"src="/web/static/lib/jquery.ba-bbq/jquery.ba-bbq.js"></script>
            <!--Qweb2lib-->
            <scripttype="text/javascript"src="/web/static/lib/qweb/qweb2.js"></script>
            <!--FlectraJSFramework-->
            <scripttype="text/javascript"src="/web/static/lib/owl/owl.js"></script>
            <scripttype="text/javascript"src="/web/static/src/js/promise_extension.js"></script>
            <scripttype="text/javascript"src="/web/static/src/js/boot.js"></script>
            <scripttype="text/javascript"src="/web/static/src/js/libs/download.js"></script>
            <scripttype="text/javascript"src="/web/static/src/js/libs/content-disposition.js"></script>
            <scripttype="text/javascript"src="/web/static/src/js/services/config.js"></script>
            <scripttype="text/javascript"src="/web/static/src/js/core/abstract_service.js"></script>
            <scripttype="text/javascript"src="/web/static/src/js/core/class.js"></script>
            <scripttype="text/javascript"src="/web/static/src/js/core/collections.js"/>
            <scripttype="text/javascript"src="/web/static/src/js/core/translation.js"></script>
            <scripttype="text/javascript"src="/web/static/src/js/core/ajax.js"></script>
            <scripttype="text/javascript"src="/im_livechat/static/src/js/ajax_external.js"></script>
            <scripttype="text/javascript"src="/web/static/src/js/core/time.js"></script>
            <scripttype="text/javascript"src="/web/static/src/js/core/mixins.js"></script>
            <scripttype="text/javascript"src="/web/static/src/js/core/service_mixins.js"></script>
            <scripttype="text/javascript"src="/web/static/src/js/core/rpc.js"></script>
            <scripttype="text/javascript"src="/web/static/src/js/core/widget.js"></script>
            <scripttype="text/javascript"src="/web/static/src/js/core/registry.js"></script>
            <scripttype="text/javascript"src="/web/static/src/js/core/session.js"></script>
            <scripttype="text/javascript"src="/web/static/src/js/core/concurrency.js"></script>
            <scripttype="text/javascript"src="/web/static/src/js/core/utils.js"></script>
            <scripttype="text/javascript"src="/web/static/src/js/core/dom.js"></script>
            <scripttype="text/javascript"src="/web/static/src/js/core/qweb.js"></script>
            <scripttype="text/javascript"src="/web/static/src/js/core/bus.js"></script>
            <scripttype="text/javascript"src="/web/static/src/js/services/core.js"></script>
            <scripttype="text/javascript"src="/web/static/src/js/core/local_storage.js"></script>
            <scripttype="text/javascript"src="/web/static/src/js/core/ram_storage.js"></script>
            <scripttype="text/javascript"src="/web/static/src/js/core/abstract_storage_service.js"></script>
            <scripttype="text/javascript"src="/web/static/src/js/common_env.js"></script>
            <scripttype="text/javascript"src="/web/static/src/js/public/lazyloader.js"/>
            <scripttype="text/javascript"src="/web/static/src/js/public/public_env.js"/>
            <scripttype="text/javascript"src="/web/static/src/js/public/public_root.js"/>
            <scripttype="text/javascript"src="/web/static/src/js/public/public_root_instance.js"/>
            <scripttype="text/javascript"src="/web/static/src/js/public/public_widget.js"/>
            <scripttype="text/javascript"src="/web/static/src/js/services/ajax_service.js"></script>
            <scripttype="text/javascript"src="/web/static/src/js/services/local_storage_service.js"></script>
            <!--Bus,Mail,Livechat-->
            <scripttype="text/javascript"src="/bus/static/src/js/longpolling_bus.js"></script>
            <scripttype="text/javascript"src="/bus/static/src/js/crosstab_bus.js"></script>
            <scripttype="text/javascript"src="/bus/static/src/js/services/bus_service.js"></script>
            <scripttype="text/javascript"src="/mail/static/src/js/utils.js"></script>
            <scripttype="text/javascript"src="/im_livechat/static/src/legacy/public_livechat.js"></script>
            <tt-call="web._assets_helpers"/>
            <linkrel="stylesheet"type="text/scss"href="/im_livechat/static/src/scss/im_livechat_bootstrap.scss"/>
            <linkrel="stylesheet"type="text/scss"href="/im_livechat/static/src/legacy/public_livechat.scss"/>
        </template>

        <!--thejscodetoinitializetheLiveSupportobject-->
        <templateid="loader"name="Livechat:Javascriptappendingthelivechatbutton">
            <tt-translation="off">
                window.addEventListener('load',function(){
                    <tt-if="web_session_required">
                    flectra.define('web.session',function(require){
                        varSession=require('web.Session');
                        varmodules=flectra._modules;
                        returnnewSession(undefined,"<tt-esc="info['server_url']"/>",{modules:modules,use_cors:true});
                    });
                    </t>

                    flectra.define('im_livechat.livesupport',function(require){
            <tt-if="info['available']"t-translation="off">
                        varrootWidget=require('root.widget');
                        varim_livechat=require('im_livechat.legacy.im_livechat.im_livechat');
                        varbutton=newim_livechat.LivechatButton(
                            rootWidget,
                            "<tt-esc="info['server_url']"/>",
                            <tt-raw="json.dumps(info.get('options',{}))"/>
                        );
                        button.appendTo(document.body);
                        window.livechat_button=button;
            </t>
                    });
                });
            </t>
        </template>


    </data>
</flectra>
