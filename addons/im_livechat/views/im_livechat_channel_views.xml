<?xmlversion="1.0"?>
<flectra>
    <data>

        <recordid="im_livechat_channel_action"model="ir.actions.act_window">
            <fieldname="name">WebsiteLiveChatChannels</field>
            <fieldname="res_model">im_livechat.channel</field>
            <fieldname="view_mode">kanban,form</field>
            <fieldname="help"type="html">
              <pclass="o_view_nocontent_smiling_face">
                Defineanewwebsitelivechatchannel
              </p><p>
                Youcancreatechannelsforeachwebsiteonwhichyouwant
                tointegratethewebsitelivechatwidget,allowingyourwebsite
                visitorstotalkinrealtimewithyouroperators.
              </p>
            </field>
        </record>

        <recordid="im_livechat_channel_view_kanban"model="ir.ui.view">
            <fieldname="name">im_livechat.channel.kanban</field>
            <fieldname="model">im_livechat.channel</field>
            <fieldname="arch"type="xml">
                <kanban>
                    <fieldname="id"/>
                    <fieldname="name"/>
                    <fieldname="web_page"widget="url"/>
                    <fieldname="are_you_inside"/>
                    <fieldname="user_ids"/>
                    <fieldname="nbr_channel"/>
                    <fieldname="rating_percentage_satisfaction"/>
                    <templates>
                        <tt-name="kanban-box">
                            <divclass="oe_kanban_global_click">
                                <divclass="o_kanban_image">
                                    <imgt-att-src="kanban_image('im_livechat.channel','image_128',record.id.raw_value)"class="img-fluid"alt="Channel"/>
                                </div>
                                <divclass="oe_kanban_details">
                                    <divclass="float-right">
                                        <buttont-if="record.are_you_inside.raw_value"name="action_quit"type="object"class="btnbtn-primary">Leave</button>
                                        <buttont-if="!record.are_you_inside.raw_value"name="action_join"type="object"class="btnbtn-primary">Join</button>
                                    </div>
                                    <strongclass="o_kanban_record_title"style="word-wrap:break-word;"><fieldname="name"/></strong>
                                    <div>
                                        <div>
                                            <iclass="fafa-user"role="img"aria-label="User"title="User"></i>
                                            <tt-esc="(record.user_ids.raw_value||[]).length"/>Operators
                                            <br/>
                                            <iclass="fafa-comments"role="img"aria-label="Comments"title="Comments"></i>
                                            <tt-esc="record.nbr_channel.raw_value"/>Sessions
                                             <divclass="float-right">
                                                <tt-if="record.rating_percentage_satisfaction.raw_value&gt;0">
                                                    <atype="action"name="%(rating_rating_action_view_livechat_rating)d"tabindex="10">
                                                        <iclass="fafa-smile-otext-success"t-if="record.rating_percentage_satisfaction.raw_value&gt;=70"title="Rating:Great"role="img"aria-label="Happyface"/>
                                                        <iclass="fafa-meh-otext-warning"t-if="record.rating_percentage_satisfaction.raw_value&gt;30andrecord.rating_percentage_satisfaction.raw_value&lt;70"title="Rating:Okay"role="img"aria-label="Neutralface"/>
                                                        <iclass="fafa-frown-otext-danger"t-if="record.rating_percentage_satisfaction.raw_value&lt;=30"title="Rating:Bad"role="img"aria-label="Sadface"/>
                                                       <tt-esc="record.rating_percentage_satisfaction.raw_value"/>%
                                                   </a>
                                                </t>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <recordid="im_livechat_channel_view_form"model="ir.ui.view">
            <fieldname="name">im_livechat.channel.form</field>
            <fieldname="model">im_livechat.channel</field>
            <fieldname="arch"type="xml">
                <formjs_class="im_livechat_channel_form_view_js">
                    <header>
                        <buttontype="object"name="action_join"class="oe_highlight"string="JoinChannel"attrs='{"invisible":[["are_you_inside","=",True]]}'/>
                        <buttontype="object"name="action_quit"string="LeaveChannel"attrs='{"invisible":[["are_you_inside","=",False]]}'/>
                        <fieldname="are_you_inside"invisible="1"/>
                    </header>
                    <sheet>
                        <divclass="oe_button_box"name="button_box">
                            <buttonclass="oe_stat_button"type="action"attrs="{'invisible':[('nbr_channel','=',0)]}"name="%(mail_channel_action_from_livechat_channel)d"icon="fa-comments">
                                <fieldstring="Sessions"name="nbr_channel"widget="statinfo"/>
                            </button>
                            <buttonname="action_view_rating"attrs="{'invisible':[('rating_percentage_satisfaction','=',-1)]}"class="oe_stat_button"type="object"icon="fa-smile-o">
                                <fieldstring="%Happy"name="rating_percentage_satisfaction"widget="statinfo"/>
                            </button>
                        </div>
                        <fieldname="image_128"widget="image"class="oe_avatar"/>
                        <divclass="oe_title">
                            <labelfor="name"class="oe_edit_only"/>
                            <h1>
                                <fieldname="name"placeholder="e.g.YourWebsite.com"/>
                            </h1>
                        </div>
                        <notebook>
                            <pagestring="Operators"name="operators">
                                <group>
                                    <fieldname="user_ids"nolabel="1"colspan="2"domain="[['groups_id','notin',%(base.group_portal)d]]">
                                        <kanban>
                                            <fieldname="id"/>
                                            <fieldname="name"/>
                                            <templates>
                                                <tt-name="kanban-box">
                                                    <divclass="oe_kanban_global_click">
                                                        <divclass="o_kanban_image">
                                                            <imgt-att-src="kanban_image('res.users','image_1024',record.id.raw_value)"alt="User"/>
                                                        </div>
                                                        <divclass="o_kanban_details">
                                                            <h4class="o_kanban_record_title"><fieldname="name"/></h4>
                                                        </div>
                                                    </div>
                                                </t>
                                            </templates>
                                        </kanban>
                                    </field>
                                    <pclass="text-muted"style="padding-left:8px">
                                        OperatorsthatdonotshowanyactivityInFlectraformorethan30minuteswillbeconsideredasdisconnected.
                                    </p>
                                </group>
                            </page>
                            <pagestring="Options"name="options">
                                <group>
                                    <groupstring="LivechatButton">
                                        <fieldname="button_text"/>
                                        <labelfor="button_background_color"string="LivechatButtonColor"/>
                                        <divclass="o_livechat_layout_colors">
                                            <fieldname="button_background_color"widget="color"class="mb-4o_im_livechat_field_widget_color"/>
                                            <fieldname="button_text_color"widget="color"class="mb-4o_im_livechat_field_widget_color"/>
                                            <buttonclass="btnbtn-linkoe_edit_onlyo_im_livechat_channel_form_button_colors_reset_button"aria-label="Resettodefaultcolors"title="Resettodefaultcolors">
                                                <spanclass="fafa-refreshmb-4"/>
                                            </button>
                                        </div>
                                    </group>
                                    <groupstring="LivechatWindow">
                                        <fieldname="default_message"placeholder="e.g.Hello,howmayIhelpyou?"/>
                                        <fieldname="input_placeholder"/>
                                        <labelfor="header_background_color"string="ChannelHeaderColor"/>
                                        <divclass="o_livechat_layout_colors">
                                            <fieldname="header_background_color"widget="color"class="mb-4o_im_livechat_field_widget_color"/>
                                            <fieldname="title_color"widget="color"class="mb-4o_im_livechat_field_widget_color"/>
                                            <buttonclass="btnbtn-linkoe_edit_onlyo_im_livechat_channel_form_chat_window_colors_reset_button"aria-label="Resettodefaultcolors"title="Resettodefaultcolors">
                                                <spanclass="fafa-refreshmb-4"/>
                                            </button>
                                        </div>
                                    </group>
                                </group>
                            </page>
                            <pagestring="ChannelRules"name="channel_rules">
                                <spanclass="text-muted">Definerulesforyourlivesupportchannel.YoucanapplyanactionforthegivenURL,andpercountry.<br/>Toidentifythecountry,GeoIPmustbeinstalledonyourserver,otherwise,thecountriesoftherulewillnotbetakenintoaccount.</span>
                                <group>
                                    <fieldname="rule_ids"nolabel="1"/>
                                </group>
                            </page>
                            <pagestring="Widget"name="configuration_widget">
                                <groupattrs='{"invisible":[["web_page","!=",False]]}'>
                                    <divclass="alertalert-warningmt4mb16"role="alert">
                                    SaveyourChanneltogetyourconfigurationwidget.
                                    </div>
                                </group>
                                <group>
                                    <divattrs='{"invisible":[["web_page","=",False]]}'>
                                        <separatorstring="HowtousetheWebsiteLiveChatwidget?"/>
                                        <p>
                                            Copyandpastethiscodeintoyourwebsite,withinthe&lt;head&gt;tag:
                                        </p>
                                        <fieldname="script_external"readonly="1"widget="CopyClipboardText"/>
                                        <p>
                                            orcopythisurlandsenditbyemailtoyourcustomersorsuppliers:
                                        </p>
                                        <fieldname="web_page"readonly="1"widget="CopyClipboardChar"/>
                                        <p>ForwebsitesbuiltwiththeFlectraCMS,gotoWebsite>Configuration>SettingsandselecttheWebsiteLiveChatChannelyouwanttoaddtoyourwebsite.</p>
                                    </div>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <recordid="im_livechat_channel_view_search"model="ir.ui.view">
            <fieldname="name">im.livechat.channel.view.search</field>
            <fieldname="model">im_livechat.channel</field>
            <fieldname="arch"type="xml">
                <searchstring="LiveChatChannelSearch">
                    <fieldname="name"string="Channel"/>
                </search>
            </field>
        </record>

        <!--im_livechat.channel.rule-->
        <recordid="im_livechat_channel_rule_view_tree"model="ir.ui.view">
            <fieldname="name">im.livechat.channel.rule.tree</field>
            <fieldname="model">im_livechat.channel.rule</field>
            <fieldname="arch"type="xml">
                <treestring="Rules">
                    <fieldname="sequence"widget="handle"/>
                    <fieldname="regex_url"/>
                    <fieldname="action"/>
                    <fieldname="country_ids"/>
                </tree>
            </field>
        </record>

        <recordid="im_livechat_channel_rule_view_kanban"model="ir.ui.view">
            <fieldname="name">im_livechat.channel.rule.kanban</field>
            <fieldname="model">im_livechat.channel.rule</field>
            <fieldname="arch"type="xml">
                <kanban>
                    <fieldname="regex_url"/>
                    <fieldname="action"/>
                    <fieldname="country_ids"/>
                    <templates>
                        <tt-name="kanban-box">
                            <divclass="oe_kanban_global_click">
                                <div><fieldname="action"/></div>
                                <fieldname="regex_url"/>
                                <fieldname="country_ids"widget="many2many_tags"/>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <recordid="im_livechat_channel_rule_view_form"model="ir.ui.view">
            <fieldname="name">im_livechat.channel.rule.form</field>
            <fieldname="model">im_livechat.channel.rule</field>
            <fieldname="type">form</field>
            <fieldname="arch"type="xml">
                <formstring="ChannelRule"class="o_livechat_rules_form">
                    <sheet>
                        <group>
                            <fieldname="action"widget="radio"/>
                            <fieldname="regex_url"placeholder="e.g./contactus"/>
                            <labelfor="auto_popup_timer"class="oe_inline"attrs="{'invisible':[('action','!=','auto_popup')]}"/>
                            <divclass="oe_inline"attrs="{'invisible':[('action','!=','auto_popup')]}">
                                <fieldname="auto_popup_timer"class="oe_inline"/>seconds
                            </div>
                            <fieldname="country_ids"widget="many2many_tags"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <!--Cannedresponses-->
        <recordid="im_livechat_canned_response_view_tree"model="ir.ui.view">
            <fieldname="name">im_livechat.canned_response.tree</field>
            <fieldname="model">mail.shortcode</field>
            <fieldname="arch"type="xml">
                <treeeditable="bottom">
                    <fieldname="source"/>
                    <fieldname="substitution"/>
                </tree>
            </field>
        </record>

        <recordid="im_livechat_canned_response_action"model="ir.actions.act_window">
            <fieldname="name">CannedResponses</field>
            <fieldname="res_model">mail.shortcode</field>
            <fieldname="view_mode">tree</field>
            <fieldname="view_id"ref="im_livechat_canned_response_view_tree"/>
            <fieldname="domain">[]</field>
            <fieldname="help"type="html">
              <pclass="o_view_nocontent_smiling_face">
                Createanewcannedresponse
              </p><p>
                Cannedresponsesallowyoutoinsertprewrittenresponsesin
                yourmessagesbytyping<i>:shortcut</i>.Theshortcutis
                replaceddirectlyinyourmessage,sothatyoucanstilledit
                itbeforesending.
              </p>
            </field>
        </record>

        <!--Menuitems-->
        <menuitem
            id="menu_livechat_root"
            name="LiveChat"
            web_icon="im_livechat,static/description/icon.png"
            groups="im_livechat_group_user"
            sequence="205"/>

        <menuitem
            id="support_channels"
            name="Channels"
            parent="menu_livechat_root"
            action="im_livechat_channel_action"
            groups="im_livechat_group_user"
            sequence="5"/>

        <menuitem
            id="menu_reporting_livechat"
            name="Report"
            parent="menu_livechat_root"
            sequence="50"
            groups="im_livechat_group_manager"/>


        <menuitem
            id="session_history"
            name="SessionsHistory"
            parent="menu_reporting_livechat"
            action="mail_channel_action"
            groups="im_livechat_group_user"
            sequence="5"/>

        <menuitemid="rating_rating_menu_livechat"
            name="CustomerRatings"
            action="rating_rating_action_livechat_report"
            parent="menu_reporting_livechat"
            sequence="40"/>

        <menuitem
            id="livechat_config"
            name="Configuration"
            parent="menu_livechat_root"
            sequence="55"/>

        <menuitem
            id="canned_responses"
            name="CannedResponses"
            parent="livechat_config"
            action="im_livechat_canned_response_action"
            groups="im_livechat_group_user"
            sequence="15"/>

    </data>
</flectra>
