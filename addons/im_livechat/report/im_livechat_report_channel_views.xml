<?xmlversion="1.0"?>
<flectra>
    <data>

        <recordid="im_livechat_report_channel_view_pivot"model="ir.ui.view">
            <fieldname="name">im_livechat.report.channel.pivot</field>
            <fieldname="model">im_livechat.report.channel</field>
            <fieldname="arch"type="xml">
                <pivotstring="LivechatSupportStatistics"disable_linking="True"sample="1">
                    <fieldname="technical_name"type="row"/>
                    <fieldname="duration"type="measure"/>
                    <fieldname="nbr_message"type="measure"/>
                </pivot>
            </field>
        </record>

        <recordid="im_livechat_report_channel_view_graph"model="ir.ui.view">
            <fieldname="name">im_livechat.report.channel.graph</field>
            <fieldname="model">im_livechat.report.channel</field>
            <fieldname="arch"type="xml">
                <graphstring="LivechatSupportStatistics"sample="1"disable_linking="1">
                    <fieldname="technical_name"/>
                    <fieldname="nbr_message"type="measure"/>
                </graph>
            </field>
        </record>

        <recordid="im_livechat_report_channel_view_search"model="ir.ui.view">
            <fieldname="name">im_livechat.report.channel.search</field>
            <fieldname="model">im_livechat.report.channel</field>
            <fieldname="arch"type="xml">
                <searchstring="Searchreport">
                    <fieldname="channel_name"/>
                    <filtername="missed_session"string="Missedsessions"domain="[('nbr_speaker','&lt;=',1)]"/>
                    <filtername="treated_session"string="Treatedsessions"domain="[('nbr_speaker','&gt;',1)]"/>
                    <filtername="last_24h"string="Last24h"domain="[('start_date','&gt;',(context_today()-datetime.timedelta(days=1)).strftime('%%Y-%%m-%%d'))]"/>
                    <filtername="start_date_filter"string="ThisWeek"domain="[
                        ('start_date','>=',(datetime.datetime.combine(context_today()+relativedelta(weeks=-1,days=1,weekday=0),datetime.time(0,0,0)).to_utc()).strftime('%Y-%m-%d%H:%M:%S')),
                        ('start_date','&lt;',(datetime.datetime.combine(context_today()+relativedelta(days=1,weekday=0),datetime.time(0,0,0)).to_utc()).strftime('%Y-%m-%d%H:%M:%S'))]"/>
                    <separator/>
                    <filtername="filter_start_date"date="start_date"/>
                    <groupexpand="0"string="GroupBy...">
                        <filtername="group_by_session"string="Code"domain="[]"context="{'group_by':'technical_name'}"/>
                        <filtername="group_by_channel"string="Channel"domain="[]"context="{'group_by':'channel_id'}"/>
                        <filtername="group_by_operator"string="Operator"domain="[('partner_id','!=',False)]"context="{'group_by':'partner_id'}"/>
                        <separatororientation="vertical"/>
                        <filtername="group_by_hour"string="Creationdate(hour)"domain="[]"context="{'group_by':'start_date_hour'}"/>
                        <filtername="group_by_month"string="Creationdate"domain="[]"context="{'group_by':'start_date:month'}"/>
                    </group>
                </search>
            </field>
        </record>

        <recordid="im_livechat_report_channel_action"model="ir.actions.act_window">
            <fieldname="name">SessionStatistics</field>
            <fieldname="res_model">im_livechat.report.channel</field>
            <fieldname="view_mode">graph,pivot</field>
            <fieldname="context">{"search_default_last_week":1}</field>
            <fieldname="help">LivechatSupportChannelStatisticsallowsyoutoeasilycheckandanalyseyourcompanylivechatsessionperformance.Extractinformationaboutthemissedsessions,theaudiance,thedurationofasession,etc.</field>
        </record>

        <recordid="im_livechat_report_channel_time_to_answer_action"model="ir.actions.act_window">
            <fieldname="name">SessionStatistics</field>
            <fieldname="res_model">im_livechat.report.channel</field>
            <fieldname="view_mode">graph,pivot</field>
            <fieldname="context">{"graph_measure":"time_to_answer","search_default_last_week":1}</field>
            <fieldname="help"type="html">
                <pclass="o_view_nocontent_smiling_face">
                    Nodatayet!
                </p>
            </field>
        </record>

        <menuitem
            id="menu_reporting_livechat_channel"
            name="SessionStatistics"
            parent="menu_reporting_livechat"
            sequence="10"
            action="im_livechat_report_channel_action"/>


    </data>
</flectra>
