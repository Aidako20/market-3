<?xmlversion="1.0"encoding="UTF-8"?>

<templatesxml:space="preserve">

    <tt-name="im_livechat.legacy.im_livechat.FeedBack">
        <divclass="o_livechat_ratingtext-center">
            <divclass="o_livechat_rating_box">
                <divclass="o_livechat_rating_feedback_text">
                    Didwecorrectlyansweryourquestion?
                </div>
                <divclass="o_livechat_rating_choices">
                    <imgt-att-src="widget.server_origin+'/rating/static/src/img/rating_5.png'"alt="Good"data-value="5"/>
                    <imgt-att-src="widget.server_origin+'/rating/static/src/img/rating_3.png'"alt="OK"data-value="3"/>
                    <imgt-att-src="widget.server_origin+'/rating/static/src/img/rating_1.png'"alt="Bad"data-value="1"/>
                </div>
            </div>
            <divclass="o_livechat_rating_reason">
                <textareaid="reason"placeholder="Explainyournote"></textarea>
                <divclass="o_livechat_rating_reason_button">
                    <buttontype="button"class="btnbtn-primarybtn-smo_rating_submit_button">Send</button>
                </div>
            </div>
            <divclass="o_livechat_emailtext-left">
                <spanclass="text-muted">Receiveacopyofthisconversation</span>
                <divclass="input-group">
                    <inputid="o_email"type="text"class="form-control"placeholder="mail@example.com"/>
                    <buttontype="button"class="o_email_chat_buttonbtnbtn-primaryrounded-0">
                        <iclass="fafa-paper-plane"/>
                    </button>
                </div>
            </div>
            <divclass="alertalert-dangerpx-0o_livechat_email_error"style="display:none;"role="alert">
                Oops!Somethingwentwrong.<br/>Pleasecheckyourinternetconnection.<br/>
                <ahref="#"class="alert-link">Tryagain</a>
            </div>
            <divclass="o_livechat_no_feedbacktext-muted">
                <span>Closeconversation</span>
            </div>
        </div>
    </t>

    <!--
        @param{im_livechat.legacy.mail.AbstractThreadWindow}widget
    -->
    <tt-name="im_livechat.legacy.mail.AbstractThreadWindow">
        <divclass="o_thread_windowo_in_home_menu"t-att-data-thread-id="widget.getID()">
            <divclass="o_thread_window_header">
                <tt-call="im_livechat.legacy.mail.AbstractThreadWindow.HeaderContent">
                    <tt-set="status"t-value="widget.getThreadStatus()"/>
                    <tt-set="title"t-value="widget.getTitle()"/>
                    <tt-set="unreadCounter"t-value="widget.getUnreadCounter()"/>
                    <tt-set="thread"t-value="widget.getThread()"/>
                </t>
            </div>
            <divclass="o_thread_window_content">
            </div>
            <divt-if="widget.needsComposer()"class="o_thread_composero_chat_mini_composer">
                <inputclass="o_composer_text_field"t-att-placeholder="widget.options.placeholder"/>
            </div>
        </div>
    </t>

    <!--
        @param{string}[status]e.g.'online','offline'.
        @param{string}titlethetitleofthethreadwindow,e.g.therecord
          nameofthedocument.
        @param{integer}[unreadCounter]thenumberofunreadmessagesonthe
          thread.
        @param{im_livechat.legacy.mail.model.Thread|undefined}thread
        @param{Object}widget
        @param{function}widget.isMobilefunctionwithoutanyparamthat
          stateswhetheritshouldrenderfordesktopormobilescreen.
    -->
    <tt-name="im_livechat.legacy.mail.AbstractThreadWindow.HeaderContent">
        <spant-if="widget.isMobile()">
            <ahref="#"class="o_thread_window_closefafa-1xfa-arrow-left"aria-label="Closechatwindow"title="Closechatwindow"/>
        </span>
        <spanclass="o_thread_window_title">
            <tt-esc="title"/>
            <spant-if="unreadCounter">(<tt-esc="unreadCounter"/>)</span>
            <tt-if="threadandthread.hasTypingNotification()andthread.isSomeoneTyping()"t-call="im_livechat.legacy.mail.ThreadTypingIcon"/>
        </span>
        <spant-if="!widget.isMobile()"class="o_thread_window_buttons">
            <ahref="#"class="o_thread_window_closefafa-close"/>
        </span>
    </t>

    <!--
        @param{string}status
        @param{integer|undefined}[partnerID]
    -->
    <tt-name="im_livechat.legacy.mail.UserStatus">
        <spant-att-class="partnerID?'o_updatable_im_status':''"t-att-data-partner-id="partnerID">
            <it-if="status=='online'"class="o_mail_user_statuso_user_onlinefafa-circle"title="Online"role="img"aria-label="Userisonline"/>
            <it-if="status=='away'"class="o_mail_user_statuso_user_idlefafa-circle"title="Idle"role="img"aria-label="Userisidle"/>
            <it-if="status=='offline'"class="o_mail_user_statusfafa-circle-o"title="Offline"role="img"aria-label="Userisoffline"/>
        </span>
    </t>

    <!--
        @param{mail.model.AbstractThread}thread
        @param{Object}options
        @param{boolean}[options.displayEmptyThread]
        @param{boolean}[options.displayModerationCommands]
        @param{boolean}[options.displayNoMatchFound]
        @param{Array}[options.domain=[]]thedomaintorestrictmessagesonthethread.
    -->
    <tt-name="im_livechat.legacy.mail.widget.Thread">
        <tt-if="thread.hasMessages({'domain':options.domain||[]})">
            <tt-call="im_livechat.legacy.mail.widget.Thread.Content"/>
        </t>
    </t>

    <!--Renderingofthreadwhenmessagingnotyetready-->
    <divt-name="im_livechat.legacy.mail.widget.ThreadLoading"class="o_mail_thread_loading">
        <iclass="o_mail_thread_loading_iconfafa-spinnerfa-spin"/>
        <span>Pleasewait...</span>
    </div>

    <!--
        @param{im_livechat.legacy.mail.DocumentViewer}widget
    -->
    <tt-name="im_livechat.legacy.mail.DocumentViewer.Content">
        <divclass="o_viewer_content">
            <tt-set="model"t-value="widget.modelName"/>
            <divclass="o_viewer-header">
                <spanclass="o_image_caption">
                    <iclass="fafa-picture-omr8"t-if="widget.activeAttachment.fileType=='image'"role="img"aria-label="Image"title="Image"/>
                    <iclass="fafa-file-textmr8"t-if="widget.activeAttachment.fileType=='application/pdf'"role="img"aria-label="PDFfile"title="PDFfile"/>
                    <iclass="fafa-video-cameramr8"t-if="widget.activeAttachment.fileType=='video'"role="img"aria-label="Video"title="Video"/>
                    <tt-esc="widget.activeAttachment.name"/>
                    <arole="button"href="#"class="o_download_btnml8small"data-toggle="tooltip"data-placement="right"title="Download"><iclass="fafa-fwfa-download"role="img"aria-label="Download"/></a>
                </span>
                <arole="button"class="o_close_btnfloat-right"href="#"aria-label="Close"title="Close">×</a>
            </div>
            <divclass="o_viewer_img_wrapper">
                <divclass="o_viewer_zoomer">
                    <tt-if="widget.activeAttachment.fileType==='image'">
                        <divclass="o_loading_imgtext-center">
                            <iclass="fafa-circle-o-notchfa-spintext-gray-lightfa-3xfa-fw"role="img"aria-label="Loading"title="Loading"/>
                        </div>
                        <tt-set="unique"t-value="widget.activeAttachment.checksum?widget.activeAttachment.checksum.slice(-8):''"/>
                        <imgclass="o_viewer_img"t-attf-src="/web/image/#{widget.activeAttachment.id}?unique=#{unique}&amp;model=#{model}"alt="Viewer"/>
                    </t>
                    <iframet-if="widget.activeAttachment.fileType=='application/pdf'"class="mt32o_viewer_pdf" t-attf-src="/web/static/lib/pdfjs/web/viewer.html?file=/web/content/#{widget.activeAttachment.id}?model%3D#{model}"/>
                    <iframet-if="(widget.activeAttachment.fileType||'').indexOf('text')!==-1"class="mt32o_viewer_text"t-attf-src="/web/content/#{widget.activeAttachment.id}?model=#{model}"/>
                    <iframet-if="widget.activeAttachment.fileType=='youtu'"class="mt32o_viewer_text" allow="autoplay;encrypted-media"width="560"height="315"t-attf-src="https://www.youtube.com/embed/#{widget.activeAttachment.youtube}"/>
                    <videot-if="widget.activeAttachment.fileType=='video'"class="o_viewer_video"controls="controls">
                        <sourcet-attf-src="/web/image/#{widget.activeAttachment.id}?model=#{model}"t-att-data-type="widget.activeAttachment.mimetype"/>
                    </video>
                </div>
            </div>
            <divt-if="widget.activeAttachment.fileType=='image'"class="o_viewer_toolbarbtn-toolbar"role="toolbar">
                <divclass="btn-group"role="group">
                    <arole="button"href="#"class="o_viewer_toolbar_btnbtno_zoom_in"data-toggle="tooltip"title="ZoomIn"><iclass="fafa-fwfa-plus"role="img"aria-label="ZoomIn"/></a>
                    <arole="button"href="#"class="o_viewer_toolbar_btnbtno_zoom_resetdisabled"data-toggle="tooltip"title="ResetZoom"><iclass="fafa-fwfa-search"role="img"aria-label="ResetZoom"/></a>
                    <arole="button"href="#"class="o_viewer_toolbar_btnbtno_zoom_outdisabled"data-toggle="tooltip"title="ZoomOut"><iclass="fafa-fwfa-minus"role="img"aria-label="ZoomOut"/></a>
                </div>
                <divclass="btn-group"role="group">
                    <arole="button"href="#"class="o_viewer_toolbar_btnbtno_rotate"data-toggle="tooltip"title="Rotate"><iclass="fafa-fwfa-repeat"role="img"aria-label="Rotate"/></a>
                </div>
                <divclass="btn-group"role="group">
                    <arole="button"href="#"class="o_viewer_toolbar_btnbtno_print_btn"data-toggle="tooltip"title="Print"><iclass="fafa-fwfa-print"role="img"aria-label="Print"/></a>
                    <arole="button"href="#"class="o_viewer_toolbar_btnbtno_download_btn"data-toggle="tooltip"title="Download"><iclass="fafa-fwfa-download"role="img"aria-label="Download"/></a>
                </div>
            </div>
        </div>
    </t>

    <!--
        @param{im_livechat.legacy.mail.DocumentViewer}widget
    -->
    <tt-name="im_livechat.legacy.mail.DocumentViewer">
        <divclass="modalo_modal_fullscreen"tabindex="-1"data-keyboard="false"role="dialog">
            <tclass="o_document_viewer_content_call"t-call="im_livechat.legacy.mail.DocumentViewer.Content"/>

            <tt-if="widget.attachment.length!==1">
                <aclass="arrowarrow-leftmove_previous"href="#">
                    <spanclass="fafa-chevron-left"role="img"aria-label="Previous"title="Previous"/>
                </a>
                <aclass="arrowarrow-rightmove_next"href="#">
                    <spanclass="fafa-chevron-right"role="img"aria-label="Next"title="Next"/>
                </a>
            </t>
        </div>
    </t>

    <!--
        @param{string}src
    -->
    <tt-name="im_livechat.legacy.mail.PrintImage">
        <html>
            <head>
                <script>
                    functiononload_img(){
                        setTimeout('print_img()',10);
                    }
                    functionprint_img(){
                        window.print();
                        window.close();
                    }
                </script>
            </head>
            <bodyonload='onload_img()'>
                <imgt-att-src='src'alt=""/>
            </body>
        </html>
    </t>

    <!--
        @param{mail.model.AbstractThread}thread
        @param{Object}options
        @param{integer}[options.displayOrder]1or-1ascending(respectively,descending)orderfor
          thethreadmessages(fromtoptobottom)
        @param{Array}[options.domain=[]]thedomaintorestrictmessagesonthethread.
        @param{Object}ORDER
        @param{integer}ORDER.ASC=1messagesareorderedbyascendingorderofIDs,(fromtoptobottom)
        @param{integer}ORDER.DESC=-1messagesareorderedbydescendingIDs,(fromtoptobottom)

                    _____________           _____________
                   |            |         |            |
                   | message1 |         | messagen |
                   | message2 |         | ...       |
                   | ...       |         | message2 |
                   | messagen |         | message1 |
                   |_____________|         |_____________|

        ORDER:          ASC                    DESC

    -->
    <tt-name="im_livechat.legacy.mail.widget.Thread.Content">
        <tt-set="messages"t-value="thread.getMessages({'domain':options.domain||[]})"/>
        <tt-if="options.displayOrder===ORDER.ASC"t-call="im_livechat.legacy.mail.widget.Thread.Content.ASC"/>
        <tt-else=""t-call="im_livechat.legacy.mail.widget.Thread.Content.DESC"/>
    </t>

    <!--
        @param{mail.model.AbstractThread}thread
        @param{Object}options
        @param{boolean}[options.displayBottomThreadFreeSpace=false]
        @param{boolean}[options.displayLoadMore=false]

                     _____________
                    |            |
                    | message1 |
                    | message2 |
                    | ...       |
                    | messagen |
                    |_____________|

                      ASCOrder
    -->
    <tt-name="im_livechat.legacy.mail.widget.Thread.Content.ASC">
        <divclass="o_mail_thread_content">
            <tt-if="options.displayLoadMore"t-call="im_livechat.legacy.mail.widget.Thread.LoadMore"/>
            <tt-call="im_livechat.legacy.mail.widget.Thread.Messages"/>
            <tt-if="options.displayBottomThreadFreeSpace">
                <divclass="o_thread_bottom_free_space"/>
            </t>
        </div>
    </t>

    <!--
        @param{mail.model.AbstractThread}thread
        @param{Object}options
        @param{boolean}[options.displayLoadMore=false]
        @param{string|integer}[options.messagesSeparatorPosition]'top'or
            messageID,theseparatorisplacedjustafterthismessage.

                     _____________
                    |            |
                    | messagen |
                    | ...       |
                    | message2 |
                    | message1 |
                    |_____________|

                      DESCOrder

    -->
    <tt-name="im_livechat.legacy.mail.widget.Thread.Content.DESC">
        <divclass="o_mail_thread_content">
            <tt-if="options.messagesSeparatorPosition=='top'"t-call="im_livechat.legacy.mail.MessagesSeparator"/>
            <tt-set="messages"t-value="messages.slice().reverse()"/>
            <tt-call="im_livechat.legacy.mail.widget.Thread.Messages"/>
            <tt-if="options.displayLoadMore"t-call="im_livechat.legacy.mail.widget.Thread.LoadMore"/>
        </div>
    </t>

    <!--
        @param{mail.model.AbstractMessage[]}messagesmessagesareorderedbased
          ondesireddisplayorder
    -->
    <tt-name="im_livechat.legacy.mail.widget.Thread.Messages">
        <tt-set="current_day"t-value="0"/>
        <tt-foreach="messages"t-as="message">
            <divt-if="current_day!==message.getDateDay()"class="o_thread_date_separator">
                <spanclass="o_thread_date">
                    <tt-esc="message.getDateDay()"/>
                </span>
                <tt-set="current_day"t-value="message.getDateDay()"/>
            </div>

            <tt-call="im_livechat.legacy.mail.widget.Thread.Message"/>
        </t>
    </t>

    <!--
        @param{mail.model.AbstractThread}thread
        @param{string}dateFormat
        @param{Object}options
        @param{mail.model.AbstractMessage}message
        @param{Object}options
        @param{boolean}[options.displayAvatars]
        @param{boolean}[options.displayDocumentLinks]
        @param{boolean}[options.displayNotificationIcons]
        @param{boolean}[options.displayMarkAsRead]
        @param{boolean}[options.displayModerationCommands]whenset,displaythemoderationcommandson
          themessage.Thisincludesthemoderationcheckboxes(needsacontrolpanelsuchasinDiscussapp).
        @param{boolean}[options.displayReplyIcons]
        @param{boolean}[options.displayStars]
        @param{boolean}[options.displaySubjectsOnMessages]
        @param{boolean}options.hasMessageAttachmentDeletable
        @param{string|integer}[options.messagesSeparatorPosition]'top'or
            messageID,theseparatorisplacedjustafterthismessage.
        @param{integer}[options.selectedMessageID]
    -->
    <tt-name="im_livechat.legacy.mail.widget.Thread.Message">
        <divt-if="!message.isEmpty()"t-att-class="'o_thread_message'+(message.getID()===options.selectedMessageID?'o_thread_selected_message':'')+(message.isDiscussion()ormessage.isNotification()?'o_mail_discussion':'o_mail_not_discussion')"t-att-data-message-id="message.getID()">
            <divt-if="options.displayAvatars"class="o_thread_message_sidebar">
                <tt-if="message.hasAuthor()">
                    <divt-if="displayAuthorMessages[message.getID()]"class="o_thread_message_sidebar_image">
                        <img
                            alt=""
                            t-att-src="message.getAvatarSource()"
                            data-oe-model="res.partner"
                            t-att-data-oe-id="message.shouldRedirectToAuthor()?message.getAuthorID():''"
                            t-attf-class="o_thread_message_avatarrounded-circle#{message.shouldRedirectToAuthor()?'o_mail_redirect':''}"/>
                        <tt-call="im_livechat.legacy.mail.UserStatus">
                            <tt-set="status"t-value="message.getAuthorImStatus()"/>
                            <tt-set="partnerID"t-value="message.getAuthorID()"/>
                        </t>
                    </div>
                </t>
                <tt-else="">
                    <imgt-if="displayAuthorMessages[message.getID()]"
                        alt=""
                        t-att-src="message.getAvatarSource()"
                        class="o_thread_message_avatarrounded-circle"/>
                </t>
                <spant-if="!displayAuthorMessages[message.getID()]"t-att-title="message.getDate().format(dateFormat)"class="o_thread_message_side_date">
                    <tt-esc="message.getDate().format('hh:mm')"/>
                </span>
                <it-if="!displayAuthorMessages[message.getID()]andoptions.displayStarsandmessage.getType()!=='notification'"
                    t-att-class="'fao_thread_message_staro_thread_icon'+(message.isStarred()?'fa-star':'fa-star-o')"
                    t-att-data-message-id="message.getID()"title="MarkasTodo"role="img"aria-label="Markastodo"/>
                <tt-if="!displayAuthorMessages[message.getID()]andthread.hasSeenFeature()"t-call="im_livechat.legacy.mail.widget.Thread.Message.SeenIcon"/>
            </div>
            <divclass="o_thread_message_core">
                <pt-if="displayAuthorMessages[message.getID()]"class="o_mail_infotext-muted">
                    <tt-if="message.isNote()">
                        Noteby
                    </t>

                    <strongt-if="message.hasAuthor()"
                            data-oe-model="res.partner"t-att-data-oe-id="message.shouldRedirectToAuthor()?message.getAuthorID():''"
                            t-attf-class="o_thread_author#{message.shouldRedirectToAuthor()?'o_mail_redirect':''}">
                        <tt-esc="message.getDisplayedAuthor()"/>
                    </strong>
                    <strongt-elif="message.hasEmailFrom()">
                        <aclass="text-muted"t-attf-href="mailto:#{message.getEmailFrom()}?subject=Re:#{message.hasSubject()?message.getSubject():''}">
                            <tt-esc="message.getEmailFrom()"/>
                        </a>
                    </strong>
                    <strongt-else=""class="o_thread_author">
                        <tt-esc="message.getDisplayedAuthor()"/>
                    </strong>

                    -<smallclass="o_mail_timestamp"t-att-title="message.getDate().format(dateFormat)"><tt-esc="message.getTimeElapsed()"/></small>
                    <tt-if="message.isLinkedToDocumentThread()andoptions.displayDocumentLinks">
                        <small>on</small><at-att-href="message.getURL()"t-att-data-oe-model="message.getDocumentModel()"t-att-data-oe-id="message.getDocumentID()"class="o_document_link"><tt-esc="message.getDocumentName()"/></a>
                    </t>
                    <tt-if="message.originatesFromChannel()and(message.getOriginChannelID()!==thread.getID())">
                        (<small>from</small><at-att-data-oe-id="message.getOriginChannelID()"href="#">#<tt-esc="message.getOriginChannelName()"/></a>)
                    </t>
                    <spant-if="options.displayNotificationIconsandmessage.hasNotifications()"class="o_thread_tooltip_container">
                        <spanname="notification_icon"t-attf-class="d-inline-flexalign-items-centero_thread_tooltipo_thread_message_notification{{message.hasNotificationsError()?'o_thread_message_notification_error':''}}"t-att-data-message-id="message.getID()"t-att-data-message-type="message.getType()">
                            <it-att-class="message.getNotificationIcon()"/>
                            <smallt-if="message.getNotificationText()"t-esc="message.getNotificationText()"class="font-weight-boldml-1"/>
                        </span>
                    </span>
                    <spant-attf-class="o_thread_icons">
                        <tt-if="thread.hasSeenFeature()"t-call="im_livechat.legacy.mail.widget.Thread.Message.SeenIcon"/>
                       <it-if="message.isLinkedToDocumentThread()andoptions.displayReplyIcons"
                           class="fafa-replyo_thread_icono_thread_message_reply"
                           t-att-data-message-id="message.getID()"title="Reply"role="img"aria-label="Reply"/>
                        <it-if="message.isNeedaction()andoptions.displayMarkAsRead"
                           class="fafa-checko_thread_icono_thread_message_needaction"
                           t-att-data-message-id="message.getID()"title="MarkasRead"role="img"aria-label="MarkasRead"/>
                    </span>
                </p>
                <divclass="o_thread_message_content">
                    <tt-raw="message.getBody()"/>
                    <tt-if="message.hasTrackingValues()">
                        <tt-if="message.hasSubtypeDescription()">
                            <p><tt-esc="message.getSubtypeDescription()"/></p>
                        </t>
                        <tt-call="im_livechat.legacy.mail.widget.Thread.MessageTracking"/>
                    </t>
                    <tt-if="message.hasAttachments()">
                        <divt-if="message.hasImageAttachments()"class="o_attachments_previews">
                            <tt-foreach="message.getImageAttachments()"t-as="attachment">
                                <tt-call="im_livechat.legacy.mail.AttachmentPreview">
                                    <tt-set="isDeletable"t-value="options.hasMessageAttachmentDeletable"/>
                                </t>
                            </t>
                        </div>
                        <divt-if="message.hasNonImageAttachments()"class="o_attachments_list">
                            <tt-foreach="message.getNonImageAttachments()"t-as="attachment">
                                <tt-call="im_livechat.legacy.mail.Attachment">
                                    <tt-set="isDeletable"t-value="options.hasMessageAttachmentDeletable"/>
                                </t>
                            </t>
                        </div>
                    </t>
                </div>
            </div>
        </div>
        <tt-if="options.messagesSeparatorPosition==message.getID()">
            <tt-call="im_livechat.legacy.mail.MessagesSeparator"/>
        </t>
    </t>

    <!--
        Displaytheseeniconofamessageinthethread.
        Itshowsthefetch'check'beforetheseen'check'.Wechangetheorderinthetemplate
        sothatfetch'check'isontopof'seen'check(z-indexdoesnotworkwithabsolutepositioning)

        @param{mail.model.Thread}thread
        @param{mail.model.Message}message
    -->
    <tt-name="im_livechat.legacy.mail.widget.Thread.Message.SeenIcon">
        <tt-if="message.isMyselfAuthor()andmessage.getID()>=thread.getLastMessageIDSeenByEveryone()">
            <spant-attf-class="o_mail_thread_message_seen_icon#{thread.hasEveryoneSeen(message)?'o_all_seen':''}"t-att-data-message-id="message.getID()">
                <tt-if="thread.hasSomeoneFetched(message)">
                    <iclass="fafa-check"/>
                </t>
                <tt-if="thread.hasSomeoneSeen(message)">
                    <iclass="fafa-check"/>
                </t>
            </span>
        </t>
    </t>

    <!--
        Displaythepopovercontentwhenclickingtheseenicionofamessageinthethread.

        Listthemembersthathavereceivedthemessages,andthemembersthathaveseenit.

        @param{mail.model.Thread}thread
        @param{mail.model.Message}message
    -->
    <tt-name="im_livechat.legacy.mail.widget.Thread.Message.SeenIconPopoverContent">
        <divclass="o_mail_thread_message_seen_icon_content">
            <tt-if="thread.hasEveryoneSeen(message)">
                <p>SeenbyEveryone</p>
            </t>
            <tt-else="">
                <tt-if="thread.hasSomeoneSeen(message)">
                    <tt-set="seen_members"t-value="thread.getSeenMembers(message)"/>
                    Seenby:
                    <ul>
                        <lit-foreach="seen_members"t-as="member">
                            <tt-esc="member.name"/>(<tt-esc="member.email"/>)
                        </li>
                    </ul>
                </t>
                <tt-if="thread.hasSomeoneFetched(message)">
                    <tt-if="thread.hasEveryoneFetched(message)">
                        <p>ReceivedbyEveryone</p>
                    </t>
                    <tt-else="">
                        <tt-set="fetched_members"t-value="thread.getFetchedNotSeenMembers(message)"/>
                        <tt-if="!_.isEmpty(fetched_members)">
                            Receivedby:
                            <ul>
                                <lit-foreach="fetched_members"t-as="member">
                                    <tt-esc="member.name"/>(<tt-esc="member.email"/>)
                                </li>
                            </ul>
                        </t>
                    </t>
                </t>
            </t>
        </div>
    </t>

    <!--
        @param{Object[]}notifications:listofnotifications
           Anotificationisanobjectwithatleastthefollowingkeys:
           {notification_status,partner_name}
    -->
    <tt-name="im_livechat.legacy.mail.widget.Thread.Message.MailTooltip">
        <divt-foreach="notifications"t-as="notification">
            <spanname="notification_status"class="d-inline-blocktext-centero_thread_tooltip_icon">
                <it-if="notification.notification_status==='sent'"class='fafa-check'title="Sent"role="img"aria-label="Sent"/>
                <it-if="notification.notification_status==='bounce'"class='fafa-exclamationtext-danger'title="Bounced"role="img"aria-label="Bounced"/>
                <it-if="notification.notification_status==='exception'"class='fafa-exclamationtext-danger'title="Error"role="img"aria-label="Error"/>
                <it-if="notification.notification_status==='ready'"class='fafa-send-o'title="Ready"role="img"aria-label="Ready"/>
                <it-if="notification.notification_status==='canceled'"class='fafa-trash-o'title="Canceled"role="img"aria-label="Canceled"/>
            </span>
            <spanname="partner_name"t-esc="notification.partner_name"/>
        </div>
    </t>

    <tt-name="im_livechat.legacy.mail.MessagesSeparator">
        <divclass="o_thread_new_messages_separator">
            <spanclass="o_thread_separator_label">Newmessages</span>
        </div>
    </t>

    <!--
        @param{mail.model.Message}message
    -->
    <tt-name="im_livechat.legacy.mail.widget.Thread.MessageTracking">
        <ulclass="o_mail_thread_message_tracking">
            <tt-foreach='message.getTrackingValues()'t-as='value'>
                <li>
                    <tt-esc="value.changed_field"/>:
                    <tt-if="value.old_value">
                        <span><tt-esc="value.old_value||((value.field_type!=='boolean')and'')"/></span>
                        <spant-if="value.old_value!==value.new_value"class="fafa-long-arrow-right"role="img"aria-label="Changed"title="Changed"/>
                    </t>
                    <spant-if="value.old_value!==value.new_value">
                        <tt-esc="value.new_value||((value.field_type!=='boolean')and'')"/>
                    </span>
                </li>
            </t>
        </ul>
    </t>

    <!--
        @param{Array}attachments
    -->
    <tt-name="im_livechat.legacy.mail.composer.Attachments">
        <divt-if="attachments.length>0"class="o_attachmentso_attachments_list">
            <tt-foreach="attachments"t-as='attachment'>
                <tt-call="im_livechat.legacy.mail.Attachment">
                     <tt-set="editable"t-value="true"/>
                </t>
            </t>
        </div>
    </t>

    <!--
        @param{Object}attachment
        @param{integer}attachment.id
        @param{string}attachment.name
        @param{string}attachment.url
        @param{boolean}[isDeletable=false]
    -->
    <tt-name="im_livechat.legacy.mail.AttachmentPreview">
        <divclass="o_attachment"t-att-title="attachment.name">
            <divclass="o_attachment_wrap">
                <divclass="o_image_box">
                    <divclass="o_attachment_image"t-attf-style="background-image:url('/web/image/#{attachment.id}/160x160/?crop=true')"/>
                    <divt-attf-class="o_image_overlayo_attachment_view" t-att-data-id="attachment.id">
                        <spant-if="isDeletable"class="fafa-timeso_attachment_delete_cross"t-att-title="'Delete'+attachment.name"t-att-data-id="attachment.id"t-att-data-name="attachment.name"/>
                        <spanclass="o_attachment_titletext-white"><tt-esc="attachment.name"/></span>
                        <aclass="o_attachment_download"t-att-href='attachment.url'>
                            <it-attf-class="fafa-downloadtext-white"t-att-title="'Download'+attachment.name"role="img"aria-label="Download"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </t>

    <!--
        @param{Object}attachment
        @param{string}attachment.filename
        @param{integer}attachment.id
        @param{string}[attachment.mimetype]
        @param{string}attachment.name
        @param{boolean}attachment.upload
        @param{string}attachment.url
        @param{boolean}[editable=false]ifset,itmeanstheattachmentisrenderedinthecomposer.
          Somechangesarerequiredinthatcase,suchas"delete"buttonisnotvisible(prettyunlinkisusedinstead).
        @param{boolean}[isDeletable=false]
    -->
    <tt-name="im_livechat.legacy.mail.Attachment">
        <tt-set="type"t-value="attachment.mimetypeandattachment.mimetype.split('/').shift()"/>
        <divt-attf-class="o_attachment#{editable?'o_attachment_editable':''}#{attachment.upload?'o_attachment_uploading':''}"t-att-title="attachment.name">
            <divclass="o_attachment_wrap">
                <spant-if="!editableandisDeletable"class="fafa-timeso_attachment_delete_cross"t-att-title="'Delete'+attachment.name"t-att-data-id="attachment.id"t-att-data-name="attachment.name"/>
                <tt-set="has_preview"t-value="type=='image'ortype=='video'orattachment.mimetype=='application/pdf'"/>
                <tt-set="ext"t-value="attachment.filename.split('.').pop()"/>

                <divt-attf-class="o_image_boxfloat-left#{has_preview?'o_attachment_view':''}"t-att-data-id="attachment.id">
                    <divt-if="has_preview"
                         class="o_imageo_hover"
                         t-att-style="type=='image'?'background-image:url(/web/image/'+attachment.id+'/38x38/?crop=true':''"
                         t-att-data-mimetype="attachment.mimetype">
                    </div>
                    <at-elif="!editable"t-att-href='attachment.url't-att-title="'Download'+attachment.name"aria-label="Download">
                        <spanclass="o_imageo_hover"t-att-data-mimetype="attachment.mimetype"t-att-data-ext="ext"/>
                    </a>
                    <spant-else=""class="o_image"t-att-data-mimetype="attachment.mimetype"t-att-data-ext="ext"role="img"aria-label="Documentnotdownloadable"/>
                </div>

                <divclass="caption">
                    <spant-if="has_previeworeditable"t-attf-class="ml4#{has_preview?'o_attachment_view':''}"t-att-data-id="attachment.id"><tt-esc='attachment.name'/></span>
                    <at-else=""class="ml4"t-att-href="attachment.url"t-att-title="'Download'+attachment.name"><tt-esc='attachment.name'/></a>
                </div>
                <divt-if="editable"class="captionsmall">
                    <bt-attf-class="ml4smalltext-uppercase#{has_preview?'o_attachment_view':''}"t-att-data-id="attachment.id"><tt-esc="ext"/></b>
                    <divclass="progresso_attachment_progress_bar">
                        <divclass="progress-barprogress-bar-stripedactive"style="width:100%">Uploading</div>
                    </div>
                </div>
                <divt-if="!editable"class="captionsmall">
                    <bt-if="has_preview"class="ml4smalltext-uppercaseo_attachment_view"t-att-data-id="attachment.id"><tt-esc="ext"/></b>
                    <at-else=""class="ml4smalltext-uppercase"t-att-href="attachment.url"t-att-title="'Download'+attachment.name"><b><tt-esc='ext'/></b></a>
                    <aclass="ml4o_attachment_downloadfloat-right"t-att-title="'Download'+attachment.name"t-att-href='attachment.url'><it-attf-class="fafa-download"role="img"aria-label="Download"/></a>
                </div>
                <divt-if="editable"class="o_attachment_uploaded"><iclass="text-successfafa-check"role="img"aria-label="Uploaded"title="Uploaded"/></div>
                <divt-if="editable"class="o_attachment_delete"t-att-data-id="attachment.id"><spanclass="text-white"role="img"aria-label="Delete"title="Delete">×</span></div>
            </div>
        </div>
    </t>

    <!--
        @param{Object}options
        @param{boolean}[options.loadMoreOnScroll]
    -->
     <tt-name="im_livechat.legacy.mail.widget.Thread.LoadMore">
        <divclass="o_thread_show_more">
            <tt-if="options.loadMoreOnScroll">
                <span><iclass="fafa-spinnerfa-spin"role="img"aria-label="Pleasewait"title="Pleasewait"/>Loadingoldermessages...</span>
            </t>
            <tt-else="">
                <buttonclass="btnbtn-link">--------Showoldermessages--------</button>
            </t>
        </div>
    </t>

    <!--
        @param{mail.model.Thread}threadwithtypingfeature
    -->
    <tt-name="im_livechat.legacy.mail.ThreadTypingIcon">
        <spanclass="o_mail_thread_typing_icon"t-att-title="thread.getTypingMembersToText()">
            <spanclass="o_mail_thread_typing_icon_dot"/>
            <spanclass="o_mail_thread_typing_icon_dot"/>
            <spanclass="o_mail_thread_typing_icon_dot"/>
        </span>
    </t>

</templates>
