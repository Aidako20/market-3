<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
<templateid="report_saleorder_document_inherit_sale_management"inherit_id="sale.report_saleorder_document">
    <xpathexpr="//div[@name='signature']"position="after">
        <divt-if="doc.sale_order_option_idsanddoc.statein['draft','sent']">
            <tt-set="has_option_discount"t-value="any(option.discount!=0.0foroptionindoc.sale_order_option_ids)"/>
            <h4name="h_optional_products">
                <span>Options</span>
            </h4>
            <tablename="table_optional_products"class="tabletable-sm">
                <thead>
                    <tr>
                        <thname="th_option_name"class="text-left">Description</th>
                        <tht-if="has_option_discount"name="th_option_discount"groups="product.group_discount_per_so_line"class="text-left">Disc.%</th>
                        <thname="th_option_price_unit"class="text-right">UnitPrice</th>
                    </tr>
                </thead>
                <tbodyclass="sale_tbody">
                    <trt-foreach="doc.sale_order_option_ids"t-as="option">
                        <tdname="td_option_name">
                            <spant-field="option.name"/>
                        </td>
                        <tdt-if="has_option_discount"name="td_option_discount"groups="product.group_discount_per_so_line">
                            <strongt-if="option.discount!=0.0"class="text-info">
                                <tt-esc="((option.discount%1)and'%s'or'%d')%option.discount"/>%
                            </strong>
                        </td>
                        <tdname="td_option_price_unit">
                            <strongclass="text-right">
                                <divt-field="option.price_unit"
                                    t-options='{"widget":"monetary","display_currency":doc.pricelist_id.currency_id}'
                                    t-att-style="option.discountand'text-decoration:line-through'orNone"
                                    t-att-class="option.discountand'text-danger'orNone"/>
                                <divt-if="option.discount">
                                    <tt-esc="'%.2f'%((1-option.discount/100.0)*option.price_unit)"/>
                                </div>
                            </strong>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </xpath>
</template>
</flectra>
