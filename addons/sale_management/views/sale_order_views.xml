<?xmlversion="1.0"?>
<flectra>
    <recordid="sale_order_form_quote"model="ir.ui.view">
        <fieldname="name">sale.order.form.payment</field>
        <fieldname="model">sale.order</field>
        <fieldname="inherit_id"ref="sale.view_order_form"/>
        <fieldname="arch"type="xml">

            <xpathexpr="//page/field[@name='order_line']/.."position="after">
                <pagestring="OptionalProducts"name="optional_products"attrs="{'invisible':[('state','notin',['draft','sent'])]}">
                    <fieldname="sale_order_option_ids"mode="tree,form,kanban">
                        <formstring="OptionalProducts">
                            <group>
                                <fieldname="product_id"domain="[('sale_ok','=',True),'|',('company_id','=',False),('company_id','=',parent.company_id)]"/>
                                <fieldname="name"/>
                                <fieldname="quantity"/>
                                <fieldname="product_uom_category_id"invisible="1"/>
                                <fieldname="uom_id"groups="uom.group_uom"/>
                                <fieldname="price_unit"/>
                                <fieldname="discount"groups="product.group_discount_per_so_line"/>
                                <fieldname="is_present"/>
                            </group>
                        </form>
                        <kanbanclass="o_kanban_mobile">
                            <fieldname="product_id"/>
                            <fieldname="quantity"/>
                            <fieldname="uom_id"groups="uom.group_uom"/>
                            <fieldname="price_unit"/>
                            <fieldname="is_present"/>
                            <templates>
                                <tt-name="kanban-box">
                                    <divclass="oe_kanban_cardoe_kanban_global_click">
                                        <divclass="row">
                                            <divclass="col-10">
                                                <strong>
                                                    <span>
                                                        <tt-esc="record.product_id.value"/>
                                                    </span>
                                                </strong>
                                            </div>
                                            <divclass="col-2">
                                                <buttonname="button_add_to_order"class="btnbtn-linkoe_linkfafa-shopping-cart"title="Addtoorderlines"type="object"attrs="{'invisible':[('is_present','=',True)]}"/>
                                            </div>
                                        </div>
                                        <divclass="row">
                                            <divclass="col-12text-muted">
                                                <span>
                                                    Quantity:
                                                    <tt-esc="record.quantity.value"/>
                                                    <tt-esc="record.uom_id.value"/>
                                                </span>
                                            </div>
                                        </div>
                                        <divclass="row">
                                            <divclass="col-12text-muted">
                                                <span>
                                                    UnitPrice:
                                                    <tt-esc="record.price_unit.value"/>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </t>
                            </templates>
                        </kanban>
                        <treestring="SalesQuotationTemplateLines"editable="bottom"decoration-success="is_present==True">
                            <control>
                                <createname="add_product_control"string="Addaproduct"/>
                            </control>
                            <fieldname="sequence"widget="handle"/>
                            <fieldname="product_id"domain="[('sale_ok','=',True),'|',('company_id','=',False),('company_id','=',parent.company_id)]"/>
                            <fieldname="name"optional="show"/>
                            <fieldname="quantity"/>
                            <fieldname="uom_id"string="UoM"groups="uom.group_uom"optional="show"/>
                            <fieldname="product_uom_category_id"invisible="1"/>
                            <fieldname="price_unit"/>
                            <fieldname="discount"string="Disc.%"groups="product.group_discount_per_so_line"optional="show"/>
                            <fieldname="is_present"invisible="1"/>
                            <buttonname="button_add_to_order"class="oe_link"icon="fa-shopping-cart"title="Addtoorderlines"type="object"attrs="{'invisible':[('is_present','=',True)]}"/>
                        </tree>
                    </field>
                </page>
            </xpath>

            <xpathexpr="//field[@name='partner_shipping_id']"position="after">
                <fieldname="sale_order_template_id"context="{'company_id':company_id}"
                    options="{'no_create':True,'no_open':True}"
                    groups="sale_management.group_sale_order_template"
                />
            </xpath>

        </field>
    </record>

    <recordid="sale.action_quotations"model="ir.actions.act_window">
        <fieldname="help"type="html">
            <pclass="o_view_nocontent_smiling_face">
                Createanewquotation,thefirststepofanewsale!
            </p>
            <p>
                Oncethequotationisconfirmedbythecustomer,itbecomesasalesorder.<br/>Youwillbeabletocreateaninvoiceandcollectthepayment.
            </p>
        </field>
    </record>

    <menuitemid="menu_product_attribute_action"
        action="product.attribute_action"
        parent="sale.prod_config_main" groups="product.group_product_variant"sequence="1"/>
</flectra>
