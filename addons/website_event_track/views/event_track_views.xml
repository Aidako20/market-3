<?xmlversion="1.0"?>
<flectra>
    <recordid="website_visitor_action_from_track"model="ir.actions.act_window">
        <fieldname="name">VisitorsWishlist</field>
        <fieldname="res_model">website.visitor</field>
        <fieldname="view_mode">kanban,tree,form,graph</field>
        <fieldname="domain">[('event_track_wishlisted_ids','in',[active_id])]</field>
        <fieldname="help"type="html">
            <pclass="o_view_nocontent_smiling_face">
                Waitforvisitorstowishlistyourtracks
            </p>
        </field>
    </record>

    <recordmodel="ir.ui.view"id="view_event_track_kanban">
        <fieldname="name">event.track.kanban</field>
        <fieldname="model">event.track</field>
        <fieldname="arch"type="xml">
            <kanbandefault_group_by="stage_id">
                <templates>
                    <fieldname="color"/>
                    <fieldname="partner_id"/>
                    <fieldname="stage_id"/>
                    <fieldname="website_url"/>
                    <fieldname="activity_ids"/>
                    <fieldname="activity_state"/>
                    <progressbarfield="kanban_state"colors='{"done":"success","blocked":"danger"}'/>
                    <tt-name="kanban-box">
                        <divt-attf-class="{{!selection_mode?'oe_kanban_color_'+kanban_getcolor(record.color.raw_value):''}}oe_kanban_cardoe_kanban_global_click">
                            <divclass="o_dropdown_kanbandropdown"groups="base.group_user">

                                <arole="button"class="dropdown-toggleo-no-caretbtn"data-toggle="dropdown"href="#"aria-label="Dropdownmenu"title="Dropdownmenu">
                                    <spanclass="fafa-ellipsis-v"/>
                                </a>
                                <divclass="dropdown-menu"role="menu">
                                    <arole="menuitem"t-att-href="record.website_url.value"class="dropdown-item">ViewTrack</a>
                                    <tt-if="widget.editable"><arole="menuitem"type="edit"class="dropdown-item">EditTrack</a></t>
                                    <tt-if="widget.deletable"><arole="menuitem"type="delete"class="dropdown-item">Delete</a></t>
                                    <ulclass="oe_kanban_colorpicker"data-field="color"/>
                                </div>
                            </div>
                            <divclass="oe_kanban_content">
                                <divclass="o_kanban_record_top">
                                    <h4class="o_kanban_record_title"><fieldname="name"/></h4>
                                </div>
                                <divclass="o_kanban_record_body">
                                    <tt-if="duration"><fieldname="duration"widget="float_time"/>hours</t>
                                    <fieldname="tag_ids"widget="many2many_tags"options="{'color_field':'color'}"/>
                                </div>
                                <divclass="o_kanban_record_bottom">
                                    <divclass="oe_kanban_bottom_left">
                                        <fieldname="priority"widget="priority"/>
                                        <fieldname="activity_ids"widget="kanban_activity"/>
                                    </div>
                                    <divclass="oe_kanban_bottom_right">
                                        <fieldname="kanban_state"widget="state_selection"groups="base.group_user"/>
                                        <imgt-att-src="kanban_image('res.partner','image_128',record.partner_id.raw_value)"
                                            t-att-title="record.partner_id.value"t-att-alt="record.partner_id.value"
                                            class="oe_kanban_avatar"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <recordid="view_event_track_calendar"model="ir.ui.view">
        <fieldname="name">event.track.calendar</field>
        <fieldname="model">event.track</field>
        <fieldeval="2"name="priority"/>
        <fieldname="arch"type="xml">
            <calendardate_start="date"date_delay="duration"string="EventTracks"color="location_id"event_limit="5">
                <fieldname="location_id"filters="1"/>
                <fieldname="event_id"/>
                <fieldname="partner_id"avatar_field="image_128"/>
                <fieldname="user_id"avatar_field="image_128"/>
            </calendar>
        </field>
    </record>

    <recordmodel="ir.ui.view"id="view_event_track_search">
        <fieldname="name">event.track.search</field>
        <fieldname="model">event.track</field>
        <fieldname="arch"type="xml">
            <searchstring="EventTracks">
                <fieldname="name"/>
                <fieldname="event_id"/>
                <fieldname="location_id"/>
                <fieldname="stage_id"/>
                <fieldname="partner_id"/>
                <filterstring="MyTracks"name="my_tracks"domain="[('user_id','=',uid)]"/>
                <separator/>
                <filterstring="UnreadMessages"name="message_needaction"domain="[('message_needaction','=',True)]"/>
                <separator/>
                <filterstring="AlwaysWishlisted"name="filter_wishlisted_by_default"domain="[('wishlisted_by_default','=',True)]"/>
                <separator/>
                <filtername="filter_date"date="date"/>
                <separator/>
                <filterstring="Archived"name="inactive"domain="[('active','=',False)]"/>
                <separator/>
                <filterinvisible="1"string="LateActivities"name="activities_overdue"
                    domain="[('my_activity_date_deadline','&lt;',context_today().strftime('%Y-%m-%d'))]"
                    help="Showallrecordswhichhasnextactiondateisbeforetoday"/>
                <filterinvisible="1"string="TodayActivities"name="activities_today"
                    domain="[('my_activity_date_deadline','=',context_today().strftime('%Y-%m-%d'))]"/>
                <filterinvisible="1"string="FutureActivities"name="activities_upcoming_all"
                    domain="[('my_activity_date_deadline','&gt;',context_today().strftime('%Y-%m-%d'))]"/>
                <groupexpand="0"string="GroupBy">
                    <filterstring="Responsible"name="responsible"context="{'group_by':'user_id'}"/>
                    <filterstring="Stage"name="stage"context="{'group_by':'stage_id'}"/>
                    <filterstring="Date"name="date"context="{'group_by':'date'}"/>
                    <filterstring="Event"name="event"context="{'group_by':'event_id'}"/>
                    <filterstring="Location"name="location"context="{'group_by':'location_id'}"/>
                </group>
            </search>
        </field>
    </record>

    <recordmodel="ir.ui.view"id="view_event_track_form">
        <fieldname="name">event.track.form</field>
        <fieldname="model">event.track</field>
        <fieldname="arch"type="xml">
            <formstring="EventTrack">
                <header>
                    <fieldname="stage_id"widget="statusbar"options="{'clickable':'1'}"/>
                </header>
                <sheetstring="Track">
                    <divclass="oe_button_box"name="button_box">
                        <fieldname="website_url"invisible="1"/>
                        <buttonname="%(website_event_track.website_visitor_action_from_track)d"
                            type="action"
                            class="oe_stat_button"
                            icon="fa-bell">
                            <fieldname="wishlist_visitor_count"string="WishlistedBy"widget="statinfo"/>
                        </button>
                        <fieldname="is_published"widget="website_redirect_button"/>
                    </div>
                    <widgetname="web_ribbon"text="Archived"bg_color="bg-danger"attrs="{'invisible':[('active','=',True)]}"/>
                    <fieldname="kanban_state"widget="state_selection"class="ml-3float-right"/>
                    <fieldname="website_image"widget="image"class="oe_avatar"/>
                    <divclass="oe_title">
                        <labelfor="name"class="oe_edit_only"/>
                        <h1>
                            <fieldname="name"placeholder="e.g.InspiringBusinessTalk"/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <fieldname="date"/>
                            <fieldname="location_id"/>
                            <labelfor="duration"/>
                            <divclass="o_row">
                                <fieldname="duration"widget="float_time"/>
                                <span>hours</span>
                            </div>
                            <fieldname="active"invisible="1"/>
                            <fieldname="wishlisted_by_default"/>
                        </group>
                        <group>
                            <fieldname="company_id"invisible="1"/>
                            <fieldname="user_id"domain="[('share','=',False)]"/>
                            <fieldname="event_id"/>
                            <fieldname="tag_ids"widget="many2many_tags"options="{'color_field':'color'}"/>
                            <fieldname="color"widget="color_picker"/>
                        </group>
                    </group>
                    <notebook>
                        <pagestring="Speakers"name="speakers">
                            <groupclass="display-flexjustify-content-between">
                                <group>
                                    <fieldname="partner_id"
                                        domain="['|',('company_id','=',company_id),('company_id','=',False)]"
                                        context="{'default_phone':partner_phone,'default_email':partner_email}"/>
                                    <fieldname="partner_name"/>
                                    <fieldname="partner_email"/>
                                    <fieldname="partner_phone"class="o_force_ltr"/>
                                </group>
                                <group>
                                    <fieldname="image"nolabel="1"widget="image"class="oe_avatar"/>
                                </group>
                            </group>
                            <group>
                                <fieldname="partner_biography"/>
                            </group>
                        </page>
                        <pagestring="Description"name="description">
                            <fieldname="description"/>
                        </page>
                        <pagestring="Interactivity"name="interactivity">
                            <group>
                                <groupname="event_track_cta_group">
                                    <fieldname="website_cta"/>
                                    <fieldname="website_cta_title"placeholder="e.g.GetYoursNow!"
                                        attrs="{'invisible':[('website_cta','=',False)],
                                                'required':[('website_cta','=',True)]}"/>
                                    <fieldname="website_cta_url"placeholder="e.g.http://www.example.com"
                                        attrs="{'invisible':[('website_cta','=',False)],
                                                'required':[('website_cta','=',True)]}"/>
                                    <labelfor="website_cta_delay"
                                        attrs="{'invisible':[('website_cta','=',False)]}"/>
                                    <divattrs="{'invisible':[('website_cta','=',False)]}">
                                        <fieldname="website_cta_delay"class="oe_inline"
                                            attrs="{'required':[('website_cta','=',True)]}"/>minutesaftertalkstart
                                    </div>
                                </group>
                            </group>
                        </page>
                    </notebook>
                </sheet>
                <divclass="oe_chatter">
                    <fieldname="message_follower_ids"/>
                    <fieldname="activity_ids"/>
                    <fieldname="message_ids"options="{'post_refresh':'recipients'}"/>
                </div>
            </form>
        </field>
    </record>

    <recordmodel="ir.ui.view"id="view_event_track_tree">
        <fieldname="name">event.track.tree</field>
        <fieldname="model">event.track</field>
        <fieldname="arch"type="xml">
            <treestring="EventTrack">
                <fieldname="name"/>
                <fieldname="active"invisible="1"/>
                <fieldname="partner_name"/>
                <fieldname="partner_id"optional="hide"/>
                <fieldname="partner_email"/>
                <fieldname="partner_phone"/>
                <fieldname="event_id"invisible="context.get('default_event_id')"/>
                <fieldname="wishlisted_by_default"optional="hide"/>
                <fieldname="wishlist_visitor_count"optional="hide"/>
                <fieldname="stage_id"/>
                <fieldname="color"widget="color_picker"optional="hide"/>
                <fieldname="activity_exception_decoration"widget="activity_exception"/>
            </tree>
        </field>
    </record>

    <recordmodel="ir.ui.view"id="view_event_track_graph">
        <fieldname="name">event.track.graph</field>
        <fieldname="model">event.track</field>
        <fieldname="arch"type="xml">
            <graphstring="Tracks"type="bar"orientation="horizontal"sample="1">
                <fieldname="location_id"/>
                <fieldname="duration"operator="+"/>
            </graph>
        </field>
    </record>

    <recordmodel="ir.actions.act_window"id="action_event_track">
        <fieldname="name">EventTracks</field>
        <fieldname="res_model">event.track</field>
        <fieldname="view_mode">kanban,tree,form,calendar,graph,activity</field>
        <fieldname="help"type="html">
            <pclass="o_view_nocontent_smiling_face">
              Addanewtrack
            </p><p>
              Tracksdefinethescheduleofyourevent.<br/>Thesecanbeatalk,aroundtable,ameeting,etc.
            </p>
        </field>
    </record>

    <recordmodel="ir.actions.act_window"id="action_event_track_from_event">
        <fieldname="res_model">event.track</field>
        <fieldname="name">EventTracks</field>
        <fieldname="view_mode">kanban,tree,form,calendar,graph,activity</field>
        <fieldname="context">{'search_default_event_id':active_id,'default_event_id':active_id}</field>
        <fieldname="help"type="html">
          <pclass="o_view_nocontent_smiling_face">
            Addanewtrack
          </p><p>
            Tracksdefinethescheduleofyourevent.<br/>Thesecanbeatalk,aroundtable,ameeting,etc.
          </p>
        </field>
    </record>

    <recordid="event_track_action_from_visitor"model="ir.actions.act_window">
        <fieldname="name">WishlistedTracks</field>
        <fieldname="res_model">event.track</field>
        <fieldname="view_mode">kanban,tree,form</field>
        <fieldname="domain">[('wishlist_visitor_ids','in',[active_id])]</field>
        <fieldname="help"type="html">
            <pclass="o_view_nocontent_empty_folder">
                Notrackwishlistedbythisvisitor
            </p>
        </field>
    </record>

</flectra>
