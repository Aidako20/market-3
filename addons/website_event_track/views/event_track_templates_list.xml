<?xmlversion="1.0"encoding="utf-8"?>
<flectra>

<templateid="tracks_session"name="EventTracks">
    <tt-call="website_event.layout">
        <divclass="o_wevent_onlineo_wesession_index">
            <!--Options-->
            <tt-set="option_track_wishlist"t-value="notevent.is_doneandis_view_active('website_event_track.session_topbar_wishlist')"/>
            <!--Topbar-->
            <tt-call="website_event_track.session_topbar"/>
            <!--Drag/DropArea-->
            <divid="oe_structure_wesession_index_1"class="oe_structure"/>
            <!--Content-->
            <divclass="o_wesession_containercontainer">
                <divclass="row">
                    <tt-call="website_event_track.tracks_search"/>
                </div>
                <divclass="row">
                    <tt-call="website_event_track.tracks_main"/>
                </div>
            </div>
            <!--Drag/DropArea-->
            <divid="oe_structure_wesession_index_2"class="oe_structuremb-5"/>
        </div>
    </t>
</template>

<!--============================================================-->
<!--TOPBAR:BASENAVIGATION-->
<!--============================================================-->

<!--Maintopbar-->
<templateid="session_topbar"name="TracksTools">
    <navclass="navbarnavbar-lightborder-topshadow-smd-print-none">
        <divclass="container">
            <divclass="d-flexflex-columnflex-sm-rowjustify-content-betweenw-100">
                <ulclass="o_wesession_topbar_filterso_wevent_index_topbar_filtersnav">
                    <!--Optionalwishlistfilter-->
                    <lit-if="option_track_wishlist"class="nav-itemdropdownmr-2my-1">
                        <ahref="#"role="button"class="btndropdown-toggle"data-toggle="dropdown">
                            <iclass="fafa-folder-open"/>Favorites
                        </a>
                        <divclass="dropdown-menu">
                            <at-att-href="'/event/%s/track?%s'%(
                                    slug(event),
                                    keep_query('*',search_wishlist='')
                                )"
                                class="dropdown-itemd-flexalign-items-centerjustify-content-between">
                                AllTalks
                            </a>
                            <at-att-href="'/event/%s/track?%s'%(
                                    slug(event),
                                    keep_query('*',search_wishlist='1')
                                )"
                                t-attf-class="dropdown-itemd-flexalign-items-centerjustify-content-between#{'active'ifsearch_wishlistelse''}">
                                Favorites
                            </a>
                        </div>
                    </li>
                </ul>
                <divclass="d-flexalign-items-centerflex-wrappl-sm-3pr-0">
                    <tt-call="website_event.events_search_box">
                        <tt-set="_searches"t-value="searches"/>
                        <tt-set="action"t-value="'/event/%s/track'%(slug(event))"/>
                        <tt-set="_placeholder"t-value="'Searchatalk...'"/>
                    </t>
                </div>
            </div>
        </div>
    </nav>
</template>

<!--Option:Topbar:optionaltagsfilters-->
<templateid="session_topbar_tag"
    inherit_id="website_event_track.session_topbar"
    name="FilterbyTags"
    active="True"
    customize_show="True">
    <xpathexpr="//ul[hasclass('o_wesession_topbar_filters')]"position="inside">
        <tt-foreach="tag_categories"t-as="tag_category">
            <lit-if="tag_category.tag_idsandany(tag.colorfortagintag_category.tag_ids)"class="nav-itemdropdownmr-2my-1">
                <ahref="#"role="button"class="btndropdown-toggle"data-toggle="dropdown">
                    <iclass="fafa-folder-open"/>
                    <tt-esc="tag_category.name"/>
                </a>
                <divclass="dropdown-menu">
                    <tt-foreach="tag_category.tag_ids"t-as="tag">
                        <at-att-href="'/event/%s/track?%s'%(
                                slug(event),
                                keep_query('*',tags=str((search_tags-tag).idsiftaginsearch_tagselse(tag|search_tags).ids))
                            )"
                            t-if="tag.color"
                            t-attf-class="dropdown-itemd-flexalign-items-centerjustify-content-between#{'active'iftaginsearch_tagselse''}">
                            <tt-esc="tag.name"/>
                        </a>
                    </t>
                </div>
            </li>
        </t>
    </xpath>
</template>

<!--Option:Tracksdisplay:optionalwishlist-->
<templateid="session_topbar_wishlist"
    inherit_id="website_event_track.session_topbar"
    name="AllowWishlists"
    active="True"
    customize_show="True">
    <xpathexpr="//ul[hasclass('o_wesession_topbar_filters')]"position="inside">
    </xpath>
</template>

<!--============================================================-->
<!--CONTENT:MAINTEMPLATES-->
<!--============================================================-->

<!--TracksMainDisplay-->
<templateid="tracks_main"name="Tracks:MainDisplay">
    <!--Notracks-->
    <tt-if="nottracks">
        <divclass="col-12">
            <divclass="h2mb-3">Notrackfound.</div>
            <divt-if="search_key"class="alertalert-infotext-center">
                <pclass="m-0">Wedidnotfindanytrackmatchingyour<strongt-esc="search_key"/>search.</p>
            </div>
            <divt-else=""class="alertalert-infotext-center"groups="event.group_event_manager">
                <pclass="m-0">Schedulesometrackstogetstarted!</p>
            </div>
        </div>
    </t>
    <!--Cards-->
    <divclass="col-12"t-call="website_event_track.tracks_display_cards"/>
    <!--List-->
    <divclass="col-12"t-call="website_event_track.tracks_display_list"/>
</template>

<!--Tracks:Cards-baseddisplay-->
<templateid="tracks_display_cards"name="Tracks:CardsDisplay">
    <divclass="rowmb-3"t-if="tracks_live">
        <divclass="col-12">
            <h5class="m-0text-danger">LiveNow</h5>
            <hrclass="mt-2pb-1mb-1"/>
        </div>
        <divt-foreach="tracks_live"t-as="track"class="col-md-6col-lg-3mb-4">
            <tt-call="website_event_track.tracks_cards_track"/>
        </div>
    </div>
    <divclass="rowmb-3"t-if="tracks_soon">
        <divclass="col-12">
            <h5class="m-0text-danger">Comingsoon...</h5>
            <hrclass="mt-2pb-1mb-1"/>
        </div>
        <divt-foreach="tracks_soon"t-as="track"class="col-md-6col-lg-3mb-4">
            <tt-call="website_event_track.tracks_cards_track"/>
        </div>
    </div>
</template>

<!--Tracks:List-baseddisplay-->
<templateid="tracks_display_list"name="Tracks:ListDisplay">
    <divt-if="tracks">
        <h1>Bookyourtalks</h1>
        <h4class="mb-5">Planyourexperiencebyaddingyourfavoritestalkstoyourwishlist</h4>
    </div>
    <divt-if="tracks"class="o_wesession_listmb-3">
        <ulclass="list-unstyled">
            <lit-foreach="tracks_by_day"t-as="tracks_info"
                class="mb-5">
                <tt-set="tracks_date"t-value="tracks_info['date']"/>
                <tt-set="tracks_header_name"t-value="tracks_info['name']"/>
                <tt-set="tracks"t-value="tracks_info['tracks']"/>
                <!--DAYHEADER-->
                <divclass="o_we_track_day_headerw-100">
                    <divt-if="tracks_date"class="d-flex">
                        <spanclass="h1m-0font-weight-bold"t-esc="tracks_date"
                            t-options="{'widget':'date','format':'EEEEdd'}"/>
                        <divclass="d-flexflex-columnml-2">
                            <spanclass="font-weight-bold"t-esc="tracks_date"
                                t-options="{'widget':'date','format':'MMMM'}"/>
                            <spanclass="font-weight-bold"t-esc="tracks_date"
                                t-options="{'widget':'date','format':'YYYY'}"/>
                        </div>
                    </div>
                    <divt-elif="tracks_header_name">
                        <spanclass="h1m-0font-weight-bold"
                            t-esc="tracks_header_name"/>
                    </div>
                    <hrclass="mt-2pb-1mb-1"/>
                </div>
                <!--DAYTRACKSLIST-->
                <divt-foreach="tracks"t-as="track"
                    t-att-class="'o_wesession_list_itempx-2py-2event_color_%d'%(track.color)">
                    <!--Sideinformationinafloatingdiv(desktoponly)-->
                    <divt-if="notevent.is_doneand(nottrack.dateortoday_tz&lt;=tracks_date)andoption_track_wishlist"
                        class="float-rightd-noned-md-blockml-2">
                        <tt-call="website_event_track.track_widget_reminder">
                            <tt-set="reminder_small"t-value="False"/>
                            <tt-set="reminder_light"t-value="False"/>
                        </t>
                    </div>
                    <divclass="rowno-gutters">
                        <!--Maincolumn:name,speaker-->
                        <divclass="col-md-7">
                            <!--Reminderwidget:directlyinlinetogainspace,mobileonly-->
                            <divt-if="notevent.is_doneand(nottrack.dateortoday_tz&lt;=tracks_date)andoption_track_wishlist"
                                class="float-rightd-blockd-md-noneml-2">
                                <tt-call="website_event_track.track_widget_reminder">
                                    <tt-set="reminder_small"t-value="True"/>
                                    <tt-set="reminder_light"t-value="False"/>
                                </t>
                            </div>
                            <spanclass="h5mb0">
                                <at-if="track.is_publishedoruser_event_manager"
                                    class="mr-2"
                                    t-att-href="track.website_url">
                                    <spant-field="track.name"/>
                                </a>
                                <tt-else="">
                                    <spanclass="mr-2"t-field="track.name"/>
                                </t>
                                <spant-if="nottrack.is_publishedanduser_event_manager"
                                    class="badgebadge-dangero_wevent_online_badge_unpublished">
                                    Unpublished
                                </span>
                            </span>
                            <divclass="text-mutedd-flexalign-items-center">
                                <spanclass="text-muted"t-esc="track.partner_name"/>
                                <tt-if="tracks_dateandtoday_tz&lt;=tracks_date">
                                    <!--Hour:Live>Remaining>Hour:mobileonly-->
                                    <divclass="d-blockd-md-none">
                                        <spant-if="track.partner_name"class="ml-2">&amp;bull;</span>
                                        <spant-if="track.is_track_liveandnottrack.is_track_done"
                                            class="badgebadge-dangerml-2">Live</span>
                                        <spant-elif="nottrack.is_track_doneandtrack.is_track_soon"
                                            class="ml-2">
                                            <spant-esc="track.track_start_remaining"
                                                t-options="{'widget':'duration','digital':False,'format':'narrow',
                                                            'add_direction':True,'unit':'second','round':'minute'}"/>
                                        </span>
                                        <spant-elif="nottrack.is_track_doneandnottrack.is_track_soon"
                                            class="ml-2"
                                            t-esc="track.date"
                                            t-options="{'widget':'datetime','time_only':True,'format':'short'}"/>
                                        <spant-else=""class="badgebadge-infoml-2">Finished</span>
                                    </div>
                                    <!--Duration(desktoponly)-->
                                    <tt-if="track.durationandnottrack.is_track_doneandnottrack.is_track_done">
                                        <spanclass="d-noned-md-blockml-2">&amp;bull;</span>
                                        <spanclass="d-noned-md-blockml-2"
                                            t-esc="track.duration"
                                            t-options="{'widget':'duration','digital':False,'format':'short','unit':'hour','round':'minute'}"/>
                                    </t>
                                </t>
                            </div>
                        </div>
                        <!--Asidecolumn:date,tags-->
                        <divclass="col-md-5">
                            <!--Hour:Live>Remaining>Hour:desktoponly-->
                            <divt-if="tracks_dateandtoday_tz&lt;=tracks_date"
                                class="d-noned-md-blockfloat-right">
                                <spant-if="track.is_track_liveandnottrack.is_track_done"
                                    class="badgebadge-dangerml-2">Live</span>
                                <spant-elif="nottrack.is_track_doneandtrack.is_track_soon"
                                    class="ml-2">
                                    <spant-esc="track.track_start_remaining"
                                        t-options="{'widget':'duration','digital':False,'format':'narrow',
                                                    'add_direction':True,'unit':'second','round':'minute'}"/>
                                </span>
                                <spant-elif="nottrack.is_track_doneandnottrack.is_track_soon"
                                    class="ml-2"
                                    t-esc="track.date"
                                    t-options="{'widget':'datetime','time_only':True,'format':'short'}"/>
                                <spant-else=""class="badgebadge-infoml-2">Finished</span>
                            </div>
                            <!--Tags:desktoponly-->
                            <divclass="d-noned-md-block">
                                <tt-foreach="track.tag_ids"t-as="tag">
                                    <tt-if="tag.color"t-call="website_event_track.track_tag_badge_link"/>
                                </t>
                            </div>
                        </div>
                    </div>
                </div>
            </li>
        </ul>
    </div>
</template>

<!--============================================================-->
<!--TOOLTEMPLATES-->
<!--============================================================-->

<templateid="tracks_cards_track"name="TrackCard">
    <at-att-href="'/event/%s/track/%s'%(slug(track.event_id),slug(track))"class="text-decoration-none">
        <articlet-att-class="'h-100cardborder-0shadow-smo_wesession_track_card%s'%('o_wesession_track_card_unpublished'ifnottrack.is_publishedelse'')"
            itemscope="itemscope"itemtype="http://schema.org/Event">
            <divclass="h-100rowno-gutters">
                <headerclass="overflow-hiddenbg-secondarycol-12rounded-top">
                    <smallt-if="nottrack.is_published"class="o_wesession_track_card_header_badgebg-danger">
                        <iclass="fafa-banmr-2"/>Unpublished
                    </small>

                    <divt-if="track.website_image_url"class="card-img-top"
                        t-attf-style="padding-top:50%;background-image:url(#{track.website_image_url});background-size:cover;background-position:center">
                        <spant-if="option_track_wishlistandnottrack.is_track_live"class="position-absoluteh3mt-2mr-2"style="right:0;top:0;">
                            <tt-call="website_event_track.track_widget_reminder">
                                <tt-set="reminder_light"t-value="True"/>
                                <tt-set="light_theme"t-value="True"/>
                            </t>
                        </span>
                    </div>
                    <divt-else=""class="o_wesession_gradientcard-img-topposition-relative"
                        style="padding-top:50%;">
                        <spant-if="option_track_wishlist"class="position-absoluteh3mt-2mr-2"style="right:0;top:0;">
                            <tt-call="website_event_track.track_widget_reminder">
                                <tt-set="reminder_light"t-value="True"/>
                            </t>
                        </span>
                        <iclass="fafa-glassfa-2xmx-2mb-3position-absolutetext-white-75"style="right:0;bottom:0;"/>
                    </div>
                </header>
                <divclass="col-12">
                    <mainclass="card-body">
                        <!--Title-->
                        <h5class="card-titlemt-0mb-0text-truncate">
                            <spant-field="track.name"itemprop="name"/>
                        </h5>
                        <!--Tags>-->
                        <div>
                            <tt-foreach="track.tag_ids"t-as="tag">
                                <tt-if="tag.color"t-call="website_event_track.track_tag_badge_info"/>
                            </t>
                        </div>
                    </main>
                </div>
                <!--Footer-->
                <footerclass="smallalign-self-endw-100card-footer">
                    <divclass="d-flexjustify-content-betweenalign-items-center">
                        <!--Speaker-->
                        <spanclass="text-mutedtext-truncate"t-field="track.partner_name"itemprop="performer"/>
                        <!--Starts-->
                        <spanclass="text-mutedml-auto">
                            <tt-if="track.is_track_upcoming&gt;0">In
                                <spanclass="text-mutedml-auto"t-field="track.track_start_remaining"itemprop="duration"
                                    t-options="{'widget':'duration','digital':False,'format':'short','unit':'second','round':'minute'}"/>
                            </t>
                            <tt-else="">
                                <spanclass="text-mutedml-auto"t-field="track.track_start_relative"itemprop="duration"
                                    t-options="{'widget':'duration','digital':False,'format':'short','unit':'second','round':'minute'}"/>
                                ago
                            </t>
                        </span>
                    </div>
                </footer>
            </div>
        </article>
    </a>
</template>

<!--Searchedtags-->
<templateid="tracks_search"name="Tracks:searchtags">
    <divclass="d-flexalign-items-centermb-3">
        <spant-if="search_wishlist"
            class="align-items-baselineborderd-inline-flexpl-2mt-3roundedml16mb-2bg-white">
            <iclass="fafa-bellmr-2text-muted"/>WishlistedTalks
            <at-att-href="'/event/%s/track?%s'%(slug(event),keep_query('*',search_wishlist=''))"
                class="btnborder-0py-1">
                &#215;
            </a>
        </span>

        <tt-foreach="search_tags"t-as="tag">
            <spanclass="align-items-baselineborderd-inline-flexpl-2mt-3roundedml16mb-2bg-white">
                <iclass="fafa-tagmr-2text-muted"/>
                <tt-esc="tag.display_name"/>
                <at-att-href="'/event/%s/track?%s'%(slug(event),keep_query('*',tags=str((search_tags-tag).ids)))"
                    class="btnborder-0py-1">
                    &#215;
                </a>
            </span>
        </t>
    </div>
</template>

<!--============================================================-->
<!--MISCTOOLS-->
<!--============================================================-->

<templateid="track_tag_badge_link"name="Track:TagBadgeLink">
    <at-if="search_tags"
        t-att-href="'/event/%s/track?%s'%(
            slug(event),
            keep_query('*',tags=str((search_tags-tag).idsiftaginsearch_tagselse(tag|search_tags).ids))
        )"
        t-att-class="'badge%s'%('badge-primary'iftaginsearch_tagselse'o_tag_color_hovered_0')"
        t-esc="tag.name"/>
    <at-else=""
        t-att-href="'/event/%s/track?%s'%(
            slug(event),
            keep_query('*',tags=str(tag.ids))
        )"
        t-att-class="'badgeo_tag_color_hovered_%s'%(tag.color)"
        t-esc="tag.name"/>
</template>

<templateid="track_tag_badge_info"name="Track:TagBadgeInfo">
    <spant-if="search_tags"
        t-att-class="'badge%s'%('badge-primary'iftaginsearch_tagselse'o_tag_color_0')"
        t-esc="tag.name"/>
    <spant-else=""
        t-att-class="'badgeo_tag_color_%s'%(tag.color)"
        t-esc="tag.name"/>
</template>

</flectra>
