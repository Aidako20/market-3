<?xmlversion="1.0"encoding="utf-8"?>
<flectra>

    <templateid="assets_frontend"inherit_id="website.assets_frontend"name="Comparisonassetsfrontend">
        <xpathexpr="."position="inside">
            <linkrel="stylesheet"type="text/scss"href="/website_sale_comparison/static/src/scss/website_sale_comparison.scss"/>
            <scripttype="text/javascript"src="/website_sale_comparison/static/src/js/website_sale_comparison.js"></script>
        </xpath>
    </template>

    <templateid="assets_tests"inherit_id="web.assets_tests"name="WebsiteSaleComparisonAssetsTests">
        <xpathexpr="."position="inside">
            <scripttype="text/javascript"src="/website_sale_comparison/static/tests/tours/website_sale_comparison.js"></script>
        </xpath>
    </template>

    <templateid="add_to_compare"inherit_id="website_sale.products_item"customize_show="True"name="ComparisonList"priority="22">
        <xpathexpr="//div[hasclass('o_wsale_product_btn')]"position="inside">
            <tt-set="product_variant_id"t-value="product._get_first_possible_variant_id()"/>
            <buttont-if="product_variant_id"type="button"role="button"class="d-noned-md-inline-blockbtnbtn-secondaryo_add_compare"title="Compare"aria-label="Compare"t-att-data-product-product-id="product_variant_id"data-action="o_comparelist"><spanclass="fafa-exchange"></span></button>
        </xpath>
    </template>

    <templateid="product_add_to_compare"name='Addtocomparisoninproductpage'inherit_id="website_sale.product"priority="8">
        <xpathexpr="//div[@id='product_option_block']"position="inside">
            <tt-if="is_view_active('website_sale_comparison.add_to_compare')">
                <tt-set="product_variant"t-value="product_variantorproduct._create_first_product_variant()"/>
                <buttont-if="product_variant"type="button"role="button"class="d-noned-md-inline-blockbtnbtn-linkmt16o_add_compare_dyn"aria-label="Compare"t-att-data-product-product-id="product_variant.id"data-action="o_comparelist"><spanclass="fafa-exchange"></span>Addtocompare</button>
            </t>
        </xpath>
    </template>

    <templateid="product_attributes_body"inherit_id="website_sale.product"customize_show="True"name="Productattributestable">
        <xpathexpr="//div[@id='product_attributes_simple']"position="replace"/>
        <xpathexpr="//div[@id='product_full_description']"position="after">
            <sectionclass="containerpt-5"id="product_full_spec">
                <tt-set="categories"t-value="product.valid_product_template_attribute_line_ids._prepare_categories_for_display()"/>
                <tt-if="categories">
                    <h3class="text-centermb32">Specificationsfor<tt-esc="product.name"/></h3>
                    <divclass="row">
                        <divclass='col-lg-8offset-lg-2'id='product_specifications'>
                            <tableclass='tabletable-stripedtable-smtable-hover'>
                                <tt-foreach="categories"t-as="category">
                                    <tt-if="len(categories)>1">
                                        <trclass="clickable"data-toggle="collapse"t-att-data-target="'.o_ws_category_%d'%category.id">
                                            <thclass="text-left"t-att-colspan="2">
                                                <spant-if="category"t-field="category.name"/>
                                                <spant-else="">Uncategorized</span>
                                            </th>
                                        </tr>
                                    </t>
                                    <trt-foreach="categories[category].filtered(lambdal:len(l.value_ids)>1)"t-as="ptal"t-att-class="'collapseshowo_ws_category_%d'%category.id">
                                        <td><spant-field="ptal.attribute_id.name"/></td>
                                        <td>
                                            <tt-foreach="ptal.value_ids"t-as="pav">
                                                <spant-field="pav.name"/><tt-if="notpav_last">or</t>
                                            </t>
                                        </td>
                                    </tr>
                                    <tt-set="single_value_attributes"t-value="categories[category]._prepare_single_value_for_display()"/>
                                    <trt-foreach="single_value_attributes"t-as="attribute"t-att-class="'collapseshowo_ws_category_%d'%category.id">
                                        <td><spant-field="attribute.name"/></td>
                                        <td>
                                            <tt-foreach="single_value_attributes[attribute]"t-as="ptal">
                                                <spant-field="ptal.product_template_value_ids._only_active().name"/><tt-if="notptal_last">,</t>
                                            </t>
                                        </td>
                                    </tr>
                                </t>
                            </table>
                        </div>
                    </div>
                </t>
            </section>
        </xpath>
    </template>

    <templateid='recommended_product'inherit_id="website_sale.recommended_products"name="AlternativeProducts">
        <xpathexpr="//h3"position="replace">
            <!--
                Createthefirstvariantifitdoesn'texistforthecurrent
                productandeveryalternativeproductbecausetheproduct
                comparatorneedthevariantsandnotthetemplates.
            -->
            <tt-set="product_variant"t-value="product_variantorproduct._create_first_product_variant()"/>
            <tt-set="id_list"t-value="[product_variant.id]ifproduct_variantelse[]"/>
            <tt-foreach="product.alternative_product_ids"t-as="alt_product">
                <tt-set="alt_product_variant_id"t-value="alt_product._create_first_product_variant().id"/>
                <tt-if="alt_product_variant_id"t-set="id_list"t-value="id_list+[alt_product_variant_id]"/>
            </t>
            <tt-set="ids"t-value="','.join([str(id)foridinid_list])"/>
            <div><spanclass='h3'>Suggestedalternatives:</span><at-if="len(id_list)>1andis_view_active('website_sale_comparison.add_to_compare')"role="button"class="btnbtn-primary"t-attf-href="/shop/compare/?products=#{ids}"><iclass="fafa-exchange"></i>Compare</a></div>
        </xpath>
    </template>

    <templateid="product_compare"name="ComparatorPage">
        <tt-call="website.layout">
            <tt-set="additional_title">ShopComparator</t>
            <divid="wrap"class="js_sale">
                <divclass="oe_structureoe_empty"id="oe_structure_website_sale_comparison_product_compare_1"/>
                <divclass="containeroe_website_salept-3">
                    <sectionclass="container">
                        <h3>CompareProducts</h3>
                        <tableclass="tabletable-borderedtable-hovertext-centermt16table-comparator"id="o_comparelist_table">
                            <tt-set="categories"t-value="products._prepare_categories_for_display()"/>
                            <thead>
                                <tr>
                                    <tdt-if="len(categories)"class='o_ws_compare_imagetd-top-leftborder-bottom-0'/>
                                    <tdt-foreach="products"t-as="product"class="o_ws_compare_imageposition-relativeborder-bottom-0">
                                        <ahref="#"t-att-data-product_product_id="product.id"class="o_comparelist_remove"t-if="len(products)&gt;2">
                                            <strong>x</strong>
                                        </a>
                                        <at-att-href="product.website_url">
                                            <imgt-attf-src="/web/image/product.product/#{product.id}/image_256"class="imgimg-fluid"style="margin:auto;"alt="Productimage"/>
                                        </a>
                                    </td>
                                </tr>
                                <tr>
                                    <tdt-if="len(categories)"class='td-top-leftborder-top-0'/>
                                    <tdt-foreach="products"t-as="product"class="border-top-0">
                                        <tt-set="combination_info"t-value="product._get_combination_info_variant()"/>
                                        <divclass='product_summary'>
                                            <aclass="o_product_comparison_table"t-att-href="product.website_url">
                                                <spant-esc="combination_info['display_name']"></span><br/>
                                            </a>

                                            <span>
                                                <strong>Price:</strong>
                                                <delt-attf-class="text-dangermr8{{''ifcombination_info['has_discounted_price']else'd-none'}}"style="white-space:nowrap;"t-esc="combination_info['list_price']"t-options="{'widget':'monetary','display_currency':website.currency_id}"/>
                                                <spant-esc="combination_info['price']"t-options="{'widget':'monetary','display_currency':website.currency_id}"></span>
                                            </span>

                                            <formaction="/shop/cart/update"method="post"class="text-center">
                                            <inputtype="hidden"name="csrf_token"t-att-value="request.csrf_token()"/>
                                                <inputname="product_id"t-att-value="product.id"type="hidden"/>
                                                <arole="button"class="btnbtn-primarybtn-blocka-submit"href="#"><iclass="fafa-shopping-cart"></i>&amp;nbsp;AddtoCart</a>
                                            </form>
                                        </div>
                                    </td>
                                </tr>
                            </thead>
                            <tbody>
                                <tt-foreach="categories"t-as="category">
                                    <tt-if="len(categories)&gt;1">
                                        <trclass="clickable"data-toggle="collapse"t-att-data-target="'.o_ws_category_%d'%category.id">
                                            <thclass="text-left"t-att-colspan="len(products)+1"><iclass="fafa-chevron-circle-downo_product_comparison_collpase"role="img"aria-label="Collapse"title="Collapse"></i><spant-if="category"t-field="category.name"/><spant-else="">Uncategorized</span></th>
                                        </tr>
                                    </t>
                                    <trt-foreach="categories[category]"t-as="attribute"t-att-class="'collapseshowo_ws_category_%d'%category.id">
                                        <td><spant-field="attribute.name"/></td>
                                        <tdt-foreach="categories[category][attribute]"t-as="product">
                                            <tt-foreach="categories[category][attribute][product]"t-as="ptav">
                                                <spant-field="ptav.name"/><tt-if="notptav_last">,</t>
                                            </t>
                                        </td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                    </section>
                </div>
                <divclass="oe_structure"id="oe_structure_website_sale_comparison_product_compare_2"/>
            </div>
        </t>
    </template>

    <templateid="product_product"name="Comparator-Productrowincomparatorpopover">
        <tt-set="combination_info"t-value="product._get_combination_info_variant()"/>
        <divclass="rowno-guttersalign-items-centermy-1o_product_row"t-att-data-category_ids="product.public_categ_ids.ids">
            <divclass="col-3text-center">
                <imgclass="imgo_image_64_max"t-att-src="website.image_url(product,'image_128')"alt="Productimage"/>
            </div>
            <divclass="col-8pl-2">
                <h6>
                    <at-att-href="product.website_url"><tt-esc="combination_info['display_name']"/></a><br/>
                    <delt-attf-class="text-dangermr8{{''ifcombination_info['has_discounted_price']else'd-none'}}"style="white-space:nowrap;"t-esc="combination_info['list_price']"t-options="{'widget':'monetary','display_currency':website.currency_id}"/>
                    <spant-esc="combination_info['price']"t-options="{'widget':'monetary','display_currency':website.currency_id}"></span>
                </h6>
            </div>
            <divclass="col-1text-right">
                <ahref='#'class="o_remove"title="Remove"t-att-data-product_product_id="product.id">
                    <iclass="fafa-trash"role="img"aria-label="Remove"></i>
                </a>
            </div>
        </div>
    </template>

</flectra>
