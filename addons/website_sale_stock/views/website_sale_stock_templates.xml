<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <templateid="assets_frontend"inherit_id="website.assets_frontend"name="WebsiteSaleStock">
        <xpathexpr="."position="inside">
            <scripttype="text/javascript"src="/website_sale_stock/static/src/js/variant_mixin.js"/>
        </xpath>
    </template>

    <!--ShoppingCartLines-->
    <templateid="website_sale_stock_cart_lines"inherit_id="website_sale.cart_lines"name="ShoppingCartLines">
        <xpathexpr="//input[@type='text'][hasclass('quantity')]"position="attributes">
          <attributename='t-att-data-max'>(line.product_uom_qty+(line.product_id.virtual_available-line.product_id.cart_qty))ifline.product_id.type=='product'andline.product_id.inventory_availabilityin['always','threshold']elseNone</attribute>
        </xpath>
        <xpathexpr="//div[hasclass('css_quantity')]//i[hasclass('fa-plus')]/.."position="replace">
          <tt-if="line._get_stock_warning(clear=False)">
            <divclass="input-group-append">
                <at-attf-href="#"class="btnbtn-link">
                  <iclass='fafa-warningtext-warning't-att-title="line._get_stock_warning()"role="img"aria-label="Warning"/>
                </a>
            </div>
          </t>
          <tt-else="1">
            <t>$0</t>
          </t>
        </xpath>
        <xpathexpr="//div[hasclass('css_quantity')]"position="after">
            <divclass='availability_messages'/>
        </xpath>
        <xpathexpr="//div[hasclass('js_cart_lines')]"position="after">
          <tt-if='website_sale_order'>
            <divt-if='website_sale_order._get_stock_warning(clear=False)'class="alertalert-warning"role="alert">
              <strong>Warning!</strong><tt-esc='website_sale_order._get_stock_warning()'/>
            </div>
          </t>
        </xpath>
    </template>

  <templateid="website_sale_stock_product"inherit_id="website_sale.product"priority="4">
    <xpathexpr="//a[@id='add_to_cart']"position="after">
      <divclass="availability_messageso_not_editable"/>
    </xpath>
  </template>

  <templateid="website_sale_stock_payment"inherit_id="website_sale.cart_summary">
     <xpathexpr="//table[@id='cart_products']//td[hasclass('td-qty')]"position="inside">
      <tt-if='line._get_stock_warning(clear=False)'>
        <iclass='fafa-warningtext-warning't-att-title="line._get_stock_warning()"role="img"aria-label="Warning"/>
      </t>
    </xpath>
    <xpathexpr="//table[@id='cart_products']"position="after">
        <tt-if='website_sale_order'>
          <tt-set='warning't-value='website_sale_order._get_stock_warning(clear=False)'/>
          <divt-if='warning'class="alertalert-warning"role="alert">
            <strong>Warning!</strong><tt-esc='website_sale_order._get_stock_warning()'/>
          </div>
        </t>
    </xpath>
  </template>

</flectra>
