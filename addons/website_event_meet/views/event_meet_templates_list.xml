<?xmlversion="1.0"encoding="utf-8"?>
<flectra>

<templateid="event_meet"name="MeetingRooms">
    <tt-call="website_event.layout">
        <divclass="o_wevent_onlineo_wevent_online_bgo_wemeet_index">
            <!--Drag/DropArea-->
            <divid="oe_structure_website_event_location_1"class="oe_structure"/>
            <!--Content-->
            <divclass="o_wemeet_containercontainer">
                <divclass="rowmb-5mx-0">
                    <tt-call="website_event_meet.community_main"/>
                    <tt-call="website_event_meet.community_aside"/>
                </div>
            </div>
            <!--Drag/DropArea-->
            <divid="oe_structure_website_event_location_2"class="oe_structuremb-5"/>
        </div>
    </t>
</template>

<!--============================================================-->
<!--CONTENT:MAINTEMPLATES-->
<!--============================================================-->

<!--MeetingRoomsMainDisplay-->
<templateid="community_main"name="MeetingRooms:MainDisplay">
    <divclass="col-12col-md-8pl-0pr-0pr-md-3mt-3">
        <h2class="d-flexflex-rowjustify-content-between">
            <span>Joinaroom</span>
            <divclass="dropdown">
                <aclass="dropdown-toggleo-no-caretbtnp-0"title="LanguagesMenu"
                    aria-label="Dropdownmenu"data-display="static"data-toggle="dropdown"href="#"role="button">
                    <spant-esc="current_lang.nameifcurrent_langelse'AllLanguages'"/>▼</a>
                <divclass="dropdown-menu"role="menu">
                    <aclass="dropdown-item"role="menuitem"t-attf-href="/event/#{slug(event)}/community">AllLanguages
                       </a>
                    <aclass="dropdown-item"role="menuitem"t-as="language"t-attf-href="/event/#{slug(event)}/community?lang=#{language.id}"t-esc="language.name"t-foreach="available_languages"/>
                </div>
            </div>
        </h2>
        <hrclass="mt-2mb-3"/>
        <pclass="mt-">Chooseatopicthatinterestsyouandstarttalkingwiththecommunity.<br/>Don'tforgettosetupyourcameraandmicrophone.</p>
        <divclass="d-flexflex-columnjustify-content-startalign-items-start">
            <tt-as="meeting_room"t-call="website_event_meet.meeting_room_card"t-foreach="meeting_rooms">
                <tt-set="meeting_room"t-value="meeting_room"/>
                <tt-set="opened"t-value="int(meeting_room.id==open_room_id)"/>
            </t>
            <divt-if="notmeeting_rooms"class="m-autotext-centertext-muted">
                <h3class="mt8">NoRoomOpen</h3>
                <p>Createonetogetconversationsgoing</p>
            </div>
        </div>
    </div>
</template>

<templateid="meeting_room_card"name="MeetingRoomCard">
    <divclass="modalo_join_later_modal"t-attf-id="o_join_later_modal_#{meeting_room.id}"tabindex="-1"role="dialog"style="height:400px;top:calc(50%-200px);">
        <divclass="modal-dialog"role="document">
            <divclass="modal-content">
                <divclass="mt-4col-12alertalert-warningtext-center"role="alert">
                    <navclass="navbarnavbar-default">
                        <divclass="container-fluid">
                            <divclass="navbar-header">
                                <divclass="o_wevent_meeting_room_card_menu"></div>
                            </div>
                        </div>
                    </nav>
                    <buttontype="button"class="close"data-dismiss="modal"aria-label="Close">×</button>
                    <tt-if="notevent.is_done">
                        <span>Thisroomisnotopenrightnow!</span><br/>
                        Joinushereonthe
                        <strongitemprop="startDate"t-field="event.with_context(tz=event.date_tz).date_begin"t-options="{'format':'medium'}"/>
                        tohaveachatwithus!
                    </t>
                    <tt-else="">
                        Event<spant-esc="event.name"class="font-weight-bold"/>isover.
                        <br/>
                        <span>Joinusnexttimetochatabout<bt-esc="meeting_room.name"/>!</span>
                    </t>
                </div>

                <divclass="modal-bodyrow">
                    <divclass="col-3">
                        <divclass="w-100"t-attf-style="background-image:#{json.loads(event.cover_properties).get('background-image')};min-height:5rem;background-size:cover;"/>
                    </div>
                    <divclass="col">
                        <h5t-esc="meeting_room.name"/>
                        <divclass="text-mutedmb-2"><iclass="fafa-globe"/><spant-esc="meeting_room.room_lang_id.name"/></div>
                        <spant-if="meeting_room.summary"t-raw="meeting_room.summary"/>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--Actiontodowhenclickingonthecard-->
    <tt-if="event.is_ongoingoris_event_manager">
        <!--Duringtheeventorifeventmanager-->
        <tt-set="meeting_room_href"t-value="'/event/'+slug(event)+'/meeting_room/'+slug(meeting_room)"/>
    </t>
    <tt-elif="notevent.is_ongoingandnotevent.is_participating">
        <!--Pre-event,ifnotregisteredyet-->
        <tt-set="meeting_room_href"t-value="'/event/'+slug(event)+'/register?from_room_id=%i'%meeting_room.id"/>
    </t>
    <tt-else="">
        <!--Pre-event,ifregisteredbuteventnotstaredyet-->
        <tt-set="meeting_room_href"t-value="'#'"/>
        <tt-set="meeting_room_data_toggle"t-value="'modal'"/>
        <tt-set="meeting_room_data_target"t-value="'#o_join_later_modal_%i'%meeting_room.id"/>
    </t>

    <at-if="is_event_managerornotmeeting_room.room_is_full"
        t-att-data-meeting-room-id="meeting_room.id"
        t-att-data-open-room="opened"
        t-att-data-is-event-manager="int(is_event_manager)"
        t-attf-class="cardo_wevent_meeting_room_cardw-100my-2bg-lightd-blocktext-decoration-none"
        t-att-href="meeting_room_href"
        t-att-data-toggle="meeting_room_data_toggle"
        t-att-data-target="meeting_room_data_target">
        <divclass="text-decoration-nonew-100h-100p-3">
            <divclass="o_wevent_meeting_room_corner_ribbon"t-if="meeting_room.room_is_full">Full</div>
            <divclass="d-flexflex-column">
                <divclass="d-flexflex-rowjustify-content-between">
                    <h4class="text-breakmw-75text-uppercase"t-esc="meeting_room.name"/>
                    <divt-if="is_event_manager"class="w-25">
                        <divclass="dropdownfloat-rightdropleft">
                            <buttonclass="btnpy-0"data-toggle="dropdown"><h3class="m-0">&#8942;</h3></button>
                            <divclass="dropdown-menu">
                                <divclass="dropdown-itemfont-weight-bolddisabled">RoomManager</div>
                                <buttonclass="dropdown-itembtnbtn-dangero_wevent_meeting_room_duplicate"type="button">Duplicate</button>
                                <buttonclass="dropdown-itembtnbtn-dangero_wevent_meeting_room_delete"type="button">Close</button>
                            </div>
                        </div>
                        <buttont-attf-class="o_wevent_meeting_room_is_pinnedfloat-rightbtn#{'o_wevent_meeting_room_pinned'ifmeeting_room.is_pinnedelse''}">
                            <iclass="fafa-thumb-tack"/>
                        </button>
                    </div>
                </div>
                <spanclass="text-muted"t-field="meeting_room.summary"/>
                <divclass="d-flexflex-rowjustify-content-betweenalign-items-center">
                    <spanclass="h6m-0row">
                        <spant-esc="meeting_room.room_participant_count"/>&amp;nbsp;
                        <spant-if="meeting_room.target_audience"class="text-uppercase"t-field="meeting_room.target_audience"/>
                        <spant-else=""class="text-uppercase">participant(s)</span>
                    </span>
                    <divclass="d-inlineborderpy-1px-2bg-secondary"t-esc="meeting_room.room_lang_id.name"/>
                </div>
            </div>
        </div>
    </a>
</template>

<!--============================================================-->
<!--ASIDE:CREATEAROOM-->
<!--============================================================-->

<templateid="community_aside"name="Community:Aside">
    <divclass="col-md-4p-0mt-3o_wevent_community_aside">
        <divclass="d-noned-md-blockmb-3"t-if="event.meeting_room_allow_creation">
            <h2>Startatopic</h2>
            <hrclass="mt-2mb-3"/>
            <p>Wanttocreateyourowndiscussionroom?</p>
            <ahref="#"role="button"
                class="btnbtn-primaryo_wevent_create_room_button"
                t-if="event.is_ongoingorevent.start_todayoris_event_manager"
                t-att-data-event-id="event.id"
                t-att-data-default-lang-code="default_lang_code">
                <span>CreateaRoom</span>
            </a>
            <divt-else=""class="d-flexflex-column">
                <buttondisabled="disabled"class="btnbtn-primaryalign-self-start">CreateaRoom</button>
                Roomcreationwillbeavailablewheneventstartsat
                <spanclass="font-weight-bold"t-field="event.with_context(tz=event.date_tz).date_begin"t-options="{'format':'medium'}"/>
            </div>
        </div>
    </div>
</template>

</flectra>
