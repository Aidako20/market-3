<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <data>

        <!--Inheritthepreferenceviewtoremovetitle,imageandfooter-->
        <!--Thisviewismeanttobeincludedintheemployeeprofileview-->
        <!--Itensuresthatifthe'normal'Preferencesviewischanged,it's
            alsoreflectedintheemployee'sprofile-->
        <recordid="res_users_view_form_simple_modif"model="ir.ui.view">
            <fieldname="name">res.users.preferences.form.simplified.inherit</field>
            <fieldname="model">res.users</field>
            <fieldname="inherit_id"ref="base.view_users_form_simple_modif"/>
            <fieldname="mode">primary</field>
            <fieldname="arch"type="xml">
                <xpathexpr="//footer[not(ancestor::field)]"position="attributes">
                    <attributename="invisible">1</attribute>
                </xpath>
                <h1position="replace"/>
                <xpathexpr="//field[@name='image_1920']"position="replace"/>
                <xpathexpr="//field[@name='company_id']"position="attributes">
                    <attributename="invisible">1</attribute>
                </xpath>
            </field>
        </record>

        <recordid="view_users_form_simple_modif_resource"model="ir.ui.view">
            <fieldname="name">res.users.preferences.form.resource</field>
            <fieldname="model">res.users</field>
            <fieldname="inherit_id"ref="base.view_users_form_simple_modif"/>
            <fieldname="arch"type="xml">
                <fieldname="tz"position="attributes">
                    <attributename="required">1</attribute>
                </field>
            </field>
        </record>

        <recordid="res_users_view_form_profile"model="ir.ui.view">
            <fieldname="name">res.users.preferences.form.inherit</field>
            <fieldname="model">res.users</field>
            <fieldname="inherit_id"ref="res_users_view_form_simple_modif"/>
            <fieldname="arch"type="xml">
                <formposition="attributes">
                    <attributename="create">false</attribute>
                    <attributename="delete">false</attribute>
                    <attributename="js_class">hr_employee_profile_form</attribute>
                </form>
                <notebookposition="replace">
                        <fieldname="hr_presence_state"invisible="1"/>
                        <header>
                        </header>
                        <sheet>$0</sheet>
                </notebook>
                <notebookposition="before">
                    <divclass="oe_button_box"name="button_box">
                        <button
                            id="hr_presence_button"
                            class="oe_stat_button"
                            disabled="1"
                            invisible="context.get('from_my_profile',False)"
                            attrs="{'invisible':[('hr_presence_state','=','absent')]}">
                            <divrole="img"class="fafa-fwfa-circletext-successo_button_icon"attrs="{'invisible':[('hr_presence_state','!=','present')]}"aria-label="Available"title="Available"/>
                            <divrole="img"class="fafa-fwfa-circletext-warningo_button_icon"attrs="{'invisible':[('hr_presence_state','!=','to_define')]}"aria-label="Away"title="Away"/>
                            <divrole="img"class="fafa-fwfa-circletext-dangero_button_icon"attrs="{'invisible':[('hr_presence_state','!=','absent')]}"aria-label="Notavailable"title="Notavailable"/>

                            <divclass="o_stat_info"attrs="{'invisible':[('hr_presence_state','=','present')]}">
                                <spanclass="o_stat_text">
                                    NotConnected
                                </span>
                            </div>
                            <divclass="o_stat_info"attrs="{'invisible':[('hr_presence_state','!=','present')]}">
                                <spanclass="o_stat_value"attrs="{'invisible':[('last_activity_time','=',False)]}">
                                    <fieldname="last_activity_time"/>
                                </span>
                                <spanclass="o_stat_value"attrs="{'invisible':[('last_activity_time','!=',False)]}">
                                    <fieldname="last_activity"/>
                                </span>
                                <spanclass="o_stat_text">ConnectedSince</span>
                            </div>
                        </button>
                    </div>
                    <fieldname="image_1920"widget='image'class="oe_avatar"options='{"zoom":true,"preview_image":"image_128"}'/>
                    <divclass="oe_title">
                        <h1>
                            <fieldname="name"placeholder="Employee'sName"required="True"readonly="context.get('from_my_profile',False)"/>
                        </h1>
                    </div>
                    <divclass="row">
                        <h2class="col-6">
                            <fieldname="job_title"placeholder="JobPosition"attrs="{'readonly':[('can_edit','=',False)]}"/>
                        </h2>
                    </div>
                    <group>
                        <group>
                            <fieldname="can_edit"invisible="1"/>
                            <fieldname="mobile_phone"widget="phone"attrs="{'readonly':[('can_edit','=',False)]}"options="{'enable_sms':false}"/>
                            <fieldname="work_phone"widget="phone"attrs="{'readonly':[('can_edit','=',False)]}"options="{'enable_sms':false}"/>
                        </group>
                        <group>
                            <fieldname="work_email"widget="email"attrs="{'readonly':[('can_edit','=',False)]}"/>
                            <fieldname="work_location"attrs="{'readonly':[('can_edit','=',False)]}"/>
                            <fieldname="company_id"invisible="1"/>
                        </group>
                        <group>
                            <fieldname="employee_parent_id"attrs="{'readonly':[('can_edit','=',False)]}"/>
                            <fieldname="coach_id"attrs="{'readonly':[('can_edit','=',False)]}"/>
                        </group>
                    </group>
                </notebook>
                <notebookposition="inside">
                    <pagename="public"string="WorkInformation">
                        <divid="o_work_employee_container"><!--Thesetwodivareusedtopositionorg_chart-->
                            <divid="o_work_employee_main">
                                <groupstring="Location">
                                    <fieldname="department_id"attrs="{'readonly':[('can_edit','=',False)]}"/>
                                    <fieldname="address_id"
                                        context="{'show_address':1}"
                                        options='{"always_reload":True,"highlight_first_line":True}'
                                        attrs="{'readonly':[('can_edit','=',False)]}"/>
                                </group>
                                <groupname="managers"string="Approvers"class="hide-group-if-empty">
                                    <!--overriddeninothermodules-->
                                </group>
                            </div>
                        </div>
                    </page>
                    <pagename="personal_information"string="PrivateInformation">
                        <group>
                            <groupstring="ContactInformation">
                                <fieldname="employee_ids"invisible="1"/>
                                <fieldname="address_home_id"
                                    context="{
                                        'show_address':1,
                                        'default_employee_ids':employee_ids,
                                        'default_type':'private',
                                        'form_view_ref':'base.res_partner_view_form_private'}"
                                    options='{"always_reload":True,"highlight_first_line":True}'
                                    attrs="{'readonly':[('can_edit','=',False)]}"/>
                                <fieldname="private_email"string="Email"attrs="{'readonly':[('can_edit','=',False)],'invisible':[('address_home_id','=',False)]}"/>
                                <fieldname="employee_phone"string="Phone"class="o_force_ltr"attrs="{'readonly':[('can_edit','=',False)],'invisible':[('address_home_id','=',False)]}"options="{'enable_sms':false}"/>
                                <fieldname="employee_bank_account_id"attrs="{'readonly':[('can_edit','=',False)]}"/>
                                <fieldname="km_home_work"attrs="{'readonly':[('can_edit','=',False)]}"/>
                            </group>
                            <groupstring="Citizenship">
                                <fieldname="employee_country_id"options='{"no_open":True,"no_create":True}'attrs="{'readonly':[('can_edit','=',False)]}"/>
                                <fieldname="identification_id"attrs="{'readonly':[('can_edit','=',False)]}"/>
                                <fieldname="passport_id"attrs="{'readonly':[('can_edit','=',False)]}"/>
                                <fieldname="gender"attrs="{'readonly':[('can_edit','=',False)]}"/>
                                <fieldname="birthday"attrs="{'readonly':[('can_edit','=',False)]}"/>
                                <fieldname="place_of_birth"attrs="{'readonly':[('can_edit','=',False)]}"/>
                                <fieldname="country_of_birth"attrs="{'readonly':[('can_edit','=',False)]}"/>
                            </group>
                            <groupstring="MaritalStatus">
                                <fieldname="marital"attrs="{'readonly':[('can_edit','=',False)]}"/>
                                <fieldname="spouse_complete_name"attrs="{'invisible':[('marital','notin',['married','cohabitant'])],'readonly':[('can_edit','=',False)]}"/>
                                <fieldname="spouse_birthdate"attrs="{'invisible':[('marital','notin',['married','cohabitant'])],'readonly':[('can_edit','=',False)]}"/>
                            </group>
                            <groupstring="Education">
                                <fieldname="certificate"attrs="{'readonly':[('can_edit','=',False)]}"/>
                                <fieldname="study_field"attrs="{'readonly':[('can_edit','=',False)]}"/>
                                <fieldname="study_school"attrs="{'readonly':[('can_edit','=',False)]}"/>
                            </group>
                            <groupstring="Dependant">
                                <fieldname="children"attrs="{'readonly':[('can_edit','=',False)]}"/>
                            </group>
                            <groupstring="Emergency">
                                <fieldname="emergency_contact"attrs="{'readonly':[('can_edit','=',False)]}"/>
                                <fieldname="emergency_phone"widget="phone"attrs="{'readonly':[('can_edit','=',False)]}"options="{'enable_sms':false}"/>
                            </group>
                            <groupstring="WorkPermit"name="work_permit">
                                <fieldname="visa_no"attrs="{'readonly':[('can_edit','=',False)]}"/>
                                <fieldname="permit_no"attrs="{'readonly':[('can_edit','=',False)]}"/>
                                <fieldname="visa_expire"attrs="{'readonly':[('can_edit','=',False)]}"/>
                            </group>
                        </group>
                    </page>
                     <pagename="hr_settings"string="HRSettings">
                        <group>
                            <groupstring='Status'name="active_group"invisible="1"></group>
                            <groupstring="Attendance"name="identification_group">
                                <fieldname="pin"attrs="{'readonly':[('can_edit','=',False)]}"/>
                                <fieldname="barcode"attrs="{'readonly':[('can_edit','=',False)]}"/>
                            </group>
                        </group>
                    </page>
                </notebook>
            </field>
        </record>

        <recordid="res_users_action_my"model="ir.actions.act_window">
            <fieldname="name">ChangemyPreferences</field>
            <fieldname="res_model">res.users</field>
            <fieldname="view_mode">form</field>
            <fieldname="context">{'from_my_profile':True}</field>
            <fieldname="view_id"ref="hr.res_users_view_form_profile"/>
        </record>

        <recordid="hr_employee_action_from_user"model="ir.actions.act_window">
            <fieldname="name">Employees</field>
            <fieldname="res_model">hr.employee</field>
            <fieldname="view_mode">kanban,tree,form</field>
            <fieldname="domain">[('user_id','=',active_id)]</field>
        </record>

        <recordid="res_users_view_form"model="ir.ui.view">
            <fieldname="name">res.users.form.inherit</field>
            <fieldname="model">res.users</field>
            <fieldname="inherit_id"ref="base.view_users_form"/>
            <fieldname="arch"type="xml">

                <xpathexpr="//header"position="inside">
                    <fieldname="share"invisible="1"/>
                    <fieldname="employee_ids"invisible="1"/>
                    <fieldname="employee_id"invisible="1"/>
                    <buttonstring="Createemployee"
                            type="object"name="action_create_employee"
                            attrs="{'invisible':['|','|',('id','=',False),('share','=',True),('employee_id','!=',False)]}"/>
                            <!--shareisnotcorrectlyrecomputedbecauseitdependsonfieldsofreifiedview=>invisiblebeforesaving(id=False)-->
                </xpath>
                <xpathexpr="//div[@name='button_box']"position="inside">
                    <buttonname="%(hr_employee_action_from_user)d"
                        class="oe_stat_button"
                        icon="fa-users"
                        attrs="{'invisible':[('employee_count','=',0)]}"
                        context="{'active_test':False}"
                        type="action">
                        <fieldname="employee_count"widget="statinfo"string="Employee(s)"/>
                    </button>
                </xpath>
            </field>
        </record>
    </data>
</flectra>
