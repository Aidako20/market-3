<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <data>
        <!--ProductTemplate-->
        <recordid="view_mrp_product_template_form_inherited"model="ir.ui.view">
            <fieldname="name">product.form.mrp.inherited</field>
            <fieldname="model">product.template</field>
            <fieldname="inherit_id"ref="stock.view_template_property_form"/>
            <fieldname="arch"type="xml">
                <xpathexpr="//label[@for='sale_delay']"position="before">
                    <labelfor="produce_delay"attrs="{'invisible':[('type','=','service')]}"/>
                    <divattrs="{'invisible':[('type','=','service')]}">
                        <fieldname="produce_delay"class="oe_inline"/>days
                    </div>
                </xpath>
            </field>
        </record>

        <recordid="mrp_product_template_search_view"model="ir.ui.view">
            <fieldname="name">mrp.product.template.search</field>
            <fieldname="model">product.template</field>
            <fieldname="mode">primary</field>
            <fieldname="inherit_id"ref="product.product_template_search_view"/>
            <fieldname="arch"type="xml">
                <xpathexpr="//filter[@name='consumable']"position="after">
                    <separator/>
                    <filterstring="ManufacturedProducts"name="manufactured_products"domain="[('bom_ids','!=',False)]"/>
                    <filterstring="BoMComponents"name="components"domain="[('bom_line_ids','!=',False)]"/>
                </xpath>
            </field>
        </record>

        <recordid="mrp_product_product_search_view"model="ir.ui.view">
            <fieldname="name">mrp.product.product.search</field>
            <fieldname="model">product.product</field>
            <fieldname="mode">primary</field>
            <fieldname="inherit_id"ref="product.product_search_form_view"/>
            <fieldname="arch"type="xml">
                <xpathexpr="//filter[@name='consumable']"position="after">
                    <separator/>
                    <filterstring="ManufacturedProducts"name="manufactured_products"domain="[('bom_ids','!=',False)]"/>
                    <filterstring="BoMComponents"name="components"domain="[('bom_line_ids','!=',False)]"/>
                </xpath>
            </field>
        </record>

        <recordid="product_template_action"model="ir.actions.act_window">
            <fieldname="name">Products</field>
            <fieldname="res_model">product.template</field>
            <fieldname="search_view_id"ref="mrp_product_template_search_view"/>
            <fieldname="view_mode">kanban,tree,form</field>
            <fieldname="context">{"search_default_consumable":1,'default_type':'product'}</field>
            <fieldname="help"type="html">
              <pclass="o_view_nocontent_smiling_face">
                Noproductfound.Let'screateone!
              </p><p>
                Definethecomponentsandfinishedproductsyouwishtousein
                billofmaterialsandmanufacturingorders.
              </p>
            </field>
        </record>

        <menuitemid="menu_mrp_product_form"
            name="Products"
            action="product_template_action"
            parent="menu_mrp_bom"sequence="1"/>

        <recordid="mrp_product_variant_action"model="ir.actions.act_window">
            <fieldname="name">ProductVariants</field>
            <fieldname="res_model">product.product</field>
            <fieldname="search_view_id"ref="mrp_product_product_search_view"/>
            <fieldname="view_mode">kanban,tree,form</field>
        </record>

        <menuitemid="product_variant_mrp"name="ProductVariants"
            action="mrp_product_variant_action"
            parent="menu_mrp_bom"groups="product.group_product_variant"sequence="2"/>


        <recordid="product_template_form_view_bom_button"model="ir.ui.view">
            <fieldname="name">product.template.procurement</field>
            <fieldname="model">product.template</field>
            <fieldname="inherit_id"ref="stock.product_template_form_view_procurement_button"/>
            <fieldname="groups_id"eval="[(4,ref('mrp.group_mrp_user'))]"/>
            <fieldname="arch"type="xml">
                <xpathexpr="//button[@name='action_open_product_lot']"position="after">
                    <buttonclass="oe_stat_button"name="%(template_open_bom)d"type="action"
                        attrs="{'invisible':[('type','notin',['product','consu'])]}"icon="fa-flask">
                        <fieldstring="BillofMaterials"name="bom_count"widget="statinfo"/>
                    </button>
                    <buttonclass="oe_stat_button"name="action_used_in_bom"type="object"
                        attrs="{'invisible':['|',('type','notin',['product','consu']),('used_in_bom_count','=',0)]}"icon="fa-level-up">
                        <fieldstring="UsedIn"name="used_in_bom_count"widget="statinfo"/>
                    </button>
                    <buttonclass="oe_stat_button"name="action_view_mos"type="object"
                        attrs="{'invisible':['|','|',('type','notin',['product','consu']),('bom_count','=',0),('mrp_product_qty','=',0)]}"icon="fa-list-alt"help="Manufacturedinthelast365days">
                        <divclass="o_field_widgeto_stat_info">
                            <spanclass="o_stat_value">
                                <fieldname="mrp_product_qty"widget="statinfo"nolabel="1"class="mr4"/>
                                <fieldname="uom_name"/>
                            </span>
                            <spanclass="o_stat_text">Manufactured</span>
                        </div>
                    </button>
                </xpath>
            </field>
        </record>

        <recordid="product_product_form_view_bom_button"model="ir.ui.view">
            <fieldname="name">product.product.procurement</field>
            <fieldname="model">product.product</field>
            <fieldname="inherit_id"ref="stock.product_form_view_procurement_button"/>
            <fieldname="groups_id"eval="[(4,ref('mrp.group_mrp_user'))]"/>
            <fieldname="arch"type="xml">
                <xpathexpr="//button[@name='action_open_product_lot']"position="after">
                    <buttonclass="oe_stat_button"name="action_view_bom"type="object"
                        attrs="{'invisible':[('type','notin',['product','consu'])]}"icon="fa-flask">
                        <fieldstring="BillofMaterials"name="bom_count"widget="statinfo"/>
                    </button>
                    <buttonclass="oe_stat_button"name="action_used_in_bom"type="object"
                        attrs="{'invisible':['|',('type','notin',['product','consu']),('used_in_bom_count','=',0)]}"icon="fa-level-up">
                        <fieldstring="UsedIn"name="used_in_bom_count"widget="statinfo"/>
                    </button>
                    <buttonclass="oe_stat_button"name="action_view_mos"type="object"
                        attrs="{'invisible':['|','|',('type','notin',['product','consu']),('bom_count','=',0),('mrp_product_qty','=',0)]}"icon="fa-list-alt"help="Manufacturedinthelast365days">
                        <divclass="o_field_widgeto_stat_info">
                            <spanclass="o_stat_value">
                                <fieldname="mrp_product_qty"widget="statinfo"nolabel="1"class="mr4"/>
                                <fieldname="uom_name"/>
                            </span>
                            <spanclass="o_stat_text">Manufactured</span>
                        </div>
                    </button>
                </xpath>
            </field>
        </record>
    </data>
</flectra>
