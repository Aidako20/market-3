<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <data>
        <!--ManufacturingOrder-->
        <recordid="mrp_production_tree_view"model="ir.ui.view">
            <fieldname="name">mrp.production.tree</field>
            <fieldname="model">mrp.production</field>
            <fieldname="arch"type="xml">
                <treestring="ManufacturingOrders"default_order="prioritydesc,date_planned_startdesc"multi_edit="1"sample="1">
                    <header>
                        <buttonname="button_plan"type="object"string="Plan"/>
                        <buttonname="do_unreserve"type="object"string="Unreserve"/>
                    </header>
                    <fieldname="priority"optional="show"widget="priority"nolabel="1"/>
                    <fieldname="message_needaction"invisible="1"/>
                    <fieldname="name"decoration-bf="1"/>
                    <fieldname="date_planned_start"readonly="1"optional="show"widget="remaining_days"/>
                    <fieldname="date_deadline"widget="remaining_days"attrs="{'invisible':[('state','in',['done','cancel'])]}"optional="hide"/>
                    <fieldname="product_id"readonly="1"optional="show"/>
                    <fieldname="product_uom_id"string="UnitofMeasure"options="{'no_open':True,'no_create':True}"groups="uom.group_uom"optional="show"/>
                    <fieldname="lot_producing_id"optional="hide"/>
                    <fieldname="bom_id"readonly="1"optional="hide"/>
                    <fieldname="origin"optional="show"/>
                    <fieldname="user_id"optional="hide"widget="many2one_avatar_user"/>
                    <fieldname="reservation_state"optional="show"/>
                    <fieldname="product_qty"sum="TotalQty"string="Quantity"readonly="1"optional="show"/>
                    <fieldname="company_id"readonly="1"groups="base.group_multi_company"optional="show"/>
                    <fieldname="state"optional="show"widget='badge'decoration-success="state=='done'"decoration-info="statenotin('done','cancel')"/>
                    <fieldname="activity_exception_decoration"widget="activity_exception"/>
                    <fieldname="delay_alert_date"invisible="1"/>
                    <fieldstring=""name="json_popover"widget="stock_rescheduling_popover"attrs="{'invisible':[('delay_alert_date','=',False)]}"/>
                </tree>
            </field>
        </record>

        <recordid="production_order_server_action"model="ir.actions.server">
            <fieldname="name">Mrp:PlanProductionOrders</field>
            <fieldname="model_id"ref="mrp.model_mrp_production"/>
            <fieldname="binding_model_id"ref="mrp.model_mrp_production"/>
            <fieldname="binding_view_types">list</field>
            <fieldname="groups_id"eval="[(4,ref('mrp.group_mrp_routings'))]"/>
            <fieldname="state">code</field>
            <fieldname="code">records.button_plan()</field>
        </record>

        <recordid="action_production_order_mark_done"model="ir.actions.server">
            <fieldname="name">MarkasDone</field>
            <fieldname="model_id"ref="mrp.model_mrp_production"/>
            <fieldname="binding_model_id"ref="mrp.model_mrp_production"/>
            <fieldname="binding_view_types">list</field>
            <fieldname="state">code</field>
            <fieldname="code">
            ifrecords:
                res=records.filtered(lambdamo:mo.statein{'confirmed','to_close','progress'}).button_mark_done()
                ifresisnotTrue:
                    action=res
            </field>
        </record>

        <recordid="mrp_production_form_view"model="ir.ui.view">
            <fieldname="name">mrp.production.form</field>
            <fieldname="model">mrp.production</field>
            <fieldname="arch"type="xml">
                <formstring="ManufacturingOrders">
                <header>
                    <fieldname="confirm_cancel"invisible="1"/>
                    <fieldname="show_lock"invisible="1"/>
                    <buttonname="button_mark_done"attrs="{'invisible':['|',('state','in',('draft','cancel','done','to_close')),('qty_producing','=',0)]}"string="Validate"type="object"class="oe_highlight"/>
                    <buttonname="button_mark_done"attrs="{'invisible':[
                        '&amp;',
                        '|',
                        ('state','notin',('confirmed','progress')),
                        ('qty_producing','!=',0),
                        ('state','!=','to_close')]}"string="MarkasDone"type="object"class="oe_highlight"/>
                    <buttonname="action_confirm"attrs="{'invisible':[('state','!=','draft')]}"string="Confirm"type="object"class="oe_highlight"/>
                    <buttonname="button_plan"attrs="{'invisible':['|','|',('state','notin',('confirmed','progress','to_close')),('workorder_ids','=',[]),('is_planned','=',True)]}"type="object"string="Plan"class="oe_highlight"/>
                    <buttonname="button_unplan"type="object"string="Unplan"attrs="{'invisible':[('is_planned','=',False)]}"/>
                    <buttonname="action_assign"attrs="{'invisible':['|',('state','in',('draft','done','cancel')),('reserve_visible','=',False)]}"string="Checkavailability"type="object"/>
                    <buttonname="button_unreserve"type="object"string="Unreserve"attrs="{'invisible':[('unreserve_visible','=',False)]}"/>
                    <buttonname="button_scrap"type="object"string="Scrap"attrs="{'invisible':[('state','in',('cancel','draft'))]}"/>
                    <fieldname="state"widget="statusbar"statusbar_visible="draft,confirmed,progress,done"/>
                    <buttonname="action_toggle_is_locked"attrs="{'invisible':['|',('show_lock','=',False),('is_locked','=',False)]}"string="Unlock"groups="mrp.group_mrp_manager"type="object"help="Unlockthemanufacturingordertoadjustwhathasbeenconsumedorproduced."/>
                    <buttonname="action_toggle_is_locked"attrs="{'invisible':['|',('show_lock','=',False),('is_locked','=',True)]}"string="Lock"groups="mrp.group_mrp_manager"type="object"help="Lockthemanufacturingordertopreventchangestowhathasbeenconsumedorproduced."/>
                    <buttonname="action_cancel"type="object"string="Cancel"
                            attrs="{'invisible':['|','|',('id','=',False),('state','in',('done','cancel')),('confirm_cancel','=',True)]}"/>
                    <buttonname="action_cancel"type="object"string="Cancel"
                            attrs="{'invisible':['|','|',('id','=',False),('state','in',('done','cancel')),('confirm_cancel','=',False)]}"
                            confirm="Someproductmoveshavealreadybeenconfirmed,thismanufacturingordercan'tbecompletelycancelled.Areyoustillsureyouwanttoprocess?"/>
                    <buttonname="button_unbuild"type="object"string="Unbuild"attrs="{'invisible':[('state','!=','done')]}"/>
                </header>
                <sheet>
                    <fieldname="reservation_state"invisible="1"/>
                    <fieldname="date_planned_finished"invisible="1"/>
                    <fieldname="is_locked"invisible="1"/>
                    <fieldname="qty_produced"invisible="1"/>
                    <fieldname="unreserve_visible"invisible="1"/>
                    <fieldname="reserve_visible"invisible="1"/>
                    <fieldname="consumption"invisible="1"/>
                    <fieldname="is_planned"invisible="1"/>
                    <divclass="oe_button_box"name="button_box">
                        <buttonclass="oe_stat_button"name="action_view_mrp_production_childs"type="object"icon="fa-wrench"attrs="{'invisible':[('mrp_production_child_count','=',0)]}">
                            <divclass="o_field_widgeto_stat_info">
                                <spanclass="o_stat_value"><fieldname="mrp_production_child_count"/></span>
                                <spanclass="o_stat_text">ChildMO</span>
                            </div>
                        </button>
                        <buttonclass="oe_stat_button"name="action_view_mrp_production_sources"type="object"icon="fa-wrench"attrs="{'invisible':[('mrp_production_source_count','=',0)]}">
                            <divclass="o_field_widgeto_stat_info">
                                <spanclass="o_stat_value"><fieldname="mrp_production_source_count"/></span>
                                <spanclass="o_stat_text">SourceMO</span>
                            </div>
                        </button>
                        <buttonclass="oe_stat_button"name="action_view_mrp_production_backorders"type="object"icon="fa-wrench"attrs="{'invisible':[('mrp_production_backorder_count','&lt;',2)]}">
                            <divclass="o_field_widgeto_stat_info">
                                <spanclass="o_stat_value"><fieldname="mrp_production_backorder_count"/></span>
                                <spanclass="o_stat_text">Backorders</span>
                            </div>
                        </button>
                        <buttonclass="oe_stat_button"name="action_see_move_scrap"type="object"icon="fa-arrows-v"attrs="{'invisible':[('scrap_count','=',0)]}">
                            <divclass="o_field_widgeto_stat_info">
                                <spanclass="o_stat_value"><fieldname="scrap_count"/></span>
                                <spanclass="o_stat_text">Scraps</span>
                            </div>
                        </button>
                        <buttontype="object"name="action_view_mo_delivery"class="oe_stat_button"icon="fa-truck" groups="base.group_user"attrs="{'invisible':[('delivery_count','=',0)]}">
                            <fieldname="delivery_count"widget="statinfo"string="Transfers"/>
                        </button>
                        <buttonname="%(stock.action_stock_report)d"icon="fa-arrow-up"class="oe_stat_button"string="Traceability"type="action"states="done"groups="stock.group_production_lot"/>
                        <buttonname="%(action_mrp_production_moves)d"type="action"string="ProductMoves"class="oe_stat_button"icon="fa-exchange"attrs="{'invisible':[('state','notin',('progress','done'))]}"/>
                    </div>
                    <divclass="oe_title">
                        <h1>
                            <fieldname="priority"widget="priority"class="mr-3"/>
                            <fieldname="name"placeholder="ManufacturingReference"nolabel="1"/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <fieldname="id"invisible="1"/>
                            <fieldname="use_create_components_lots"invisible="1"/>
                            <fieldname="show_lot_ids"invisible="1"/>
                            <fieldname="product_tracking"invisible="1"/>
                            <fieldname="product_id"context="{'default_type':'product'}"attrs="{'readonly':[('state','!=','draft')]}"/>
                            <fieldname="product_tmpl_id"invisible="1"/>
                            <fieldname="product_description_variants"attrs="{'invisible':[('product_description_variants','in',(False,''))],'readonly':[('state','!=','draft')]}"/>
                            <labelfor="product_qty"string="Quantity"/>
                            <divclass="o_rowno-guttersd-flex">
                                <divattrs="{'invisible':[('state','=','draft')]}"class="o_row">
                                    <fieldname="qty_producing"class="text-left"attrs="{'readonly':['|',('state','=','cancel'),'&amp;',('state','=','done'),('is_locked','=',True)]}"/>
                                    /
                                </div>
                                <fieldname="product_qty"class="oe_inlinetext-left"attrs="{'readonly':[('state','!=','draft')],'invisible':[('state','notin',('draft','done'))]}"/>
                                <buttontype="action"name="%(mrp.action_change_production_qty)d"
                                    context="{'default_mo_id':id}"class="oe_linkoe_inline"attrs="{'invisible':['|',('state','in',('draft','done','cancel')),('id','=',False)]}">
                                    <fieldname="product_qty"class="oe_inline"attrs="{'readonly':[('state','!=','draft')]}"/>
                                </button>
                                <labelfor="product_uom_id"string=""class="oe_inline"/>
                                <fieldname="product_uom_category_id"invisible="1"/>
                                <fieldname="product_uom_id"options="{'no_open':True,'no_create':True}"force_save="1"groups="uom.group_uom"attrs="{'readonly':[('state','!=','draft')]}"class="oe_inline"/>
                                <spanclass='text-bf'>ToProduce</span>
                            </div>
                            <labelfor="lot_producing_id"attrs="{'invisible':['|',('state','=','draft'),('product_tracking','in',('none',False))]}"/>
                            <divclass="o_row"attrs="{'invisible':['|',('state','=','draft'),('product_tracking','in',('none',False))]}">
                                <fieldname="lot_producing_id"
                                    context="{'default_product_id':product_id,'default_company_id':company_id}"attrs="{'invisible':[('product_tracking','in',('none',False))]}"/>
                                <buttonname="action_generate_serial"type="object"class="btnbtn-primaryfafa-plus-square-o"aria-label="Createsanewserial/lotnumber"title="Createsanewserial/lotnumber"role="img"attrs="{'invisible':['|',('product_tracking','in',('none',False)),('lot_producing_id','!=',False)]}"/>
                            </div>
                            <fieldname="bom_id"
                                context="{'default_product_tmpl_id':product_tmpl_id}"attrs="{'readonly':[('state','!=','draft')]}"/>
                        </group>
                        <groupname="group_extra_info">
                            <labelfor="date_planned_start"/>
                            <divclass="o_row">
                                <fieldname="date_planned_start"
                                    attrs="{'readonly':[('state','in',['done','cancel'])]}"
                                    decoration-warning="statenotin('done','cancel')anddate_planned_start&lt;now"
                                    decoration-danger="statenotin('done','cancel')anddate_planned_start&lt;current_date"
                                    decoration-bf="statenotin('done','cancel')and(date_planned_start&lt;current_dateordate_planned_start&lt;now)"/>
                                <fieldname="delay_alert_date"invisible="1"/>
                                <fieldstring=""name="json_popover"widget="stock_rescheduling_popover"attrs="{'invisible':[('delay_alert_date','=',False)]}"/>
                            </div>
                            <fieldname="user_id"domain="[('share','=',False)]"/>
                            <fieldname="company_id"groups="base.group_multi_company"options="{'no_create':True}"attrs="{'readonly':[('state','!=','draft')]}"force_save="1"/>
                            <fieldname="show_final_lots"invisible="1"/>
                            <fieldname="production_location_id"invisible="1"readonly="1"/>
                            <fieldname="move_finished_ids"invisible="1"attrs="{'readonly':['|',('state','=','cancel'),'&amp;',('state','=','done'),('is_locked','=',True)]}">
                                <treeeditable="bottom">
                                    <fieldname="product_id"/>
                                    <fieldname="product_uom_qty"/>
                                    <fieldname="product_uom"/>
                                    <fieldname="operation_id"/>
                                    <fieldname="byproduct_id"/>
                                    <fieldname="name"/>
                                    <fieldname="date_deadline"/>
                                    <fieldname="picking_type_id"/>
                                    <fieldname="location_id"/>
                                    <fieldname="location_dest_id"/>
                                    <fieldname="company_id"/>
                                    <fieldname="warehouse_id"/>
                                    <fieldname="origin"/>
                                    <fieldname="group_id"/>
                                    <fieldname="propagate_cancel"/>
                                    <fieldname="move_dest_ids"/>
                                    <fieldname="state"/>
                                    <!--Uselessastheeditableintreedeclaration->ForFormTest-->
                                    <fieldname="product_uom_category_id"/>
                                    <fieldname="allowed_operation_ids"/>
                                </tree>
                            </field>
                        </group>
                    </group>
                    <notebook>
                        <pagestring="Components"name="components">
                            <fieldname="move_raw_ids"
                                context="{'default_date':date_planned_start,'default_date_deadline':date_deadline,'default_location_id':location_src_id,'default_location_dest_id':production_location_id,'default_state':'draft','default_raw_material_production_id':id,'default_picking_type_id':picking_type_id,'default_company_id':company_id}"
                                attrs="{'readonly':['|',('state','=','cancel'),'&amp;',('state','=','done'),('is_locked','=',True)]}"options="{'delete':[('state','=','draft')]}">
                                <treedefault_order="is_done,sequence"editable="bottom">
                                    <fieldname="product_id"force_save="1"required="1"context="{'default_type':'product'}"attrs="{'readonly':['|','|',('has_move_lines','=',True),('state','=','cancel'),'&amp;',('state','!=','draft'),('additional','=',False)]}"/>

                                    <fieldname="move_line_ids"invisible="1">
                                        <tree>
                                            <fieldname="lot_id"invisible="1"/>
                                            <fieldname="owner_id"invisible="1"/>
                                            <fieldname="package_id"invisible="1"/>
                                            <fieldname="result_package_id"invisible="1"/>
                                            <fieldname="location_id"invisible="1"/>
                                            <fieldname="location_dest_id"invisible="1"/>
                                            <fieldname="qty_done"invisible="1"/>
                                            <fieldname="product_id"invisible="1"/>
                                            <fieldname="product_uom_id"invisible="1"/>
                                            <fieldname="product_uom_qty"invisible="1"/>
                                            <fieldname="state"invisible="1"/>
                                            <fieldname="move_id"invisible="1"/>
                                            <fieldname="id"invisible="1"/>
                                        </tree>
                                    </field>

                                    <fieldname="company_id"invisible="1"/>
                                    <fieldname="product_uom_category_id"invisible="1"/>
                                    <fieldname="name"invisible="1"/>
                                    <fieldname="allowed_operation_ids"invisible="1"/>
                                    <fieldname="unit_factor"invisible="1"/>
                                    <fieldname="date_deadline"invisible="1"/>
                                    <fieldname="date"invisible="1"/>
                                    <fieldname="additional"invisible="1"/>
                                    <fieldname="picking_type_id"invisible="1"/>
                                    <fieldname="has_tracking"invisible="1"/>
                                    <fieldname="operation_id"invisible="1"/>
                                    <fieldname="is_done"invisible="1"/>
                                    <fieldname="bom_line_id"invisible="1"/>
                                    <fieldname="sequence"invisible="1"/>
                                    <fieldname="location_id"invisible="1"/>
                                    <fieldname="warehouse_id"invisible="1"/>
                                    <fieldname="is_locked"invisible="1"/>
                                    <fieldname="has_move_lines"invisible="1"/>
                                    <fieldname="location_dest_id"domain="[('id','child_of',parent.location_dest_id)]"invisible="1"/>
                                    <fieldname="state"invisible="1"force_save="1"/>
                                    <fieldname="should_consume_qty"invisible="1"/>
                                    <fieldname="product_uom_qty"widget="mrp_should_consume"string="ToConsume"attrs="{'readonly':['&amp;',('parent.state','!=','draft'),'|',('parent.state','notin',('confirmed','progress','to_close')),('parent.is_locked','=',True)]}"width="1"/>
                                    <fieldname="product_type"invisible="1"/>
                                    <fieldname="product_qty"invisible="1"readonly="1"/>
                                    <fieldname="reserved_availability"invisible="1"/>
                                    <fieldname="forecast_expected_date"invisible="1"/>
                                    <fieldname="forecast_availability"string="Reserved"attrs="{'column_invisible':[('parent.state','in',['draft','done'])]}"widget="forecast_widget"/>
                                    <fieldname="is_quantity_done_editable"invisible="1"/>
                                    <fieldname="quantity_done"string="Consumed"
                                        decoration-success="notis_doneand(quantity_done-should_consume_qty==0)"
                                        decoration-warning="notis_doneand(quantity_done-should_consume_qty&gt;0.0001)"
                                        attrs="{'column_invisible':[('parent.state','=','draft')],'readonly':[('show_details_visible','=',True)]}"/>
                                    <fieldname="product_uom"attrs="{'readonly':[('state','!=','draft'),('id','!=',False)]}"options="{'no_open':True,'no_create':True}"groups="uom.group_uom"/>
                                    <fieldname="show_details_visible"invisible="1"/>
                                    <fieldname="lot_ids"widget="many2many_tags"
                                        groups="stock.group_production_lot"optional="hide"
                                        attrs="{'invisible':['|','|',('show_details_visible','=',False),('has_tracking','!=','serial'),('parent.state','=','draft')],
                                                'readonly':['|','|',('show_details_visible','=',False),('has_tracking','!=','serial'),('parent.state','=','draft')],
                                                'column_invisible':[('parent.show_lot_ids','=', False)]}"
                                        options="{'create':[('parent.use_create_components_lots','!=',False)]}"
                                        context="{'default_company_id':company_id,'default_product_id':product_id}"
                                        domain="[('product_id','=',product_id)]"
                                    />
                                    <fieldname="group_id"invisible="1"/>
                                    <buttonname="action_show_details"type="object"icon="fa-list"context="{'default_product_uom_qty':0}"attrs="{'invisible':[('show_details_visible','=',False)]}"options="{&quot;warn&quot;:true}"/>
                                </tree>
                            </field>
                        </page>
                        <pagestring="WorkOrders"name="operations"groups="mrp.group_mrp_routings">
                            <fieldname="workorder_ids"attrs="{'readonly':[('state','in',['cancel','done'])]}"context="{'tree_view_ref':'mrp.mrp_production_workorder_tree_editable_view','default_product_uom_id':product_uom_id,'default_consumption':consumption,'default_company_id':company_id,'from_manufacturing_order':True}"/>
                        </page>
                        <pagestring="By-Products"name="finished_products"groups="mrp.group_mrp_byproducts">
                            <fieldname="move_byproduct_ids"context="{'default_date':date_planned_finished,'default_date_deadline':date_deadline,'default_location_id':production_location_id,'default_location_dest_id':location_dest_id,'default_state':'draft','default_production_id':id,'default_picking_type_id':picking_type_id,'default_company_id':company_id}"attrs="{'readonly':['|',('state','=','cancel'),'&amp;',('state','=','done'),('is_locked','=',True)]}"options="{'delete':[('state','=','draft')]}">
                                <treedefault_order="is_done,sequence"decoration-muted="is_done"editable="bottom">
                                    <fieldname="byproduct_id"invisible="1"/>
                                    <fieldname="product_id"context="{'default_type':'product'}"domain="[('id','!=',parent.product_id)]"required="1"/>

                                    <fieldname="move_line_ids"invisible="1">
                                        <tree>
                                            <fieldname="lot_id"invisible="1"/>
                                            <fieldname="owner_id"invisible="1"/>
                                            <fieldname="package_id"invisible="1"/>
                                            <fieldname="result_package_id"invisible="1"/>
                                            <fieldname="location_id"invisible="1"/>
                                            <fieldname="location_dest_id"invisible="1"/>
                                            <fieldname="qty_done"invisible="1"/>
                                            <fieldname="product_id"invisible="1"/>
                                            <fieldname="product_uom_id"invisible="1"/>
                                            <fieldname="product_uom_qty"invisible="1"/>
                                            <fieldname="state"invisible="1"/>
                                            <fieldname="move_id"invisible="1"/>
                                            <fieldname="id"invisible="1"/>
                                        </tree>
                                    </field>

                                    <fieldname="company_id"invisible="1"/>
                                    <fieldname="product_uom_category_id"invisible="1"/>
                                    <fieldname="name"invisible="1"/>
                                    <fieldname="allowed_operation_ids"invisible="1"/>
                                    <fieldname="unit_factor"invisible="1"/>
                                    <fieldname="date"invisible="1"/>
                                    <fieldname="additional"invisible="1"/>
                                    <fieldname="picking_type_id"invisible="1"/>
                                    <fieldname="has_tracking"invisible="1"/>
                                    <fieldname="operation_id"invisible="1"/>
                                    <fieldname="is_done"invisible="1"/>
                                    <fieldname="bom_line_id"invisible="1"/>
                                    <fieldname="sequence"invisible="1"/>
                                    <fieldname="location_id"invisible="1"/>
                                    <fieldname="warehouse_id"invisible="1"/>
                                    <fieldname="is_locked"invisible="1"/>
                                    <fieldname="has_move_lines"invisible="1"/>
                                    <fieldname="location_dest_id"domain="[('id','child_of',parent.location_dest_id)]"invisible="1"/>
                                    <fieldname="state"invisible="1"force_save="1"/>
                                    <fieldname="product_uom_qty"string="ToProduce"attrs="{'readonly':['&amp;',('parent.state','!=','draft'),'|',('parent.state','notin',('confirmed','progress','to_close')),('parent.is_locked','=',True)]}"/>
                                    <fieldname="is_quantity_done_editable"invisible="1"/>
                                    <fieldname="quantity_done"string="Produced"attrs="{'column_invisible':[('parent.state','=','draft')],'readonly':[('is_quantity_done_editable','=',False)]}"/>
                                    <fieldname="product_uom"groups="uom.group_uom"/>
                                    <fieldname="show_details_visible"invisible="1"/>
                                    <fieldname="lot_ids"widget="many2many_tags"
                                        groups="stock.group_production_lot"
                                        attrs="{'invisible':['|','|',('show_details_visible','=',False),('has_tracking','!=','serial'),('parent.state','=','draft')]}"
                                        options="{'create':[('parent.use_create_components_lots','!=',False)]}"
                                        context="{'default_company_id':company_id,'default_product_id':product_id}"
                                        domain="[('product_id','=',product_id)]"
                                    />
                                    <buttonname="action_show_details"type="object"icon="fa-list"attrs="{'invisible':[('show_details_visible','=',False)]}"options="{&quot;warn&quot;:true}"/>
                                </tree>
                            </field>
                        </page>
                        <pagestring="Miscellaneous"name="miscellaneous">
                            <group>
                                <group>
                                    <fieldname="picking_type_id"attrs="{'readonly':[('state','!=','draft')]}"/>
                                    <fieldname="location_src_id"groups="stock.group_stock_multi_locations"options="{'no_create':True}"attrs="{'readonly':[('state','!=','draft')]}"/>
                                    <fieldname="location_dest_id"groups="stock.group_stock_multi_locations"options="{'no_create':True}"attrs="{'readonly':[('state','!=','draft')]}"/>
                                </group>
                                <group>
                                    <fieldname="origin"/>
                                    <fieldname="date_deadline"
                                        attrs="{'invisible':['|',('state','in',('done','cancel')),('date_deadline','=',False)]}"
                                        decoration-danger="date_deadlineanddate_deadline&lt;current_date"
                                        decoration-bf="date_deadlineanddate_deadline&lt;current_date"/>
                                </group>
                            </group>
                        </page>
                    </notebook>
                </sheet>
                <divclass="oe_chatter">
                    <fieldname="message_follower_ids"/>
                    <fieldname="activity_ids"/>
                    <fieldname="message_ids"/>
                </div>
                </form>
            </field>
        </record>

        <recordid="mrp_production_kanban_view"model="ir.ui.view">
            <fieldname="name">mrp.production.kanban</field>
            <fieldname="model">mrp.production</field>
            <fieldname="arch"type="xml">
                <kanbanclass="o_kanban_mobile"sample="1">
                    <fieldname="name"/>
                    <fieldname="product_id"/>
                    <fieldname="product_qty"/>
                    <fieldname="product_uom_id"options="{'no_open':True,'no_create':True}"/>
                    <fieldname="date_planned_start"/>
                    <fieldname="state"/>
                    <fieldname="activity_state"/>
                    <progressbarfield="activity_state"colors='{"planned":"success","today":"warning","overdue":"danger"}'/>
                    <templates>
                        <tt-name="kanban-box">
                            <divt-attf-class="oe_kanban_cardoe_kanban_global_click">
                                <divclass="o_kanban_record_top">
                                    <fieldname="priority"widget="priority"/>
                                    <divclass="o_kanban_record_headingsmt4ml-1">
                                        <strongclass="o_kanban_record_title"><span><tt-esc="record.product_id.value"/></span></strong>
                                    </div>
                                    <spanclass="float-righttext-right"><tt-esc="record.product_qty.value"/><small><tt-esc="record.product_uom_id.value"/></small></span>
                                </div>
                                <divclass="o_kanban_record_bottom">
                                    <divclass="oe_kanban_bottom_lefttext-muted">
                                        <span><tt-esc="record.name.value"/><tt-esc="record.date_planned_start.valueandrecord.date_planned_start.value.split('')[0]orFalse"/></span>
                                        <fieldname="activity_ids"widget="kanban_activity"/>
                                        <fieldname="delay_alert_date"invisible="1"/>
                                        <fieldstring=""name="json_popover"widget="stock_rescheduling_popover"attrs="{'invisible':[('delay_alert_date','=',False)]}"/>
                                    </div>
                                    <divclass="oe_kanban_bottom_right">
                                        <spant-attf-class="badge#{['draft','cancel'].indexOf(record.state.raw_value)>-1?'badge-secondary':['none'].indexOf(record.state.raw_value)>-1?'badge-danger':['confirmed'].indexOf(record.state.raw_value)>-1?'badge-warning':['done'].indexOf(record.state.raw_value)>-1?'badge-success':'badge-primary'}"><tt-esc="record.state.value"/></span>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <recordid="view_production_calendar"model="ir.ui.view">
            <fieldname="name">mrp.production.calendar</field>
            <fieldname="model">mrp.production</field>
            <fieldeval="2"name="priority"/>
            <fieldname="arch"type="xml">
                <calendardate_start="date_planned_start"date_stop="date_planned_finished"
                          string="ManufacturingOrders"event_limit="5"quick_add="False">
                    <fieldname="user_id"avatar_field="image_128"/>
                    <fieldname="product_id"/>
                    <fieldname="product_qty"/>
                </calendar>
            </field>
        </record>

        <recordid="view_production_gantt"model="ir.ui.view">
            <fieldname="name">mrp.production.gantt</field>
            <fieldname="model">mrp.production</field>
            <fieldname="arch"type="xml">
                <ganttdate_stop="date_finished"date_start="date_start"string="Productions"create="0">
                </gantt>
            </field>
        </record>

        <recordid="view_production_pivot"model="ir.ui.view">
            <fieldname="name">mrp.production.pivot</field>
            <fieldname="model">mrp.production</field>
            <fieldname="arch"type="xml">
                <pivotstring="ManufacturingOrders"sample="1">
                    <fieldname="date_planned_start"type="row"/>
                </pivot>
            </field>
        </record>

        <recordid="view_production_graph"model="ir.ui.view">
            <fieldname="name">mrp.production.graph</field>
            <fieldname="model">mrp.production</field>
            <fieldname="arch"type="xml">
                <graphstring="ManufacturingOrders"type="line"sample="1">
                    <fieldname="date_planned_finished"/>
                </graph>
            </field>
        </record>

        <recordid="view_mrp_production_filter"model="ir.ui.view">
            <fieldname="name">mrp.production.select</field>
            <fieldname="model">mrp.production</field>
            <fieldname="arch"type="xml">
                <searchstring="SearchProduction">
                    <fieldname="name"string="ManufacturingOrder"filter_domain="['|',('name','ilike',self),('origin','ilike',self)]"/>
                    <fieldname="product_id"/>
                    <fieldname="move_raw_ids"string="Component"filter_domain="[('move_raw_ids.product_id','ilike',self)]"/>
                    <fieldname="name"string="WorkCenter"filter_domain="[('bom_id.operation_ids.workcenter_id','ilike',self)]"/>
                    <fieldname="origin"/>
                    <filterstring="ToDo"name="todo"domain="[('state','in',('draft','confirmed','progress','to_close'))]"
                        help="ManufacturingOrderswhichareinconfirmedstate."/>
                    <filterstring="Starred"name="starred"domain="[('priority','=','1')]"/>
                    <separator/>
                    <filterstring="Draft"name="filter_draft"domain="[('state','=','draft')]"/>
                    <filterstring="Confirmed"name="filter_confirmed"domain="[('state','=','confirmed')]"/>
                    <filterstring="Planned"name="filter_planned"domain="[('is_planned','=',True)]"groups="mrp.group_mrp_routings"/>
                    <filterstring="InProgress"name="filter_in_progress"domain="[('state','=','progress')]"/>
                    <filterstring="ToClose"name="filter_to_close"domain="[('state','=','to_close')]"/>
                    <filterstring="Done"name="filter_done"domain="[('state','=','done')]"/>
                    <filterstring="Cancelled"name="filter_cancel"domain="[('state','=','cancel')]"/>
                    <separator/>
                    <filterstring="WaitingforComponent"name="waiting"domain="[('reservation_state','in',('waiting','confirmed'))]"/>
                    <filterstring="ComponentAvailable"name="filter_ready"domain="[('reservation_state','=','assigned')]"/>
                    <separator/>
                    <filterstring="PlanningIssues"name="planning_issues"help="LateMOorLatedeliveryofcomponents"
                        domain="['|',('delay_alert_date','!=',False),'&amp;',('date_deadline','&lt;',current_date),('state','=','confirmed')]"/>
                    <separator/>
                    <filterinvisible="1"string="LateActivities"name="activities_overdue"
                        domain="[('my_activity_date_deadline','&lt;',context_today().strftime('%Y-%m-%d'))]"
                        help="Showallrecordswhichhasnextactiondateisbeforetoday"/>
                    <filterinvisible="1"string="TodayActivities"name="activities_today"
                        domain="[('my_activity_date_deadline','=',context_today().strftime('%Y-%m-%d'))]"/>
                    <filterinvisible="1"string="FutureActivities"name="activities_upcoming_all"
                        domain="[('my_activity_date_deadline','&gt;',context_today().strftime('%Y-%m-%d'))]"/>
                    <filtername="filter_date_planned_start"string="ScheduledDate"date="date_planned_start"/>
                    <filtername="filter_plan_date"invisible="1"string="ScheduledDate:Last365Days"domain="[('date_planned_start','>',(datetime.datetime.now()+relativedelta(days=-365)).to_utc().strftime('%Y-%m-%d%H:%M:%S'))]"/>
                    <separator/>
                    <filterstring="Warnings"name="activities_exception"
                        domain="[('activity_exception_decoration','!=',False)]"/>
                    <groupexpand="0"string="GroupBy...">
                        <filterstring="Product"name="product"domain="[]"context="{'group_by':'product_id'}"/>
                        <filterstring="Status"name="status"domain="[]"context="{'group_by':'state'}"/>
                        <filterstring="MaterialAvailability"name="groupby_reservation_state"domain="[]"context="{'group_by':'reservation_state'}"/>
                        <filterstring="ScheduledDate"name="scheduled_date"domain="[]"context="{'group_by':'date_planned_start'}"help="ScheduledDatebyMonth"/>
                    </group>
               </search>
            </field>
        </record>

        <recordid="mrp_production_action"model="ir.actions.act_window">
            <fieldname="name">ManufacturingOrders</field>
            <fieldname="type">ir.actions.act_window</field>
            <fieldname="res_model">mrp.production</field>
            <fieldname="view_mode">tree,kanban,form,calendar,pivot,graph</field>
            <fieldname="view_id"eval="False"/>
            <fieldname="search_view_id"ref="view_mrp_production_filter"/>
            <fieldname="context">{'search_default_todo':True,'default_company_id':allowed_company_ids[0]}</field>
            <fieldname="domain">[('picking_type_id.active','=',True)]</field>
            <fieldname="help"type="html">
              <pclass="o_view_nocontent_smiling_face">
                Nomanufacturingorderfound.Let'screateone.
              </p><p>
                Consume<aname="%(product.product_template_action)d"type='action'tabindex="-1">components</a>andbuildfinishedproductsusing<aname="%(mrp_bom_form_action)d"type='action'tabindex="-1">billsofmaterials</a>
              </p>
            </field>
        </record>

        <recordid="mrp_production_action_picking_deshboard"model="ir.actions.act_window">
            <fieldname="name">ManufacturingOrders</field>
            <fieldname="type">ir.actions.act_window</field>
            <fieldname="res_model">mrp.production</field>
            <fieldname="view_mode">tree,kanban,form</field>
            <fieldname="view_id"eval="False"/>
            <fieldname="search_view_id"ref="view_mrp_production_filter"/>
            <fieldname="domain">[('picking_type_id','=',active_id)]</field>
            <fieldname="context">{'default_picking_type_id':active_id}</field>
        </record>

        <recordid="mrp_production_action_unreserve_tree"model="ir.actions.server">
            <fieldname="name">Unreserve</field>
            <fieldname="model_id"ref="mrp.model_mrp_production"/>
            <fieldname="binding_model_id"ref="mrp.model_mrp_production"/>
            <fieldname="binding_view_types">list</field>
            <fieldname="state">code</field>
            <fieldname="code">
            ifrecords:
                records.do_unreserve()
            </field>
        </record>

        <menuitemaction="mrp_production_action"
            id="menu_mrp_production_action"
            parent="menu_mrp_manufacturing"
            sequence="1"/>

        <recordid="mrp_production_report"model="ir.actions.act_window">
            <fieldname="name">ManufacturingOrders</field>
            <fieldname="type">ir.actions.act_window</field>
            <fieldname="res_model">mrp.production</field>
            <fieldname="view_mode">graph,pivot,form</field>
            <fieldname="target">current</field>
            <fieldname="help"type="html">
                <pclass="o_view_nocontent_smiling_face">
                    Nodatayet!
                </p><p>
                    Createanewmanufacturingorder
                </p>
            </field>
        </record>

        <menuitemid="menu_mrp_workorder_todo"
                name="WorkOrders"
                action="mrp_workorder_todo"
                parent="menu_mrp_manufacturing"
                groups="group_mrp_routings"/>

        <menuitemid="menu_mrp_production_report"
            name="ManufacturingOrders"
            parent="menu_mrp_reporting"
            action="mrp_production_report"
            sequence="11"/>

        <menuitemid="menu_mrp_work_order_report"
            name="WorkOrders"
            parent="menu_mrp_reporting"
            action="mrp_workorder_report"
            groups="group_mrp_routings"
            sequence="11"/>

        <recordid="action_mrp_production_form"model="ir.actions.act_window">
            <fieldname="name">ManufacturingOrders</field>
            <fieldname="type">ir.actions.act_window</field>
            <fieldname="res_model">mrp.production</field>
            <fieldname="view_mode">form</field>
        </record>
    </data>
</flectra>
