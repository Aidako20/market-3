flectra.define("website_blog.tour",function(require){
    "usestrict";

    varcore=require("web.core");
    vartour=require("web_tour.tour");

    var_t=core._t;

    tour.register("blog",{
        url:"/",
    },[{
        trigger:"body:has(#o_new_content_menu_choices.o_hidden)#new-content-menu>a",
        content:_t("Clickheretoaddnewcontenttoyourwebsite."),
        consumeVisibleOnly:true,
        position:'bottom',
    },{
        trigger:"a[data-action=new_blog_post]",
        content:_t("Selectthismenuitemtocreateanewblogpost."),
        position:"bottom",
    },{
        trigger:"button.btn-continue",
        extra_trigger:"form[id=\"editor_new_blog\"]",
        content:_t("Selecttheblogyouwanttoaddthepostto."),
        //Withoutdemodata(andprobablyinmostusercases)thereisonly
        //oneblogsothisstepwouldnotbeneededandwouldblockthetour.
        //Wekeepthestepwith"auto:true",sothatthemainpythontest
        //stillworksbutneverdisplaythistotheuseranymore.Wesuppose
        //theuserdoesnotneedguidanceoncethatmodalisopened.Note:if
        //yourunthetourviayourconsolewithoutdemodata,thetourwill
        //thusfailasthiswillbeconsidered.
        auto:true,
    },{
        trigger:"div[data-oe-expression=\"blog_post.name\"]",
        extra_trigger:"#oe_snippets.o_loaded",
        content:_t("Writeatitle,thesubtitleisoptional."),
        position:"top",
        //FIXMEinsteadofusingthedefault'click'eventthatisusedtomark
        //DIVelementsasconsumed,wewouldliketousethe'input'eventfor
        //thisspecificcontenteditableelement.However,using'input'here
        //makestheautotestnotworkasthe'text'runmethodstopsworking
        //correctlyforcontenteditableelementwhose'consumeEvent'issetto
        //'input'.Theautotestsshouldbeentirelyindependentofwhatisset
        //as'consumeEvent'.Whilethisisinvestigatedandfixed,let'suse
        //the'mouseup'event.Indeedwecannotletitto'click'becauseof
        //theoldeditorcurrentlyremovingallclickhandlersontoplevel
        //editablecontent(whichtheblogposttitleareais).
        consumeEvent:'mouseup',
        run:"text",
    },{
        trigger:"we-button[data-background]:nth(1)",
        extra_trigger:"#wrapdiv[data-oe-expression=\"blog_post.name\"]:not(:containsExact(\"\"))",
        content:_t("Setablogpost<b>cover</b>."),
        position:"top",
    },{
        trigger:".o_select_media_dialog.o_we_search",
        content:_t("Searchforanimage.(eg:type\"business\")"),
        position:"top",
    },{
        trigger:".o_select_media_dialog.o_existing_attachment_cell:firstimg",
        alt_trigger:".o_select_media_dialog.o_we_existing_attachments",
        extra_trigger:'.modal:has(.o_existing_attachment_cell:first)',
        content:_t("Chooseanimagefromthelibrary."),
        position:"top",
    },{
        trigger:"#o_wblog_post_content",
        content:_t("<b>Writeyourstoryhere.</b>Usethetoptoolbartostyleyourtext:addanimageortable,setboldoritalic,etc.Draganddropbuildingblocksformoregraphicalblogs."),
        position:"top",
        run:function(actions){
            actions.auto();
            actions.text("Blogcontent",this.$anchor.find("p"));
        },
    },{
        trigger:"button[data-action=save]",
        extra_trigger:"#o_wblog_post_content.o_wblog_post_content_fieldp:first:not(:containsExact("+_t("Startwritinghere...")+"))",
        content:_t("<b>ClickonSave</b>torecordyourchanges."),
        position:"bottom",
    },{
        trigger:"a[data-action=show-mobile-preview]",
        extra_trigger:"body:not(.editor_enable)",
        content:_t("Usethisicontopreviewyourblogposton<b>mobiledevices</b>."),
        position:"bottom",
    },{
        trigger:"button[data-dismiss=modal]",
        extra_trigger:'.modal:has(#mobile-viewport)',
        content:_t("Onceyouhavereviewedthecontentonmobile,closethepreview."),
        position:"right",
    },{
        trigger:".js_publish_management.js_publish_btn",
        extra_trigger:"body:not(.editor_enable)",
        position:"bottom",
        content:_t("<b>Publishyourblogpost</b>tomakeitvisibletoyourvisitors."),
    },{
        trigger:"#customize-menu>a",
        extra_trigger:".js_publish_management.js_publish_btn.css_unpublish:visible",
        content:_t("<b>That'sit,yourblogpostispublished!</b>Discovermorefeaturesthroughthe<i>Customize</i>menu."),
        position:"bottom",
        width:500,
    }]);
});
