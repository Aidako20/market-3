<?xmlversion="1.0"encoding="utf-8"?>
<flectra>

<!--======  Template:PostsLoop   ==========================================
Loopthroughpostandcallsub-templates(tags,cover..)indifferentposition
accordingtotheenabledoptions.
============================================================================-->
<templateid="posts_loop"name="PostsList">
    <divid="o_wblog_posts_loop"t-att-class="'o_wblog_list_view'ifopt_blog_list_viewelse''">

        <!--Allowtofilterpostbypublishedstate.Visibleonlyinedit-mode
             andifbothpublished/unpublishednumberis>0-->
        <tt-if="state_info"t-set="state"t-value="state_info['state']"/>

        <!--Checkforactiveoptions-->
        <tt-set="opt_posts_loop_show_cover"t-value="is_view_active('website_blog.opt_posts_loop_show_cover')"/>

        <divgroups="website.group_website_designer"t-if="state_infoand(state_info['published']>0andstate_info['unpublished']>0)">
            <divclass="bg-200py-2mb-4alertalert-dismissable">
                <buttontype="button"class="close"data-dismiss="alert"aria-label="Close">&#215;</button>
                <spanclass="mr-1">Show:</span>
                <divclass="btn-groupbtn-group-sm">
                    <at-attf-class="btn#{state=='published'and'btn-success'or'btn-defaultbg-whiteborder'}"
                       t-attf-href="#{state=='published'andblog_url(state='')orblog_url(state='published')}">
                        <it-attf-class="famr-1#{state=='published'and'fa-check-square-o'or'fa-square-o'}"/>
                        Published(<tt-esc="state_info['published']"/>)
                    </a>
                    <at-attf-class="btn#{state=='unpublished'and'btn-success'or'btn-defaultbg-whiteborder'}"
                       t-attf-href="#{state=='unpublished'andblog_url(state='')orblog_url(state='unpublished')}">
                        <it-attf-class="famr-1#{state=='unpublished'and'fa-check-square-o'or'fa-square-o'}"/>
                        Unpublished(<tt-esc="state_info['unpublished']"/>)
                    </a>
                </div>
                <divclass="pt-1font-italicsmall">Thisboxwillnotbevisibletoyourvisitors</div>
            </div>
        </div>

        <divt-attf-class="row#{postsandnotopt_blog_readableand'mx-n2'}">
            <!--Filters-->
            <divt-if="tagordate_beginorsearch"class="col-12mb-3">
                <divt-if="posts"class="h4mb-3">
                    <tt-esc="len(posts)"/>
                    <tt-if="len(posts)&lt;2">Article</t>
                    <tt-else="">Articles</t>
                </div>
                <spant-if="search"class="align-items-baselineborderd-inline-flexpl-2roundedmb-2">
                    <iclass="fafa-searchmr-2text-muted"/>
                    <tt-esc="search"/>
                    <at-att-href="blog_url(search=False,tag=tag)"class="btnborder-0py-1post_link">&#215;</a>
                </span>
                <tt-if="tag">
                    <!--Showactivetagswithacategoryset-->
                    <tt-foreach="tag_category"t-as="nav_tag_category">
                        <tt-call="website_blog.tags_list">
                            <tt-set='tags't-value='nav_tag_category.tag_ids'/>
                            <tt-set='dismissibleBtn't-value="True"/>
                        </t>
                    </t>

                    <!--Showactivetagswithoutacategoryset-->
                    <tt-call="website_blog.tags_list">
                        <tt-set='tags't-value='other_tags'/>
                        <tt-set='dismissibleBtn't-value="True"/>
                    </t>
                </t>
                <spant-if="date_begin"class="align-items-baselineborderd-inline-flexpl-2roundedmb-2">
                    <iclass="fafa-calendar-omr-2text-muted"/>
                    <tt-esc="date_begin"t-options="{'widget':'date','format':'MMMyyyy'}"></t>
                    <at-attf-href="#{blog_url(date_begin=False,date_end=False,tag=tag)}"class="btnborder-0py-1">&#215;</a>
                </span>
                <hrclass="mt-2"/>
            </div>

            <!--Noblogpostyet-->
            <divt-if="notposts"class="col">
                <tt-set="no_results_str">Noresultsfor"%s".</t>
                <h2t-if="search"t-esc="no_results_str%search"class="font-weight-bold"/>
                <h2t-else="">Noblogpostyet.</h2>
                <divclass="alertalert-info"groups="website.group_website_designer">
                    Clickon"<b>New</b>"inthetop-rightcornertowriteyourfirstblogpost.
                </div>
            </div>

            <!--Posts-->

            <!--Define'colWidth'qWebvariable,tobeassignedlater.
            Adjustaccordinglyifsidebarand/orreadabilitymodesareactive.-->
            <tt-if="notopt_blog_list_view">
                <tt-if="opt_blog_readable">
                    <tt-if="opt_blog_sidebar_show"t-set="colWidth"t-value="'col-md-6'"/>
                    <tt-else=""t-set="colWidth"t-value="'col-md-6col-xl-4'"/>
                </t>
                <tt-else="">
                    <tt-if="opt_blog_sidebar_show"t-set="colWidth"t-value="'px-2col-md-6col-xl-4'"/>
                    <tt-else=""t-set="colWidth"t-value="'px-2col-sm-6col-lg-4col-xl-3'"/>
                </t>
            </t>
            <!--Loopthroughposts:excludethefirstoneifalreadydisplayedastopbanner-->
            <tt-foreach="posts"t-as="blog_post">
                <!--Assign'colWidth':'col-12'isdefaultforList-Viewandmobile-->
                <divt-attf-class="pb-4col-12#{colWidth}">
                    <articlet-attf-class="o_wblog_postposition-relative#{'cardh-100'ifopt_blog_cards_designelse''}"name="blog_post">
                        <!--List-ViewDesign-->
                        <tt-if="opt_blog_list_view">
                            <divt-att-class="opt_blog_cards_designand'card-bodypy-3'">
                                <tt-call="website_blog.post_heading"/>
                            </div>
                            <divt-if="notopt_blog_cards_design"class="py-2">
                                <tt-call="website_blog.post_info"></t>
                            </div>
                            <divt-if="opt_posts_loop_show_cover">
                                <tt-call="website_blog.post_cover_image"/>
                            </div>
                            <divt-if="is_view_active('website_blog.opt_posts_loop_show_teaser')"t-att-class="opt_blog_cards_designand'card-bodypt-0'">
                                <tt-call="website_blog.post_teaser"/>
                            </div>
                            <divt-if="opt_blog_cards_design"t-attf-class="opt_blog_cards_designand'card-bodypt-0pb-2'}">
                                <tt-call="website_blog.post_info"></t>
                            </div>
                            <divt-else=""class="mt-3">
                                <at-attf-href="/blog/#{slug(blog_post.blog_id)}/#{slug(blog_post)}"class="btnbtn-primary">
                                    Readmore<iclass="fafa-chevron-rightml-2"/>
                                </a>
                            </div>
                        </t>
                        <!--Grid-ViewDesign-->
                        <tt-if="notopt_blog_list_view">
                            <tt-if="opt_posts_loop_show_cover"t-call="website_blog.post_cover_image"/>
                            <divt-att-class="opt_blog_cards_designand'card-bodypx-2py-0mb-2'">
                                <tt-call="website_blog.post_heading"/>
                                <divt-if="is_view_active('website_blog.opt_posts_loop_show_teaser')">
                                    <tt-call="website_blog.post_teaser"/>
                                </div>
                            </div>
                            <divt-attf-class="o_wblog_normalize_font#{'card-footerpx-2pb-2'ifopt_blog_cards_designelse'pr-2pb-2'}">
                                <tt-call="website_blog.post_info"></t>
                            </div>
                        </t>
                        <!--Add'unpublished'badge-->
                        <spant-if="notblog_post.website_published"class="bg-dangersmallpy-1px-2position-absoluteo_not_editable"style="top:0;right:0">unpublished</span>
                    </article>
                </div>
                <!--List-ViewDesign,add<hr>afterpost-->
                <divt-if="opt_blog_list_viewandnotblog_post_last"class="col-12mt-2mb-5px-2"><hr/></div>
            </t>
        </div>
    </div>
</template>


<!--======  Sub-Template:Postslist:PostsHeading ===================-->
<templateid="post_heading">
    <at-attf-href="/blog/#{slug(blog_post.blog_id)}/#{slug(blog_post)}"
       t-field="blog_post.name"
       t-attf-class="d-blocktext-resettext-decoration-noneo_blog_post_titlemy-0#{'h3'ifopt_blog_list_viewelse('h5'ifopt_blog_readableelse'h6')}">
       UntitledPost
   </a>

    <divt-if="notopt_posts_loop_show_coverandis_view_active('website_blog.opt_posts_loop_show_author')"class="text-mutedsmallmt-2">
        by<spant-field="blog_post.author_id"/>
    </div>
</template>

<!--======  Sub-Template:Postslist:PostsInfo =======================-->
<templateid="post_info">
    <divclass="d-flexsmallflex-wrapmb-1w-100">
        <divt-attf-class="d-flexflex-wrapalign-items-centerjustify-content-betweenmx-n2#{opt_blog_list_viewand'flex-grow-0w-automw-100'or'flex-grow-1'}">
            <timet-field="blog_post.post_date"class="text-nowrapfont-weight-boldpx-2"t-options='{"format":"MMMd,yyyy"}'/>
            <divt-if="is_view_active('website_blog.opt_posts_loop_show_stats')"class="px-2">
                <bclass="text-nowrap"title="Comments"><iclass="fafa-commenttext-mutedmr-1"/><tt-esc="len(blog_post.message_ids)"/></b>
                <bclass="text-nowrappl-2"title="Views"><iclass="fafa-binocularstext-mutedmr-1"/><tt-esc="blog_post.visits"/></b>
            </div>
            <bt-if="posts_list_show_parent_blog"class="text-nowraptext-truncatepx-2">
                <iclass="fafa-folder-opentext-muted"/>
                <at-attf-href="/blog/#{slug(blog_post.blog_id)}"t-field="blog_post.blog_id"/>
            </b>
        </div>
    </div>
</template>

<!--======  Sub-Template:Postslist:PostsCover ======================-->
<templateid="post_cover_image">
    <tt-if="opt_blog_cards_designandnotopt_blog_list_view"t-set="classes"t-value="'card-img-topmb-2'"/>
    <tt-if="notopt_blog_cards_designandopt_blog_list_view"t-set="classes"t-value="'o_wblog_post_cover_nocard'"/>

    <at-attf-href="/blog/#{slug(blog_post.blog_id)}/#{slug(blog_post)}"
       t-attf-class="text-decoration-noned-block#{classesor'mb-2'}"
       t-att-style="notblog_post.website_publishedand'opacity:0.6;'">

        <tt-call="website.record_cover">
            <tt-set="_record"t-value="blog_post"/>
            <tt-set="additionnal_classes"t-value="'o_list_covero_not_editable'+(notopt_blog_cards_designand'roundedoverflow-hiddenshadowmb-3'or'')"/>

            <tt-if="is_view_active('website_blog.opt_posts_loop_show_author')"t-call="website_blog.post_author">
                <tt-set="additionnal_classes"t-value="'o_wblog_post_list_authoro_list_coverd-flextext-whitew-100o_not_editable'+('p-3h5m-0'ifopt_blog_list_viewelse'px-2pb-2pt-3')"/>
                <tt-set="hide_date"t-value="True"/>
            </t>
        </t>
    </a>
</template>

<!--======  Sub-Template:Postslist:PostsTeaser+Tags =============-->
<templateid="post_teaser">
    <at-attf-href="/blog/#{slug(blog_post.blog_id)}/#{slug(blog_post)}"class="text-resettext-decoration-none">
        <divt-if="opt_blog_list_view"t-field="blog_post.teaser"class="mt-2o_wblog_read_text"/>
        <divt-else=""t-field="blog_post.teaser"t-attf-class="mt-2#{opt_blog_readableand'o_wblog_normalize_font'}"/>
    </a>

    <!--Tags-->
    <divt-if="len(blog_post.tag_ids)"class="o_wblog_post_short_tag_sectiond-flexalign-items-centerflex-wrappt-2">
        <tt-foreach="blog_post.tag_ids"t-as="one_tag">
            <at-attf-href="#{blog_url(tag=tags_list(active_tag_ids,one_tag.id))}"
               t-attf-class="badgemb-2mr-1text-truncate#{one_tag.idinactive_tag_idsand'badge-primary'or'border'}post_link"
               t-att-rel="len(active_tag_ids)and'nofollow'"
               t-esc="one_tag.name"/>
        </t>
    </div>
</template>


<!--  ======================     OPTIONS     =========================== -->
<!--  ==================================================================== -->
<!--(Option)PostsList:ShowCovers-->
<templateid="opt_posts_loop_show_cover"name="Cover"inherit_id="website_blog.posts_loop"active="True"customize_show="True"/>

<!--(Option)PostsList:ShowAuthor-->
<templateid="opt_posts_loop_show_author"name="Author"inherit_id="website_blog.posts_loop"active="True"customize_show="True"/>

<!--(Option)PostsList:ShowPostStats-->
<templateid="opt_posts_loop_show_stats"name="Comments/ViewsStats"inherit_id="website_blog.posts_loop"active="False"customize_show="True"/>

<!--(Option)PostsList:ShowPostTeaser-->
<templateid="opt_posts_loop_show_teaser"name="Teaser&amp;Tags"inherit_id="website_blog.posts_loop"active="True"customize_show="True"/>

</flectra>
