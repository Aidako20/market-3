<?xmlversion="1.0"?>
<flectra>
    <data>
        <recordid="account_invoice_view_form_inherit_payment"model="ir.ui.view">
            <fieldname="name">account.move.view.form.inherit.payment</field>
            <fieldname="model">account.move</field>
            <fieldname="inherit_id"ref="account.view_move_form"/>
            <fieldname="arch"type="xml">
                <!--
                Theusermustcapture/voidtheauthorizedtransactionsbeforeregisteringanewpayment.
                -->
                <xpathexpr="//button[@id='account_invoice_payment_btn']"position="attributes">
                    <attributename="attrs">{'invisible':['|','|','|',('state','!=','posted'),('payment_state','notin',('partial','not_paid')),('move_type','notin',('out_invoice','out_refund','in_invoice','in_refund','out_receipt','in_receipt')),('authorized_transaction_ids','!=',[])]}</attribute>
                </xpath>
                <xpathexpr="//button[@id='account_invoice_payment_btn']"position="after">
                    <fieldname="authorized_transaction_ids"invisible="1"/>
                    <buttonname="payment_action_capture"type="object"
                            string="CaptureTransaction"class="oe_highlight"
                            attrs="{'invisible':['|','|',('move_type','notin',('out_invoice','out_refund','in_invoice','in_refund')),('state','!=','posted'),('authorized_transaction_ids','=',[])]}"/>
                    <buttonname="payment_action_void"type="object"
                            string="VoidTransaction"
                            confirm="Areyousureyouwanttovoidtheauthorizedtransaction?Thisactioncan'tbeundone."
                            attrs="{'invisible':['|','|',('move_type','notin',('out_invoice','out_refund','in_invoice','in_refund')),('state','!=','posted'),('authorized_transaction_ids','=',[])]}"/>
                </xpath>
            </field>
        </record>
    </data>
</flectra>
