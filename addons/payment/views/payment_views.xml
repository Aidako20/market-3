<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <data>

        <recordid="acquirer_form"model="ir.ui.view">
            <fieldname="name">payment.acquirer.form</field>
            <fieldname="model">payment.acquirer</field>
            <fieldname="arch"type="xml">
                <formstring="PaymentAcquirer">
                    <fieldname="fees_implemented"invisible='1'/>
                    <fieldname="token_implemented"invisible='1'/>
                    <fieldname="authorize_implemented"invisible="1"/>
                    <sheet>
                        <fieldname="module_id"invisible="1"/>
                        <fieldname="module_state"invisible="1"/>
                        <fieldname="module_to_buy"invisible="1"/>
                        <fieldname="inbound_payment_method_ids"invisible="1"/>
                        <fieldname="image_128"widget="image"class="oe_avatar"/>
                        <widgetname="web_ribbon"title="Disabled"bg_color="bg-danger"attrs="{'invisible':[('state','!=','disabled')]}"/>
                        <widgetname="web_ribbon"title="TestMode"bg_color="bg-warning"attrs="{'invisible':[('state','!=','test')]}"/>
                        <divclass="oe_title">
                            <h1><fieldname="name"placeholder="Name"/></h1>
                            <divattrs="{'invisible':['|',('module_state','=','installed'),('module_id','=',False)]}">
                                <aattrs="{'invisible':[('module_to_buy','=',False)]}"href="https://flectrahq.com/pricing?utm_source=db&amp;utm_medium=module"class="btnbtn-info"role="button">Upgrade</a>
                                <buttonattrs="{'invisible':[('module_to_buy','=',True)]}"type="object"class="btnbtn-primary"name="button_immediate_install"string="Install"/>
                            </div>
                        </div>
                        <divattrs="{'invisible':['|',('module_state','=','installed'),('module_id','=',False)]}">
                            <divclass="o_payment_acquirer_desc">
                                <fieldname="description"/>
                            </div>
                        </div>
                        <group>
                            <groupname="payment_state">
                                <fieldname="provider"groups="base.group_no_one"attrs="{'invisible':[('module_id','!=',False),('module_state','!=','installed')]}"/>
                                <fieldname="state"widget="radio"attrs="{'invisible':[('module_state','=','uninstalled')]}"/>
                                <fieldname="company_id"groups="base.group_multi_company"options='{"no_open":True}'/>
                            </group>
                        </group>
                        <notebookattrs="{'invisible':['&amp;',('module_id','!=',False),('module_state','!=','installed')]}">
                            <pagestring="Credentials"name="acquirer_credentials"attrs="{'invisible':[('provider','=','manual')]}">
                                <groupname="acquirer">
                                </group>
                            </page>
                            <pagestring="Configuration"name="configuration">
                                <groupname="acquirer_config">
                                    <groupstring="PaymentForm"name="payment_form">
                                        <fieldname="display_as"placeholder="Ifnotdefined,theacquirernamewillbeused."/>
                                        <fieldname="payment_icon_ids"widget="many2many_tags"/>
                                        <fieldname="save_token"widget="radio"attrs="{'invisible':['|',('token_implemented','=',False),('payment_flow','=','s2s')]}"/>
                                        <fieldname="capture_manually"attrs="{'invisible':[('authorize_implemented','=',False)]}"/>
                                        <fieldname="payment_flow"widget="radio"attrs="{'invisible':[('token_implemented','=',False)]}"/>
                                        <fieldname="view_template_id"groups="base.group_no_one"/>
                                        <fieldname="registration_view_template_id"groups="base.group_no_one"attrs="{'invisible':[('payment_flow','!=','s2s')]}"/>
                                        <fieldname="check_validity"attrs="{'invisible':[('payment_flow','!=','s2s')]}"groups="base.group_no_one"/>
                                        <fieldname="qr_code"attrs="{'invisible':[('provider','!=','transfer')]}"/>
                                    </group>
                                    <groupstring="Availability"name="availability">
                                        <fieldname="country_ids"widget="many2many_tags"placeholder="Selectcountries.Leaveemptytouseeverywhere."/>
                                    </group>
                                    <groupstring="PaymentFollowup"name="payment_followup">
                                        <fieldname="journal_id"context="{'default_type':'bank'}"
                                          attrs="{'required':[('state','!=','disabled'),('provider','notin',['manual','transfer'])]}"/>
                                    </group>
                                </group>
                            </page>
                            <pagestring="Fees"name="fees"attrs="{'invisible':[('fees_implemented','=',False)]}">
                                <groupname="payment_fees">
                                    <fieldname="fees_active"/>
                                    <fieldname="fees_dom_fixed"attrs="{'invisible':[('fees_active','=',False)]}"/>
                                    <fieldname="fees_dom_var"attrs="{'invisible':[('fees_active','=',False)]}"/>
                                    <fieldname="fees_int_fixed"attrs="{'invisible':[('fees_active','=',False)]}"/>
                                    <fieldname="fees_int_var"attrs="{'invisible':[('fees_active','=',False)]}"/>
                                </group>
                            </page>
                            <pagestring="Messages"
                                name="messages"
                                attrs="{'invisible':[('module_id','=',True),('module_state','!=','installed')]}">
                                <group>
                                    <fieldname="pre_msg"/>
                                    <fieldname="auth_msg"attrs="{'invisible':[('authorize_implemented','=',False)]}"/>
                                    <fieldname="pending_msg"/>
                                    <fieldname="done_msg"/>
                                    <fieldname="cancel_msg"/>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>


        <!--AcquirerKanbanView-->
        <recordid="acquirer_kanban"model="ir.ui.view">
            <fieldname="name">payment.acquirer.kanban</field>
            <fieldname="model">payment.acquirer</field>
            <fieldname="arch"type="xml">
                <kanbanquick_create="false"create="true"class="o_kanban_payment_acquirero_kanban_dashboard">
                    <fieldname="id"/>
                    <fieldname="name"/>
                    <fieldname="description"/>
                    <fieldname="provider"/>
                    <fieldname="module_id"/>
                    <fieldname="module_state"/>
                    <fieldname="module_to_buy"/>
                    <fieldname="color"/>
                    <templates>
                        <tt-name="kanban-box">
                            <tt-set="installed"t-value="!record.module_id.value||(record.module_id.value&amp;&amp;record.module_state.raw_value==='installed')"/>
                            <tt-set="to_buy"t-value="record.module_to_buy.raw_value===true"/>
                            <divt-attf-class="oe_kanban_global_click#{kanban_color(record.color.raw_value)}">
                                <divclass="o_payment_acquirer_desc">
                                    <divclass="o_kanban_image">
                                        <imgtype="open"t-att-src="kanban_image('payment.acquirer','image_128',record.id.raw_value)"alt="Acquirer"/>
                                    </div>
                                    <h3class="mt4"><tt-esc="record.name.value"/></h3>
                                    <tt-if="record.description.raw_value"t-raw="record.description.raw_value"/>
                                </div>
                                <divclass="o_payment_acquirer_bottom">
                                    <tt-if="installed">
                                        <fieldname="state"widget="label_selection"options="{'classes':{'enabled':'success','test':'warning','disabled':'danger'}}"/>
                                    </t>
                                    <buttont-if="!installedand!selection_modeand!to_buy"type="object"class="btnbtn-secondaryfloat-right"name="button_immediate_install">Install</button>
                                    <tt-if="!installedandto_buy">
                                        <buttonhref="https://flectrahq.com/pricing?utm_source=db&amp;utm_medium=module"class="btnbtn-infobtn-smfloat_right">Upgrade</button>
                                        <spanclass="badgebadge-primaryoe_inlineo_enterprise_label">Enterprise</span>
                                    </t>
                                    <buttont-if="installedandrecord.state.raw_value=='disabled'and!selection_mode"type="edit"class="btnbtn-primaryfloat-right">Activate</button>
                                    <buttont-if="installedandrecord.state.raw_valuein['enabled','test']and!selection_mode"type="edit"class="btnbtn-primaryfloat-right">Configure</button>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <recordid="acquirer_list"model="ir.ui.view">
            <fieldname="name">payment.acquirer.list</field>
            <fieldname="model">payment.acquirer</field>
            <fieldname="arch"type="xml">
                <treestring="PaymentAcquirers">
                    <fieldname="sequence"widget="handle"/>
                    <fieldname="name"/>
                    <fieldname="provider"/>
                    <fieldname="state"/>
                    <fieldname="country_ids"widget="many2many_tags"optional="hide"/>
                    <fieldname="company_id"groups="base.group_multi_company"/>
                </tree>
            </field>
        </record>

        <recordid="acquirer_search"model="ir.ui.view">
            <fieldname="name">payment.acquirer.search</field>
            <fieldname="model">payment.acquirer</field>
            <fieldname="arch"type="xml">
                <search>
                    <fieldname="name"string="Acquirer"filter_domain="['|',('name','ilike',self),('description','ilike',self)]"/>
                    <fieldname="provider"/>
                    <filtername="acquirer_installed"string="Installed"domain="[('provider','!=','manual')]"/>
                    <groupexpand="0"string="GroupBy">
                        <filterstring="Provider"name="provider"domain="[]"context="{'group_by':'provider'}"/>
                        <filterstring="State"name="state"domain="[]"context="{'group_by':'state'}"/>
                    </group>
                </search>
            </field>
        </record>

        <recordid="action_payment_acquirer"model="ir.actions.act_window">
            <fieldname="name">PaymentAcquirers</field>
            <fieldname="res_model">payment.acquirer</field>
            <fieldname='view_mode'>kanban,tree,form</field>
            <fieldname="help"type="html">
                <pclass="o_view_nocontent_smiling_face">
                    Createanewpaymentacquirer
                </p>
            </field>
        </record>

        <menuitem
            action='action_payment_acquirer'
            id='payment_acquirer_menu'
            parent='account.root_payment_menu'
            sequence='10'/>

        <!--Paymenttransactions-->
        <recordid="transaction_form"model="ir.ui.view">
            <fieldname="name">payment.transaction.form</field>
            <fieldname="model">payment.transaction</field>
            <fieldname="arch"type="xml">
                <formstring="PaymentTransactions"create="false"edit="false">
                    <header>
                        <buttontype="object"name="action_capture"states="authorized"string="CaptureTransaction"class="oe_highlight"/>
                        <buttontype="object"name="action_void"states="authorized"string="VoidTransaction"
                                confirm="Areyousureyouwanttovoidtheauthorizedtransaction?Thisactioncan'tbeundone."/>
                        <fieldname="state"widget="statusbar"/>
                    </header>
                    <sheet>
                        <divclass="oe_button_box"name="button_box">
                            <buttonname="action_view_invoices"type="object"
                                    class="oe_stat_button"icon="fa-money"
                                    attrs="{'invisible':[('invoice_ids_nbr','=',0)]}">
                                <fieldname="invoice_ids_nbr"widget="statinfo"string="Invoice(s)"/>
                            </button>
                        </div>
                        <group>
                            <group>
                                <fieldname="reference"/>
                                <fieldname="payment_id"/>
                                <labelfor="amount"/>
                                <divclass="o_row">
                                    <fieldname="amount"/>
                                    <fieldname="currency_id"options="{'no_open':True,'no_create':True}"/>
                                </div>
                                <fieldname="fees"readonly="1"/>
                                <labelfor="partner_id"/>
                                <div>
                                    <fieldname="partner_id"context="{'show_address':1}"options="{'always_reload':True}"/>
                                    <divname="partner_details"class="o_address_format"attrs="{'invisible':[('partner_id','!=',False)]}">
                                        <fieldname="partner_name"placeholder="Name"attrs="{'readonly':[('partner_id','!=',False)]}"class="o_address_street"/>
                                        <fieldname="partner_address"placeholder="Address"attrs="{'readonly':[('partner_id','!=',False)]}"class="o_address_street"/>
                                        <fieldname="partner_city"placeholder="City"attrs="{'readonly':[('partner_id','!=',False)]}"class="o_address_city"/>
                                        <fieldname="partner_zip"placeholder="ZIP"attrs="{'readonly':[('partner_id','!=',False)]}"class="o_address_zip"/>
                                        <fieldname="partner_country_id"placeholder="Country"attrs="{'readonly':[('partner_id','!=',False)]}"class="o_address_country"/>
                                        <fieldname="partner_lang"attrs="{'readonly':[('partner_id','!=',False)]}"class="o_address_street"/>
                                        <fieldname="partner_email"placeholder="E-mail"attrs="{'readonly':[('partner_id','!=',False)]}"class="o_address_street"/>
                                    </div>
                                </div>
                            </group>
                            <group>
                                <fieldname="acquirer_id"/>
                                <fieldname="provider"invisible="1"/>
                                <fieldname="payment_token_id"options="{'no_create':True}"/>
                                <fieldname="acquirer_reference"readonly="1"/>
                                <fieldname="date"/>
                            </group>
                        </group>
                        <groupstring="Message">
                            <fieldname="state_message"nolabel="1"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <recordid="transaction_list"model="ir.ui.view">
            <fieldname="name">payment.transaction.list</field>
            <fieldname="model">payment.transaction</field>
            <fieldname="arch"type="xml">
                <treestring="PaymentTransactions"create="false">
                    <fieldname="reference"/>
                    <fieldname="create_date"/>
                    <fieldname="acquirer_id"/>
                    <fieldname="partner_id"/>
                    <fieldname="partner_name"/>
                    <fieldname="amount"/>
                    <fieldname="fees"/>
                    <fieldname="state"/>
                </tree>
            </field>
        </record>

        <recordid="transaction_view_kanban"model="ir.ui.view">
            <fieldname="name">payment.transaction.kanban</field>
            <fieldname="model">payment.transaction</field>
            <fieldname="arch"type="xml">
                <kanbanclass="o_kanban_mobile"create="false">
                    <templates>
                        <tt-name="kanban-box">
                            <divt-attf-class="oe_kanban_contentoe_kanban_global_click">
                                <divclass="row">
                                    <divclass="col-6">
                                        <strong><fieldname="reference"/></strong>
                                    </div>
                                    <divclass="col-6">
                                        <span><fieldname="partner_name"/></span>
                                    </div>
                                    <divclass="col-6">
                                        <spanclass="float-right">
                                            <fieldname="amount"widget="monetary"/>
                                            <fieldname="currency_id"invisible="1"/>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <recordid="transaction"model="ir.ui.view">
            <fieldname="name">payment.transaction.search</field>
            <fieldname="model">payment.transaction</field>
            <fieldname="arch"type="xml">
                <search>
                    <fieldname="reference"/>
                    <fieldname="acquirer_id"/>
                    <fieldname="partner_id"/>
                    <fieldname="partner_name"/>
                </search>
            </field>
        </record>

        <recordid="action_payment_transaction"model="ir.actions.act_window">
            <fieldname="name">PaymentTransactions</field>
            <fieldname="res_model">payment.transaction</field>
            <fieldname='view_mode'>tree,kanban,form</field>
            <fieldname="help"type="html">
              <pclass="o_view_nocontent_smiling_face">
                Createanewpaymenttransaction
              </p>
            </field>
        </record>

        <menuitem
            action='action_payment_transaction'
            id='payment_transaction_menu'
            parent='account.root_payment_menu'
            groups="base.group_no_one"
            sequence='20'/>

        <!--PaymentTokens-->
        <recordmodel='ir.ui.view'id='payment_token_tree_view'>
            <fieldname='name'>payment.token.tree</field>
            <fieldname='model'>payment.token</field>
            <fieldname='arch'type='xml'>
                <treestring='PaymentTokens'>
                    <fieldname="name"/>
                    <fieldname="active"/>
                    <fieldname='partner_id'/>
                    <fieldname='acquirer_id'readonly='1'/>
                    <fieldname='acquirer_ref'readonly='1'/>
                </tree>
            </field>
        </record>

        <recordid='payment_token_view_search'model='ir.ui.view'>
            <fieldname='name'>payment.token.search</field>
            <fieldname='model'>payment.token</field>
            <fieldname='arch'type='xml'>
                <searchstring='PaymentTokens'>
                    <fieldname='partner_id'/>
                    <separator/>
                    <filterstring="Archived"name="inactive"domain="[('active','=',False)]"/>
                </search>
            </field>
        </record>

        <recordid="action_payment_tx_ids"model="ir.actions.act_window">
            <fieldname="name">PaymentTransactions</field>
            <fieldname="res_model">payment.transaction</field>
            <fieldname="view_mode">tree,form</field>
            <fieldname="domain">[('payment_token_id','=',active_id)]</field>
            <fieldname="context">{'create':False}</field>
        </record>

        <recordmodel='ir.ui.view'id='payment_token_form_view'>
            <fieldname='name'>payment.token.form</field>
            <fieldname='model'>payment.token</field>
            <fieldname='arch'type='xml'>
                <formstring='PaymentTokens'create='false'editable='bottom'>
                    <sheet>
                        <divclass="oe_button_box"name="button_box">
                            <buttonclass="oe_stat_button"name="%(action_payment_tx_ids)d"
                                type="action"icon="fa-money"string="Payments">
                            </button>
                        </div>
                        <group>
                            <fieldname="name"/>
                            <fieldname='partner_id'/>
                        </group>
                        <group>
                            <fieldname="active"widget='boolean_toggle'/>
                            <fieldname='acquirer_id'/>
                            <fieldname='acquirer_ref'/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <recordmodel='ir.actions.act_window'id='payment_token_action'>
            <fieldname='name'>SavedPaymentData</field>
            <fieldname='res_model'>payment.token</field>
            <fieldname='view_mode'>tree,form</field>
            <fieldname="help"type="html">
                <pclass="o_view_nocontent_smiling_face">
                    Createasavedpaymentdata
                </p>
            </field>
        </record>

        <menuitem
            action='payment_token_action'
            id='payment_token_menu'
            parent='account.root_payment_menu'
            groups='base.group_no_one'/>

        <!--Paymenticons-->
        <recordmodel="ir.ui.view"id="payment_icon_form_view">
            <fieldname="name">payment.icon.form</field>
            <fieldname="model">payment.icon</field>
            <fieldname="arch"type="xml">
                <formstring="PaymentIcon">
                    <sheet>
                        <fieldname="image"widget="image"class="oe_avatar"/>
                        <divclass="oe_title">
                            <h1><fieldname="name"placeholder="Name"/></h1>
                        </div>
                        <notebook>
                            <pagestring="Acquirerslist"name="acquirers">
                                <fieldnolabel="1"name="acquirer_ids"/>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <recordid="action_payment_icon"model="ir.actions.act_window">
            <fieldname="name">PaymentIcons</field>
            <fieldname="res_model">payment.icon</field>
            <fieldname="view_mode">tree,form</field>
            <fieldname="help"type="html">
                <pclass="o_view_nocontent_smiling_face">
                    Createapaymenticon
                </p>
            </field>
        </record>

        <menuitem
            action="action_payment_icon"
            id="payment_icon_menu"
            parent="account.root_payment_menu"
            groups="base.group_no_one"/>
    </data>
</flectra>
