<?xmlversion="1.0"encoding="utf-8"?>
<flectra>

    <!--Commonformviewbetweenthecouponprogramsandthepromotionprograms-->
    <recordid="coupon_program_view_form_common"model="ir.ui.view">
        <fieldname="name">coupon.program.common.form</field>
        <fieldname="model">coupon.program</field>
        <fieldname="arch"type="xml">
            <formstring="CouponProgram">
                <sheet>
                    <divclass="oe_button_box"name="button_box"/>
                    <widgetname="web_ribbon"title="Archived"bg_color="bg-danger"attrs="{'invisible':[('active','=',True)]}"/>
                    <divname="title"class="oe_left">
                    </div>
                    <group>
                        <groupname="conditions"string="Conditions">
                            <fieldname="active"invisible="1"/>
                            <fieldname="program_type"invisible="1"/>
                            <fieldname="rule_products_domain"placeholder="Selectproduct"widget="domain"options="{'model':'product.product','in_dialog':true}"/>
                            <labelstring="Quantity"for="rule_min_quantity"attrs="{'invisible':[('rule_products_domain','=',False)]}"/>
                            <divattrs="{'invisible':[('rule_products_domain','=',False)]}">
                                <fieldname="rule_min_quantity"class="oe_inline"/>
                            </div>
                            <labelstring="MinimumPurchaseOf"for="rule_minimum_amount"/>
                            <divname="rule_minimum_amount"class="o_row">
                                <fieldname="currency_id"invisible="1"/>
                                <fieldname="rule_minimum_amount"widget='monetary'options="{'currency_field':'currency_id'}"/>
                                <fieldname="rule_minimum_amount_tax_inclusion"required="1"/>
                            </div>
                            <fieldname="company_id"placeholder="Selectcompany"groups="base.group_multi_company"required="1"></field>
                        </group>
                        <groupname="validity"string="Validity"/>
                    </group>
                    <groupstring="Rewards">
                        <groupname='reward'>
                            <fieldname="reward_type"string="Reward"widget="radio"/>
                            <fieldname="discount_line_product_id"attrs="{'invisible':[('discount_line_product_id','=',False)]}"readonly="True"/>
                        </group>
                        <group>
                            <fieldname="reward_product_id"attrs="{'invisible':[('reward_type','in',('discount','free_shipping'))],'required':[('reward_type','=','product')]}"placeholder="Selectrewardproduct"/>
                            <labelstring="Quantity"for="reward_product_quantity"attrs="{'invisible':['|',('reward_type','in',('discount','free_shipping')),('reward_product_id','=',False)]}"/>
                            <divattrs="{'invisible':['|',('reward_type','in',('discount','free_shipping')),('reward_product_id','=',False)]}">
                                <fieldname="reward_product_quantity"class="oe_inline"/>
                                <fieldname="reward_product_uom_id"class="oe_inline"/>
                            </div>
                            <labelstring="ApplyDiscount"for="discount_type"attrs="{'invisible':[('reward_type','in',('product','free_shipping'))]}"/>
                            <divattrs="{'invisible':[('reward_type','in',('product','free_shipping'))]}">
                                <fieldname="discount_type"class="oe_inline"attrs="{'required':[('reward_type','=','discount')]}"/>
                                <fieldname="discount_percentage"attrs="{'invisible':[('discount_type','!=','percentage')],'required':[('discount_type','=','percentage')]}"class="oe_inline"/>
                                <spanattrs="{'invisible':[('discount_type','!=','percentage')],'required':[('discount_type','=','percentage')]}"class="oe_inline">%</span>
                            </div>
                            <labelstring="FixedAmount"for="discount_fixed_amount"attrs="{'invisible':['|',('discount_type','!=','fixed_amount'),('reward_type','!=','discount')]}"/>
                            <divattrs="{'invisible':['|',('discount_type','!=','fixed_amount'),('reward_type','!=','discount')]}">
                                <fieldname="discount_fixed_amount"class="oe_inline"attrs="{'required':[('discount_type','=','fixed_amount')]}"widget='monetary'options="{'currency_field':'currency_id'}"/>
                            </div>
                            <fieldname="discount_apply_on"attrs="{'invisible':
                            ['|',('reward_type','in',('product','free_shipping')),('discount_type','!=','percentage')]}"widget="radio"/>
                            <fieldname="discount_specific_product_ids"widget='many2many_tags'attrs="{'invisible':['|','|',('discount_apply_on','!=','specific_products'),('discount_type','!=','percentage'),('reward_type','in',('product','free_shipping'))],'required':[('reward_type','=','discount'),('discount_apply_on','=','specific_products'),('discount_type','=','percentage')]}"placeholder="Selectproducts"/>
                            <labelfor="discount_max_amount"string="MaxDiscountAmount"attrs="{'invisible':['|',('reward_type','in',('product','free_shipping')),('discount_type','!=','percentage')]}"/>
                            <divattrs="{'invisible':['|',('reward_type','in',('product','free_shipping')),('discount_type','!=','percentage')]}">
                                <fieldname="discount_max_amount"class="oe_inline"widget='monetary'options="{'currency_field':'currency_id'}"/>
                                <spanclass="oe_grey">if0,nolimit</span>
                            </div>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!--CouponProgram-->

    <recordid="coupon_program_view_coupon_program_form"model="ir.ui.view">
        <fieldname="name">coupon.program.form</field>
        <fieldname="model">coupon.program</field>
        <fieldname="inherit_id"ref="coupon_program_view_form_common"/>
        <fieldname="mode">primary</field>
        <fieldname="arch"type="xml">
            <xpathexpr="//sheet"position="before">
                <header>
                    <buttontype="action"name="%(coupon.coupon_generate_action)d"
                            string="GenerateCoupon"attrs="{'invisible':[('active','=',False)]}"/>
                    <buttontype="action"name="%(coupon.coupon_generate_action)d"
                            string="GenerateCoupon"attrs="{'invisible':[('active','=',True)]}"class="oe_highlight"/>
                </header>
            </xpath>
            <xpathexpr="//div[@name='button_box']"position="inside">
                <buttonclass="oe_stat_button"type="action"icon="fa-ticket"name="%(coupon.coupon_action)d">
                    <fieldname="coupon_count"string="Coupons"widget="statinfo"/>
                </button>
            </xpath>
            <xpathexpr="//div[@name='title']"position="inside">
                <labelclass="oe_edit_only"for="name"string="CouponProgramName"/>
                <h1><fieldname="name"class="oe_title"placeholder="CouponProgramName..."height="20px"/></h1>
            </xpath>
            <xpathexpr="//group[@name='validity']"position="inside">
                <labelfor="validity_duration"string="ValidityDuration"/>
                <div>
                    <fieldname="validity_duration"class="oe_inline"/>
                    <spanclass="o_form_labeloe_inline">Days</span><spanclass="oe_grey">if0,infiniteuse</span>
                </div>
            </xpath>
        </field>
    </record>

    <recordid="coupon_program_view_tree"model="ir.ui.view">
        <fieldname="name">coupon.program.tree</field>
        <fieldname="model">coupon.program</field>
        <fieldname="arch"type="xml">
            <treesample="1">
                <fieldname="sequence"widget="handle"/>
                <fieldname="name"/>
                <fieldname="active"/>
                <fieldname="company_id"groups="base.group_multi_company"/>
            </tree>
        </field>
    </record>

    <recordid="coupon_program_view_search"model="ir.ui.view">
        <fieldname="name">coupon.program.search</field>
        <fieldname="model">coupon.program</field>
        <fieldname="arch"type="xml">
            <search>
                <fieldname="name"/>
                <filterstring="Expired"name="expired"domain="[('rule_date_to','&lt;',datetime.datetime.now())]"help="ExpiredPrograms"/>
                <separator/>
                <filterstring="Archived"name="inactive"domain="[('active','=',False)]"/>
            </search>
        </field>
    </record>

    <recordid="view_coupon_program_kanban"model="ir.ui.view">
        <fieldname="name">coupon.program.kanban</field>
        <fieldname="model">coupon.program</field>
        <fieldname="arch"type="xml">
            <kanbanclass="o_kanban_mobile"sample="1">
               <fieldname="name"/>
                <fieldname="active"/>
                <templates>
                    <tt-name="kanban-box">
                        <divt-attf-class="oe_kanban_cardoe_kanban_global_click">
                            <divclass="text-center">
                               <strong><span><fieldname="name"/></span></strong>
                            </div>
                            <hrclass="mt4mb4"/>
                            <divclass="row">
                                <divclass="col-4text-centercoupon-count-label"><strong>Coupons</strong></div>
                                <divclass="col-4text-centeractive-label"><strong>Active</strong></div>
                                <divclass="col-4text-centercoupon-count-value"><fieldname="coupon_count"/></div>
                                <divclass="col-4text-centeractive-value">
                                    <fieldname="active"widget="boolean"/>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <recordid="coupon_program_action_coupon_program"model="ir.actions.act_window">
        <fieldname="name">CouponPrograms</field>
        <fieldname="res_model">coupon.program</field>
        <fieldname="view_mode">tree,kanban,form</field>
        <fieldname="search_view_id"ref="coupon_program_view_search"/>
        <fieldname="view_ids"eval="[
            (5,0,0),
            (0,0,{'view_mode':'tree'}),
            (0,0,{'view_mode':'form','view_id':ref('coupon_program_view_coupon_program_form')})]"/>
        <fieldname="domain">[('program_type','=','coupon_program')]</field>
        <fieldname="context">{
            'default_program_type':'coupon_program',
            'promo_code_usage':'code_needed',
            'search_default_opened':1
            }</field>
        <fieldname="help"type="html">
            <pclass="o_view_nocontent_smiling_face">
                Createanewcouponprogram
            </p><p>
                Generateandsharecouponcodeswithyourcustomerstogetdiscountsorfreeproducts.
             </p>
        </field>
    </record>

    <!--PromotionProgram-->

    <recordid="coupon_program_view_promo_program_form"model="ir.ui.view">
        <fieldname="name">coupon.promotion.program.form</field>
        <fieldname="model">coupon.program</field>
        <fieldname="inherit_id"ref="coupon_program_view_form_common"/>
        <fieldname="mode">primary</field>
        <fieldname="arch"type="xml">
            <xpathexpr="//div[@name='title']"position="inside">
                <labelclass="oe_edit_only"for="name"string="PromotionProgramName"/>
                <h1><fieldname="name"class="oe_title"placeholder="PromotionProgramName..."height="20px"/></h1>
            </xpath>
            <xpathexpr="//div[@name='button_box']"position="inside">
                <buttonclass="oe_stat_button"type="action"icon="fa-ticket"name="%(coupon.coupon_action)d"attrs="{'invisible':[('promo_applicability','=','on_current_order')]}">
                    <fieldname="coupon_count"string="Coupons"widget="statinfo"/>
                </button>
            </xpath>
            <xpathexpr="//group[@name='reward']"position="before">
                <fieldname="sequence"invisible="1"/>
            </xpath>
            <xpathexpr="//field[@name='program_type']"position="after">
                <fieldname="rule_partners_domain"placeholder="Selectcustomer"widget="domain"options="{'model':'res.partner','in_dialog':true}"/>
            </xpath>
            <xpathexpr="//div[@name='rule_minimum_amount']"position="after">
                <fieldname="promo_code_usage"widget="radio"/>
                <fieldname="promo_code"attrs="{'required':[('promo_code_usage','=','code_needed')],'invisible':[('promo_code_usage','=','no_code_needed')]}"/>
            </xpath>
            <xpathexpr="//group[@name='validity']"position="inside">
                <labelstring="ApplyonFirst"for="maximum_use_number"class="oe_inline"/>
                <div>
                    <fieldname="maximum_use_number"class="oe_inline"/>
                    <span>Orders</span>
                    <spanclass="oe_grey">if0,infiniteuse</span>
                </div>
                <fieldname="rule_date_from"class="oe_inline"/>
                <fieldname="rule_date_to"class="oe_inline"/>
            </xpath>
            <xpathexpr="//group[@name='reward']"position="before">
                <group>
                    <fieldname="promo_applicability"widget="radio"/>
                </group>
            </xpath>
        </field>
    </record>

    <recordid="coupon_program_view_promo_program_tree"model="ir.ui.view">
        <fieldname="name">coupon.promotion.program.tree</field>
        <fieldname="model">coupon.program</field>
        <fieldname="arch"type="xml">
            <tree>
                <fieldname="sequence"widget="handle"/>
                <fieldname="name"/>
                <fieldname="promo_code_usage"/>
                <fieldname="active"/>
            </tree>
        </field>
    </record>

    <recordid="coupon_program_view_promo_program_search"model="ir.ui.view">
        <fieldname="name">coupon.promotion.program.search</field>
        <fieldname="model">coupon.program</field>
        <fieldname="arch"type="xml">
            <search>
                <fieldname="name"/>
                <separator/>
                <filterstring="Archived"name="inactive"domain="[('active','=',False)]"/>
            </search>
        </field>
    </record>

    <recordid="coupon_program_action_promo_program"model="ir.actions.act_window">
        <fieldname="name">PromotionPrograms</field>
        <fieldname="res_model">coupon.program</field>
        <fieldname="view_mode">tree,kanban,form</field>
        <fieldname="view_ids"eval="[
            (5,0,0),
            (0,0,{'view_mode':'tree'}),
            (0,0,{'view_mode':'form','view_id':ref('coupon_program_view_promo_program_form')})]"/>
        <fieldname="search_view_id"ref="coupon_program_view_promo_program_search"/>
        <fieldname="domain">[('program_type','=','promotion_program')]</field>
        <fieldname="context">{
            'default_program_type':'promotion_program',
            'default_promo_code_usage':'no_code_needed',
            'default_validity_duration':0,
            'search_default_opened':1
            }</field>
        <fieldname="help"type="html">
            <pclass="o_view_nocontent_smiling_face">
                Createanewpromotionprogram
            </p><p>
                Builduppromotionprogramstoattractmorecustomerswithdiscounts,freeproducts,freedelivery,etc.
                Youcansharepromotioncodesorgrantthepromotionsautomaticallyifsomeconditionsaremet.
             </p>
        </field>
    </record>
</flectra>
