<?xmlversion="1.0"encoding="utf-8"?>
<flectra>

        <!--Topmenuitem-->
        <menuitemname="Purchase"
            id="menu_purchase_root"
            groups="group_purchase_manager,group_purchase_user"
            web_icon="purchase,static/description/icon.png"
            sequence="25"/>

        <menuitemid="menu_procurement_management"name="Orders"
            parent="menu_purchase_root"sequence="1"/>

        <!--Suppliermenu-->
        <menuitemid="menu_procurement_management_supplier_name"name="Vendors"
            parent="menu_procurement_management"
            action="account.res_partner_action_supplier"sequence="15"/>

        <menuitemid="menu_purchase_config"name="Configuration"parent="menu_purchase_root"sequence="100"groups="group_purchase_manager"/>

        <menuitem
           action="product.product_supplierinfo_type_action"id="menu_product_pricelist_action2_purchase"
           parent="menu_purchase_config"sequence="1"/>

        <menuitem
            id="menu_product_in_config_purchase"name="Products"
            parent="menu_purchase_config"sequence="30"/>

        <recordmodel="ir.ui.menu"id="menu_product_in_config_purchase">
            <fieldname="groups_id"eval="False"/>
        </record>

        <menuitemid="menu_product_attribute_action"
            action="product.attribute_action"name="ProductAttributes"
            parent="purchase.menu_product_in_config_purchase" groups="product.group_product_variant"sequence="1"/>

        <menuitem
            action="product.product_category_action_form"id="menu_product_category_config_purchase"
            parent="purchase.menu_product_in_config_purchase"sequence="3"/>

         <menuitem
            id="menu_unit_of_measure_in_config_purchase"name="UnitsofMeasures"
            parent="menu_purchase_config"sequence="40"groups="uom.group_uom"/>

        <menuitem
              action="uom.product_uom_form_action"id="menu_purchase_uom_form_action"
              parent="purchase.menu_unit_of_measure_in_config_purchase"sequence="5"groups="uom.group_uom"/>

        <menuitem
             action="uom.product_uom_categ_form_action"id="menu_purchase_uom_categ_form_action"
             parent="purchase.menu_unit_of_measure_in_config_purchase"sequence="10"groups="uom.group_uom"/>

    <!--ProductsControlMenu-->
    <menuitemid="menu_purchase_products"name="Products"parent="purchase.menu_purchase_root"sequence="5"/>

    <recordid="product_normal_action_puchased"model="ir.actions.act_window">
        <fieldname="name">Products</field>
        <fieldname="type">ir.actions.act_window</field>
        <fieldname="res_model">product.template</field>
        <fieldname="view_mode">kanban,tree,form,activity</field>
        <fieldname="context">{"search_default_filter_to_purchase":1,"purchase_product_template":1}</field>
        <fieldname="search_view_id"ref="product.product_template_search_view"/>
        <fieldname="view_id"eval="False"/><!--Forceempty-->
        <fieldname="help"type="html">
          <pclass="o_view_nocontent_smiling_face">
            Noproductfound.Let'screateone!
          </p><p>
            Youmustdefineaproductforeverythingyousellorpurchase,
            whetherit'sastorableproduct,aconsumableoraservice.
          </p>
        </field>
    </record>

      <!--Productmenu-->
      <menuitemname="Products"id="menu_procurement_partner_contact_form"action="product_normal_action_puchased"
          parent="menu_purchase_products"sequence="20"/>

        <recordid="product_product_action"model="ir.actions.act_window">
            <fieldname="name">ProductVariants</field>
            <fieldname="res_model">product.product</field>
            <fieldname="view_mode">tree,kanban,form,activity</field>
            <fieldname="search_view_id"ref="product.product_search_form_view"/>
            <fieldname="context">{"search_default_filter_to_purchase":1}</field>
            <fieldname="help"type="html">
              <pclass="o_view_nocontent_smiling_face">
                Createanewproductvariant
              </p><p>
                Youmustdefineaproductforeverythingyousellorpurchase,
                whetherit'sastorableproduct,aconsumableoraservice.
              </p>
            </field>
        </record>

        <menuitemid="product_product_menu"name="ProductVariants"action="product_product_action"
            parent="menu_purchase_products"sequence="21"groups="product.group_product_variant"/>

        <recordmodel="ir.ui.view"id="purchase_order_calendar">
            <fieldname="name">purchase.order.calendar</field>
            <fieldname="model">purchase.order</field>
            <fieldname="priority"eval="2"/>
            <fieldname="arch"type="xml">
                <calendarstring="CalendarView"date_start="date_calendar_start"color="partner_id"hide_time="true"event_limit="5"create="false">
                    <fieldname="currency_id"invisible="1"/>
                    <fieldname="partner_ref"/>
                    <fieldname="amount_total"widget="monetary"/>
                    <fieldname="partner_id"filters="1"/>
                </calendar>
            </field>
        </record>
        <recordmodel="ir.ui.view"id="purchase_order_pivot">
            <fieldname="name">purchase.order.pivot</field>
            <fieldname="model">purchase.order</field>
            <fieldname="arch"type="xml">
                <pivotstring="PurchaseOrder"display_quantity="True"sample="1">
                    <fieldname="partner_id"type="row"/>
                    <fieldname="amount_total"type="measure"/>
                </pivot>
            </field>
        </record>
        <recordmodel="ir.ui.view"id="purchase_order_graph">
            <fieldname="name">purchase.order.graph</field>
            <fieldname="model">purchase.order</field>
            <fieldname="arch"type="xml">
                <graphstring="PurchaseOrder"sample="1">
                    <fieldname="partner_id"/>
                    <fieldname="amount_total"type="measure"/>
                </graph>
            </field>
        </record>

        <recordid="purchase_order_form"model="ir.ui.view">
            <fieldname="name">purchase.order.form</field>
            <fieldname="model">purchase.order</field>
            <fieldname="arch"type="xml">
                <formstring="PurchaseOrder"class="o_purchase_order">
                <header>
                    <buttonname="action_rfq_send"states="draft"string="SendbyEmail"type="object"context="{'send_rfq':True}"class="oe_highlight"/>
                    <buttonname="print_quotation"string="PrintRFQ"type="object"states="draft"class="oe_highlight"groups="base.group_user"/>
                    <buttonname="button_confirm"type="object"states="sent"string="ConfirmOrder"class="oe_highlight"id="bid_confirm"/>
                    <buttonname="button_approve"type="object"states='toapprove'string="ApproveOrder"class="oe_highlight"groups="purchase.group_purchase_manager"/>
                    <buttonname="action_create_invoice"string="CreateBill"type="object"class="oe_highlight"context="{'create_bill':True}"attrs="{'invisible':['|',('state','notin',('purchase','done')),('invoice_status','in',('no','invoiced'))]}"/>
                    <buttonname="action_rfq_send"states="sent"string="Re-SendbyEmail"type="object"context="{'send_rfq':True}"/>
                    <buttonname="print_quotation"string="PrintRFQ"type="object"states="sent"groups="base.group_user"/>
                    <buttonname="button_confirm"type="object"states="draft"string="ConfirmOrder"id="draft_confirm"/>
                    <buttonname="action_rfq_send"states="purchase"string="SendPObyEmail"type="object"context="{'send_rfq':False}"/>
                    <buttonname="confirm_reminder_mail"string="ConfirmReceiptDate"type="object"attrs="{'invisible':['|','|',('state','notin',('purchase','done')),('mail_reminder_confirmed','=',True),('date_planned','=',False)]}"groups="base.group_no_one"/>
                    <buttonname="action_create_invoice"string="CreateBill"type="object"context="{'create_bill':True}"attrs="{'invisible':['|','|',('state','notin',('purchase','done')),('invoice_status','notin',('no','invoiced')),('order_line','=',[])]}"/>
                    <buttonname="button_draft"states="cancel"string="SettoDraft"type="object"/>
                    <buttonname="button_cancel"states="draft,toapprove,sent,purchase"string="Cancel"type="object"/>
                    <buttonname="button_done"type="object"string="Lock"states="purchase"/>
                    <buttonname="button_unlock"type="object"string="Unlock"states="done"groups="purchase.group_purchase_manager"/>
                    <fieldname="state"widget="statusbar"statusbar_visible="draft,sent,purchase"readonly="1"/>
                </header>
                <sheet>
                    <divclass="oe_button_box"name="button_box">
                        <buttontype="object" name="action_view_invoice"
                            class="oe_stat_button"
                            icon="fa-pencil-square-o"attrs="{'invisible':['|',('invoice_count','=',0),('state','in',('draft','sent','toapprove'))]}">
                            <fieldname="invoice_count"widget="statinfo"string="VendorBills"/>
                            <fieldname='invoice_ids'invisible="1"/>
                        </button>
                    </div>
                    <divclass="oe_title">
                        <spanclass="o_form_label"attrs="{'invisible':[('state','notin',('draft','sent'))]}">RequestforQuotation</span>
                        <spanclass="o_form_label"attrs="{'invisible':[('state','in',('draft','sent'))]}">PurchaseOrder</span>
                        <h1>
                            <fieldname="priority"widget="priority"class="mr-3"/>
                            <fieldname="name"readonly="1"/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <fieldname="partner_id"widget="res_partner_many2one"context="{'res_partner_search_mode':'supplier','show_vat':True}"
                                placeholder="Name,TIN,Email,orReference"
                            />
                            <fieldname="partner_ref"/>
                            <fieldname="currency_id"groups="base.group_multi_currency"force_save="1"/>
                            <fieldname="id"invisible="1"/>
                        </group>
                        <group>
                            <fieldname="date_order"attrs="{'invisible':[('state','in',('purchase','done'))]}"/>
                            <labelfor="date_approve"attrs="{'invisible':[('state','notin',('purchase','done'))]}"/>
                            <divname="date_approve"attrs="{'invisible':[('state','notin',('purchase','done'))]}"class="o_row">
                                <fieldname="date_approve"/>
                                <fieldname="mail_reception_confirmed"invisible="1"/>
                                <spanclass="text-muted"attrs="{'invisible':[('mail_reception_confirmed','=',False)]}">(confirmedbyvendor)</span>
                            </div>
                            <labelfor="date_planned"/>
                            <divname="date_planned_div"class="o_row">
                                <fieldname="date_planned"attrs="{'readonly':[('state','notin',('draft','sent','toapprove','purchase'))]}"/>
                                <fieldname="mail_reminder_confirmed"invisible="1"/>
                                <spanclass="text-muted"attrs="{'invisible':[('mail_reminder_confirmed','=',False)]}">(confirmedbyvendor)</span>
                            </div>
                            <labelfor="receipt_reminder_email"invisible='1'/>
                            <divname="reminder"class="o_row"groups='purchase.group_send_reminder'title="AutomaticallysendaconfirmationemailtothevendorXdaysbeforetheexpectedreceiptdate,askinghimtoconfirmtheexactdate.">
                                <fieldname="receipt_reminder_email"/>
                                <span>Askconfirmation</span>
                                <divclass="o_rowoe_inline"attrs="{'invisible':[('receipt_reminder_email','=',False)]}">
                                    <fieldname="reminder_date_before_receipt"class="oe_inline"/>
                                    day(s)before
                                    <widgetname='toaster_button'button_name="send_reminder_preview"title="Previewthereminderemailbysendingittoyourself."attrs="{'invisible':[('id','=',False)]}"/>
                                </div>
                            </div>
                            <fieldname="origin"attrs="{'invisible':[('origin','=',False)]}"/>
                        </group>
                    </group>
                    <notebook>
                        <pagestring="Products"name="products">
                            <fieldname="order_line"
                                widget="section_and_note_one2many"
                                mode="tree,kanban"
                                context="{'default_state':'draft'}"
                                attrs="{'readonly':[('state','in',('done','cancel'))]}">
                                <treestring="PurchaseOrderLines"editable="bottom">
                                    <control>
                                        <createname="add_product_control"string="Addaproduct"/>
                                        <createname="add_section_control"string="Addasection"context="{'default_display_type':'line_section'}"/>
                                        <createname="add_note_control"string="Addanote"context="{'default_display_type':'line_note'}"/>
                                    </control>
                                    <fieldname="display_type"invisible="1"/>
                                    <fieldname="currency_id"invisible="1"/>
                                    <fieldname="state"invisible="1"readonly="1"/>
                                    <fieldname="product_type"invisible="1"/>
                                    <fieldname="product_uom_category_id"invisible="1"/>
                                    <fieldname="invoice_lines"invisible="1"/>
                                    <fieldname="sequence"widget="handle"/>
                                    <field
                                        name="product_id"
                                        attrs="{
                                            'readonly':[('state','in',('purchase','toapprove','done','cancel'))],
                                            'required':[('display_type','=',False)],
                                        }"
                                        context="{'partner_id':parent.partner_id,'quantity':product_qty,'uom':product_uom,'company_id':parent.company_id}"
                                        force_save="1"domain="[('purchase_ok','=',True),'|',('company_id','=',False),('company_id','=',parent.company_id)]"/>
                                    <fieldname="name"widget="section_and_note_text"/>
                                    <fieldname="date_planned"optional="hide"attrs="{'required':[('display_type','=',False)]}"force_save="1"/>
                                    <fieldname="account_analytic_id"optional="hide"context="{'default_partner_id':parent.partner_id}"groups="analytic.group_analytic_accounting"domain="['|',('company_id','=',False),('company_id','=',parent.company_id)]"/>
                                    <fieldname="analytic_tag_ids"optional="hide"groups="analytic.group_analytic_tags"widget="many2many_tags"options="{'color_field':'color'}"domain="['|',('company_id','=',False),('company_id','=',parent.company_id)]"/>
                                    <fieldname="product_qty"/>
                                    <fieldname="qty_received_manual"invisible="1"/>
                                    <fieldname="qty_received_method"invisible="1"/>
                                    <fieldname="qty_received"string="Received"attrs="{'column_invisible':[('parent.state','notin',('purchase','done'))],'readonly':[('qty_received_method','!=','manual')]}"optional="show"/>
                                    <fieldname="qty_invoiced"string="Billed"attrs="{'column_invisible':[('parent.state','notin',('purchase','done'))]}"optional="show"/>
                                    <fieldname="product_uom"string="UoM"groups="uom.group_uom"
                                        attrs="{
                                            'readonly':[('state','in',('purchase','done','cancel'))],
                                            'required':[('display_type','=',False)]
                                        }"
                                        force_save="1"optional="show"/>
                                    <fieldname="price_unit"attrs="{'readonly':[('invoice_lines','!=',[])]}"/>
                                    <fieldname="taxes_id"widget="many2many_tags"domain="[('type_tax_use','=','purchase'),('company_id','=',parent.company_id)]"context="{'default_type_tax_use':'purchase','search_view_ref':'account.account_tax_view_search'}"options="{'no_create':True}"optional="show"/>
                                    <fieldname="price_subtotal"widget="monetary"/>
                                    <fieldname="price_total"invisible="1"/>
                                    <fieldname="price_tax"invisible="1"/>
                                </tree>
                                <formstring="PurchaseOrderLine">
                                        <fieldname="state"invisible="1"/>
                                        <fieldname="display_type"invisible="1"/>
                                        <groupattrs="{'invisible':[('display_type','!=',False)]}">
                                            <group>
                                                <fieldname="product_uom_category_id"invisible="1"/>
                                                <fieldname="product_id"
                                                       context="{'partner_id':parent.partner_id}"
                                                       widget="many2one_barcode"
                                                       domain="[('purchase_ok','=',True),'|',('company_id','=',False),('company_id','=',parent.company_id)]"
                                                />
                                                <labelfor="product_qty"/>
                                                <divclass="o_row">
                                                    <fieldname="product_qty"/>
                                                    <fieldname="product_uom"groups="uom.group_uom"attrs="{'required':[('display_type','=',False)]}"/>
                                                </div>
                                                <fieldname="qty_received_method"invisible="1"/>
                                                <fieldname="qty_received"string="ReceivedQuantity"attrs="{'invisible':[('parent.state','notin',('purchase','done'))],'readonly':[('qty_received_method','!=','manual')]}"/>
                                                <fieldname="qty_invoiced"string="BilledQuantity"attrs="{'invisible':[('parent.state','notin',('purchase','done'))]}"/>
                                                <fieldname="price_unit"/>
                                                <fieldname="taxes_id"widget="many2many_tags"domain="[('type_tax_use','=','purchase'),('company_id','=',parent.company_id)]"options="{'no_create':True}"/>
                                            </group>
                                            <group>
                                                <fieldname="date_planned"widget="date"attrs="{'required':[('display_type','=',False)]}"/>
                                                <fieldname="account_analytic_id"colspan="2"domain="['|',('company_id','=',False),('company_id','=',parent.company_id)]"groups="analytic.group_analytic_accounting"/>
                                                <fieldname="analytic_tag_ids"groups="analytic.group_analytic_tags"domain="['|',('company_id','=',False),('company_id','=',parent.company_id)]"widget="many2many_tags"options="{'color_field':'color'}"/>
                                            </group>
                                            <groupcolspan="12">
                                            <notebook>
                                                <pagestring="Notes"name="notes">
                                                    <fieldname="name"/>
                                                </page>
                                                <pagestring="InvoicesandIncomingShipments"name="invoices_incoming_shiptments">
                                                    <fieldname="invoice_lines"/>
                                                </page>
                                            </notebook>
                                            </group>
                                        </group>
                                        <labelfor="name"string="SectionName(eg.Products,Services)"attrs="{'invisible':[('display_type','!=','line_section')]}"/>
                                        <labelfor="name"string="Note"attrs="{'invisible':[('display_type','!=','line_note')]}"/>
                                        <fieldname="name"nolabel="1" attrs="{'invisible':[('display_type','=',False)]}"/>
                                 </form>
                                 <kanbanclass="o_kanban_mobile">
                                     <fieldname="name"/>
                                     <fieldname="product_id"/>
                                     <fieldname="product_qty"/>
                                     <fieldname="product_uom"groups="uom.group_uom"/>
                                     <fieldname="price_subtotal"/>
                                     <fieldname="price_tax"invisible="1"/>
                                     <fieldname="price_total"invisible="1"/>
                                     <fieldname="price_unit"/>
                                     <fieldname="display_type"/>
                                     <fieldname="taxes_id"invisible="1"/>
                                     <templates>
                                         <tt-name="kanban-box">
                                             <divt-attf-class="oe_kanban_cardoe_kanban_global_click{{record.display_type.raw_value?'o_is_'+record.display_type.raw_value:''}}">
                                                 <tt-if="!record.display_type.raw_value">
                                                     <divclass="row">
                                                         <divclass="col-8">
                                                             <strong>
                                                                 <spant-esc="record.product_id.value"/>
                                                             </strong>
                                                         </div>
                                                         <divclass="col-4">
                                                             <strong>
                                                                 <spant-esc="record.price_subtotal.value"class="float-righttext-right"/>
                                                             </strong>
                                                         </div>
                                                     </div>
                                                     <divclass="row">
                                                         <divclass="col-12text-muted">
                                                             <span>
                                                                 Quantity:
                                                                 <tt-esc="record.product_qty.value"/>
                                                                 <tt-esc="record.product_uom.value"/>
                                                             </span>
                                                         </div>
                                                     </div>
                                                     <divclass="row">
                                                         <divclass="col-12text-muted">
                                                             <span>
                                                                 UnitPrice:
                                                                 <tt-esc="record.price_unit.value"/>
                                                             </span>
                                                         </div>
                                                     </div>
                                                 </t>
                                                 <div
                                                     t-elif="record.display_type.raw_value==='line_section'||record.display_type.raw_value==='line_note'"
                                                     class="row">
                                                     <divclass="col-12">
                                                         <spant-esc="record.name.value"/>
                                                     </div>
                                                 </div>
                                             </div>
                                         </t>
                                     </templates>
                                 </kanban>
                            </field>
                            <groupclass="oe_subtotal_footeroe_right">
                                <fieldname="amount_untaxed"widget="monetary"options="{'currency_field':'currency_id'}"/>
                                <fieldname="amount_tax"widget="monetary"options="{'currency_field':'currency_id'}"/>
                                <divclass="oe_subtotal_footer_separatoroe_inline">
                                    <labelfor="amount_total"/>
                                </div>
                                <fieldname="amount_total"nolabel="1"class="oe_subtotal_footer_separator"widget="monetary"options="{'currency_field':'currency_id'}"/>
                            </group>
                            <fieldname="notes"class="oe_inline"placeholder="Defineyourtermsandconditions..."/>
                            <divclass="oe_clear"/>
                        </page>
                        <pagestring="OtherInformation"name="purchase_delivery_invoice">
                            <group>
                                <groupname="other_info">
                                    <fieldname="user_id"domain="[('share','=',False)]"widget="many2one_avatar_user"/>
                                    <fieldname="company_id"groups="base.group_multi_company"options="{'no_create':True}"/>
                                </group>
                                <groupname="invoice_info">
                                    <fieldname="invoice_status"attrs="{'invisible':[('state','in',('draft','sent','toapprove','cancel'))]}"/>
                                    <fieldname="payment_term_id"attrs="{'readonly':['|',('invoice_status','=','invoiced'),('state','=','done')]}"options="{'no_create':True}"/>
                                    <fieldname="fiscal_position_id"options="{'no_create':True}"attrs="{'readonly':['|',('invoice_status','=','invoiced'),('state','=','done')]}"/>
                                </group>
                            </group>
                        </page>
                    </notebook>
                </sheet>
                <divclass="oe_chatter">
                    <fieldname="message_follower_ids"/>
                    <fieldname="activity_ids"/>
                    <fieldname="message_ids"/>
                </div>
                </form>
            </field>
        </record>

       <recordid="view_purchase_order_filter"model="ir.ui.view">
            <fieldname="name">request.quotation.select</field>
            <fieldname="model">purchase.order</field>
            <fieldname="arch"type="xml">
                <searchstring="SearchPurchaseOrder">
                    <fieldname="name"string="Order"
                        filter_domain="['|','|',('name','ilike',self),('partner_ref','ilike',self),('partner_id','child_of',self)]"/>
                    <fieldname="partner_id"operator="child_of"/>
                    <fieldname="user_id"/>
                    <fieldname="product_id"/>
                    <filtername="my_purchases"string="MyPurchases"domain="[('user_id','=',uid)]"/>
                    <filterstring="Starred"name="starred"domain="[('priority','=','1')]"/>
                    <separator/>
                    <filtername="draft"string="RFQs"domain="[('state','in',('draft','sent','toapprove'))]"/>
                    <separator/>
                    <filtername="approved"string="PurchaseOrders"domain="[('state','in',('purchase','done'))]"/>
                    <filtername="to_approve"string="ToApprove"domain="[('state','=','toapprove')]"/>
                    <separator/>
                    <filtername="order_date"string="OrderDate"date="date_order"/>
                    <filtername="draft_rfqs"string="DraftRFQs"domain="[('state','=','draft')]"/>
                    <filtername="waiting_rfqs"string="WaitingRFQs"domain="[('state','=','sent'),('date_order','&gt;=',datetime.datetime.now())]"/>
                    <filtername="late_rfqs"string="LateRFQs"domain="[('state','in',['draft','sent','toapprove']),('date_order','&lt;',datetime.datetime.now())]"/>
                    <separator/>
                    <filterinvisible="1"string="LateActivities"name="activities_overdue"
                        domain="[('activity_ids.date_deadline','&lt;',context_today().strftime('%Y-%m-%d'))]"
                        help="Showallrecordswhichhasnextactiondateisbeforetoday"/>
                    <filterinvisible="1"string="TodayActivities"name="activities_today"
                        domain="[('activity_ids.date_deadline','=',context_today().strftime('%Y-%m-%d'))]"/>
                    <filterinvisible="1"string="FutureActivities"name="activities_upcoming_all"
                        domain="[('activity_ids.date_deadline','&gt;',context_today().strftime('%Y-%m-%d'))]"/>
                    <separator/>
                    <filterstring="Warnings"name="activities_exception"
                        domain="[('activity_exception_decoration','!=',False)]"/>
                    <groupexpand="0"string="GroupBy">
                        <filterstring="Vendor"name="vendor"domain="[]"context="{'group_by':'partner_id'}"/>
                        <filterstring="PurchaseRepresentative"name="representative"domain="[]"context="{'group_by':'user_id'}"/>
                        <filterstring="OrderDate"name="order_date"domain="[]"context="{'group_by':'date_order'}"/>
                    </group>
                </search>
            </field>
        </record>

        <recordid="purchase_order_view_search"model="ir.ui.view">
            <fieldname="name">purchase.order.select</field>
            <fieldname="model">purchase.order</field>
            <fieldname="arch"type="xml">
                <searchstring="SearchPurchaseOrder">
                    <fieldname="name"string="Order"
                        filter_domain="['|','|',('name','ilike',self),('partner_ref','ilike',self),('partner_id','child_of',self)]"/>
                    <fieldname="partner_id"operator="child_of"/>
                    <fieldname="user_id"/>
                    <fieldname="product_id"/>
                    <filtername="my_Orders"string="MyOrders"domain="[('user_id','=',uid)]"/>
                    <filterstring="Starred"name="starred"domain="[('priority','=','1')]"/>
                    <separator/>
                    <filtername="unconfirmed"string="NotAcknowledged"domain="[('mail_reception_confirmed','=',False),('state','=','purchase')]"/>
                    <filtername="not_invoiced"string="WaitingBills"domain="[('invoice_status','=','toinvoice')]"help="Purchaseordersthatincludelinesnotinvoiced."/>
                    <filtername="invoiced"string="BillsReceived"domain="[('invoice_status','=','invoiced')]"help="Purchaseordersthathavebeeninvoiced."/>
                    <separator/>
                    <filtername="order_date"string="OrderDate"date="date_order"/>
                    <separator/>
                    <filterinvisible="1"string="LateActivities"name="activities_overdue"
                        domain="[('my_activity_date_deadline','&lt;',context_today().strftime('%Y-%m-%d'))]"
                        help="Showallrecordswhichhasnextactiondateisbeforetoday"/>
                    <filterinvisible="1"string="TodayActivities"name="activities_today"
                        domain="[('my_activity_date_deadline','=',context_today().strftime('%Y-%m-%d'))]"/>
                    <filterinvisible="1"string="FutureActivities"name="activities_upcoming_all"
                        domain="[('my_activity_date_deadline','&gt;',context_today().strftime('%Y-%m-%d'))]"/>
                    <separator/>
                    <filterstring="Warnings"name="activities_exception"
                        domain="[('activity_exception_decoration','!=',False)]"/>
                    <groupexpand="0"string="GroupBy">
                        <filterstring="Vendor"name="vendor"domain="[]"context="{'group_by':'partner_id'}"/>
                        <filterstring="PurchaseRepresentative"name="representative"domain="[]"context="{'group_by':'user_id'}"/>
                        <filterstring="OrderDate"name="order_date"domain="[]"context="{'group_by':'date_order'}"/>
                    </group>
                </search>
            </field>
        </record>


        <!--PurchaseOrdersKanbanView -->
        <recordmodel="ir.ui.view"id="view_purchase_order_kanban">
            <fieldname="name">purchase.order.kanban</field>
            <fieldname="model">purchase.order</field>
            <fieldname="arch"type="xml">
                <kanbanclass="o_kanban_mobile"js_class="purchase_kanban_dashboard"sample="1"quick_create="false">
                    <fieldname="name"/>
                    <fieldname="partner_id"readonly="1"/>
                    <fieldname="amount_total"/>
                    <fieldname="state"/>
                    <fieldname="date_order"/>
                    <fieldname="currency_id"readonly="1"/>
                    <fieldname="activity_state"/>
                    <progressbarfield="activity_state"colors='{"planned":"success","today":"warning","overdue":"danger"}'/>
                    <templates>
                        <tt-name="kanban-box">
                            <divt-attf-class="oe_kanban_cardoe_kanban_global_click">
                                <divclass="o_kanban_record_topmb16">
                                    <fieldname="priority"widget="priority"/>
                                    <divclass="o_kanban_record_headingsml-1">
                                        <strongclass="o_kanban_record_title"><span><tt-esc="record.partner_id.value"/></span></strong>
                                    </div>
                                    <strong><fieldname="amount_total"widget="monetary"/></strong>
                                </div>
                                <divclass="o_kanban_record_bottom">
                                    <divclass="oe_kanban_bottom_left">
                                        <span><tt-esc="record.name.value"/><tt-esc="record.date_order.valueandrecord.date_order.value.split('')[0]orFalse"/></span>
                                        <fieldname="activity_ids"widget="kanban_activity"/>
                                    </div>
                                    <divclass="oe_kanban_bottom_right">
                                        <fieldname="state"widget="label_selection"options="{'classes':{'draft':'default','cancel':'default','done':'success','approved':'warning'}}"/>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <recordid="purchase_order_tree"model="ir.ui.view">
            <fieldname="name">purchase.order.tree</field>
            <fieldname="model">purchase.order</field>
            <fieldname="priority"eval="1"/>
            <fieldname="arch"type="xml">
                <treestring="PurchaseOrder"multi_edit="1"
                      decoration-muted="state=='cancel'"decoration-info="statein('wait','confirmed')"sample="1">
                    <fieldname="priority"optional="show"widget="priority"nolabel="1"/>
                    <fieldname="partner_ref"optional="hide"/>
                    <fieldname="name"string="Reference"readonly="1"/>
                    <fieldname="date_order"invisible="notcontext.get('quotation_only',False)"optional="show"/>
                    <fieldname="date_approve"invisible="context.get('quotation_only',False)"optional="show"/>
                    <fieldname="partner_id"readonly="1"/>
                    <fieldname="company_id"readonly="1"options="{'no_create':True}"
                        groups="base.group_multi_company"optional="show"/>
                    <fieldname="date_planned"invisible="context.get('quotation_only',False)"optional="show"/>
                    <fieldname="user_id"optional="show"/>
                    <fieldname="origin"optional="show"/>
                    <fieldname="amount_untaxed"sum="TotalUntaxedamount"string="Untaxed"widget="monetary"optional="hide"/>
                    <fieldname="amount_total"sum="Totalamount"widget="monetary"optional="show"/>
                    <fieldname="currency_id"invisible="1"/>
                    <fieldname="state"optional="show"/>
                    <fieldname="invoice_status"optional="hide"/>
                    <fieldname="activity_exception_decoration"widget="activity_exception"/>
                </tree>
            </field>
        </record>
        
        <!--Unfortunatelywewantthepurchasekpistabletoonlyshowupinsomelistviews,
             sowehavetoduplicatecodetosupportbothviewversions-->
        <recordid="purchase_order_kpis_tree"model="ir.ui.view">
            <fieldname="name">purchase.order.inherit.purchase.order.tree</field>
            <fieldname="model">purchase.order</field>
            <fieldname="priority"eval="10"/>
            <fieldname="arch"type="xml">
                <treestring="PurchaseOrder"multi_edit="1"class="o_purchase_order"
                      js_class="purchase_list_dashboard"sample="1">
                    <header>
                        <buttonname="action_create_invoice"type="object"string="CreateBills"/>
                    </header>
                    <fieldname="priority"optional="show"widget="priority"nolabel="1"/>
                    <fieldname="partner_ref"optional="hide"/>
                    <fieldname="name"string="Reference"readonly="1"decoration-bf="1"/>
                    <fieldname="date_approve"invisible="context.get('quotation_only',False)"optional="show"/>
                    <fieldname="partner_id"readonly="1"/>
                    <fieldname="company_id"readonly="1"options="{'no_create':True}"
                        groups="base.group_multi_company"optional="show"/>
                    <fieldname="date_planned"invisible="context.get('quotation_only',False)"optional="show"/>
                    <fieldname="user_id"optional="show"widget="many2one_avatar_user"/>
                    <fieldname="date_order"attrs="{'invisible':['|','|',('state','=','purchase'),('state','=','done'),('state','=','cancel')]}"
                        invisible="notcontext.get('quotation_only',False)"widget="remaining_days"optional="show"/>
                    <fieldname="activity_ids"widget="list_activity"optional="show"/>
                    <fieldname="origin"optional="show"/>
                    <fieldname="amount_untaxed"sum="TotalUntaxedamount"string="Untaxed"widget="monetary"optional="hide"/>
                    <fieldname="amount_total"sum="Totalamount"widget="monetary"optional="show"decoration-bf="1"/>
                    <fieldname="currency_id"invisible="1"/>
                    <fieldname="state"optional="show"widget="badge"decoration-success="state=='purchase'orstate=='done'"
                        decoration-warning="state=='toapprove'"decoration-info="state=='draft'orstate=='sent'"/>
                    <fieldname="invoice_status"optional="hide"/>
                </tree>
            </field>
        </record>

        <recordid="purchase_order_view_tree"model="ir.ui.view">
            <fieldname="name">purchase.order.view.tree</field>
            <fieldname="model">purchase.order</field>
            <fieldname="arch"type="xml">
                <treedecoration-muted="state=='cancel'"
                    decoration-info="statein('wait','confirmed')"
                    string="PurchaseOrder"
                    class="o_purchase_order"
                    sample="1">
                    <header>
                        <buttonname="action_create_invoice"type="object"string="CreateBills"/>
                    </header>
                    <fieldname="priority"optional="show"widget="priority"nolabel="1"/>
                    <fieldname="partner_ref"optional="hide"/>
                    <fieldname="name"string="Reference"readonly="1"decoration-bf="1"/>
                    <fieldname="date_approve"widget="date"invisible="context.get('quotation_only',False)"optional="show"/>
                    <fieldname="partner_id"/>
                    <fieldname="company_id"groups="base.group_multi_company"options="{'no_create':True}"optional="show"/>
                    <fieldname="date_planned"invisible="context.get('quotation_only',False)"optional="show"/>
                    <fieldname="user_id"widget="many2one_avatar_user"optional="show"/>
                    <fieldname="date_order"invisible="notcontext.get('quotation_only',False)"optional="show"/>
                    <fieldname="activity_ids"widget="list_activity"optional="show"/>
                    <fieldname="origin"optional="show"/>
                    <fieldname="amount_untaxed"sum="TotalUntaxedamount"string="Untaxed"widget="monetary"optional="hide"/>
                    <fieldname="amount_total"sum="Totalamount"widget="monetary"optional="show"decoration-bf="1"/>
                    <fieldname="currency_id"invisible="1"/>
                    <fieldname="state"invisible="1"/>
                    <fieldname="invoice_status"widget="badge"decoration-success="invoice_status=='invoiced'"decoration-info="invoice_status=='toinvoice'"optional="show"/>
                </tree>
            </field>
        </record>

        <recordid="purchase_order_view_activity"model="ir.ui.view">
            <fieldname="name">purchase.order.activity</field>
            <fieldname="model">purchase.order</field>
            <fieldname="arch"type="xml">
                <activitystring="PurchaseOrder">
                    <templates>
                        <divt-name="activity-box">
                            <div>
                                <fieldname="name"display="full"/>
                                <fieldname="partner_id"muted="1"display="full"/>
                            </div>
                        </div>
                    </templates>
                </activity>
            </field>
        </record>

        <recordid="purchase_rfq"model="ir.actions.act_window">
            <fieldname="name">RequestsforQuotation</field>
            <fieldname="type">ir.actions.act_window</field>
            <fieldname="res_model">purchase.order</field>
            <fieldname="view_mode">tree,kanban,form,pivot,graph,calendar,activity</field>
            <fieldname="view_id"ref="purchase_order_kpis_tree"/>
            <fieldname="domain">[]</field>
            <fieldname="search_view_id"ref="view_purchase_order_filter"/>
            <fieldname="context">{'quotation_only':True}</field>
            <fieldname="help"type="html">
              <pclass="o_view_nocontent_smiling_face">
                Norequestforquotationfound.Let'screateone!
              </p><p>
                Requestsforquotationaredocumentsthatwillbesenttoyoursupplierstorequestpricesfordifferentproductsyouconsiderbuying.
                Onceanagreementhasbeenfoundwiththesupplier,theywillbeconfirmedandturnedintopurchaseorders.
              </p>
            </field>
        </record>
        <menuitemaction="purchase_rfq"id="menu_purchase_rfq"
            parent="menu_procurement_management"
            sequence="0"/>

        <recordid="purchase_form_action"model="ir.actions.act_window">
            <fieldname="name">PurchaseOrders</field>
            <fieldname="type">ir.actions.act_window</field>
            <fieldname="res_model">purchase.order</field>
            <fieldname="view_mode">tree,kanban,form,pivot,graph,calendar,activity</field>
            <fieldname="view_id"ref="purchase_order_view_tree"/>
            <fieldname="domain">[('state','in',('purchase','done'))]</field>
            <fieldname="search_view_id"ref="purchase_order_view_search"/>
            <fieldname="context">{}</field>
            <fieldname="help"type="html">
              <pclass="o_view_nocontent_smiling_face">
                Nopurchaseorderfound.Let'screateone!
              </p><p>
                Onceyouorderedyourproductstoyoursupplier,confirmyourrequestforquotationanditwillturnintoapurchaseorder.
              </p>
            </field>
        </record>
        <menuitemaction="purchase_form_action"id="menu_purchase_form_action"parent="menu_procurement_management"sequence="6"/>

        <recordid="purchase_order_line_tree"model="ir.ui.view">
            <fieldname="name">purchase.order.line.tree</field>
            <fieldname="model">purchase.order.line</field>
            <fieldname="arch"type="xml">
                <treestring="PurchaseOrderLines"create="false">
                    <fieldname="order_id"/>
                    <fieldname="name"/>
                    <fieldname="partner_id"string="Vendor"/>
                    <fieldname="product_id"/>
                    <fieldname="price_unit"/>
                    <fieldname="product_qty"/>
                    <fieldname="product_uom"groups="uom.group_uom"/>
                    <fieldname="price_subtotal"widget="monetary"/>
                    <fieldname="currency_id"invisible="1"/>
                    <fieldname="date_planned" widget="date"/>
                </tree>
            </field>
        </record>

        <recordid="purchase_order_line_form2"model="ir.ui.view">
            <fieldname="name">purchase.order.line.form2</field>
            <fieldname="model">purchase.order.line</field>
            <fieldname="priority"eval="20"/>
            <fieldname="arch"type="xml">
                <formstring="PurchaseOrderLine"create="false">
                    <sheet>
                        <labelfor="order_id"class="oe_edit_only"/>
                        <h1>
                            <fieldname="order_id"class="oe_inline"/>
                            <labelstring=","for="date_order"attrs="{'invisible':[('date_order','=',False)]}"/>
                            <fieldname="date_order"class="oe_inline"/>
                        </h1>
                        <labelfor="partner_id"class="oe_edit_only"/>
                        <h2><fieldname="partner_id"/></h2>
                        <group>
                            <group>
                                <fieldname="product_id"readonly="1"/>
                                <labelfor="product_qty"/>
                                <divclass="o_row">
                                    <fieldname="product_qty"readonly="1"/>
                                    <fieldname="product_uom"readonly="1"groups="uom.group_uom"/>
                                </div>
                                <fieldname="price_unit"/>
                            </group>
                            <group>
                                <fieldname="taxes_id"widget="many2many_tags"
                                    domain="[('type_tax_use','=','purchase')]"/>
                                <fieldname="date_planned"widget="date"readonly="1"/>
                                <fieldname="company_id"groups="base.group_multi_company"options="{'no_create':True}"/>
                                <fieldname="account_analytic_id"colspan="4"groups="analytic.group_analytic_accounting"/>
                            </group>
                        </group>
                        <fieldname="name"/>
                        <separatorstring="ManualInvoices"/>
                        <fieldname="invoice_lines"/>
                    </sheet>
                </form>
            </field>
        </record>
          <recordid="purchase_order_line_search"model="ir.ui.view">
            <fieldname="name">purchase.order.line.search</field>
            <fieldname="model">purchase.order.line</field>
            <fieldname="arch"type="xml">
                <searchstring="SearchPurchaseOrder">
                    <fieldname="order_id"/>
                    <fieldname="product_id"/>
                    <fieldname="partner_id"string="Vendor"filter_domain="[('partner_id','child_of',self)]"/>
                    <filtername="hide_cancelled"string="Hidecancelledlines"domain="[('state','!=','cancel')]"/>
                    <groupexpand="0"string="GroupBy">
                        <filtername="groupby_supplier"string="Vendor"domain="[]"context="{'group_by':'partner_id'}"/>
                        <filtername="groupby_product"string="Product"domain="[]"context="{'group_by':'product_id'}"/>
                        <filterstring="OrderReference"name="order_reference"domain="[]"context="{'group_by':'order_id'}"/>
                        <filterstring="Status"name="status"domain="[]"context="{'group_by':'state'}"/>
                    </group>
                </search>
            </field>
        </record>

    <recordid="action_purchase_batch_bills"model="ir.actions.server">
        <fieldname="name">CreateVendorBills</field>
        <fieldname="model_id"ref="purchase.model_purchase_order"/>
        <fieldname="binding_model_id"ref="purchase.model_purchase_order"/>
        <fieldname='groups_id'eval="[(4,ref('account.group_account_invoice'))]"/>
        <fieldname="state">code</field>
        <fieldname="code">
            ifrecords:
                action=records.action_create_invoice()
        </field>
    </record>

    <recordid="action_purchase_send_reminder"model="ir.actions.server">
        <fieldname="name">SendReminder</field>
        <fieldname="model_id"ref="purchase.model_purchase_order"/>
        <fieldname="binding_model_id"ref="purchase.model_purchase_order"/>
        <fieldname='groups_id'eval="[(4,ref('purchase.group_send_reminder'))]"/>
        <fieldname="binding_view_types">form</field>
        <fieldname="state">code</field>
        <fieldname="code">
            ifrecords:
                action=records._send_reminder_mail(send_single=True)
        </field>
    </record>
    
    <!--Dashboardactionbuttons-->
    <!--Dashboardactionbuttons:EndinListview-->
    <recordid="purchase_action_dashboard_list"model="ir.actions.act_window">
        <fieldname="name">RequestsforQuotation</field>
        <fieldname="res_model">purchase.order</field>
        <fieldname="view_mode">form,tree,kanban,pivot,graph,calendar,activity</field>
        <fieldname="view_id"ref="purchase.purchase_order_kpis_tree"/>
        <fieldname="search_view_id"ref="view_purchase_order_filter"/>
        <fieldname="target">main</field>
        <fieldname="help"type="html">
            <pclass="o_view_nocontent_empty_folder">
                NoRFQstodisplay
            </p>
        </field>
    </record>

    <!--Dashboardactionbuttons:EndinKanbanview-->
    <recordid="purchase_action_dashboard_kanban"model="ir.actions.act_window">
        <fieldname="name">RequestsforQuotation</field>
        <fieldname="res_model">purchase.order</field>
        <fieldname="view_mode">form,tree,kanban,pivot,graph,calendar,activity</field>
        <fieldname="view_id"ref="purchase.view_purchase_order_kanban"/>
        <fieldname="search_view_id"ref="view_purchase_order_filter"/>
        <fieldname="target">main</field>
        <fieldname="help"type="html">
            <pclass="o_view_nocontent_empty_folder">
                NoRFQstodisplay
            </p>
        </field>
    </record>

    <recordid="action_rfq_form"model="ir.actions.act_window">
        <fieldname="name">RequestsforQuotation</field>
        <fieldname="res_model">purchase.order</field>
        <fieldname="view_mode">form</field>
        <fieldname="view_id"ref="purchase.purchase_order_form"/>
        <fieldname="search_view_id"ref="view_purchase_order_filter"/>
        <fieldname="target">main</field>
    </record>

</flectra>
