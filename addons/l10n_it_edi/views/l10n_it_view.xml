<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <recordid="fetchmail_server_form_l10n_it"model="ir.ui.view">
        <fieldname="name">fetchmail.server.form.l10n.it</field>
        <fieldname="model">fetchmail.server</field>
        <fieldname="priority">20</field>
        <fieldname="inherit_id"ref="fetchmail.view_email_server_form"/>
        <fieldname="arch"type="xml">
        <data>
            <xpathexpr="//field[@name='date']"position="after">
                <fieldname="l10n_it_is_pec"/>
            </xpath>
        </data>
        </field>
    </record>

    <recordid="account_tax_form_l10n_it"model="ir.ui.view">
        <fieldname="name">account.tax.form.l10n.it</field>
        <fieldname="model">account.tax</field>
        <fieldname="priority">20</field>
        <fieldname="inherit_id"ref="account.view_tax_form"/>
        <fieldname="arch"type="xml">
        <data>
            <xpathexpr="//page"position="inside">
                <group>
                    <fieldname="l10n_it_vat_due_date"/>
                    <fieldname="l10n_it_has_exoneration"readonly="False"/>
                    <fieldname="l10n_it_kind_exoneration"attrs="{'invisible':[('l10n_it_has_exoneration','=',False)]}"/>
                    <fieldname="l10n_it_law_reference"/>
                </group>
            </xpath>
        </data>
        </field>
    </record>

    <recordid="res_partner_form_l10n_it"model="ir.ui.view">
        <fieldname="name">res.partner.form.l10n.it</field>
        <fieldname="model">res.partner</field>
        <fieldname="priority">20</field>
        <fieldname="inherit_id"ref="base.view_partner_form"/>
        <fieldname="arch"type="xml">
        <data>
            <xpathexpr="//field[@name='category_id']"position="after">
                <fieldname="l10n_it_pec_email"attrs="{'invisible':[('parent_id','!=',False)]}"/>
                <fieldname="l10n_it_codice_fiscale"attrs="{'invisible':[('parent_id','!=',False)]}"/>
                <fieldname="l10n_it_pa_index"attrs="{'invisible':[('parent_id','!=',False)]}"/>
            </xpath>
        </data>
        </field>
    </record>

    <recordid="res_company_form_l10n_it"model="ir.ui.view">
        <fieldname="name">res.company.form.l10n.it</field>
        <fieldname="model">res.company</field>
        <fieldname="priority">20</field>
        <fieldname="inherit_id"ref="base.view_company_form"/>
        <fieldname="arch"type="xml">
        <data>
            <xpathexpr="//div[hasclass('o_address_format')]"position="after">
                <fieldname="l10n_it_mail_pec_server_id"attrs="{'invisible':[('country_code','!=','IT')]}"/>
                <fieldname="l10n_it_address_send_fatturapa"attrs="{'invisible':[('country_code','!=','IT')]}"/>
                <fieldname="l10n_it_address_recipient_fatturapa"attrs="{'invisible':[('country_code','!=','IT')]}"/>
            </xpath>
            <xpathexpr="//field[@name='vat']"position="after">
                <fieldname="l10n_it_codice_fiscale"attrs="{'invisible':[('country_code','!=','IT')]}"/>
                <fieldname="l10n_it_tax_system"attrs="{'invisible':[('country_code','!=','IT')]}"/>
            </xpath>
            <xpathexpr="//page"position="after">
                <pagestring="ElectronicInvoicing"name="electronic_invoicing"attrs="{'invisible':[('country_code','!=','IT')]}">
                    <group>
                        <separatorstring="EconomicandAdministrativeIndex"colspan="4"/>
                        <divcolspan="4">
                            Theseller/providerisacompanylistedontheregisterofcompaniesandas
                            suchmustalsoindicatetheregistrationdataonalldocuments(art.2250,Italian
                            CivilCode)
                        </div>
                        <group>
                            <fieldname="l10n_it_has_eco_index"string="Companylistedontheregisterofcompanies"/>
                            <fieldname="l10n_it_eco_index_office"attrs="{'invisible':[('l10n_it_has_eco_index','=',False)]}"/>
                            <fieldname="l10n_it_eco_index_number"attrs="{'invisible':[('l10n_it_has_eco_index','=',False)]}"/>
                            <fieldname="l10n_it_eco_index_share_capital"attrs="{'invisible':[('l10n_it_has_eco_index','=',False)]}"/>
                            <fieldname="l10n_it_eco_index_sole_shareholder"attrs="{'invisible':[('l10n_it_has_eco_index','=',False)]}"/>
                            <fieldname="l10n_it_eco_index_liquidation_state"attrs="{'invisible':[('l10n_it_has_eco_index','=',False)]}"/>
                        </group>
                    </group>
                    <group>
                        <separatorstring="Taxrepresentative"colspan="4"/>
                        <divcolspan="4">
                            Theseller/providerisanon-residentsubjectwhichcarriesouttransactionsinItaly
                            withrelevanceforVATpurposesandwhichtakesavailofataxrepresentativeinItaly
                        </div>
                        <group>
                            <fieldname="l10n_it_has_tax_representative"string="Companyhaveataxrepresentative"/>
                            <fieldname="l10n_it_tax_representative_partner_id"attrs="{'invisible':[('l10n_it_has_tax_representative','=',False)]}"/>
                        </group>
                    </group>
                </page>
            </xpath>
        </data>
        </field>
    </record>

    <recordid="invoice_supplier_tree_l10n_it"model="ir.ui.view">
        <fieldname="name">account.invoice.supplier.tree.l10n.it</field>
        <fieldname="model">account.move</field>
        <fieldname="priority">20</field>
        <fieldname="inherit_id"ref="account.view_move_tree"/>
        <fieldname="arch"type="xml">
        <data>
            <xpathexpr="//field[@name='currency_id']"position="after">
                <fieldname="l10n_it_send_state"invisible="1"widget="label_selection"options="{'classes':{'to_send':'default','invalid':'danger','sent':'warning',
                                            'delivered':'success','delivered_accepted':'success','delivered_refused':'success','delivered_expired':'success','failed_delivery':'success'}}"/>

                <buttonicon="fa-paper-plane-o"class="btn-outline-warningdisabled"aria-label="Sent"title="Sent"attrs="{'invisible':[('l10n_it_send_state','!=','sent')]}"/>
                <buttonicon="fa-exclamation-triangle"class="btn-outline-dangerdisabled"aria-label="Error"title="Error"attrs="{'invisible':[('l10n_it_send_state','!=','invalid')]}"/>
                <buttonicon="fa-check"class="btn-outline-successdisabled"aria-label="Delivered"title="Delivered"attrs="{'invisible':[('l10n_it_send_state','notin',['delivered','delivered_accepted','delivered_refused','delivered_expired','failed_delivery'])]}"/>
            </xpath>
        </data>
        </field>
    </record>

    <recordid="invoice_kanban_l10n_it"model="ir.ui.view">
        <fieldname="name">account.invoice.kanban.l10n.it</field>
        <fieldname="model">account.move</field>
        <fieldname="priority">20</field>
        <fieldname="inherit_id"ref="account.view_account_move_kanban"/>
        <fieldname="arch"type="xml">
        <data>
            <xpathexpr="//field[@name='currency_id']"position="after">
                <fieldname="l10n_it_send_state"/>
            </xpath>

            <xpathexpr="//div[hasclass('o_kanban_record_headings')]"position="inside">
                <iclass="text-successfafa-plus-circle"aria-label="New"t-if="record.l10n_it_send_state.raw_value=='new'"/>
                <iclass="text-warningfafa-paper-plane-o"aria-label="Sent,waitingforresponse"t-if="record.l10n_it_send_state.raw_value=='sent'"/>
                <iclass="text-dangerfafa-exclamation-triangle"aria-label="Sent,butinvalid"t-if="record.l10n_it_send_state.raw_value=='invalid'"/>
                <iclass="text-successfafa-check"aria-label="DeliveredInvoice"t-if="['delivered','delivered_accepted','delivered_refused','delivered_expired','failed_delivery'].indexOf(record.l10n_it_send_state.raw_value)>=0"/>
            </xpath>
        </data>
        </field>
    </record>

    <recordid="account_invoice_form_l10n_it"model="ir.ui.view">
        <fieldname="name">account.move.form.l10n.it</field>
        <fieldname="model">account.move</field>
        <fieldname="priority">20</field>
        <fieldname="inherit_id"ref="account.view_move_form"/>
        <fieldname="arch"type="xml">
        <data>
            <xpathexpr="//field[@name='move_type']"position="before">
                <divclass="alertalert-success"role="alert"
                     attrs="{'invisible':['|',('move_type','notin',('out_invoice','out_refund')),('l10n_it_send_state','notin',['delivered','delivered_accepted','delivered_refused','delivered_expired','failed_delivery'])]}">
                    <iclass="fafa-check"aria-label="Delivered"title="Delivered"></i><fieldname="l10n_it_send_state"readonly="1"/>
                </div>
                <divclass="alertalert-warning"role="alert"
                     attrs="{'invisible':['|',('move_type','notin',('out_invoice','out_refund')),('l10n_it_send_state','!=','sent')]}">
                    <iclass="fafa-paper-plane-o"/>E-Invoicesent,waitingforaresponse
                </div>
                <divclass="alertalert-danger"role="alert"
                     attrs="{'invisible':['|',('move_type','notin',('out_invoice','out_refund')),('l10n_it_send_state','!=','invalid')]}">
                    <iclass="fafa-exclamation-triangle"/>E-Invoicecheckfailed.Youcanmodifytheinvoice,andresendit.
                </div>
            </xpath>
            <xpathexpr="//page[@name='other_info']"position="after">
                <pagestring="ElectronicInvoicing"
                    name="electronic_invoicing"
                    attrs="{'invisible':['|',('move_type','notin',('out_invoice','out_refund','in_invoice','in_refund')),('country_code','!=','IT')]}">
                    <group>
                        <group>
                            <fieldname="l10n_it_stamp_duty"/>
                            <fieldname="l10n_it_ddt_id"
                                   attrs="{'invisible':[('move_type','notin',('out_invoice','out_refund'))]}"/>
                        </group>
                    </group>
                </page>
            </xpath>
        </data>
        </field>
    </record>

    <recordid="view_account_invoice_filter_l10n_it"model="ir.ui.view">
        <fieldname="name">account.invoice.select.l10n.it</field>
        <fieldname="model">account.move</field>
        <fieldname="inherit_id"ref="account.view_account_invoice_filter"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//filter[@name='late']"position="after">
                <separator/>
                <filtername="error"string="E-invoiceerror"domain="[('l10n_it_send_state','=','invalid')]"/>
                <filtername="sent"string="E-invoicesent"domain="[('l10n_it_send_state','=','sent')]"/>
                <filtername="no_sent"string="E-invoicetosend"domain="[('l10n_it_send_state','in',['to_send',False])]"/>
                <filtername="delivered"string="E-invoicedelivered"domain="[('l10n_it_send_state','in',['delivered','delivered_accepted','delivered_refused','delivered_expired','failed_delivery'])]"/>
            </xpath>
            <xpathexpr="//filter[@name='status']"position="after">
                <filtername="send_status"string="Sendstatus"context="{'group_by':'l10n_it_send_state'}"/>
            </xpath>
        </field>
    </record>

    <recordid="l10n_it_ddt"model="ir.ui.view">
        <fieldname="name">ddt.form.l10n.it</field>
        <fieldname="model">l10n_it.ddt</field>
        <fieldname="arch"type="xml">
            <form>
                <group>
                    <fieldname="name"/>
                    <fieldname="date"/>
                </group>
            </form>
        </field>
    </record>

    <recordid="l10n_it_ddt_list_view"model="ir.ui.view">
      <fieldname="name">l10n_it.ddt.list.view</field>
      <fieldname="model">l10n_it.ddt</field>
      <fieldname="arch"type="xml">
        <tree>
          <fieldname="name"/>
          <fieldname="date"/>
        </tree>
      </field>
    </record>

    <recordid="action_ddt_account"model="ir.actions.act_window">
        <fieldname="name">TransportDocument</field>
        <fieldname="res_model">l10n_it.ddt</field>
        <fieldname="view_mode">tree,form</field>
        <fieldname="view_id"ref="l10n_it_ddt_list_view"/>
    </record>

    <menuitem
            name="DDT"
            parent="account.account_account_menu"
            action="action_ddt_account"
            id="menu_action_ddt_account"
            sequence="15"
            groups="base.group_no_one"/>
</flectra>
