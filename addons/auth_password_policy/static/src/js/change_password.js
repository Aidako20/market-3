flectra.define('auth_password_policy.ChangePassword',function(require){
"usestrict";
varChangePassword=require('web.ChangePassword');
varpolicy=require('auth_password_policy');
varMeter=require('auth_password_policy.Meter');

ChangePassword.include({
    events:{
        'inputinput[name=new_password]':function(e){
            this._meter.update(e.target.value);
        }
    },
    willStart:function(){
        var_this=this;
        vargetPolicy=this._rpc({
            model:'res.users',
            method:'get_password_policy'
        }).then(function(p){
            _this._meter=newMeter(_this,newpolicy.Policy(p),policy.recommendations);
        });
        returnPromise.all([
            this._super.apply(this,arguments),
            getPolicy
        ]);
    },
    start:function(){
        returnPromise.all([
            this._meter.insertAfter(this.$('input[name=new_password]')),
            this._super()
        ]);
    }
})
});
