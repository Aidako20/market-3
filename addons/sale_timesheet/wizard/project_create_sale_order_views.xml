<?xmlversion="1.0"encoding="UTF-8"?>
<flectra>

    <recordid="project_create_sale_order_view_form"model="ir.ui.view">
        <fieldname="name">project.create.sale.order.wizard.form</field>
        <fieldname="model">project.create.sale.order</field>
        <fieldname="arch"type="xml">
            <formstring="CreateaSalesOrder">
                <fieldname="link_selection"nolabel="1"widget="radio"options="{'horizontal':true}"invisible="1"/>
                <group>
                    <group>
                        <fieldname="project_id"readonly="1"/>
                        <fieldname="company_id"invisible="1"/>
                        <fieldname="partner_id"domain="['|',('company_id','=',False),('company_id','=',company_id)]"/>
                        <fieldname="pricing_type"invisible="1"/>
                    </group>
                    <groupattrs="{'invisible':[('link_selection','!=','link')]}">
                        <fieldname="sale_order_id"options="{'no_create':True,'no_create_edit':True}"attrs="{'required':[('link_selection','=','link')]}"/>
                        <fieldname="commercial_partner_id"invisible="1"/>
                    </group>
                </group>
                <groupattrs="{'invisible':['&amp;',('link_selection','=','link'),('pricing_type','!=','employee_rate')]}">
                    <fieldname="line_ids"nolabel="1"attrs="{'required':[('pricing_type','=','employee_rate')]}">
                        <treeeditable="bottom">
                            <fieldname="employee_id"options="{'no_create_edit':True,'no_create':True}"attrs="{'column_invisible':[('parent.pricing_type','=','fixed_rate')],'required':[('parent.pricing_type','=','employee_rate')]}"/>
                            <fieldname="sale_line_id"options="{'no_create_edit':True,'no_create':True,'no_open':True}"domain="[('is_service','=',True),('order_id','=',parent.sale_order_id)]"attrs="{'column_invisible':['|',('parent.link_selection','!=','link'),('parent.pricing_type','=','fixed_rate')],'required':['&amp;',('parent.link_selection','=','link'),('parent.pricing_type','=','employee_rate')]}"/>
                            <fieldname="product_id"options="{'no_create_edit':True,'no_create':True}"attrs="{'column_invisible':[('parent.link_selection','=','link')],'required':[('parent.link_selection','!=','link')]}"/>
                            <fieldname="price_unit"widget='monetary'options="{'currency_field':'currency_id','field_digits':True}"attrs="{'readonly':[('parent.link_selection','=','link')]}"/>
                            <fieldname="currency_id"invisible="1"/>
                        </tree>
                    </field>
                </group>
                <groupattrs="{'invisible':[('info_invoice','=',False)]}">
                    <fieldname="info_invoice"nolabel="1"/>
                </group>
                <footer>
                    <buttonstring="LinktoSalesOrder"type="object"name="action_link_sale_order"class="oe_highlight"attrs="{'invisible':[('link_selection','!=','link')]}"/>
                    <buttonstring="CreateSalesOrder"type="object"name="action_create_sale_order"class="oe_highlight"attrs="{'invisible':[('link_selection','=','link')]}"/>
                    <buttonstring="Cancel"special="cancel"type="object"class="btnbtn-secondaryoe_inline"/>
                </footer>
            </form>
        </field>
    </record>

    <recordid="project_project_action_multi_create_sale_order"model="ir.actions.act_window">
        <fieldname="name">CreateaSalesOrder</field>
        <fieldname="res_model">project.create.sale.order</field>
        <fieldname="view_mode">form</field>
        <fieldname="view_id"ref="project_create_sale_order_view_form"/>
        <fieldname="target">new</field>
    </record>

</flectra>
