<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <recordid="view_product_timesheet_form"model="ir.ui.view">
        <fieldname="name">product.template.timesheet.form</field>
        <fieldname="model">product.template</field>
        <fieldname="inherit_id"ref="sale.product_template_form_view_invoice_policy"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//field[@name='invoice_policy']"position="attributes">
                <attributename="invisible">False</attribute>
                <attributename="attrs">{'invisible':[('type','==','service')]}</attribute>
            </xpath>
            <xpathexpr="//field[@name='service_type']"position="after">
                <fieldname="service_policy"widget="radio"attrs="{'invisible':[('type','!=','service')]}"/>
            </xpath>
        </field>
    </record>

    <recordid="product_template_view_search_sale_timesheet"model="ir.ui.view">
        <fieldname="name">product.template.search.timesheet</field>
        <fieldname="model">product.template</field>
        <fieldname="inherit_id"ref="product.product_template_search_view"/>
        <fieldname="mode">primary</field>
        <fieldname="arch"type="xml">
            <xpathexpr="//filter[@name='consumable']"position="after">
                <separator/>
                <filterstring="Time-basedservices"name="product_time_based"domain="[('type','=','service'),('invoice_policy','=','delivery'),('service_type','=','timesheet')]"/>
                <filterstring="Fixedpriceservices"name="product_service_fixed"domain="[('type','=','service'),('invoice_policy','=','order'),('service_type','=','timesheet')]"/>
                <filterstring="Milestoneservices"name="product_service_milestone"domain="[('type','=','service'),('invoice_policy','=','delivery'),('service_type','=','manual')]"/>
            </xpath>
        </field>
    </record>

    <recordid="product_template_action_default_services"model="ir.actions.act_window">
        <fieldname="name">Products</field>
        <fieldname="res_model">product.template</field>
        <fieldname="view_mode">tree,form</field>
        <fieldname="search_view_id"ref="sale_timesheet.product_template_view_search_sale_timesheet"/>
        <fieldname="context">{'search_default_services':1,'default_type':'service'}</field>
    </record>

</flectra>
