<?xmlversion="1.0"encoding="utf-8"?>
<flectra>

    <templateid="assets_backend"name="saletimesheetassets"inherit_id="web.assets_backend">
        <xpathexpr="."position="inside">
            <linkrel="stylesheet"type="text/scss"href="/sale_timesheet/static/src/scss/sale_timesheet.scss"/>
                <scripttype="text/javascript"src="/sale_timesheet/static/src/js/project_overview.js"></script>
                <scripttype="text/javascript"src="/sale_timesheet/static/src/js/sale_project_kanban_controller.js"/>
        </xpath>
    </template>

    <recordid="timesheet_plan"model="ir.ui.view">
        <fieldname="name">TimesheetPlan</field>
        <fieldname="type">qweb</field>
        <fieldname="model">project.project</field>
        <fieldname="arch"type="xml">
        <qwebjs_class="project_overview">
        <navclass="o_qweb_cp_buttons"t-if="actions">
            <buttont-foreach="actions"t-as="action"
                    type="action"class="btnbtn-primary"
                    t-att-name="action['action_id']"
                    t-att-data-context="action.get('context')"
            >
                <tt-esc="action['label']"/>
            </button>
        </nav>
        <divclass="o_form_viewo_form_readonlyo_project_plan">
            <divclass="o_form_sheet_bg">
                <divclass="o_form_sheeto_timesheet_plan_content">
                    <divclass="o_timesheet_plan_sale_timesheet">
                        <divclass="o_timesheet_plan_sale_timesheet_dashboard">

                            <divclass="o_timesheet_plan_stat_buttonsoe_button_boxo_not_full">
                                <tt-foreach="stat_buttons"t-as="stat_button">
                                    <aclass="btnoe_stat_button"
                                       type="action"
                                       t-att="stat_button['action']"
                                    >
                                        <divt-attf-class="fafa-fwo_button_icon#{stat_button['icon']}"role="img"aria-label="Statistics"title="Statistics"></div>
                                        <divclass="o_field_widgeto_stat_infoo_readonly_modifier"t-att-title="stat_button['name']">
                                            <tt-if="notisinstance(stat_button['name'],list)">
                                                <spanclass="o_stat_value"t-if="'count'instat_button">
                                                    <tt-esc="stat_button['count']"/>
                                                </span>
                                                <spanclass="o_stat_text">
                                                    <tt-esc="stat_button['name']"/>
                                                </span>
                                            </t>
                                            <tt-if="isinstance(stat_button['name'],list)">
                                                <divclass="oe_inline">
                                                    <spanclass="o_stat_valuemr-1">
                                                        <tt-esc="stat_button.get('count')"/>
                                                    </span>
                                                    <spanclass="o_stat_value">
                                                        <tt-esc="stat_button['name'][0]"/>
                                                    </span>
                                                </div>
                                                <spanclass="o_stat_text">
                                                    <tt-esc="stat_button['name'][1]"/>
                                                </span>
                                            </t>
                                        </div>
                                    </a>
                                </t>
                            </div>

                            <divclass="o_title">
                                <h2t-if="is_uom_day">RecordedDaysandProfitability</h2>
                                <h2t-else="">RecordedHoursandProfitability</h2>
                            </div>

                            <tt-set="display_cost"t-value="dashboard['profit']['expense_cost']!=0.0"/>
                            <divclass="o_profitability_wrapper">
                                <divclass="o_profitability_section">
                                    <div>
                                        <tableclass="table">
                                            <tbody>
                                                <th>
                                                    <atype="action"data-model="account.analytic.line"t-att-data-domain="json.dumps(timesheet_domain)"
                                                       data-context='{"pivot_row_groupby":["date:month"],"pivot_column_groupby":["timesheet_invoice_type"],"pivot_measures":["unit_amount"]}'
                                                       data-views='[[0,"pivot"],[0,"list"]]'tabindex="-1">
                                                        <spant-if="is_uom_day">Daysrecorded</span>
                                                        <spant-else="">Hoursrecorded</span>
                                                    </a>
                                                </th>
                                                <tr>
                                                    <tdclass="o_timesheet_plan_dashboard_cell">
                                                        <tt-if="is_uom_day"t-esc="dashboard['time']['billable_time']"t-options="{'widget':'timesheet_uom'}"/>
                                                        <tt-else=""t-esc="dashboard['time']['billable_time']"t-options="{'widget':'float_time'}"/>
                                                    </td>
                                                    <tdclass="o_timesheet_plan_dashboard_cell">
                                                        (<tt-esc="dashboard['rates']['billable_time']"/>%)
                                                    </td>
                                                    <tdtitle="Includesthetimeloggedintotasksforwhichyouinvoicebasedontimesheetsontasks.">
                                                        BilledonTimesheets
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <tdclass="o_timesheet_plan_dashboard_cell">
                                                        <tt-if="is_uom_day"t-esc="dashboard['time']['billable_fixed']"t-options="{'widget':'timesheet_uom'}"/>
                                                        <tt-else=""t-esc="dashboard['time']['billable_fixed']"t-options="{'widget':'float_time'}"/>
                                                    </td>
                                                    <tdclass="o_timesheet_plan_dashboard_cell">
                                                        (<tt-esc="dashboard['rates']['billable_fixed']"/>%)
                                                    </td>
                                                    <tdtitle="Includesthetimeloggedintotasksforwhichyouinvoicebasedonorderedquantitiesoronmilestones.">
                                                        BilledataFixedprice
                                                    </td>
                                                </tr>
                                                <trt-if="dashboard['time']['non_billable_project']!=0">
                                                    <tdclass="o_timesheet_plan_dashboard_cell">
                                                        <tt-if="is_uom_day"t-esc="dashboard['time']['non_billable_project']"t-options="{'widget':'timesheet_uom'}"/>
                                                        <tt-else=""t-esc="dashboard['time']['non_billable_project']"t-options="{'widget':'float_time'}"/>
                                                    </td>
                                                    <tdclass="o_timesheet_plan_dashboard_cell">
                                                        (<tt-esc="dashboard['rates']['non_billable_project']"/>%)
                                                    </td>
                                                    <tdtitle="IncludesthetimeloggedfromtheTimesheetmodulethatislinkedtoaproject,butnottoatask.">
                                                        Notaskfound
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <tdclass="o_timesheet_plan_dashboard_cell">
                                                        <tt-if="is_uom_day"t-esc="dashboard['time']['non_billable']"t-options="{'widget':'timesheet_uom'}"/>
                                                        <tt-else=""t-esc="dashboard['time']['non_billable']"t-options="{'widget':'float_time'}"/>
                                                    </td>
                                                    <tdclass="o_timesheet_plan_dashboard_cell">
                                                        (<tt-esc="dashboard['rates']['non_billable']"/>%)
                                                    </td>
                                                    <td>
                                                        <atype="action"
                                                            data-model="project.task"
                                                            data-views='[[false,"list"],[false,"form"]]'
                                                            t-att-data-domain="json.dumps([['project_id','in',projects.ids],['sale_line_id','=',False]])"
                                                            t-att-data-context="json.dumps({'active_test':False})"
                                                        >
                                                            <spanclass="btn-link"
                                                                  style="font-weight:normal;"
                                                                  title="IncludesthetimeloggedintoataskwhichisnotlinkedtoanySalesOrder.">
                                                                NonBillableTasks
                                                            </span>
                                                        </a>
                                                    </td>
                                                </tr>
                                                <trt-if="dashboard['time']['non_billable_timesheet']>0">
                                                    <tdclass="o_timesheet_plan_dashboard_cell">
                                                        <tt-if="is_uom_day"t-esc="dashboard['time']['non_billable_timesheet']"t-options="{'widget':'timesheet_uom'}"/>
                                                        <tt-else=""t-esc="dashboard['time']['non_billable_timesheet']"t-options="{'widget':'float_time'}"/>
                                                    </td>
                                                    <tdclass="o_timesheet_plan_dashboard_cell">
                                                        (<tt-esc="dashboard['rates']['non_billable_timesheet']"/>%)
                                                    </td>
                                                    <td>
                                                        <atype="action"
                                                            data-model="account.analytic.line"
                                                            data-views='[[false,"list"],[false,"form"]]'
                                                            t-att-data-domain="json.dumps(timesheet_domain+[('timesheet_invoice_type','=','non_billable_timesheet')])"
                                                        >
                                                            <spanclass="btn-link"
                                                                  style="font-weight:normal;">
                                                                NonBillableTimesheets
                                                            </span>
                                                        </a>
                                                    </td>
                                                </tr>
                                                <trt-if="dashboard['time']['canceled']>0">
                                                    <tdclass="o_timesheet_plan_dashboard_cell">
                                                        <tt-if="is_uom_day"t-esc="dashboard['time']['canceled']"t-options="{'widget':'timesheet_uom'}"/>
                                                        <tt-else=""t-esc="dashboard['time']['canceled']"t-options="{'widget':'float_time'}"/>
                                                    </td>
                                                    <tdclass="o_timesheet_plan_dashboard_cell">
                                                        (<tt-esc="dashboard['rates']['canceled']"/>%)
                                                    </td>
                                                    <tdtitle="IncludesthetimeloggedintoataskwhichislinkedtoacancelledSalesOrder.">
                                                        Cancelled
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <tdclass="o_timesheet_plan_dashboard_total">
                                                        <b>
                                                            <tt-if="is_uom_day"t-esc="dashboard['time']['total']"t-options="{'widget':'timesheet_uom'}"/>
                                                            <tt-else=""t-esc="dashboard['time']['total']"t-options="{'widget':'float_time'}"/>
                                                        </b>
                                                    </td>
                                                    <td><b>Total</b></td>
                                                    <td></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <divclass="o_profitability_section">
                                    <div>
                                        <tableclass="table">
                                            <tbody>
                                                <th>
                                                    <atype="action"data-model="project.profitability.report"t-att-data-domain="json.dumps(profitability_domain)"data-context="{'group_by_no_leaf':1,'group_by':[],'sale_show_order_product_name':1}"data-views='[[0,"pivot"],[0,"graph"]]'tabindex="-1">Profitability</a>
                                                </th>
                                                <tr>
                                                    <tdclass="o_timesheet_plan_dashboard_cell">
                                                        <tt-esc="dashboard['profit']['invoiced']"t-options='{"widget":"monetary","display_currency":currency}'/>
                                                    </td>
                                                    <tdtitle="RevenueslinkedtoTimesheetsalreadyinvoiced.">
                                                        Invoiced
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <tdclass="o_timesheet_plan_dashboard_cell">
                                                        <tt-esc="dashboard['profit']['to_invoice']"t-options='{"widget":"monetary","display_currency":currency}'/>
                                                    </td>
                                                    <tdtitle="RevenueslinkedtoTimesheetsnotyetinvoiced.">
                                                        Toinvoice
                                                    </td>
                                                </tr>
                                                <trt-if="dashboard['profit']['other_revenues']>0">
                                                    <tdclass="o_timesheet_plan_dashboard_cell">
                                                        <tt-esc="dashboard['profit']['other_revenues']"t-options='{"widget":"monetary","display_currency":currency}'/>
                                                    </td>
                                                    <tdtitle="Allrevenuesthatarenotfromtimesheetsandthatarelinkedtotheanalyticaccountoftheproject.">OtherRevenues</td>
                                                </tr>
                                                <tr>
                                                    <tdclass="o_timesheet_plan_dashboard_cell">
                                                        <tt-esc="dashboard['profit']['cost']"t-options='{"widget":"monetary","display_currency":currency}'/>
                                                    </td>
                                                    <tdtitle="Thiscostisbasedonthe&quot;Timesheetcost&quot;setintheHRSettingsofyouremployees.">
                                                        Timesheetcosts
                                                    </td>
                                                </tr>
                                                <trt-if="display_cost">
                                                    <tdclass="o_timesheet_plan_dashboard_cell">
                                                        <tt-esc="dashboard['profit']['expense_cost']"t-options='{"widget":"monetary","display_currency":currency}'/>
                                                    </td>
                                                    <tdtitle="AnycostlinkedtotheAnalyticAccountoftheProject.">
                                                        Othercosts
                                                    </td>
                                                </tr>
                                                <trt-if="display_cost&amp;(dashboard['profit']['expense_amount_untaxed_invoiced']!=0)">
                                                    <tdclass="o_timesheet_plan_dashboard_cell">
                                                        <tt-esc="dashboard['profit']['expense_amount_untaxed_invoiced']"t-options='{"widget":"monetary","display_currency":currency}'/>
                                                    </td>
                                                    <tdtitle="Costsfromexpensesthatwerereinvoicedtoyourcustomer(providedthattheAnalyticAccountoftheProjectwassetontheExpense).">
                                                        Re-invoicedcosts
                                                    </td>
                                                </tr>
                                                <trt-if="display_cost&amp;(dashboard['profit']['expense_amount_untaxed_to_invoice']!=0)">
                                                    <tdclass="o_timesheet_plan_dashboard_cell">
                                                        <tt-esc="dashboard['profit']['expense_amount_untaxed_to_invoice']"t-options='{"widget":"monetary","display_currency":currency}'/>
                                                    </td>
                                                    <tdtitle="Costsfromexpensesthatstillneedtobereinvoicedtoyourcustomer(providedthattheAnalyticAccountoftheProjectwassetontheExpense).">
                                                        Tore-invoicecosts
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <tdclass="o_timesheet_plan_dashboard_total">
                                                        <b>
                                                            <tt-esc="dashboard['profit']['total']"t-options='{"widget":"monetary","display_currency":currency}'/>
                                                        </b>
                                                    </td>
                                                    <td><b>Total</b></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <divclass="o_title">
                            <h2>Timebypeople</h2>
                        </div>

                        <divclass="o_timesheet_plan_sale_timesheet_people_time">
                            <tt-if="notrepartition_employee">
                                <p>Therearenotimesheetsfornow.</p>
                            </t>
                            <tt-if="repartition_employee">
                                <divclass="table-responsive">
                                    <tableclass="table">
                                        <thead>
                                            <tr>
                                                <th></th>
                                                <th>Employee</th>
                                                <tht-if="is_uom_day"class="text-nowraptext-rightpr-5">DaysSpent</th>
                                                <tht-else=""class="text-nowraptext-rightpr-5">HoursSpent</th>
                                                <td>
                                                    <divclass="float-righto_timesheet_plan_badge">
                                                        <spanclass="badgebadge-pillo_progress_billable_time">
                                                            <atype="action"data-model="account.analytic.line"t-att-data-domain="json.dumps(timesheet_domain+[('timesheet_invoice_type','=','billable_time')])"tabindex="-1">BilledonTimesheets</a>
                                                        </span>
                                                        <spanclass="badgebadge-pillo_progress_billable_fixed">
                                                            <atype="action"data-model="account.analytic.line"t-att-data-domain="json.dumps(timesheet_domain+[('timesheet_invoice_type','=','billable_fixed')])"tabindex="-1">BilledataFixedprice</a>
                                                        </span>
                                                        <spant-if="dashboard['time']['non_billable_project']!=0"class="badgebadge-pillo_progress_non_billable_project">
                                                            <atype="action"data-model="account.analytic.line"t-att-data-domain="json.dumps(timesheet_domain+[('timesheet_invoice_type','=','non_billable_project')])"tabindex="-1">Notaskfound</a>
                                                        </span>
                                                        <spant-if="dashboard['time']['non_billable_timesheet']!=0"class="badgebadge-pillo_progress_non_billable_timesheet">
                                                            <atype="action"data-model="account.analytic.line"t-att-data-domain="json.dumps(timesheet_domain+[('timesheet_invoice_type','=','non_billable_timesheet')])"tabindex="-1">Nonbillabletimesheets</a>
                                                        </span>
                                                        <spanclass="badgebadge-pillo_progress_non_billable">
                                                            <atype="action"data-model="account.analytic.line"t-att-data-domain="json.dumps(timesheet_domain+[('timesheet_invoice_type','=','non_billable')])"tabindex="-1">Nonbillabletasks</a>
                                                        </span>
                                                        <!--onlyshowthecanceledpillifthereweretimesheetsoncanceledso-->
                                                        <tt-if="sum([employee.get('canceled',0.0)foremployeeinrepartition_employee.values()])>0">
                                                            <spanclass="badgebadge-pillo_progress_canceled">
                                                                <atype="action"data-model="account.analytic.line"t-att-data-domain="json.dumps(timesheet_domain+[('so_line.state','=','cancel')])"tabindex="-1">Cancelled</a>
                                                            </span>
                                                        </t>
                                                    </div>
                                                </td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tt-foreach="repartition_employee"t-as="employee_id">
                                                <tt-set="employee"t-value="repartition_employee[employee_id]"/>
                                                <tr>
                                                    <tdstyle="width:3%;vertical-align:middle;">
                                                        <imgclass="imgrounded-circlemr-2mb-2"t-attf-src="/web/image?model=hr.employee&amp;field=image_128&amp;id=#{employee['employee_id']}"t-att-title="employee['employee_name']"t-att-alt="employee['employee_name']"width="25"height="25"/>
                                                    </td>
                                                    <tdstyle="width:15%;vertical-align:middle;">
                                                        <atype="action"data-model="account.analytic.line"t-att-data-domain="json.dumps(timesheet_domain)"t-att-data-context="json.dumps({'search_default_employee_id':employee_id})"data-views="[[0,&quot;list&quot;]]"tabindex="-1">
                                                            <tt-esc="employee['employee_name']"/>
                                                        </a>
                                                    </td>
                                                    <tdclass="text-rightpr-5"style="width:10%;vertical-align:middle;">
                                                        <tt-if="is_uom_day"t-esc="employee['total']"t-options="{'widget':'timesheet_uom'}"/>
                                                        <tt-else=""t-esc="employee['total']"t-options="{'widget':'float_time'}"/>
                                                    </td>
                                                    <tdstyle="vertical-align:middle">
                                                        <divclass="borderrounded">
                                                            <divt-if="repartition_employee_max"class="progress"t-attf-style="width:{{max(0,employee['total']/repartition_employee_max*100)}}%;margin-bottom:0em;">

                                                                <tt-set="total"t-value="employee['total']or1.0"/>
                                                                <tt-call="sale_timesheet.progressbar">
                                                                    <tt-set="label">BilledonTimesheets</t>
                                                                    <tt-set="key"t-translation="off">billable_time</t>
                                                                </t>
                                                                <tt-call="sale_timesheet.progressbar">
                                                                    <tt-set="label">BilledataFixedprice</t>
                                                                    <tt-set="key"t-translation="off">billable_fixed</t>
                                                                </t>
                                                                <tt-call="sale_timesheet.progressbar">
                                                                    <tt-set="label">Notaskfound</t>
                                                                    <tt-set="key"t-translation="off">non_billable_project</t>
                                                                </t>
                                                                <tt-call="sale_timesheet.progressbar">
                                                                    <tt-set="label">Nonbillabletimesheets</t>
                                                                    <tt-set="key"t-translation="off">non_billable_timesheet</t>
                                                                </t>
                                                                <tt-call="sale_timesheet.progressbar">
                                                                    <tt-set="label">Nonbillabletasks</t>
                                                                    <tt-set="key"t-translation="off">non_billable</t>
                                                                </t>
                                                                <tt-call="sale_timesheet.progressbar">
                                                                    <tt-set="label">Cancelled</t>
                                                                    <tt-set="key"t-translation="off">canceled</t>
                                                                </t>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </t>
                                        </tbody>
                                    </table>
                                </div>
                            </t>
                        </div>

                        <divclass="o_title">
                            <h2>Timesheets</h2>
                        </div>

                        <!--NOTE:thistemplatetodisplayatableworkswhateverthelengthoftherows,asproject_timesheet_forecast_saleextendsthetabletoaddforecasts-->
                        <divclass="o_project_plan_project_timesheet_forecast">
                            <tt-if="timesheet_forecast_tableandtimesheet_forecast_table['rows']">
                                <divclass="table-responsive">
                                    <tableclass="table">
                                        <thead>
                                            <tr>
                                                <th></th>
                                                <thcolspan="5"id="table_plan_title"class="o_right_bordered"><h3>Timesheets</h3></th>
                                                <thcolspan="2"id="table_plan_total"></th>
                                            </tr>
                                            <tr>
                                                <tt-foreach="timesheet_forecast_table['header']"t-as="header_val">
                                                    <tht-att-class="'o_right_bordered'ifheader_val_indexin[5,10]else''">
                                                        <spant-att-title="header_val['tooltip']"><tt-esc="header_val['label']"/></span>
                                                    </th>
                                                </t>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tt-set="row_is_milestone"t-value="False"/>
                                            <tt-set="current_order"t-value="False"/>
                                            <tt-set="current_order_line"t-value="False"/>
                                            <tt-foreach="timesheet_forecast_table['rows']"t-as="row">
                                                <tt-set="row_type"t-value="row[0].get('type')"/>
                                                <tt-if="row_type=='sale_order_line'">
                                                    <tt-set="row_is_milestone"t-value="row[0].get('is_milestone')"/>
                                                </t>
                                                <tt-if="row_type=='sale_order'">
                                                    <tt-set="current_order"t-value="False"/>
                                                    <tt-set="current_order_line"t-value="False"/>
                                                </t>
                                                <tt-if="row_type=='sale_order_line'">
                                                    <tt-set="current_order_line"t-value="False"/>
                                                </t>
                                                <tt-set="foldable"t-value="row[0].get('has_children')"/>
                                                <trt-att-class="'o_timesheet_forecast_'+row_type+'sale_order_'+str(current_order)+'sale_order_line_'+str(current_order_line)"
                                                    t-att-style="'display:none;'ifrow_typenotin('sale_order','sale_order_line')else''">
                                                    <tt-foreach="row"t-as="row_value">
                                                        <tdt-att-class="'o_right_bordered'ifrow_value_indexin[5,10]else''+'text-center'ifrow_value_index!=0else''">
                                                            <tt-if="row_value_index==0">
                                                                <spant-if="foldable"t-att-class="('fafa-caret-down'ifrow_type=='sale_order'else'fafa-caret-right')+('project_overview_foldable'iffoldableelse'')"
                                                                      style="cursor:pointer;"t-att-data-model="row[0].get('res_model')"t-att-data-res-id="row[0].get('res_id')"/>
                                                                <tt-if="row_type=='sale_order'">
                                                                    <tt-if="env.user.has_group('sales_team.group_sale_salesman')">
                                                                        <atype="action"t-att-data-model="row_value['res_model']"t-att-data-res-id="row_value['res_id']"t-att-class="'o_timesheet_plan_redirect'ifrow_value['res_id']else''">
                                                                           <tt-esc="row_value.get('label')"/>
                                                                        </a>
                                                                    </t>
                                                                    <tt-else="">
                                                                        <tt-esc="row_value.get('label')"/>
                                                                    </t>
                                                                    <spant-if="row_value.get('canceled')"class="badgebadge-pillo_canceled_tag">
                                                                        Cancelled
                                                                    </span>
                                                                </t>
                                                                <tt-if="row_type!='sale_order'">
                                                                    <tt-if="notrow_is_milestone">
                                                                        <span><tt-esc="row_value.get('label')"/></span>
                                                                    </t>
                                                                     <tt-if="row_is_milestone">
                                                                        <span><i><tt-esc="row_value.get('label')"/></i></span>
                                                                    </t>
                                                                </t>
                                                            </t>
                                                            <tt-if="row_value_index!=0">
                                                                <tt-if="row_value_index&lt;len(row)-2">
                                                                    <tt-if="row_is_milestone">
                                                                        <it-att-class="'text-muted'ifnotrow_valueelse''">
                                                                            <tt-if="is_uom_day"t-esc="row_value"t-options="{'widget':'timesheet_uom'}"/>
                                                                            <tt-else=""t-esc="row_value"t-options="{'widget':'float_time'}"/>
                                                                        </i>
                                                                    </t>
                                                                    <tt-else="">
                                                                        <spant-att-class="'text-muted'ifnotrow_valueelse''">
                                                                            <tt-if="is_uom_day"t-esc="row_value"t-options="{'widget':'timesheet_uom'}"/>
                                                                            <tt-else=""t-esc="row_value"t-options="{'widget':'float_time'}"/>
                                                                        </span>
                                                                    </t>
                                                                </t>
                                                                <tt-else="">
                                                                    <tt-if="notrow_is_milestoneandnotrow[0].get('type')=='hr_employee'">
                                                                        <spant-att-class="'text-muted'ifnotrow_valueelse''">
                                                                            <tt-if="is_uom_day"t-esc="row_value"t-options="{'widget':'timesheet_uom'}"/>
                                                                            <tt-else=""t-esc="row_value"t-options="{'widget':'float_time'}"/>
                                                                        </span>
                                                                    </t>
                                                                </t>
                                                            </t>
                                                        </td>
                                                    </t>
                                                </tr>
                                                <tt-if="row_type=='sale_order_line'">
                                                    <tt-set="current_order_line"t-value="row[0].get('res_id')"/>
                                                </t>
                                                <tt-if="row_type=='sale_order'">
                                                    <tt-set="current_order"t-value="row[0].get('res_id')"/>
                                                </t>
                                            </t>
                                        </tbody>
                                    </table>
                                </div>
                            </t>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        </qweb>
        </field>
    </record>

    <templateid="progressbar"name="projectoverviewprogressbarsegments">
        <tt-set="amount"t-value="employee[key]"/>
        <tt-if="amount&gt;0">
            <tt-set="title">
                <tt-esc="label"/>:<tt-if="is_uom_day"t-esc="amount"t-options="{'widget':'timesheet_uom'}"/><tt-else=""t-esc="amount"t-options="{'widget':'float_time'}"/>
            </t>
            <at-attf-class="progress-baro_progress_{{key}}"
               t-attf-style="width:{{amount/total*100}}%"
               type="action"data-model="account.analytic.line"
               t-att-data-domain="employee['__domain_'+key]"
            >
                <spant-att-title="title"style="font-size:0px;width:100%;height:100%;">
                    <tt-esc="label"/>
                </span>
            </a>
        </t>
    </template>

</flectra>
