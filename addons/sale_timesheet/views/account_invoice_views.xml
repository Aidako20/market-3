<?xmlversion="1.0"encoding="utf-8"?>
<flectra>

    <recordid="action_timesheet_from_invoice"model="ir.actions.act_window">
        <fieldname="name">Timesheet</field>
        <fieldname="type">ir.actions.act_window</field>
        <fieldname="res_model">account.analytic.line</field>
        <fieldname="view_mode">tree,form,graph</field>
        <fieldname="context">{}</field>
        <fieldname="domain">[('timesheet_invoice_id','=',active_id)]</field>
    </record>

    <recordid="account_invoice_view_form_inherit_sale_timesheet"model="ir.ui.view">
        <fieldname="name">account.invoice.form.inherit.timesheet</field>
        <fieldname="model">account.move</field>
        <fieldname="inherit_id"ref="account.view_move_form"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//div[@name='button_box']"position="inside">
                <buttonname="%(sale_timesheet.action_timesheet_from_invoice)d"type="action"class="oe_stat_button"icon="fa-calendar"attrs="{'invisible':[('timesheet_count','=',0)]}">
                    <fieldname="timesheet_count"widget="statinfo"string="Timesheets"/>
                </button>
            </xpath>
        </field>
    </record>

</flectra>
