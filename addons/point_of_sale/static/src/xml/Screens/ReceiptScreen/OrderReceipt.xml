<?xmlversion="1.0"encoding="UTF-8"?>
<templatesid="template"xml:space="preserve">

    <tt-name="OrderReceipt"owl="1">
        <divclass="pos-receipt">
            <tt-if="receipt.company.logo">
                <imgclass="pos-receipt-logo"t-att-src="receipt.company.logo"alt="Logo"/>
                <br/>
            </t>
            <tt-if="!receipt.company.logo">
                <h2class="pos-receipt-center-align">
                    <tt-esc="receipt.company.name"/>
                </h2>
                <br/>
            </t>
            <divclass="pos-receipt-contact">
                <tt-if="receipt.company.contact_address">
                    <div><tt-esc="receipt.company.contact_address"/></div>
                </t>
                <tt-if="receipt.company.phone">
                    <div>Tel:<tt-esc="receipt.company.phone"/></div>
                </t>
                <tt-if="receipt.company.vat">
                    <div><tt-esc="receipt.company.vat_label"/>:<tt-esc="receipt.company.vat"/></div>
                </t>
                <tt-if="receipt.company.email">
                    <div><tt-esc="receipt.company.email"/></div>
                </t>
                <tt-if="receipt.company.website">
                    <div><tt-esc="receipt.company.website"/></div>
                </t>
                <tt-if="receipt.header_html">
                    <tt-raw="receipt.header_html"/>
                </t>
                <tt-if="!receipt.header_htmlandreceipt.header">
                    <divstyle="white-space:pre-line"><tt-esc="receipt.header"/></div>
                </t>
                <tt-if="receipt.cashier">
                    <divclass="cashier">
                        <div>--------------------------------</div>
                        <div>Servedby<tt-esc="receipt.cashier"/></div>
                    </div>
                </t>
            </div>
            <br/><br/>

            <!--Orderlines-->

            <divclass="orderlines">
                <tt-foreach="receipt.orderlines"t-as="line"t-key="line.id">
                    <tt-if="isSimple(line)">
                        <divclass="responsive-price">
                            <tt-esc="line.product_name_wrapped[0]"/>
                            <spant-esc="env.pos.format_currency_no_symbol(line.price_display)"class="price_displaypos-receipt-right-align"/>
                        </div>
                        <WrappedProductNameLinesline="line"/>
                    </t>
                    <tt-else="">
                        <divt-esc="line.product_name_wrapped[0]"/>
                        <WrappedProductNameLinesline="line"/>
                        <tt-if="line.display_discount_policy=='without_discount'andline.price!=line.price_lst">
                            <divclass="pos-receipt-left-padding">
                                <tt-esc="env.pos.format_currency_no_symbol(line.price_lst)"/>
                                ->
                                <tt-esc="env.pos.format_currency_no_symbol(line.price)"/>
                            </div>
                        </t>
                        <tt-elif="line.discount!==0">
                            <divclass="pos-receipt-left-padding">
                                <tt-if="env.pos.config.iface_tax_included==='total'">
                                    <tt-esc="env.pos.format_currency_no_symbol(line.price_with_tax_before_discount)"/>
                                </t>
                                <tt-else="">
                                    <tt-esc="env.pos.format_currency_no_symbol(line.price)"/>
                                </t>
                            </div>
                        </t>
                        <tt-if="line.discount!==0">
                            <divclass="pos-receipt-left-padding">
                                Discount:<tt-esc="line.discount"/>%
                            </div>
                        </t>
                        <divclass="pos-receipt-left-padding">
                            <tt-esc="Math.round(line.quantity*Math.pow(10,env.pos.dp['ProductUnitofMeasure']))/Math.pow(10,env.pos.dp['ProductUnitofMeasure'])"/>
                            <tt-if="!line.is_in_unit"t-esc="line.unit_name"/>
                            x
                            <tt-esc="env.pos.format_currency(line.price_display_one)"/>
                            <spanclass="price_displaypos-receipt-right-align">
                                <tt-esc="env.pos.format_currency_no_symbol(line.price_display)"/>
                            </span>
                        </div>
                    </t>
                    <tt-if="line.pack_lot_lines">
                        <divclass="pos-receipt-left-padding">
                            <ul>
                                <tt-foreach="line.pack_lot_lines"t-as="lot"t-key="lot.cid">
                                    <li>
                                        SN<tt-esc="lot.attributes['lot_name']"/>
                                    </li>
                                </t>
                            </ul>
                        </div>
                    </t>
                </t>
            </div>

            <!--Subtotal-->

            <tt-if="!isTaxIncluded">
                <divclass="pos-receipt-right-align">--------</div>
                <br/>
                <div>Subtotal<spant-esc="env.pos.format_currency(receipt.subtotal)"class="pos-receipt-right-align"/></div>
                <tt-foreach="receipt.tax_details"t-as="tax"t-key="tax.name">
                    <divclass="responsive-price">
                        <tt-esc="tax.name"/>
                        <spant-esc='env.pos.format_currency_no_symbol(tax.amount)'class="pos-receipt-right-align"/>
                    </div>
                </t>
            </t>

            <!--Total-->
            <divclass="pos-receipt-right-align">--------</div>
            <br/>
            <divclass="pos-receipt-amount">
                TOTAL
                <spant-esc="env.pos.format_currency(receipt.total_with_tax)"class="pos-receipt-right-align"/>
            </div>
            <tt-if="receipt.total_rounded!=receipt.total_with_tax">
                <divclass="pos-receipt-amount">
                  Rounding
                <spant-esc='env.pos.format_currency(receipt.rounding_applied)'class="pos-receipt-right-align"/>
                </div>
                <divclass="pos-receipt-amount">
                  ToPay
                 <spant-esc='env.pos.format_currency(receipt.total_rounded)'class="pos-receipt-right-align"/>
              </div>
            </t>
            <br/><br/>

            <!--PaymentLines-->

            <tt-foreach="receipt.paymentlines"t-as="line"t-key="line.cid">
                <div>
                    <tt-esc="line.name"/>
                    <spant-esc="env.pos.format_currency_no_symbol(line.amount)"class="pos-receipt-right-align"/>
                </div>
            </t>
            <br/>

            <divclass="pos-receipt-amountreceipt-change">
                CHANGE
                <spant-esc="env.pos.format_currency(receipt.change)"class="pos-receipt-right-align"/>
            </div>
            <br/>

            <!--ExtraPaymentInfo-->

            <tt-if="receipt.total_discount">
                <div>
                    Discounts
                    <spant-esc="env.pos.format_currency(receipt.total_discount)"class="pos-receipt-right-align"/>
                </div>
            </t>
            <tt-if="isTaxIncluded">
                <tt-foreach="receipt.tax_details"t-as="tax"t-key="tax.name">
                    <div>
                        <tt-esc="tax.name"/>
                        <spant-esc="env.pos.format_currency_no_symbol(tax.amount)"class="pos-receipt-right-align"/>
                    </div>
                </t>
                <div>
                    TotalTaxes
                    <spant-esc="env.pos.format_currency(receipt.total_tax)"class="pos-receipt-right-align"/>
                </div>
            </t>

            <divclass="before-footer"/>

            <!--Footer-->
            <divt-if="receipt.footer_html" class="pos-receipt-center-align">
                <tt-raw="receipt.footer_html"/>
            </div>

            <divt-if="!receipt.footer_htmlandreceipt.footer" class="pos-receipt-center-align"style="white-space:pre-line">
                <br/>
                <tt-esc="receipt.footer"/>
                <br/>
                <br/>
            </div>

            <divclass="after-footer">
                <tt-foreach="receipt.paymentlines"t-as="line">
                    <tt-if="line.ticket">
                        <br/>
                        <divclass="pos-payment-terminal-receipt">
                            <tt-raw="line.ticket"/>
                        </div>
                    </t>
                </t>
            </div>

            <br/>
            <divclass="pos-receipt-order-data">
                <div><tt-esc="receipt.name"/></div>
                <div><tt-esc="receipt.date.localestring"/></div>
            </div>

        </div>
    </t>

</templates>
