<?xmlversion="1.0"encoding="UTF-8"?>
<templatesid="template"xml:space="preserve">

    <tt-name="Chrome"owl="1">
        <divclass="pos"t-att-class="{'big-scrollbars':state.hasBigScrollBars}">
            <divclass="pos-receipt-print"></div>
            <divclass="pos-topheader"t-att-class="{oe_hidden:state.uiState!=='READY'}">
                <divt-if="tempScreen.isShown"class="block-top-header"/>
                <divclass="pos-branding"t-if="!env.isMobile">
                    <imgclass="pos-logo"t-on-click="trigger('toggle-debug-widget')"
                         src="/point_of_sale/static/src/img/logo.png"alt="Logo"/>
                    <TicketButtonisTicketScreenShown="isTicketScreenShown"/>
                </div>
                <divclass="pos-rightheader">
                    <TicketButtonisTicketScreenShown="isTicketScreenShown"t-if="env.isMobile"/>
                    <divclass="search-bar-portal"/>
                    <divclass="status-buttons-portal"/>
                </div>
            </div>
            <tt-if="state.uiState==='READY'">
                <Portaltarget="'.pos.status-buttons-portal'">
                    <divclass="status-buttons">
                        <tt-if="!env.isMobile">
                            <CashierName/>
                        </t>
                        <OrderManagementButtont-if="env.pos.config.manage_orders"/>
                        <SaleDetailsButtont-if="env.pos.proxy.printer"/>
                        <ProxyStatust-if="env.pos.config.use_proxy"/>
                        <ClientScreenButtont-if="clientScreenButtonIsShown"/>
                        <SyncNotification/>
                        <HeaderButton/>
                    </div>
                </Portal>
                <divclass="pos-content">
                    <divclass="window">
                        <divclass="subwindow">
                            <divclass="subwindow-container">
                                <divclass="subwindow-container-fixscreens">
                                    <tisShown="!tempScreen.isShown"t-component="mainScreen.component"
                                       t-props="mainScreenProps"t-key="mainScreen.name"/>
                                    <tt-if="tempScreen.isShown"t-component="tempScreen.component"
                                       t-props="tempScreenProps"t-key="tempScreen.name"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <DebugWidgett-if="env.isDebug()andstate.debugWidgetIsShown"
                                 t-transition="fade"/>
                </div>
            </t>

            <divt-if="['LOADING','CLOSING'].includes(state.uiState)"class="loader"t-transition="swing">
                <divclass="loader-feedback">
                    <h1class="message">
                        <tt-esc="loading.message"/>
                    </h1>
                    <divclass="progressbar">
                        <divclass="progress"t-ref="progressbar"></div>
                    </div>
                    <divt-if="loading.skipButtonIsShown"class="buttonskip"t-on-click="trigger('loading-skip-callback')">
                        Skip
                    </div>
                </div>
            </div>

            <!--Allowpopupstobevisibleatanystateoftheui.-->
            <divt-if="popup.isShown"class="popups">
                <tt-component="popup.component"t-props="popupProps"
                   t-key="popup.name"/>
            </div>

            <NotificationSoundt-if="state.sound.src"sound="state.sound"/>
        </div>
    </t>

    <tt-name="CustomerFacingDisplayHead">
        <divclass="resources">
            <baset-att-href="origin"/>
            <linkhref="/point_of_sale/static/src/css/customer_facing_display.css"
                  rel="stylesheet"/>
            <scripttype="text/javascript">
                //Thisfunctionneedstobenamedthatway,callittheforeignJSAPI
                //Theiotboxwillexecuteit,withthebehaviorintended
                functionforeign_js(){
                    if($('.pos-adv').hasClass('pos-hidden')){
                        $('.pos-customer_facing_display').addClass('pos-js_no_ADV');
                    }
                    $(window).on('resize',function(){
                        $('.pos-customer_facing_display').toggleClass('pos-js_no_ADV',$('.pos-adv').hasClass('pos-hidden'));
                    }).trigger('resize');
                };
            </script>
        </div>
    </t>

    <tt-name="CustomerFacingDisplayOrderLines">
        <tt-foreach="orderlines"t-as="orderline">
            <divclass="pos_orderlines_item">
                <div>
                    <divt-attf-style="background-image:url(#{orderline.product.image_base64})"/>
                </div>
                <div>
                    <tt-esc="orderline.get_full_product_name()"/>
                </div>
                <div>
                    <tt-esc="orderline.get_quantity_str()"/>
                </div>
                <div>
                    <tt-esc="pos.format_currency(orderline.get_display_price())"/>
                </div>
            </div>
        </t>
    </t>

    <tt-name="CustomerFacingDisplayPaymentLines">
        <tt-foreach="order.get_paymentlines()"t-as="paymentline">
            <div>
                <span>
                    <tt-esc="paymentline.name"/></span>
            </div>
            <div>
                <span>
                    <tt-esc="pos.format_currency(paymentline.get_amount())"/></span>
            </div>
        </t>
        <tt-if="order.get_paymentlines().length>0">
            <div>
                <spanclass="pos-change_title">Change:</span>
            </div>
            <div>
                <spanclass="pos-change_amount">
                    <tt-esc="pos.format_currency(order.get_change())"/></span>
            </div>
        </t>
    </t>
</templates>
