<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <recordid="view_pos_pos_form"model="ir.ui.view">
        <fieldname="name">pos.order.form</field>
        <fieldname="model">pos.order</field>
        <fieldname="arch"type="xml">
            <formstring="PointofSaleOrders"create="0">
                <header>
                    <buttonname="%(action_pos_payment)d"string="Payment"class="oe_highlight"type="action"states="draft"/>
                    <buttonname="action_pos_order_invoice"string="Invoice"type="object"
                            attrs="{'invisible':['|',('invoice_group','=',False),('state','!=','paid')]}"/>
                    <buttonname="refund"string="ReturnProducts"type="object"
                        attrs="{'invisible':[('state','=','draft')]}"/>
                    <fieldname="state"widget="statusbar"statusbar_visible="draft,paid,done"/>
                </header>
                <sheet>
                <fieldname="failed_pickings"invisible="1"/>
                <divclass="oe_button_box"name="button_box">
                    <buttonname="action_stock_picking"
                        type="object"
                        class="oe_stat_button"
                        icon="fa-truck"
                        attrs="{'invisible':[('picking_count','=',0)]}">
                        <fieldname="picking_count"widget="statinfo"string="Pickings"attrs="{'invisible':[('failed_pickings','!=',False)]}"/>
                        <fieldname="picking_count"widget="statinfo"string="Pickings"class="text-danger"attrs="{'invisible':[('failed_pickings','=',False)]}"/>
                    </button>
                    <buttonname="action_view_invoice"
                        string="Invoice"
                        type="object"
                        class="oe_stat_button"
                        icon="fa-pencil-square-o"
                        attrs="{'invisible':[('state','!=','invoiced')]}">
                    </button>
                </div>
                <groupcol="4"colspan="4"name="order_fields">
                    <fieldname="name"/>
                    <fieldname="date_order"/>
                    <fieldname="session_id"/>
                    <fieldstring="User"name="user_id"/>
                    <fieldname="partner_id"context="{'res_partner_search_mode':'customer'}"attrs="{'readonly':[('state','=','invoiced')]}"/>
                    <fieldname="fiscal_position_id"options="{'no_create':True}"/>
                    <fieldname="invoice_group"invisible="1"/>
                </group>
                <notebookcolspan="4">
                    <pagestring="Products"name="products">
                        <fieldname="lines"colspan="4"nolabel="1">
                            <treestring="Orderlines"editable="bottom">
                                <fieldname="full_product_name"/>
                                <fieldname="pack_lot_ids"widget="many2many_tags"groups="stock.group_production_lot"/>
                                <fieldname="qty"/>
                                <fieldname="product_uom_id"string="UoM"groups="uom.group_uom"/>
                                <fieldname="price_unit"widget="monetary"/>
                                <fieldname="discount"string="Disc.%"/>
                                <fieldname="tax_ids_after_fiscal_position"widget="many2many_tags"string="Taxes"/>
                                <fieldname="tax_ids"widget="many2many_tags"invisible="1"/>
                                <fieldname="price_subtotal"widget="monetary"force_save="1"/>
                                <fieldname="price_subtotal_incl"widget="monetary"force_save="1"/>
                                <fieldname="currency_id"invisible="1"/>
                            </tree>
                            <formstring="Orderlines">
                                <groupcol="4">
                                    <fieldname="full_product_name"/>
                                    <fieldname="qty"/>
                                    <fieldname="discount"/>
                                    <fieldname="price_unit"widget="monetary"/>
                                    <fieldname="price_subtotal"invisible="1"widget="monetary"force_save="1"/>
                                    <fieldname="price_subtotal_incl"invisible="1"widget="monetary"force_save="1"/>
                                    <fieldname="tax_ids_after_fiscal_position"widget="many2many_tags"string="Taxes"/>
                                    <fieldname="tax_ids"widget="many2many_tags"invisible="1"/>
                                    <fieldname="pack_lot_ids"widget="many2many_tags"groups="stock.group_production_lot"/>
                                    <fieldname="notice"/>
                                    <fieldname="currency_id"invisible="1"/>
                                </group>
                            </form>
                        </field>
                        <groupclass="oe_subtotal_footeroe_right"colspan="2"name="order_total">
                            <fieldname="amount_tax"
                                   force_save="1"
                                   widget="monetary"/>
                            <divclass="oe_subtotal_footer_separatoroe_inline">
                                <labelfor="amount_total"/>
                                <buttonname="button_dummy"
                                    states="draft"string="(update)"class="oe_edit_onlyoe_link"/>
                            </div>
                            <fieldname="amount_total"
                                   force_save="1"
                                   nolabel="1"
                                   class="oe_subtotal_footer_separator"
                                   widget="monetary"/>
                            <fieldname="amount_paid"
                                string="TotalPaid(withrounding)"
                                class="oe_subtotal_footer_separator"
                                widget="monetary"
                                attrs="{'invisible':[('amount_paid','=','amount_total')]}"/>
                            <fieldname="currency_id"invisible="1"/>
                        </group>
                        <divclass="oe_clear"/>
                    </page>
                    <pagestring="Payments"name="payments">
                        <fieldname="payment_ids"colspan="4"nolabel="1">
                            <treestring="Payments">
                                <fieldname="currency_id"invisible="1"/>
                                <fieldname="payment_date"/>
                                <fieldname="payment_method_id"/>
                                <fieldname="amount"/>
                            </tree>
                        </field>
                    </page>
                    <pagename="extra"string="ExtraInfo">
                        <group>
                            <group
                                string="Accounting"
                                groups="account.group_account_manager"
                                attrs="{'invisible':['|',('session_move_id','=',False),('state','=','invoiced')]}"
                            >
                                <fieldname="session_move_id"readonly="1"/>
                            </group>
                            <groupstring="OtherInformation">
                                <fieldname="pos_reference"/>
                                <fieldname="company_id"groups="base.group_multi_company"/>
                                <fieldname="pricelist_id"groups="product.group_product_pricelist"/>
                            </group>
                        </group>
                    </page>
                    <pagestring="Notes"name="notes">
                        <fieldname="note"/>
                    </page>
                </notebook>
            </sheet>
            </form>
        </field>
    </record>

    <recordmodel="ir.ui.view"id="view_pos_order_kanban">
        <fieldname="name">pos.order.kanban</field>
        <fieldname="model">pos.order</field>
        <fieldname="arch"type="xml">
            <kanbanclass="o_kanban_mobile"create="0"sample="1">
                <fieldname="name"/>
                <fieldname="partner_id"/>
                <fieldname="amount_total"/>
                <fieldname="date_order"/>
                <fieldname="state"/>
                <fieldname="pos_reference"/>
                <fieldname="partner_id"/>
                <fieldname="currency_id"/>
                <templates>
                    <tt-name="kanban-box">
                        <divt-attf-class="oe_kanban_cardoe_kanban_global_click">
                            <divclass="o_kanban_record_top">
                                <divclass="o_kanban_record_headings">
                                    <strongclass="o_kanban_record_title">
                                        <spant-if="record.partner_id.value">
                                            <tt-esc="record.partner_id.value"/>
                                        </span>
                                        <spant-else="">
                                            <tt-esc="record.name.value"/>
                                        </span>
                                    </strong>
                                </div>
                                <strong><fieldname="amount_total"widget="monetary"/></strong>
                            </div>
                            <divclass="row">
                                <divclass="col-12">
                                <span><tt-esc="record.pos_reference.value"/></span>
                            </div>
                            </div>
                            <divclass="row">
                                <divclass="col-8text-muted">
                                    <span><tt-esc="record.date_order.value"/></span>
                                </div>
                                <divclass="col-4">
                                    <spanclass="float-righttext-right">
                                        <fieldname="state"widget="label_selection"options="{'classes':{'draft':'default',
                                        'invoiced':'success','cancel':'danger'}}"/>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>
    <recordmodel="ir.ui.view"id="view_pos_order_pivot">
        <fieldname="name">pos.order.pivot</field>
        <fieldname="model">pos.order</field>
        <fieldname="arch"type="xml">
            <pivotstring="PoSOrders"sample="1">
                <fieldname="date_order"type="row"/>
                <fieldname="amount_total"type="measure"/>
            </pivot>
        </field>
    </record>

    <recordid="action_pos_pos_form"model="ir.actions.act_window">
        <fieldname="name">Orders</field>
        <fieldname="type">ir.actions.act_window</field>
        <fieldname="res_model">pos.order</field>
        <fieldname="view_mode">tree,form,kanban,pivot</field>
        <fieldname="view_id"eval="False"/>
        <fieldname="domain">[]</field>
        <fieldname="help"type="html">
            <pclass="o_view_nocontent_empty_folder">
                Noordersfound
            </p><p>
                Torecordneworders,startanewsession.
            </p>
        </field>
    </record>

    <recordid="action_pos_sale_graph"model="ir.actions.act_window">
        <fieldname="name">Orders</field>
        <fieldname="type">ir.actions.act_window</field>
        <fieldname="res_model">pos.order</field>
        <fieldname="view_mode">graph,tree,form,kanban,pivot</field>
        <fieldname="domain">[('state','notin',['draft','cancel','invoiced'])]</field>
        <fieldname="help"type="html">
            <pclass="o_view_nocontent_smiling_face">
                Nodatayet!
            </p><p>
                CreateanewPOSorder
            </p>
        </field>
    </record>

    <recordid="view_pos_order_tree"model="ir.ui.view">
        <fieldname="name">pos.order.tree</field>
        <fieldname="model">pos.order</field>
        <fieldname="arch"type="xml">
            <treestring="POSOrders"create="0"sample="1">
                <fieldname="currency_id"invisible="1"/>
                <fieldname="name"decoration-bf="1"/>
                <fieldname="session_id"/>
                <fieldname="date_order"/>
                <fieldname="pos_reference"/>
                <fieldname="partner_id"/>
                <fieldstring="Cashier"name="user_id"widget="many2one_avatar_user"/>
                <fieldname="amount_total"sum="Amounttotal"widget="monetary"decoration-bf="1"/>
                <fieldname="state"widget="badge"decoration-info="state=='draft'"decoration-success="statenotin('draft','cancel')"/>
            </tree>
        </field>
    </record>
    <recordid="view_pos_order_tree_no_session_id"model="ir.ui.view">
        <fieldname="name">pos.order.tree_no_session_id</field>
        <fieldname="model">pos.order</field>
        <fieldname="mode">primary</field>
        <fieldname="priority">1000</field>
        <fieldname="inherit_id"ref="point_of_sale.view_pos_order_tree"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//field[@name='session_id']"position="replace"></xpath>
        </field>
    </record>

    <recordid="view_pos_order_search"model="ir.ui.view">
        <fieldname="name">pos.order.search.view</field>
        <fieldname="model">pos.order</field>
        <fieldname="arch"type="xml">
            <searchstring="PointofSaleOrders">
                <fieldname="name"/>
                <fieldname="config_id"/>
            </search>
        </field>
    </record>

    <menuitemid="menu_point_ofsale"parent="menu_point_of_sale"action="action_pos_pos_form"sequence="2"groups="group_pos_manager,group_pos_user"/>

    <recordid="view_pos_order_line"model="ir.ui.view">
        <fieldname="name">pos.order.line.tree</field>
        <fieldname="model">pos.order.line</field>
        <fieldname="arch"type="xml">
            <treestring="POSOrderlines">
                <fieldname="product_id"readonly="1"/>
                <fieldname="qty"readonly="1"sum="Totalqty"/>
                <fieldname="discount"readonly="1"/>
                <fieldname="price_unit"readonly="1"widget="monetary"/>
                <fieldname="price_subtotal"readonly="1"sum="Sumofsubtotals"widget="monetary"/>
                <fieldname="price_subtotal_incl"readonly="1"sum="Sumofsubtotals"widget="monetary"/>
                <fieldname="create_date"readonly="1"/>
                <fieldname="currency_id"invisible="1"/>
            </tree>
        </field>
    </record>

    <recordid="view_pos_order_line_form"model="ir.ui.view">
        <fieldname="name">pos.order.line.form</field>
        <fieldname="model">pos.order.line</field>
        <fieldname="arch"type="xml">
            <formstring="POSOrderline">
                <groupcol="4">
                    <fieldname="product_id"/>
                    <fieldname="qty"/>
                    <fieldname="discount"/>
                    <fieldname="price_unit"widget="monetary"/>
                    <fieldname="create_date"/>
                    <fieldname="currency_id"/>
                </group>
            </form>
        </field>
    </record>

    <recordid="action_pos_order_line"model="ir.actions.act_window">
        <fieldname="name">Saleline</field>
        <fieldname="type">ir.actions.act_window</field>
        <fieldname="res_model">pos.order.line</field>
        <fieldname="view_mode">tree</field>
        <fieldname="view_id"ref="view_pos_order_line"/>
    </record>

    <recordid="action_pos_order_line_form"model="ir.actions.act_window">
        <fieldname="name">Saleline</field>
        <fieldname="type">ir.actions.act_window</field>
        <fieldname="res_model">pos.order.line</field>
        <fieldname="view_mode">form,tree</field>
        <fieldname="view_id"ref="view_pos_order_line_form"/>
    </record>

    <recordid="action_pos_order_line_day"model="ir.actions.act_window">
        <fieldname="name">Saleline</field>
        <fieldname="type">ir.actions.act_window</field>
        <fieldname="res_model">pos.order.line</field>
        <fieldname="view_mode">tree</field>
        <fieldname="view_id"ref="view_pos_order_line"/>
        <fieldname="domain">[('create_date','&gt;=',time.strftime('%Y-%m-%d00:00:00')),('create_date','&lt;=',time.strftime('%Y-%m-%d23:59:59'))]</field>
    </record>

    <recordid="view_pos_order_tree_all_sales_lines"model="ir.ui.view">
        <fieldname="name">pos.order.line.all.sales.tree</field>
        <fieldname="model">pos.order.line</field>
        <fieldname="arch"type="xml">
            <treestring="POSOrderslines">
                <fieldname="order_id"/>
                <fieldname="create_date"/>
                <fieldname="product_id"/>
                <fieldname="qty"/>
                <fieldname="price_unit"widget="monetary"/>
                <fieldname="currency_id"invisible="1"/>
            </tree>
        </field>
    </record>
     <recordid="action_pos_all_sales_lines"model="ir.actions.act_window">
        <fieldname="name">Allsaleslines</field>
        <fieldname="type">ir.actions.act_window</field>
        <fieldname="res_model">pos.order.line</field>
        <fieldname="view_id"ref="view_pos_order_tree_all_sales_lines"/>
    </record>

    <recordid="view_pos_order_filter"model="ir.ui.view">
        <fieldname="name">pos.order.list.select</field>
        <fieldname="model">pos.order</field>
        <fieldname="arch"type="xml">
            <searchstring="SearchSalesOrder">
                <fieldname="name"/>
                <fieldname="pos_reference"/>
                <fieldname="date_order"/>
                <fieldname="user_id"/>
                <fieldname="partner_id"/>
                <fieldname="session_id"/>
                <filterstring="Invoiced"name="invoiced"domain="[('state','=','invoiced')]"/>
                <filterstring="Posted"name="posted"domain="[('state','=','done')]"/>
                <separator/>
                <filterstring="OrderDate"name="order_date"date="date_order"/>
                <groupexpand="0"string="GroupBy">
                    <filterstring="Session"name="session"domain="[]"context="{'group_by':'session_id'}"/>
                    <filterstring="User"name="user_id"domain="[]"context="{'group_by':'user_id'}"/>
                    <filterstring="Customer"name="customer"domain="[]"context="{'group_by':'partner_id'}"/>
                    <filterstring="Status"name="status"domain="[]"context="{'group_by':'state'}"/>
                    <filterstring="OrderDate"name="order_month"domain="[]"context="{'group_by':'date_order'}"/>
                </group>
            </search>
        </field>
    </record>

    <recordid="pos_rounding_form_view_inherited"model="ir.ui.view">
        <fieldname="name">pos.cash.rounding.form.inherited</field>
        <fieldname="model">account.cash.rounding</field>
        <fieldname="inherit_id"ref="account.rounding_form_view"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//div[hasclass('oe_title')]"position="before">
                <divclass="o_notification_alertalertalert-warning"role="alert">
                  ThePointofSaleonlysupportsthe"addaroundingline"roundingstrategy.
                </div>
            </xpath>
        </field>
    </record>
</flectra>
