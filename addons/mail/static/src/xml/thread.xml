<?xmlversion="1.0"encoding="UTF-8"?>
<templatesxml:space="preserve">

    <!--
        extendsthedebugmodemenutoallowaccesstotheattachmentlistviewofthecurrentrecord.
    -->
    <tt-extend="WebClient.DebugManager.View">
        <tt-jquery="a[data-action='get_metadata']"t-operation="after">
            <arole="menuitem"href="#"data-action="getMailMessages"class="dropdown-item">ManageMessages</a>
        </t>
    </t>
    <!--
        @param{mail.DocumentViewer}widget
    -->
    <tt-name="DocumentViewer.Content">
        <divclass="o_viewer_content">
            <tt-set="model"t-value="widget.modelName"/>
            <divclass="o_viewer-header">
                <spanclass="o_image_caption">
                    <iclass="fafa-picture-omr8"t-if="widget.activeAttachment.fileType=='image'"role="img"aria-label="Image"title="Image"/>
                    <iclass="fafa-file-textmr8"t-if="widget.activeAttachment.fileType=='application/pdf'"role="img"aria-label="PDFfile"title="PDFfile"/>
                    <iclass="fafa-video-cameramr8"t-if="widget.activeAttachment.fileType=='video'"role="img"aria-label="Video"title="Video"/>
                    <tt-esc="widget.activeAttachment.name"/>
                    <arole="button"href="#"class="o_download_btnml8small"data-toggle="tooltip"data-placement="right"title="Download"><iclass="fafa-fwfa-download"role="img"aria-label="Download"/></a>
                </span>
                <arole="button"class="o_close_btnfloat-right"href="#"aria-label="Close"title="Close">Ã—</a>
            </div>
            <divclass="o_viewer_img_wrapper">
                <divclass="o_viewer_zoomer">
                    <tt-if="widget.activeAttachment.fileType==='image'">
                        <divclass="o_loading_imgtext-center">
                            <iclass="fafa-circle-o-notchfa-spintext-gray-lightfa-3xfa-fw"role="img"aria-label="Loading"title="Loading"/>
                        </div>
                        <tt-set="unique"t-value="widget.activeAttachment.checksum?widget.activeAttachment.checksum.slice(-8):''"/>
                        <imgclass="o_viewer_img"t-attf-src="/web/image/#{widget.activeAttachment.id}?unique=#{unique}&amp;model=#{model}"alt="Viewer"/>
                    </t>
                    <iframet-if="widget.activeAttachment.fileType=='application/pdf'"class="mt32o_viewer_pdf" t-attf-src="/web/static/lib/pdfjs/web/viewer.html?file=/web/content/#{widget.activeAttachment.id}?model%3D#{model}%26filename%3D#{window.encodeURIComponent(widget.activeAttachment.name)}"/>
                    <iframet-if="(widget.activeAttachment.fileType||'').indexOf('text')!==-1"class="mt32o_viewer_text"t-attf-src="/web/content/#{widget.activeAttachment.id}?model=#{model}"/>
                    <iframet-if="widget.activeAttachment.fileType=='youtu'"class="mt32o_viewer_text" allow="autoplay;encrypted-media"width="560"height="315"t-attf-src="https://www.youtube.com/embed/#{widget.activeAttachment.youtube}"/>
                    <videot-if="widget.activeAttachment.fileType=='video'"class="o_viewer_video"controls="controls">
                        <sourcet-attf-src="/web/image/#{widget.activeAttachment.id}?model=#{model}"t-att-data-type="widget.activeAttachment.mimetype"/>
                    </video>
                </div>
            </div>
            <divt-if="widget.activeAttachment.fileType=='image'"class="o_viewer_toolbarbtn-toolbar"role="toolbar">
                <divclass="btn-group"role="group">
                    <arole="button"href="#"class="o_viewer_toolbar_btnbtno_zoom_in"data-toggle="tooltip"title="ZoomIn"><iclass="fafa-fwfa-plus"role="img"aria-label="ZoomIn"/></a>
                    <arole="button"href="#"class="o_viewer_toolbar_btnbtno_zoom_resetdisabled"data-toggle="tooltip"title="ResetZoom"><iclass="fafa-fwfa-search"role="img"aria-label="ResetZoom"/></a>
                    <arole="button"href="#"class="o_viewer_toolbar_btnbtno_zoom_outdisabled"data-toggle="tooltip"title="ZoomOut"><iclass="fafa-fwfa-minus"role="img"aria-label="ZoomOut"/></a>
                </div>
                <divclass="btn-group"role="group">
                    <arole="button"href="#"class="o_viewer_toolbar_btnbtno_rotate"data-toggle="tooltip"title="Rotate"><iclass="fafa-fwfa-repeat"role="img"aria-label="Rotate"/></a>
                </div>
                <divclass="btn-group"role="group">
                    <arole="button"href="#"class="o_viewer_toolbar_btnbtno_print_btn"data-toggle="tooltip"title="Print"><iclass="fafa-fwfa-print"role="img"aria-label="Print"/></a>
                    <arole="button"href="#"class="o_viewer_toolbar_btnbtno_download_btn"data-toggle="tooltip"title="Download"><iclass="fafa-fwfa-download"role="img"aria-label="Download"/></a>
                </div>
            </div>
        </div>
    </t>

    <!--
        @param{mail.DocumentViewer}widget
    -->
    <tt-name="DocumentViewer">
        <divclass="modalo_modal_fullscreen"tabindex="-1"data-keyboard="false"role="dialog">
            <tclass="o_document_viewer_content_call"t-call="DocumentViewer.Content"/>

            <tt-if="widget.attachment.length!==1">
                <aclass="arrowarrow-leftmove_previous"href="#">
                    <spanclass="fafa-chevron-left"role="img"aria-label="Previous"title="Previous"/>
                </a>
                <aclass="arrowarrow-rightmove_next"href="#">
                    <spanclass="fafa-chevron-right"role="img"aria-label="Next"title="Next"/>
                </a>
            </t>
        </div>
    </t>

    <!--
        @param{string}src
    -->
    <tt-name="PrintImage">
        <html>
            <head>
                <script>
                    functiononload_img(){
                        setTimeout('print_img()',10);
                    }
                    functionprint_img(){
                        window.print();
                        window.close();
                    }
                </script>
            </head>
            <bodyonload='onload_img()'>
                <imgt-att-src='src'alt=""/>
            </body>
        </html>
    </t>

</templates>
