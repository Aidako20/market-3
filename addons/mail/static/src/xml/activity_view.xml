<?xmlversion="1.0"encoding="UTF-8"?>
<templatesxml:space="preserve">

<tt-name="mail.ActivityViewHeader"owl="1">
    <thead>
        <tr>
            <th></th>
            <tht-foreach="props.activity_types"t-as="type"t-key="type[0]"
                class="o_activity_type_cell"t-attf-class="{{activeFilter.activityTypeId===type[0]?'o_activity_filter_'+activeFilter.state:''}}"
                t-att-data-activity-type-id="type[0]"t-attf-width="{{100/props.activity_types.length}}%">
                <div>
                    <spant-esc="type[1]"/>
                    <spant-if="type[2].length>0"class="dropdownpull-right">
                        <iclass="fafa-ellipsis-vfa-fw"data-toggle="dropdown"/>
                        <divclass="dropdown-menu">
                            <tt-foreach="type[2]"t-as="template"t-key="template.id">
                                <divtitle="Thisactionwillsendanemail."
                                     class="o_template_elemento_send_mail_template"
                                     t-att-data-activity-type-id="type[0]"
                                     t-att-data-template-id="template.id"
                                     t-on-click="_onSendMailTemplateClicked">
                                    <iclass="fafa-envelopefa-fw"/><tt-esc="template.name"/>
                                </div>
                            </t>
                        </div>
                    </span>
                </div>
                <divt-if="activityTypeIds.includes(type[0])">
                    <KanbanColumnProgressBarAdapterComponent="widgetComponents.KanbanColumnProgressBar"
                        widgetArgs="[getProgressBarOptions(type[0]),getProgressBarColumnState(type[0])]"
                        t-on-set-progress-bar-state="_onSetProgressBarState"/>
                </div>
                <divt-else=""class="mt24"/>
            </th>
        </tr>
    </thead>
</t>

<tt-name="mail.ActivityViewBody"owl="1">
    <tbody>
        <tt-foreach="activityResIds"t-as="resId"t-key="resId">
            <tt-call="mail.ActivityViewRow"/>
        </t>
    </tbody>
</t>

<tt-name="mail.ActivityViewRow"owl="1">
    <trclass="o_data_row"t-att-data-res-id="resId">
        <tt-set="record"t-value="props.data.find(data=>data.res_id===resId)"/>
        <tdt-attf-class="{{activeFilter.resIds.includes(resId)?'o_activity_filter_'+activeFilter.state:''}}">
            <ActivityRecordAdapterComponent="widgetComponents.ActivityRecord"
                widgetArgs="[record,{qweb:qweb}]"/>
        </td>
        <tt-foreach="props.activity_types"t-as="type"t-key="type[0]">
            <tt-call="mail.ActivityViewCell"/>
        </t>
    </tr>
</t>

<tt-name="mail.ActivityViewCell"owl="1">
    <tt-set="activityGroup"t-value="props.grouped_activities[resId]andprops.grouped_activities[resId][type[0]]or{count:0,ids:[],state:false}"/>
    <tdt-if="activityGroup.state"t-att-data-res-id="resId"t-att-data-activity-type-id="type[0]"
        t-attf-class="o_activity_summary_cell{{activityGroup.state}}{{activeFilter.resIds.includes(resId)?'o_activity_filter_'+activeFilter.state:''}}">
        <ActivityCellAdapterComponent="widgetComponents.ActivityCell"
            widgetArgs="['activity_ids',props.getKanbanActivityData(activityGroup,resId)]"/>
    </td>
    <tdt-else=""t-att-data-res-id="resId"t-att-data-activity-type-id="type[0]"
        class="o_activity_summary_cello_activity_empty_cell"
        t-attf-class="{{activeFilter.resIds.includes(resId)?'o_activity_filter_'+activeFilter.state:''}}"
        t-on-click.prevent.stop="_onEmptyCellClicked">
        <ititle="Create"class="text-centerfafa-plus"/>
    </td>
</t>

<tt-name="mail.ActivityViewFooter"owl="1">
    <tfoot>
        <trclass="o_data_row">
            <tdclass="o_record_selectorp-3"t-on-click.prevent.stop="trigger('schedule_activity')">
                <spanclass="fafa-pluspr-2"/><span>Scheduleactivity</span>
            </td>
        </tr>
    </tfoot>
</t>

<divt-name="mail.ActivityRenderer"class="o_activity_view"owl="1">
    <tt-if="!props.activity_types.length"t-call="web.NoContentHelper"/>
    <tablet-else=""class="table-borderedmb-5">
        <tt-call="mail.ActivityViewHeader"/>
        <tt-call="mail.ActivityViewBody"/>
        <tt-call="mail.ActivityViewFooter"/>
    </table>
</div>

</templates>
