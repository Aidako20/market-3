<?xmlversion="1.0"encoding="UTF-8"?>
<templatesxml:space="preserve">

<tt-name="mail.KanbanActivity">
    <divclass="o_kanban_inline_blockdropdowno_mail_activity">
        <!--DropdownsarecreatedinJStoavoidsomebugs,that'swhythe<a/>containsnoargsforthedropdowncreation-->
        <aclass="dropdown-toggleo-no-careto_activity_btn"data-boundary="viewport"data-flip="false"data-toggle="dropdown"role="button">
            <!--spanclassesaregenerateddynamically(see_render)-->
            <spant-att-title="widget.selection[widget.activityState]"role="img"t-att-aria-label="widget.selection[widget.activity_state]"/>
       </a>
        <divclass="dropdown-menuo_activity"role="menu"/>
    </div>
</t>

<tt-name="mail.ListActivity"t-extend="mail.KanbanActivity">
    <tt-jquery=".o_mail_activity"t-operation="append">
        <spanclass="o_activity_summary"/>
    </t>
</t>

<tt-name="mail.KanbanActivityLoading">
    <divclass="dropdown-itemtext-centero_no_activity">
        <spanclass="fafa-spinnerfa-spinfa-2x"role="img"aria-label="Loading..."title="Loading..."/>
    </div>
</t>

<tt-name="mail.KanbanActivityDropdown">
    <spanrole="menuitem"t-if="_.isEmpty(records)"class="dropdown-item-texttext-centero_no_activity">
        <i>Scheduleactivitiestohelpyougetthingsdone.</i>
    </span>
    <divt-else=""aria-haspopup="true"role="menu"class="o_activity_log_containerdropdown-itembg-100p-0">
        <ulclass="o_activity_loglist-grouplist-group-flushmb-2"role="menu">
            <tt-foreach="_.keys(records)"t-as="key">
                <tt-set="logs"t-value="records[key]"/>
                <tt-set="contextual_class"t-value="key=='planned'?'success':(key=='today'?'warning':'danger')"/>

                <lirole="menuitem"t-attf-class="o_activity_labellist-group-itemlist-group-itemlist-group-item-lightd-flexjustify-content-betweenalign-items-centero_activity_color_{{key}}{{!key_first?'mt-2':''}}">
                    <strong><tt-esc="selection[key]"/></strong>
                    <spant-attf-class="badgebadge-pillbadge-{{contextual_class}}border-0mr-0"><tt-esc="logs.length"/></span>
                </li>
                <tt-foreach="logs"t-as="log">
                    <tt-set="edit_class"t-value="'o_edit_activity'"/>
                    <tt-if="log.force_next">
                        <tt-set="edit_class"t-value=""/>
                    </t>
                    <tclass="activities_list_group_item">
                        <tt-call="mail.activities-list-group-item"/>
                    </t>
                    <lit-attf-id="o_activity_form_{{log.id}}"class="o_activity_formlist-group-itemborder-top-0py-0mb-2collapse"></li>
                </t>
            </t>
        </ul>
    </div>
    <divclass="dropdown-dividerm-0"/>
    <divrole="menuitem"class="o_schedule_activitydropdown-headerp-0text-center">
        <buttonclass="btnbtn-secondarybtn-blockp-3">
            <iclass="fafa-plusfa-fw"></i><strong>Scheduleanactivity</strong>
        </button>
    </div>
</t>

<tt-name="mail.activities-list-group-item">
    <lit-attf-class="list-group-itemo_log_activityd-flex#{log_last?'border-bottom':''}"role="menuitem">
        <divt-attf-class="o_activity_titleo_log_activity#{edit_class}"t-att-data-activity-id="log.id">
            <divt-attf-class="o_activity_title_entryo_mail_activity{{!log.force_next?'align-items-center':'mb-1'}}">
                <spant-attf-class="fa#{log.icon?log.icon:'fa-bell'}fa-fwmr-2text-centertext-muted"role="img"aria-label="Log"title="Log"/>
                <strongclass="text-darko_activity_summary"><tt-esc="log.title_actionorlog.summaryorlog.activity_type_id[1]"/></strong>
                <buttont-if="!log.force_nextandlog.can_write"class="btnbtn-smbtn-linkpy-0o_edit_button"><iclass="fafa-pencil"/></button>
            </div>
            <divclass="o_activity_title_entrymt-1"t-if="log.state!='today'">
                <spanclass="fafa-clock-ofa-fwmr-2text-centertext-muted"role="img"aria-label="Deadline"title="Deadline"/>
                <smallt-if="log.user_id[0]!==session.uidandlog.mail_template_ids"class="mr-1"><tt-esc="log.user_id[1]"/>-</small>
                <smallt-att-title="log.date_deadline"><tt-esc="log.label_delay"/></small>
            </div>
            <tt-if="log.mail_template_ids">
                <divt-foreach="log.mail_template_ids"t-as="mail_template"class="o_activity_title_entrymt-2"t-att-data-activity-id="log.id"t-att-data-force-next-activity="log.force_next"t-att-data-previous-activity-type-id="log.activity_type_id[0]">
                    <iclass="fafa-envelope-ofa-fwmr-2text-centertext-muted"aria-label="Mail"title="Mail"role="img"></i>
                    <small>
                        <divclass="mb-1"t-esc="mail_template.name+':'"/>
                        <aclass="o_activity_template_preview"t-att-data-template-id="mail_template.id"href="#"><b>Preview</b></a>
                        <small>or</small>
                        <aclass="o_activity_template_send"t-att-data-template-id="mail_template.id"href="#"><b>SendNow</b></a>
                    </small>
                </div>
            </t>
        </div>
        <divt-if="log.can_write"class="flex-grow-1text-right">
            <tt-if="log.activity_category==='upload_file'">
                <a t-att-data-force-next-activity="log.force_next"
                    t-att-data-previous-activity-type-id="log.activity_type_id[0]"
                    t-att-data-activity-id="log.id"
                    class="o_mark_as_done_upload_fileo_activity_linko_activity_link_kanbanfafa-upload"
                    title="Uploadfile"role="img"t-att-data-fileupload-id="log.fileuploadID"/>
                    <spanclass="d-none">
                        <tt-call="HiddenInputFile">
                            <tt-set="fileupload_id"t-value="log.fileuploadID"/>
                            <tt-set="fileupload_action"t-translation="off">/web/binary/upload_attachment</t>
                            <inputtype="hidden"name="model"t-att-value="log.res_model"/>
                            <inputtype="hidden"name="id"t-att-value="log.res_id"/>
                        </t>
                    </span>
            </t>
            <tt-else="">
                <a t-att-data-force-next-activity="log.force_next"
                    t-att-data-previous-activity-type-id="log.activity_type_id[0]"
                    t-att-data-activity-id="log.id"
                    t-attf-href="#o_mark_done_form{{log.id}}"
                    class="o_mark_as_doneo_activity_linko_activity_link_kanbanfafa-check-circle"
                    data-toggle="collapse"title="Markasdone"role="img"aria-label="Markasdone"/>
            </t>
        </div>
    </li>
</t>

</templates>
