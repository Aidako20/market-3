<?xmlversion="1.0"encoding="UTF-8"?>
<templatesxml:space="preserve">

    <tt-name="mail.MessagingMenu"owl="1">
        <liclass="o_MessagingMenu"t-att-class="{'o-is-open':messagingMenu?messagingMenu.isOpen:false,'o-mobile':env.messaging?env.messaging.device.isMobile:false}">
            <aclass="o_MessagingMenu_toggler"t-att-class="{'o-no-notification':messagingMenu?!messagingMenu.counter:false}"href="#"title="Conversations"role="button"t-att-aria-expanded="messagingMenuandmessagingMenu.isOpen?'true':'false'"aria-haspopup="true"t-on-click="_onClickToggler">
                <iclass="o_MessagingMenu_iconfafa-comments"role="img"aria-label="Messages"/>
                <tt-if="!env.isMessagingInitialized()">
                    <iclass="o_MessagingMenu_loadingfafa-spinnerfa-spin"/>
                </t>
                <tt-elif="messagingMenu.counter>0">
                    <spanclass="o_MessagingMenu_counterbadgebadge-pill">
                        <tt-esc="messagingMenu.counter"/>
                    </span>
                </t>
            </a>
            <tt-if="messagingMenuandmessagingMenu.isOpen">
                <divclass="o_MessagingMenu_dropdownMenudropdown-menudropdown-menu-right"t-att-class="{'o-mobile':env.messaging.device.isMobile,'o-messaging-not-initialized':!env.messaging.isInitialized}"role="menu">
                    <tt-if="!env.messaging.isInitialized">
                        <span><iclass="o_MessagingMenu_dropdownLoadingIconfafa-spinnerfa-spin"/>Pleasewait...</span>
                    </t>
                    <tt-else="">
                        <divclass="o_MessagingMenu_dropdownMenuHeader"t-att-class="{'o-mobile':env.messaging.device.isMobile}">
                            <tt-if="!env.messaging.device.isMobile">
                                <tt-foreach="['all','chat','channel']"t-as="tabId"t-key="tabId">
                                    <buttonclass="o_MessagingMenu_tabButtono-desktopbtnbtn-link"t-att-class="{'o-active':messagingMenu.activeTabId===tabId,}"t-on-click="_onClickDesktopTabButton"type="button"role="tab"t-att-data-tab-id="tabId">
                                        <tt-if="tabId==='all'">All</t>
                                        <tt-elif="tabId==='chat'">Chat</t>
                                        <tt-elif="tabId==='channel'">Channels</t>
                                    </button>
                                </t>
                            </t>
                            <tt-if="env.messaging.device.isMobile">
                                <tt-call="mail.MessagingMenu.newMessageButton"/>
                            </t>
                            <divclass="o-autogrow"/>
                            <tt-if="!env.messaging.device.isMobileand!discuss.isOpen">
                                <tt-call="mail.MessagingMenu.newMessageButton"/>
                            </t>
                            <tt-if="env.messaging.device.isMobileandmessagingMenu.isMobileNewMessageToggled">
                                <AutocompleteInput
                                    class="o_MessagingMenu_mobileNewMessageInput"
                                    customClass="id+'_mobileNewMessageInputAutocomplete'"
                                    isFocusOnMount="true"
                                    placeholder="mobileNewMessageInputPlaceholder"
                                    select="_onMobileNewMessageInputSelect"
                                    source="_onMobileNewMessageInputSource"
                                    t-on-o-hide="_onHideMobileNewMessage"
                                />
                            </t>
                        </div>
                        <NotificationList
                            class="o_MessagingMenu_notificationList"
                            t-att-class="{'o-mobile':env.messaging.device.isMobile}"
                            filter="messagingMenu.activeTabId"
                        />
                        <tt-if="env.messaging.device.isMobile">
                            <MobileMessagingNavbar
                                class="o_MessagingMenu_mobileNavbar"
                                activeTabId="messagingMenu.activeTabId"
                                tabs="tabs"
                                t-on-o-select-mobile-messaging-navbar-tab="_onSelectMobileNavbarTab"
                            />
                        </t>
                    </t>
                </div>
            </t>
        </li>
    </t>

    <tt-name="mail.MessagingMenu.newMessageButton"owl="1">
        <buttonclass="o_MessagingMenu_newMessageButtonbtn"
            t-att-class="{
                'btn-link':!env.messaging.device.isMobile,
                'btn-secondary':env.messaging.device.isMobile,
                'o-mobile':env.messaging.device.isMobile,
            }"t-on-click="_onClickNewMessage"type="button"
        >
            Newmessage
        </button>
    </t>

</templates>
