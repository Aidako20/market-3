<?xmlversion="1.0"encoding="UTF-8"?>
<templatesxml:space="preserve">

    <tt-name="mail.MessageList"owl="1">
        <divclass="o_MessageList"t-att-class="{'o-empty':threadViewandthreadView.messages.length===0,'o-has-message-selection':props.selectedMessageLocalId}"t-on-scroll="onScroll">
            <tt-if="threadView">
                <!--Noresultmessages-->
                <tt-if="threadView.nonEmptyMessages.length===0">
                    <divclass="o_MessageList_emptyo_MessageList_item">
                        <tt-if="threadView.thread===env.messaging.inbox">
                            <divclass="o_MessageList_emptyTitle">
                                Congratulations,yourinboxisempty
                            </div>
                            Newmessagesappearhere.
                        </t>
                        <tt-elif="threadView.thread===env.messaging.starred">
                            <divclass="o_MessageList_emptyTitle">
                                Nostarredmessages
                            </div>
                            Youcanmarkanymessageas'starred',anditshowsupinthismailbox.
                        </t>
                        <tt-elif="threadView.thread===env.messaging.history">
                            <divclass="o_MessageList_emptyTitleo-neutral-face-icon">
                                Nohistorymessages
                            </div>
                            Messagesmarkedasreadwillappearinthehistory.
                        </t>
                        <tt-elif="threadView.thread===env.messaging.moderation">
                            <divclass="o_MessageList_emptyTitle">
                                Youhavenomessagestomoderate.
                            </div>
                            Messagespendingmoderationappearhere.
                        </t>
                        <tt-else="">
                            Therearenomessagesinthisconversation.
                        </t>
                    </div>
                </t>
                <!--LOADING(iforderasc)-->
                <tt-if="props.order==='asc'andorderedMessages.length>0">
                    <tt-call="mail.MessageList.loadMore"/>
                </t>
                <!--MESSAGES-->
                <tt-set="current_day"t-value="0"/>
                <tt-set="prev_message"t-value="0"/>
                <tt-foreach="orderedMessages"t-as="message"t-key="message.localId">
                    <tt-if="message===threadView.thread.messageAfterNewMessageSeparator">
                        <divclass="o_MessageList_separatoro_MessageList_separatorNewMessageso_MessageList_item"t-att-class="{'o-disable-animation':env.disableAnimation}"t-transition="fade">
                            <hrclass="o_MessageList_separatorLineo_MessageList_separatorLineNewMessages"/><spanclass="o_MessageList_separatorLabelo_MessageList_separatorLabelNewMessages">Newmessages</span>
                        </div>
                    </t>
                    <tt-if="!message.isEmpty">
                        <tt-set="message_day"t-value="getDateDay(message)"/>
                        <tt-if="current_day!==message_day">
                            <divclass="o_MessageList_separatoro_MessageList_separatorDateo_MessageList_item">
                                <hrclass="o_MessageList_separatorLine"/><spanclass="o_MessageList_separatorLabelo_MessageList_separatorLabelDate"><tt-esc="message_day"/></span><hrclass="o_MessageList_separatorLine"/>
                                <tt-set="current_day"t-value="message_day"/>
                                <tt-set="isMessageSquashed"t-value="false"/>
                            </div>
                        </t>
                        <tt-else="">
                            <tt-set="isMessageSquashed"t-value="shouldMessageBeSquashed(prev_message,message)"/>
                        </t>
                        <Message
                            class="o_MessageList_itemo_MessageList_message"
                            t-att-class="{
                                'o-has-message-selection':props.selectedMessageLocalId,
                            }"
                            hasMarkAsReadIcon="props.haveMessagesMarkAsReadIcon"
                            hasCheckbox="props.hasMessageCheckbox"
                            hasReplyIcon="props.haveMessagesReplyIcon"
                            isSelected="props.selectedMessageLocalId===message.localId"
                            isSquashed="isMessageSquashed"
                            messageLocalId="message.localId"
                            threadViewLocalId="threadView.localId"
                            t-ref="{{message.localId}}"
                        />
                        <tt-set="prev_message"t-value="message"/>
                    </t>
                </t>
                <!--LOADING(iforderdesc)-->
                <tt-if="props.order==='desc'andorderedMessages.length>0">
                    <tt-call="mail.MessageList.loadMore"/>
                </t>
            </t>
        </div>
    </t>

    <tt-name="mail.MessageList.loadMore"owl="1">
        <tt-if="threadView.threadCache.isLoadingMore">
            <divclass="o_MessageList_itemo_MessageList_isLoadingMore">
                <iclass="o_MessageList_isLoadingMoreIconfafa-spinfa-spinner"/>
                Loading...
            </div>
        </t>
        <tt-elif="!threadView.threadCache.isAllHistoryLoadedand!threadView.thread.isTemporary">
            <aclass="o_MessageList_itemo_MessageList_loadMore"href="#"t-on-click="_onClickLoadMore"t-ref="loadMore">
                Loadmore
            </a>
        </t>
    </t>

</templates>
