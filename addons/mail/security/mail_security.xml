<?xmlversion="1.0"encoding="utf-8"?>
<flectranoupdate="1">

        <!--RULES-->
        <recordid="mail_channel_rule"model="ir.rule">
            <fieldname="name">Mail.channel:accessonlypublicandjoinedgroups</field>
            <fieldname="model_id"ref="model_mail_channel"/>
            <fieldname="groups"eval="[(4,ref('base.group_user')),(4,ref('base.group_portal')),(4,ref('base.group_public'))]"/>
            <fieldname="domain_force">['|','|',
('public','=','public'),
'&amp;',('public','=','private'),('channel_partner_ids','in',[user.partner_id.id]),
'&amp;',('public','=','groups'),('group_public_id','in',[g.idforginuser.groups_id])]</field>
            <fieldname="perm_create"eval="False"/>
        </record>

        <recordid="ir_rule_mail_channel_partner_group_user"model="ir.rule">
            <fieldname="name">mail.channel.partner:writeitsownentries</field>
            <fieldname="model_id"ref="model_mail_channel_partner"/>
            <fieldname="groups"eval="[(4,ref('base.group_user')),(4,ref('base.group_portal'))]"/>
            <fieldname="domain_force">['|','|',
('channel_id.public','=','public'),
'&amp;',('channel_id.public','=','private'),('channel_id.channel_partner_ids','in',[user.partner_id.id]),
'&amp;',('channel_id.public','=','groups'),('channel_id.group_public_id','in',[g.idforginuser.groups_id])]</field>
            <fieldname="perm_read"eval="False"/>
            <fieldname="perm_write"eval="True"/>
            <fieldname="perm_create"eval="False"/>
            <fieldname="perm_unlink"eval="True"/>
        </record>

        <recordid="ir_rule_mail_notifications_group_user"model="ir.rule">
            <fieldname="name">mail.notifications:group_user:writeitsownentries</field>
            <fieldname="model_id"ref="model_mail_notification"/>
            <fieldname="groups"eval="[(4,ref('base.group_user')),(4,ref('base.group_portal'))]"/>
            <fieldname="domain_force">[('res_partner_id','=',user.partner_id.id)]</field>
            <fieldname="perm_create"eval="False"/>
            <fieldname="perm_unlink"eval="False"/>
            <fieldname="perm_read"eval="False"/>
        </record>

        <recordid="mail_message_subtype_rule_public"model="ir.rule">
            <fieldname="name">mail.message.subtype:portal/public:readpublicsubtypes</field>
            <fieldname="model_id"ref="model_mail_message_subtype"/>
            <fieldname="domain_force">[('internal','=',False)]</field>
            <fieldname="groups"eval="[(4,ref('base.group_portal')),(4,ref('base.group_public'))]"/>
        </record>

        <recordid="mail_activity_rule_user"model="ir.rule">
            <fieldname="name">mail.activity:user:write/unlinkonly(createdorassigned)</field>
            <fieldname="model_id"ref="model_mail_activity"/>
            <fieldname="domain_force">['|',('user_id','=',user.id),('create_uid','=',user.id)]</field>
            <fieldname="groups"eval="[(4,ref('base.group_user'))]"/>
            <fieldname="perm_create"eval="False"/>
            <fieldname="perm_read"eval="False"/>
            <fieldname="perm_write"eval="True"/>
            <fieldname="perm_unlink"eval="True"/>
        </record>

        <recordid="mail_moderation_rule_user"model="ir.rule">
            <fieldname="name">White/BlackList:moderators:moderatedchannelsonly</field>
            <fieldname="model_id"ref="model_mail_moderation"/>
            <fieldname="domain_force">[('channel_id.moderator_ids','in',user.id)]</field>
        </record>

        <recordid="mail_compose_message_rule"model="ir.rule">
            <fieldname="name">MailComposeMessageRule</field>
            <fieldname="model_id"ref="model_mail_compose_message"/>
            <fieldname="domain_force">[('create_uid','=',user.id)]</field>
            <fieldname="perm_create"eval="False"/>
            <fieldname="perm_read"eval="True"/>
            <fieldname="perm_write"eval="True"/>
            <fieldname="perm_unlink"eval="False"/>
        </record>

</flectra>
