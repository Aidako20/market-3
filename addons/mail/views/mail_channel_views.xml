<?xmlversion="1.0"?>
<flectra>
    <data>

        <!--mail.channel.partner-->
        <recordid="mail_channel_partner_view_tree"model="ir.ui.view">
            <fieldname="name">mail.channel.partner.tree</field>
            <fieldname="model">mail.channel.partner</field>
            <fieldname="priority">10</field>
            <fieldname="arch"type="xml">
                <treestring="Channels">
                    <fieldname="partner_id"/>
                    <fieldname="channel_id"/>
                    <fieldname="seen_message_id"/>
                </tree>
            </field>
        </record>

        <recordid="mail_channel_partner_view_form"model="ir.ui.view">
            <fieldname="name">mail.channel.partner.form</field>
            <fieldname="model">mail.channel.partner</field>
            <fieldname="arch"type="xml">
                <formstring="Channel">
                    <sheet>
                        <group>
                            <fieldname="partner_id"/>
                            <fieldname="channel_id"/>
                            <fieldname="seen_message_id"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <recordid="mail_channel_partner_action"model="ir.actions.act_window">
            <fieldname="name">Channels/Partner</field>
            <fieldname="res_model">mail.channel.partner</field>
            <fieldname="view_mode">tree,form</field>
        </record>

        <menuitemname="Channels/Partner"
            id="mail_channel_partner_menu"
            parent="base.menu_email"
            action="mail_channel_partner_action"
            sequence="21"
            groups="base.group_no_one"/>

        <!--mail.channel-->
        <recordid="mail_channel_view_kanban"model="ir.ui.view">
            <fieldname="name">mail.channel.kanban</field>
            <fieldname="model">mail.channel</field>
            <fieldname="priority"eval="10"/>
            <fieldname="arch"type="xml">
                <kanban>
                    <fieldname="id"/>
                    <fieldname="description"/>
                    <fieldname="is_subscribed"/>
                    <fieldname="group_ids"/>
                    <fieldname="public"/>
                    <templates>
                        <tt-name="kanban-description">
                            <divclass="oe_group_description"t-if="record.description.raw_value">
                                <fieldname="description"/>
                            </div>
                        </t>
                        <tt-name="kanban-box">
                            <divclass="oe_module_vignetteoe_kanban_global_click">
                                <imgt-att-src="kanban_image('mail.channel','image_128',record.id.raw_value)"class="oe_module_icon"alt="Channel"/>
                                <divclass="oe_module_desc">
                                    <h4class="o_kanban_record_title">#<fieldname="name"/></h4>
                                    <pclass="oe_module_name">
                                        <fieldname="description"/>
                                    </p>
                                    <buttontype="object"attrs="{'invisible':['|',('is_subscribed','=',True),('group_ids','!=',[])]}"class="btnbtn-primaryfloat-right"name="channel_join_and_get_info">Join</button>
                                    <buttontype="object"attrs="{'invisible':['|',('is_subscribed','=',False),('group_ids','!=',[])]}"class="btnbtn-secondaryfloat-right"name="action_unfollow">Leave</button>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <recordid="mail_channel_view_form"model="ir.ui.view">
            <fieldname="name">mail.channel.form</field>
            <fieldname="model">mail.channel</field>
            <fieldname="priority"eval="10"/>
            <fieldname="arch"type="xml">
                <formstring="MailChannelForm">
                    <header>
                        <buttonname="send_guidelines"type="object"string="Sendguidelines"confirm="Youaregoingtosendtheguidelinestoallthesubscribers.Doyouconfirmtheaction?"attrs="{'invisible':['|',('moderation_guidelines','=',False),('is_moderator','=',False)]}"/>
                    </header>
                    <sheet>
                        <divclass="oe_button_box"name="button_box">
                            <fieldname="is_moderator"invisible="1"/>
                            <buttonclass="btnoe_stat_button"name="mail.mail_moderation_action"type="action"attrs="{'invisible':[('is_moderator','=',False)]}"icon="fa-bars"context="{'search_default_channel_id':active_id}">
                            <fieldstring="ModerationList"name="moderation_count"widget="statinfo"/>
                            </button>
                        </div>
                        <divclass="oe_button_box"name="button_box"/>
                        <fieldname="image_128"widget="image"class="oe_avatar"options="{'size':[90,90]}"/>
                        <divclass="oe_title">
                            <divclass="oe_edit_only">
                                <labelfor="name"/>
                            </div>
                            <h1>
                                #<fieldname="name"default_focus="1"placeholder="Name"readonly="0"/>
                            </h1>
                        </div>
                        <groupclass="o_label_nowrap">
                            <fieldname="active"invisible="1"/>
                            <fieldname="email_send"/>
                            <fieldname="moderation"attrs="{'invisible':[('email_send','=',False)]}"/>
                            <fieldname="description"placeholder="Topicsdiscussedinthisgroup..."/>
                        </group>
                        <groupname="group_alias"attrs="{'invisible':[('alias_domain','=',False)]}">
                            <labelfor="alias_id"string=""class="fafa-envelope-o"style="min-width:20px;"aria-label="Email"title="Email"role="img"/>
                            <divname="alias_def">
                                <fieldname="alias_id"class="oe_read_onlyoe_inline"
                                        string="EmailAlias"required="0"/>
                                <divclass="oe_edit_onlyoe_inline"name="edit_alias"style="display:inline;">
                                    <fieldname="alias_name"class="oe_inline"/>@<fieldname="alias_domain"class="oe_inline"readonly="1"/>
                                </div>
                            </div>
                            <fieldname="alias_contact"class="oe_inline"invisible="1"/>
                        </group>
                        <notebook>
                            <pagestring="Privacy"name="privacy">
                                <groupclass="o_label_nowrap">
                                    <fieldname="public"widget="radio"string="Whocanfollowthegroup'sactivities?"/>
                                    <fieldname="group_public_id"
                                        attrs="{'invisible':[('public','!=','groups')],'required':[('public','=','groups')]}"
                                        />
                                    <fieldname="group_ids"widget="many2many_tags"
                                        string="AutoSubscribeGroups"/>
                                </group>
                            </page>
                            <pagestring="Members"name="members">
                                <fieldname="channel_last_seen_partner_ids"mode="tree"context="{'active_test':False}">
                                    <treestring="Members"editable="bottom">
                                        <fieldname="partner_id"required="1"/>
                                        <fieldname="partner_email"readonly="1"/>
                                    </tree>
                                </field>
                            </page>
                            <pagestring="Moderation"name="moderation"attrs="{'invisible':[('moderation','=',False)]}">
                                <group>
                                    <fieldname="moderator_ids"widget="many2many_tags"/>
                                    <fieldname="moderation_notify"/>
                                    <fieldname="moderation_notify_msg"attrs="{'invisible':[('moderation_notify','=',False)]}"/>
                                    <fieldname="moderation_guidelines"/>
                                    <fieldname="moderation_guidelines_msg"attrs="{'invisible':[('moderation_guidelines','=',False)]}"/>
                                </group>
                            </page>
                            <pagestring="Integrations"invisible="1"name="mail_channel_integrations"></page>
                        </notebook>
                        <divclass="oe_chatter"groups="base.group_no_one">
                            <fieldname="message_follower_ids"/>
                        </div>
                    </sheet>
                </form>
            </field>
        </record>

        <recordid="mail_channel_view_tree"model="ir.ui.view">
            <fieldname="name">mail.channel.tree</field>
            <fieldname="model">mail.channel</field>
            <fieldname="priority"eval="10"/>
            <fieldname="arch"type="xml">
                <treestring="Groups">
                    <fieldname="name"/>
                </tree>
            </field>
        </record>

        <recordid="mail_channel_view_search"model="ir.ui.view">
            <fieldname="name">mail.channel.search</field>
            <fieldname="model">mail.channel</field>
            <fieldname="priority"eval="10"/>
            <fieldname="arch"type="xml">
                <searchstring="SearchGroups">
                    <fieldname="name"/>
                    <filterstring="Archived"name="inactive"domain="[('active','=',False)]"/>
                </search>
            </field>
        </record>

        <recordid="mail_channel_action_view"model="ir.actions.act_window">
            <fieldname="name">Joinagroup</field>
            <fieldname="res_model">mail.channel</field>
            <fieldname="view_mode">kanban,tree,form</field>
            <fieldname="search_view_id"ref="mail_channel_view_search"/>
        </record>

        <!--settings!-->
        <menuitemid="mail_channel_menu_settings"parent="base.menu_email"sequence="20"
            name="Channels"action="mail_channel_action_view"
            groups="base.group_no_one"/>

    <recordid="action_discuss"model="ir.actions.client">
        <fieldname="name">Discuss</field>
        <fieldname="tag">mail.widgets.discuss</field>
        <fieldname="res_model">mail.channel</field>
        <fieldname="params"eval="&quot;{'default_active_id':'mail.box_inbox'}&quot;"/>
    </record>

    <menuitem
        id="mail.menu_root_discuss"
        name="Discuss"
        action="action_discuss"
        web_icon="mail,static/description/icon.png"
        groups="base.group_user"
        sequence="1"
    />

    <!--
        Thismenuitemwillbeactivatedbyintegrationsmodules(likegithub,twitter,...).It
        isahooktoeaseothermodulestoplugintomail.
    -->
    <recordid="mail.mail_channel_integrations_menu"model="ir.ui.menu">
        <fieldname="name">Integrations</field>
        <fieldname="parent_id"ref="mail.menu_root_discuss"></field>
        <fieldname="active"eval="False"></field>
    </record>

    </data>
</flectra>
