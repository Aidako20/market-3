<?xmlversion="1.0"?>
<flectra>
    <data>
        <!--mail.messagetree:shortview!-->
        <recordmodel="ir.ui.view"id="view_message_tree">
            <fieldname="name">mail.message.tree</field>
            <fieldname="model">mail.message</field>
            <fieldname="priority">20</field>
            <fieldname="arch"type="xml">
                <treestring="Messages">
                    <fieldname="date"/>
                    <fieldname="subject"/>
                    <fieldname="author_id"/>
                    <fieldname="model"/>
                    <fieldname="res_id"widget="integer"/>
                </tree>
            </field>
        </record>

        <!--mail.messageform:shortview!-->
        <recordid="mail_message_view_form"model="ir.ui.view">
            <fieldname="name">mail.message.view.form</field>
            <fieldname="model">mail.message</field>
            <fieldname="priority">20</field>
            <fieldname="arch"type="xml">
                <formstring="Message"duplicate="0">
                    <sheet>
                        <group>
                            <group>
                                <fieldname="subject"/>
                                <fieldname="date"/>
                                <fieldname="email_from"/>
                                <fieldname="author_id"/>
                                <fieldname="message_type"/>
                                <fieldname="subtype_id"/>
                                <fieldname="is_internal"/>
                            </group>
                            <group>
                                <fieldname="model"/>
                                <fieldname="res_id"widget="integer"/>
                                <fieldname="record_name"/>
                                <fieldname="parent_id"/>
                                <fieldname="moderation_status"/>
                                <fieldname="moderator_id"/>
                            </group>
                        </group>
                        <notebook>
                            <pagestring="Body"name="body">
                                <fieldname="body"options="{'style-inline':true}"/>
                            </page>
                            <pagestring="Gateway"name="gateway">
                                <group>
                                    <group>
                                        <fieldname="reply_to"/>
                                        <fieldname="no_auto_thread"/>
                                    </group>
                                    <group>
                                        <fieldname="message_id"/>
                                        <fieldname="mail_server_id"/>
                                    </group>
                                </group>
                            </page>
                            <pagestring="Recipients"name="recipients">
                                <group>
                                    <group>
                                        <fieldname="partner_ids"widget="many2many_tags"/>
                                        <fieldname="channel_ids"widget="many2many_tags"/>
                                    </group>
                                    <group>
                                        <fieldname="notified_partner_ids"widget="many2many_tags"/>
                                        <fieldname="starred_partner_ids"widget="many2many_tags"/>
                                    </group>
                                </group>
                                <group>
                                    <fieldname="notification_ids">
                                        <tree>
                                            <fieldname="res_partner_id"/>
                                            <fieldname="is_read"/>
                                            <fieldname="notification_type"/>
                                            <fieldname="notification_status"/>
                                        </tree>
                                    </field>
                                </group>
                            </page>
                            <pagestring="Tracking"name="page_tracking">
                                <fieldname="tracking_value_ids"/>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <!--mail.messagesearch:wallview!-->
        <recordmodel="ir.ui.view"id="view_message_search">
            <fieldname="name">mail.message.search</field>
            <fieldname="model">mail.message</field>
            <fieldname="priority">25</field>
            <fieldname="arch"type="xml">
                <searchstring="MessagesSearch">
                    <fieldname="body"string="Content"filter_domain="['|',('subject','ilike',self),('body','ilike',self)]"/>
                    <fieldname="subject"/>
                    <fieldname="message_type"/>
                    <fieldname="author_id"/>
                    <fieldname="partner_ids"/>
                    <fieldname="model"/>
                    <fieldname="res_id"/>
                    <fieldname="parent_id"/>
                    <filterstring="HasMentions"
                            name="filter_has_mentions"
                            domain="[('partner_ids.user_ids','in',[uid])]"/>
                    <separator/>
                    <filterstring="NeedAction"
                            name="message_needaction"help="Unreadmessages"
                            domain="[('needaction','=',True)]"/>
                    <separator/>
                </search>
            </field>
        </record>

        <recordid="action_view_mail_message"model="ir.actions.act_window">
            <fieldname="name">Messages</field>
            <fieldname="res_model">mail.message</field>
            <fieldname="view_mode">tree,form</field>
            <fieldname="search_view_id"ref="view_message_search"/>
        </record>

        <!--AddmenuentryinSettings/Email-->
        <menuitemname="Messages"
            id="menu_mail_message"
            parent="mail.mail_menu_technical"
            action="action_view_mail_message"
            sequence="1"/>

        <recordmodel="ir.ui.view"id="view_document_file_kanban">
            <fieldname="name">ir.attachmentkanban</field>
            <fieldname="model">ir.attachment</field>
            <fieldname="arch"type="xml">
                <kanbanedit="false"import="false">
                    <fieldname="id"/>
                    <fieldname="mimetype"/>
                    <fieldname="type"/>
                    <fieldname="create_uid"/>
                    <fieldname="url"/>
                    <fieldname="create_date"/>
                    <fieldname="name"/>
                    <templates>
                        <tt-name="kanban-box">
                            <divclass="oe_kanban_global_areaoe_kanban_global_clicko_kanban_attachment">
                                <divclass="row">
                                    <divclass="offset-10">
                                        <divclass="o_dropdown_kanbandropdown"groups="base.group_user">
                                            <arole="button"class="dropdown-toggleo-no-caretbtn"data-toggle="dropdown"href="#"aria-label="Dropdownmenu"title="Dropdownmenu">
                                                <spanclass="fafa-ellipsis-v"/>
                                            </a>
                                            <divclass="dropdown-menu"role="menu">
                                                <at-if="widget.deletable"role="menuitem"type="delete"class="dropdown-item">Delete</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <divclass="o_kanban_image">
                                    <divclass="o_kanban_image_wrapper">
                                        <tt-set="webimage"t-value="newRegExp('image.*(gif|jpeg|jpg|png)').test(record.mimetype.value)"/>
                                        <divt-if="record.type.raw_value=='url'"class="o_url_imagefafa-linkfa-3xtext-muted"aria-label="Imageisalink"/>
                                        <imgt-elif="webimage"t-attf-src="/web/image/#{record.id.raw_value}"width="100"height="100"alt="Document"class="o_attachment_image"/>
                                        <divt-else="!webimage"class="o_imageo_image_thumbnail"t-att-data-mimetype="record.mimetype.value"/>
                                    </div>
                                </div>
                                <divclass="o_kanban_details">
                                    <divclass="o_kanban_details_wrapper">
                                        <divt-att-title="record.name.raw_value"class="o_kanban_record_title">
                                            <fieldname="name"class="o_text_overflow"/>
                                        </div>
                                        <divclass="o_kanban_record_body">
                                            <tt-if="record.type.raw_value=='url'">
                                                <spanclass="o_document_url"><iclass="fafa-globe"aria-label="Documenturl"/><fieldname="url"widget="url"/></span>
                                            </t>
                                            <sampt-else=""class="text-muted"></samp>
                                        </div>
                                        <divclass="o_kanban_record_bottom">
                                            <timeclass="oe_kanban_bottom_left">
                                                <fieldname="create_date"widget="date"/>
                                            </time>
                                            <divclass="oe_kanban_bottom_right">
                                                <fieldname="create_uid"widget="many2one_avatar_user"/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>
        <recordid="base.action_attachment"model="ir.actions.act_window">
            <fieldname="view_mode">kanban,tree,form</field>
            <fieldname="help"type="html">
              <pclass="o_view_nocontent_smiling_face">
                Attachanewdocument
              </p>
            </field>
        </record>

    </data>
</flectra>
