<?xmlversion="1.0"?>
<flectra>
    <data>
        <recordmodel="ir.ui.view"id="view_mail_form">
            <fieldname="name">mail.mail.form</field>
            <fieldname="model">mail.mail</field>
            <fieldname="arch"type="xml">
                <formstring="Emailmessage"duplicate="0">
                    <header>
                        <buttonname="send"string="SendNow"type="object"states='outgoing'class="oe_highlight"/>
                        <buttonname="mark_outgoing"string="Retry"type="object"states='exception,cancel'/>
                        <buttonname="cancel"string="Cancel"type="object"states='outgoing'/>
                        <fieldname="state"widget="statusbar"statusbar_visible="outgoing,sent,received,exception,cancel"/>
                    </header>
                    <sheet>
                        <fieldname="mail_message_id"required="0"invisible="1"/>
                        <labelfor="subject"class="oe_edit_only"/>
                        <h2><fieldname="subject"/></h2>
                        <divstyle="vertical-align:top;">
                            by<fieldname="author_id"class="oe_inline"string="User"/>on<fieldname="date"readonly="1"class="oe_inline"/>
                            <buttonname="%(action_email_compose_message_wizard)d"string="Reply"type="action"icon="fa-replytext-warning"
                                context="{'default_composition_mode':'comment','default_parent_id':mail_message_id}"states='received,sent,exception,cancel'/>
                        </div>
                        <group>
                            <fieldname="email_from"/>
                            <fieldname="email_to"/>
                            <fieldname="recipient_ids"widget="many2many_tags"/>
                            <fieldname="email_cc"/>
                            <fieldname="reply_to"/>
                            <fieldname="scheduled_date"/>
                        </group>
                        <notebook>
                            <pagestring="Body"name="body">
                                <fieldname="body_html"widget="html"options="{'style-inline':true}"/>
                            </page>
                            <pagestring="Advanced"name="advanced"groups="base.group_no_one">
                                <group>
                                    <groupstring="Status">
                                        <fieldname="auto_delete"/>
                                        <fieldname="notification"/>
                                        <fieldname="message_type"/>
                                        <fieldname="mail_server_id"/>
                                        <fieldname="model"/>
                                        <fieldname="res_id"/>
                                    </group>
                                    <groupstring="Headers">
                                        <fieldname="message_id"/>
                                        <fieldname="references"/>
                                        <fieldname="headers"/>
                                    </group>
                                </group>
                            </page>
                            <pagestring="Attachments"name="attachments">
                                <fieldname="attachment_ids"/>
                            </page>
                            <pagestring="FailureReason"name="failure_reason"attrs="{'invisible':[('state','!=','exception')]}">
                                <fieldname="failure_reason"/>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <recordmodel="ir.ui.view"id="view_mail_tree">
            <fieldname="name">mail.mail.tree</field>
            <fieldname="model">mail.mail</field>
            <fieldname="arch"type="xml">
                <treestring="Emails"decoration-muted="statein('sent','cancel')"decoration-info="state=='outgoing'"decoration-danger="state=='exception'">
                    <fieldname="date"/>
                    <fieldname="subject"/>
                    <fieldname="author_id"string="User"/>
                    <fieldname="message_id"invisible="1"/>
                    <fieldname="recipient_ids"invisible="1"/>
                    <fieldname="model"invisible="1"/>
                    <fieldname="res_id"invisible="1"/>
                    <fieldname="email_from"invisible="1"/>
                    <fieldname="state"invisible="1"/>
                    <fieldname="message_type"invisible="1"/>
                    <buttonname="send"string="SendNow"type="object"icon="fa-paper-plane"states='outgoing'/>
                    <buttonname="mark_outgoing"string="Retry"type="object"icon="fa-repeat"states='exception,cancel'/>
                    <buttonname="cancel"string="CancelEmail"type="object"icon="fa-times-circle"states='outgoing'/>
                </tree>
            </field>
        </record>

        <recordmodel="ir.ui.view"id="view_mail_search">
            <fieldname="name">mail.mail.search</field>
            <fieldname="model">mail.mail</field>
            <fieldname="arch"type="xml">
                <searchstring="EmailSearch">
                    <fieldname="email_from"filter_domain="['|','|',('email_from','ilike',self),('email_to','ilike',self),('subject','ilike',self)]"string="Email"/>
                    <fieldname="date"/>
                    <filtername="received"string="Received"domain="[('state','=','received')]"/>
                    <filtername="outgoing"string="Outgoing"domain="[('state','=','outgoing')]"/>
                    <filtername="sent"string="Sent"domain="[('state','=','sent')]"/>
                    <filtername="exception"string="Failed"domain="[('state','=','exception')]"/>
                    <separator/>
                    <filtername="type_email"string="Email"domain="[('message_type','=','email')]"/>
                    <filtername="type_comment"string="Comment"domain="[('message_type','=','comment')]"/>
                    <filtername="type_notification"string="Notification"domain="[('message_type','=','notification')]"/>
                    <groupexpand="0"string="ExtendedFilters...">
                        <fieldname="author_id"/>
                        <fieldname="recipient_ids"/>
                        <fieldname="model"/>
                        <fieldname="res_id"/>
                    </group>
                    <groupexpand="0"string="GroupBy">
                        <filterstring="Status"name="status"domain="[]"context="{'group_by':'state'}"/>
                        <filterstring="Author"name="author"context="{'group_by':'author_id'}"/>
                        <filterstring="Thread"name="thread"domain="[]"context="{'group_by':'message_id'}"/>
                        <filterstring="Date"name="month"help="CreationDate"domain="[]"context="{'group_by':'date'}"/>
                    </group>
                </search>
            </field>
        </record>

        <recordid="action_view_mail_mail"model="ir.actions.act_window">
            <fieldname="name">Emails</field>
            <fieldname="res_model">mail.mail</field>
            <fieldname="view_mode">tree,form</field>
            <fieldname="context">{}</field>
            <fieldname="search_view_id"ref="view_mail_search"/>
        </record>

        <!--AddmenuentryinSettings/Email-->
        <menuitemname="Emails"
            id="menu_mail_mail"
            parent="base.menu_email"
            action="action_view_mail_mail"
            sequence="1"/>
    </data>
</flectra>
