<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <recordid="view_move_line_tree"model="ir.ui.view">
        <fieldname="name">stock.move.line.tree</field>
        <fieldname="model">stock.move.line</field>
        <fieldname="arch"type="xml">
            <treestring="MoveLines"create="0"default_order="date">
                <fieldname="date"/>
                <fieldname="reference"string="Reference"
                       invisible="context.get('no_reference',False)"/>
                <fieldname="product_id"/>
                <fieldname="lot_id"groups="stock.group_production_lot"/>
                <fieldname="location_id"/>
                <fieldname="location_dest_id"/>
                <fieldname="qty_done"string="QuantityDone"/>
                <fieldname="product_uom_id"options="{'no_open':True,'no_create':True}"string="UnitofMeasure"groups="uom.group_uom"/>
                <fieldname="company_id"groups="base.group_multi_company"force_save="1"/>
                <fieldname="state"widget='badge'decoration-success="state=='done'"decoration-info="statenotin('done','cancel')"/>
            </tree>
        </field>
    </record>
    <recordid="view_move_line_form"model="ir.ui.view">
        <fieldname="name">stock.move.line.form</field>
        <fieldname="model">stock.move.line</field>
        <fieldname="arch"type="xml">
            <formstring="MoveLines"create="0"edit="0">
                <header>
                    <fieldname="state"widget="statusbar"/>
                </header>
                <sheet>
                    <fieldname="company_id"invisible="1"/>
                    <fieldname="picking_id"invisible="1"/>
                    <fieldname="product_uom_category_id"invisible="1"/>
                    <group>
                        <group>
                            <fieldname="date"/>
                            <fieldname="reference"string="Reference"/>
                            <fieldname="origin"/>
                            <fieldname="product_id"/>
                            <fieldname="location_id"options="{'no_create':True}"groups="stock.group_stock_multi_locations"/>
                            <fieldname="location_dest_id"options="{'no_create':True}"groups="stock.group_stock_multi_locations"/>
                        </group>
                        <group>
                            <labelfor="product_uom_qty"string="QuantityReserved"attrs="{'invisible':[('state','=','done')]}"/>
                            <divclass="o_row"attrs="{'invisible':[('state','=','done')]}">
                                <fieldname="product_uom_qty"readonly="1"/>
                                <fieldname="product_uom_id"options="{'no_create':True}"string="UnitofMeasure"groups="uom.group_uom"/>
                            </div>
                            <labelfor="qty_done"string="QuantityDone"/>
                            <divclass="o_row">
                                <fieldname="qty_done"/>
                                <fieldname="product_uom_id"options="{'no_create':True}"string="UnitofMeasure"groups="uom.group_uom"/>
                            </div>
                            <fieldname="lot_id"groups="stock.group_production_lot"context="{'default_product_id':product_id,'active_picking_id':picking_id,'default_company_id':company_id}"attrs="{'invisible':[('lot_id','=',False),('lot_name','!=',False)]}"/>
                            <fieldname="lot_name"groups="stock.group_production_lot"attrs="{'invisible':['|',('lot_id','!=',False),('lot_name','=',False)]}"/>
                            <fieldname="package_id"string="SourcePackage"groups="product.group_stock_packaging"/>
                            <fieldname="result_package_id"string="DestinationPackage"groups="stock.group_tracking_lot"/>
                            <fieldname="owner_id"string="Owner"groups="stock.group_tracking_owner"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <recordid="stock_move_line_view_search"model="ir.ui.view">
        <fieldname="name">stock.move.line.search</field>
        <fieldname="model">stock.move.line</field>
        <fieldname="arch"type="xml">
            <searchstring="StockMoves">
                <fieldname="picking_id"string="Transfer"/>
                <fieldname="reference"string="Reference"/>
                <fieldname="product_id"/>
                <fieldname="location_id"string="SourceLocation"groups="stock.group_stock_multi_locations"/>
                <fieldname="location_dest_id"string="DestinationLocation"groups="stock.group_stock_multi_locations"/>
                <separator/>
                <filterstring="ToDo"name="todo"domain="[('state','notin',['done','draft','cancel'])]"/>
                <filterstring="Done"name="done"domain="[('state','=','done')]"/>
                <separator/>
                <filterstring="Incoming"name="incoming"domain="[('picking_id.picking_type_id.code','=','incoming')]"/>
                <filterstring="Outgoing"name="outgoing"domain="[('picking_id.picking_type_id.code','=','outgoing')]"/>
                <filterstring="Internal"name="internal"domain="[('picking_id.picking_type_id.code','=','internal')]"/>
                <filterstring="Manufacturing"name="manufacturing"domain="[('picking_id.picking_type_id.code','=','mrp_operation')]"invisible="1"/>
                <separator/>
                <groupexpand="0"string="GroupBy">
                    <filterstring="Product"name="groupby_product_id"domain="[]"context="{'group_by':'product_id'}"/>
                    <filterstring="Status"name="by_state"domain="[]" context="{'group_by':'state'}"/>
                    <filterstring="Date"name="by_date"domain="[]"context="{'group_by':'date'}"/>
                </group>
            </search>
        </field>
    </record>

    <recordid="view_stock_move_line_kanban"model="ir.ui.view">
        <fieldname="name">stock.move.line.kanban</field>
        <fieldname="model">stock.move.line</field>
        <fieldname="arch"type="xml">
            <kanbanclass="o_kanban_mobile">
                <fieldname="location_id"invisible="1"/>
                <fieldname="location_dest_id"invisible="1"/>
                <templates>
                    <tt-name="kanban-box">
                        <divt-attf-class="oe_kanban_cardoe_kanban_global_click">
                            <strong><fieldname="product_id"/></strong>
                            <fieldname="picking_id"/>
                            <divclass="row">
                                <divclass="col-6">
                                    <fieldname="lot_id"invisible="notcontext.get('show_lots_m2o')"groups="stock.group_production_lot"context="{'default_product_id':product_id,'active_picking_id':picking_id}"/>
                                    <fieldname="lot_name"invisible="notcontext.get('show_lots_text')"groups="stock.group_production_lot"/>
                                    <fieldname="qty_done"string="QuantityDone"/>
                                    <fieldname="product_uom_id"string="UnitofMeasure"groups="uom.group_uom"/>
                                </div>
                                <divclass="col-6text-right">
                                    <fieldname="date"/>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <recordid="stock_move_line_action"model="ir.actions.act_window">
            <fieldname="name">ProductMoves</field>
            <fieldname="res_model">stock.move.line</field>
            <fieldname="type">ir.actions.act_window</field>
            <fieldname="view_mode">tree,kanban,pivot,form</field>
            <fieldname="view_id"ref="view_move_line_tree"/>
            <fieldname="context">{'search_default_done':1,'search_default_groupby_product_id':1,'create':0}</field>
            <fieldname="help"type="html">
                <pclass="o_view_nocontent_empty_folder">
                    There'snoproductmoveyet
                </p><p>
                    Thismenugivesyouthefulltraceabilityofinventoryoperationsonaspecificproduct.
                    Youcanfilterontheproducttoseeallthepastmovementsfortheproduct.
                </p>
            </field>
    </record>

    <menuitem
        action="stock_move_line_action"
        id="stock_move_line_menu"
        parent="stock.menu_warehouse_report"sequence="150"/>
</flectra>
