<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <recordid="view_production_lot_form"model="ir.ui.view">
        <fieldname="name">stock.production.lot.form</field>
        <fieldname="model">stock.production.lot</field>
        <fieldname="priority">10</field>
        <fieldname="arch"type="xml">
            <formstring="Lots/SerialNumbers">
                <sheet>
                <fieldname="display_complete"invisible="1"/>
                <divclass="oe_button_box"name="button_box"
                     attrs="{'invisible':[('display_complete','=',False)]}">
                        <buttonname="action_lot_open_quants"icon="fa-arrows"class="oe_stat_button"string="Location"type="object"/>
                        <buttonname="%(action_stock_report)d"icon="fa-arrow-up"class="oe_stat_button"string="Traceability"type="action"/>
                </div>
                <divclass="oe_title">
                    <labelfor="name"class="oe_edit_only"/>
                    <h1>
                        <fieldname="name"placeholder="e.g.LOT/0001/20121"/>
                    </h1>
                </div>
                <groupname="main_group">
                    <group>
                        <fieldname="product_id"context="{'default_type':'product'}"readonly="context.get('set_product_readonly',False)"force_save="1"help="Productthislot/serialnumbercontains.Youcannotchangeitanymoreifithasalreadybeenmoved."/>
                        <labelfor="product_qty"attrs="{'invisible':[('display_complete','=',False)]}"/>
                        <divclass="o_row"attrs="{'invisible':[('display_complete','=',False)]}">
                            <fieldname="product_qty"/>
                            <fieldname="product_uom_id"readonly="1"groups="uom.group_uom"/>
                        </div>
                        <fieldname="ref"/>
                        <fieldname="company_id"groups="base.group_multi_company"/>
                    </group>
                    <group></group>
                </group>
                <notebookattrs="{'invisible':[('display_complete','=',False)]}">
                    <pagestring="Description"name="description">
                        <fieldname="note"/>
                    </page>
                </notebook>
                </sheet>
                <divclass="oe_chatter">
                    <fieldname="message_follower_ids"/>
                    <fieldname="activity_ids"/>
                    <fieldname="message_ids"/>
                </div>
            </form>
        </field>
    </record>

    <recordid="view_production_lot_tree"model="ir.ui.view">
        <fieldname="name">stock.production.lot.tree</field>
        <fieldname="model">stock.production.lot</field>
        <fieldname="arch"type="xml">
            <treestring="Lots/SerialNumbers"multi_edit="1">
                <fieldname="name"decoration-bf="1"/>
                <fieldname="ref"optional="show"/>
                <fieldname="product_id"readonly="1"/>
                <fieldname="create_date"optional="show"/>
                <fieldname="company_id"groups="base.group_multi_company"/>
            </tree>
        </field>
    </record>
    <recordmodel="ir.ui.view"id="search_product_lot_filter">
        <fieldname="name">ProductionLotsFilter</field>
        <fieldname="model">stock.production.lot</field>
        <fieldname="arch"type="xml">
            <searchstring="ProductLotsFilter">
                <fieldname="name"string="Lot/SerialNumber"filter_domain="['|',('name','ilike',self),('ref','ilike',self)]"/>
                <fieldname="product_id"/>
                <groupexpand="0"string="GroupBy">
                    <filtername="group_by_product"string="Product"domain="[]"context="{'group_by':'product_id'}"/>
                </group>
            </search>
        </field>
    </record>

    <recordid="action_production_lot_form"model="ir.actions.act_window">
        <fieldname="name">Lots/SerialNumbers</field>
        <fieldname="type">ir.actions.act_window</field>
        <fieldname="res_model">stock.production.lot</field>
        <fieldname="view_ids"
                   eval="[(5,0,0),
                          (0,0,{'view_mode':'tree','view_id':ref('view_production_lot_tree')}),
                          (0,0,{'view_mode':'form','view_id':ref('view_production_lot_form')})]"/>
        <fieldname="search_view_id"ref="search_product_lot_filter"/>
        <fieldname="context">{'search_default_group_by_product':1,'display_complete':True,'default_company_id':allowed_company_ids[0]}</field>
        <fieldname="help"type="html">
          <pclass="o_view_nocontent_smiling_face">
            Addalot/serialnumber
          </p><p>
            Lots/Serialnumbershelpyoutrackingthepathfollowedbyyourproducts.
            Fromtheirtraceabilityreportyouwillseethefullhistoryoftheiruse,aswellastheircomposition.
          </p>
        </field>
    </record>
    <menuitemaction="action_production_lot_form"id="menu_action_production_lot_form"
        parent="menu_stock_inventory_control"groups="stock.group_production_lot"
        sequence="101"/>
</flectra>
