<?xmlversion="1.0"encoding="utf-8"?>
<flectra>

        <recordid="stock_scrap_search_view"model="ir.ui.view">
            <fieldname="name">stock.scrap.search</field>
            <fieldname="model">stock.scrap</field>
            <fieldname="arch"type="xml">
                <searchstring="SearchScrap">
                    <fieldname="name"string="Reference"/>
                    <fieldname="product_id"/>
                    <fieldname="location_id"/>
                    <fieldname="scrap_location_id"/>
                    <fieldname="create_date"/>
                    <groupexpand="0"string="GroupBy">
                        <filterstring="Product"name="product"domain="[]"context="{'group_by':'product_id'}"/>
                        <filterstring="Location"name="location"domain="[]"context="{'group_by':'location_id'}"/>
                        <filterstring="ScrapLocation"name="scrap_location"domain="[]"context="{'group_by':'scrap_location_id'}"/>
                    </group>
                </search>
            </field>
        </record>

        <recordid="stock_scrap_form_view"model="ir.ui.view">
            <fieldname="name">stock.scrap.form</field>
            <fieldname="model">stock.scrap</field>
            <fieldname="arch"type="xml">
                <formstring="Scrap">
                    <header>
                        <buttonname="action_validate"states="draft"string="Validate"type="object"class="oe_highlight"context="{'not_unlink_on_discard':True}"/>
                        <fieldname="state"widget="statusbar"statusbar_visible="draft,done"/>
                    </header>
                    <sheet>
                        <divclass="oe_button_box"name="button_box">
                            <buttonclass="oe_stat_button"name="action_get_stock_picking"
                                    string="StockOperation"type="object"
                                    attrs="{'invisible':[('picking_id','=',False)]}"icon="fa-cogs"/>
                            <fieldname="picking_id"invisible="1"/>
                            <buttonclass="oe_stat_button"name="action_get_stock_move_lines"
                                    string="ProductMoves"type="object"
                                    attrs="{'invisible':[('move_id','=',False)]}"icon="fa-exchange"/>
                            <fieldname="move_id"invisible="1"/>
                        </div>
                        <divclass="oe_title">
                            <h1><fieldname="name"nolabel="1"/></h1>
                        </div>
                        <group>
                            <group>
                                <fieldname="product_id"context="{'default_type':'product'}"/>
                                <labelfor="scrap_qty"/>
                                <divclass="o_row">
                                    <fieldname="scrap_qty"/>
                                    <fieldname="product_uom_category_id"invisible="1"/>
                                    <fieldname="product_uom_id"groups="uom.group_uom"force_save="1"/>
                                </div>
                            </group>
                            <group>
                                <fieldname="lot_id"context="{'default_product_id':product_id,'default_company_id':company_id}"attrs="{'invisible':['|',('product_id','=',False),('tracking','=','none')],'required':[('tracking','!=','none')]}"groups="stock.group_production_lot"/>
                                <fieldname="tracking"invisible="1"/>
                                <fieldname="package_id"groups="stock.group_tracking_lot"/>
                                <fieldname="owner_id"groups="stock.group_tracking_owner"/>
                                <fieldname="location_id"options="{'no_create':True,'no_open':True}"groups="stock.group_stock_multi_locations"force_save="1"/>
                                <fieldname="scrap_location_id"options="{'no_create':True,'no_open':True}"groups="stock.group_stock_multi_locations"force_save="1"/>
                                <fieldname="origin"/>
                                <fieldname="date_done"attrs="{'invisible':[('state','=','draft')]}"/>
                                <fieldname="picking_id"attrs="{'invisible':[('picking_id','=',False)]}"/>
                                <fieldname="company_id"groups="base.group_multi_company"/>
                            </group>
                        </group>
                    </sheet>
                    <divclass="oe_chatter">
                        <fieldname="message_follower_ids"/>
                        <fieldname="message_ids"/>
                    </div>
                </form>
            </field>
        </record>

        <recordid="stock_scrap_view_kanban"model="ir.ui.view">
            <fieldname="name">stock.scrap.kanban</field>
            <fieldname="model">stock.scrap</field>
            <fieldname="arch"type="xml">
                <kanbanclass="o_kanban_mobile"sample="1">
                    <fieldname="name"/>
                    <fieldname="product_id"/>
                    <fieldname="date_done"/>
                    <fieldname="scrap_qty"/>
                    <fieldname="state"/>
                    <templates>
                        <tt-name="kanban-box">
                            <divclass="oe_kanban_global_click">
                                <divclass="rowmb4">
                                    <strongclass="col-6">
                                        <spant-esc="record.name.value"/>
                                    </strong>
                                    <strongt-if="record.date_done.value"class="col-6text-right">
                                        <iclass="fafa-clock-o"role="img"aria-label="Date"title="Date"/><spant-esc="record.date_done.value"/>
                                    </strong>
                                    <divclass="col-12">
                                        <spant-esc="record.product_id.value"/>
                                    </div>
                                    <divclass="col-6">
                                        <spant-esc="record.scrap_qty.value"/>
                                    </div>
                                    <divclass="col-6">
                                        <spanclass="float-rightbadgebadge-secondary">
                                            <fieldname="state"/>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <recordid="stock_scrap_tree_view"model="ir.ui.view">
            <fieldname="name">stock.scrap.tree</field>
            <fieldname="model">stock.scrap</field>
            <fieldname="arch"type="xml">
                <treemulti_edit="1"sample="1">
                    <fieldname="name"decoration-bf="1"/>
                    <fieldname="date_done"/>
                    <fieldname="product_id"readonly="1"/>
                    <fieldname="scrap_qty"/>
                    <fieldname="product_uom_category_id"invisible="1"/>
                    <fieldname="product_uom_id"groups="uom.group_uom"/>
                    <fieldname="location_id"options="{'no_create':True}"groups="stock.group_stock_multi_locations"/>
                    <fieldname="scrap_location_id"options="{'no_create':True}"groups="stock.group_stock_multi_locations"/>
                    <fieldname="company_id"readonly="1"groups="base.group_multi_company"/>
                    <fieldname="state"widget="badge"decoration-success="state=='done'"decoration-info="state=='draft'"/>
                </tree>
            </field>
        </record>

        <recordmodel="ir.actions.act_window"id="action_stock_scrap">
            <fieldname="name">ScrapOrders</field>
            <fieldname="type">ir.actions.act_window</field>
            <fieldname="res_model">stock.scrap</field>
            <fieldname="view_mode">tree,form,kanban</field>
            <fieldname="help"type="html">
              <pclass="o_view_nocontent_smiling_face">
                Scrapproducts
              </p><p>
                Scrappingaproductwillremoveitfromyourstock.Theproductwill
                endupinascraplocationthatcanbeusedforreportingpurpose.
              </p>
            </field>
        </record>

        <recordid="stock_scrap_form_view2"model="ir.ui.view">
            <fieldname="name">stock.scrap.form2</field>
            <fieldname="model">stock.scrap</field>
            <fieldname="arch"type="xml">
                <formstring="Scrap">
                    <group>
                        <group>
                            <fieldname="state"invisible="1"/>
                            <fieldname="product_id"options="{'no_create':True}"domain="[('id','in',context.get('product_ids',[]))]"/>
                            <labelfor="scrap_qty"/>
                            <divclass="o_row">
                                <fieldname="scrap_qty"
                                    attrs="{'readonly':[('tracking','=','serial')]}"/>
                                <fieldname="product_uom_category_id"invisible="1"/>
                                <fieldname="product_uom_id"groups="uom.group_uom"/>
                            </div>
                        </group>
                        <group>
                            <fieldname="picking_id"invisible="1"/>
                            <fieldname="tracking"invisible="1"/>
                            <fieldname="lot_id"groups="stock.group_production_lot"
                                context="{'default_company_id':company_id,'default_product_id':product_id}"
                                attrs="{'invisible':['|',('product_id','=',False),('tracking','=','none')],'required':[('tracking','!=','none')]}"/>
                            <fieldname="package_id"groups="stock.group_tracking_lot"/>
                            <fieldname="owner_id"groups="stock.group_tracking_owner"/>
                            <fieldname="company_id"invisible="1"/>
                            <fieldname="location_id"groups="stock.group_stock_multi_locations"options="{'no_open':True,'no_create':True}"/>
                            <fieldname="scrap_location_id"groups="stock.group_stock_multi_locations"options="{'no_open':True,'no_create':True}"/>
                        </group>
                    </group>
                    <footer>
                        <buttonname="action_validate"string="Done"type="object"class="btn-primary"/>
                        <buttonstring="Cancel"class="btn-secondary"special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>

    <menuitem
        id="menu_stock_scrap"
        name="Scrap"
        parent="menu_stock_warehouse_mgmt"
        action="action_stock_scrap"
        sequence="99"/>

</flectra>
