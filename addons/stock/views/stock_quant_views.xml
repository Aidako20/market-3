<?xmlversion="1.0"encoding="utf-8"?>
<flectra>

    <recordid="quant_search_view"model="ir.ui.view">
        <fieldname="name">stock.quant.search</field>
        <fieldname="model">stock.quant</field>
        <fieldeval="10"name="priority"/>
        <fieldname="arch"type="xml">
            <searchstring="Quants">
                <fieldname="product_id"/>
                <fieldname="location_id"/>
                <fieldname="package_id"groups="stock.group_tracking_lot"/>
                <fieldname="lot_id"groups="stock.group_production_lot"/>
                <fieldname="owner_id"groups="stock.group_tracking_owner"/>
                <groupexpand='0'string='Filters'>
                    <filtername='internal_loc'string="InternalLocations"domain="[('location_id.usage','=','internal')]"/>
                    <filtername='transit_loc'string="TransitLocations"domain="[('location_id.usage','=','transit')]"/>
                    <filtername="on_hand"string="OnHand"domain="[('on_hand','=',True)]"/>
                    <separator/>
                    <filtername="negative"string="NegativeStock"domain="[('quantity','&lt;',0.0)]"/>
                    <filtername="positive"string="PositiveStock"domain="[('quantity','&gt;',0.0)]"/>
                    <filtername="reserved"string="Reservations"domain="[('reserved_quantity','&gt;',0.0)]"/>
                    <separator/>
                    <filtername="filter_in_date"date="in_date"/>
                </group>
                <groupexpand='0'string='Groupby...'>
                    <filterstring='Product'name="productgroup"context="{'group_by':'product_id'}"/>
                    <filterstring='Location'name="locationgroup"domain="[]"context="{'group_by':'location_id'}"/>
                    <filterstring='Owner'name="owner"context="{'group_by':'owner_id'}"groups="stock.group_tracking_owner"/>
                    <filterstring='Lot/SerialNumber'name="Lot_Serial_number"context="{'group_by':'lot_id'}"groups="stock.group_production_lot"/>
                    <filterstring='Package'name="package"domain="[]"context="{'group_by':'package_id'}"groups="stock.group_tracking_lot"/>
                    <filterstring='Company'name="company"domain="[]"context="{'group_by':'company_id'}"groups="base.group_multi_company"/>
               </group>
            </search>
        </field>
    </record>

    <recordmodel="ir.ui.view"id="view_stock_quant_form_editable">
        <fieldname="name">stock.quant.form.editable</field>
        <fieldname="model">stock.quant</field>
        <fieldeval="11"name="priority"/>
        <fieldname="arch"type="xml">
            <formstring="InventoryValuation"create="false"edit="false"delete="false">
                <sheet>
                    <group>
                        <group>
                            <fieldname="tracking"invisible="1"/>
                            <fieldname="product_id"readonly="0"options="{'no_create':True}"/>
                            <fieldname="location_id"readonly="0"options="{'no_create':True}"/>
                            <fieldname="lot_id"groups="stock.group_production_lot"
                                attrs="{'readonly':[('tracking','notin',['serial','lot'])],'required':[('tracking','!=','none')]}"
                                context="{'default_product_id':product_id,'default_company_id':company_id}"/>
                            <fieldname="package_id"readonly="0"groups="stock.group_tracking_lot"/>
                            <fieldname="owner_id"readonly="0"groups="stock.group_tracking_owner"options="{'no_create':True}"/>
                            <fieldname='company_id'groups="base.group_multi_company"/>
                        </group>
                        <group>
                            <labelfor="inventory_quantity"string="QuantityOnHand"/>
                            <divclass="o_row">
                                <fieldname="inventory_quantity"/>
                                <fieldname="product_uom_id"groups="uom.group_uom"/>
                            </div>
                            <labelfor="reserved_quantity"string="QuantityReserved"/>
                            <divclass="o_row">
                                <fieldname="reserved_quantity"/>
                                <fieldname="product_uom_id"groups="uom.group_uom"/>
                            </div>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <recordmodel="ir.ui.view"id="view_stock_quant_form">
        <fieldname="name">stock.quant.form</field>
        <fieldname="model">stock.quant</field>
        <fieldeval="10"name="priority"/>
        <fieldname="arch"type="xml">
            <formstring="InventoryValuation"create="false"edit="false"delete="false">
                <sheet>
                    <divclass="oe_button_box"name="button_box">
                        <buttonclass="oe_stat_button"icon="fa-exchange"type="object"name="action_view_stock_moves"string="ProductMoves"/>
                    </div>
                    <group>
                        <group>
                            <fieldname="product_id"/>
                            <fieldname="location_id"options="{'no_create':True}"/>
                            <fieldname="lot_id"groups="stock.group_production_lot"/>
                            <fieldname="package_id"groups="stock.group_tracking_lot"/>
                            <fieldname="owner_id"groups="stock.group_tracking_owner"/>
                        </group>
                        <group>
                            <labelfor="quantity"string="QuantityOnHand"/>
                            <divclass="o_row">
                                <fieldname="quantity"/>
                                <fieldname="product_uom_id"groups="uom.group_uom"/>
                            </div>
                            <labelfor="reserved_quantity"string="QuantityReserved"/>
                            <divclass="o_row">
                                <fieldname="reserved_quantity"/>
                                <fieldname="product_uom_id"groups="uom.group_uom"/>
                            </div>
                            <fieldname="in_date"attrs="{'invisible':[('lot_id','=',False)]}"groups="stock.group_production_lot"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <recordmodel="ir.ui.view"id="view_stock_quant_tree_editable">
        <fieldname="name">stock.quant.tree.editable</field>
        <fieldname="model">stock.quant</field>
        <fieldeval="10"name="priority"/>
        <fieldname="arch"type="xml">
            <treeeditable="bottom"
                  create="1"edit="1"import="0"js_class="singleton_list"
                  sample="1">
                <fieldname="id"invisible="1"/>
                <fieldname="tracking"invisible="1"/>
                <fieldname="product_id"attrs="{'readonly':[('id','!=',False)]}"
                       invisible="context.get('single_product',False)"
                       readonly="context.get('single_product',False)"force_save="1"
                       options="{'no_create':True}"/>
                <fieldname="location_id"attrs="{'readonly':[('id','!=',False)]}"
                       invisible="context.get('hide_location',False)"
                       options="{'no_create':True}"/>
                <fieldname="lot_id"groups="stock.group_production_lot"
                       attrs="{
                            'readonly':['|',('id','!=',False),('tracking','notin',['serial','lot'])],
                            'required':[('tracking','!=','none')]
                       }"
                       invisible="context.get('hide_lot',False)"
                       context="{'default_product_id':product_id,'default_company_id':company_id}"/>
                <fieldname="package_id"groups="stock.group_tracking_lot"
                       attrs="{'readonly':[('id','!=',False)]}"/>
                <fieldname="owner_id"groups="stock.group_tracking_owner"
                       attrs="{'readonly':[('id','!=',False)]}"
                       options="{'no_create':True}"/>
                <fieldname="quantity"string="OnHandQuantity"
                       invisible="1"/>
                <fieldname="inventory_quantity"string="OnHandQuantity"decoration-danger="inventory_quantity&lt;0"
                       readonly="0"/>
                <fieldname="available_quantity"optional="show"/>
                <fieldname="product_uom_id"groups="uom.group_uom"/>
                <fieldname='company_id'groups="base.group_multi_company"optional="show"/>
            </tree>
        </field>
    </record>

    <recordmodel="ir.ui.view"id="view_stock_quant_tree">
        <fieldname="name">stock.quant.tree</field>
        <fieldname="model">stock.quant</field>
        <fieldeval="10"name="priority"/>
        <fieldname="arch"type="xml">
            <treestring="InventoryValuation"js_class="inventory_report_list"
                  create="0"delete="0">
                <fieldname="product_id"invisible="context.get('single_product',False)"/>
                <fieldname="location_id"invisible="context.get('hide_location',False)"/>
                <fieldname="lot_id"groups="stock.group_production_lot"
                       invisible="context.get('hide_lot',False)"/>
                <fieldname="package_id"groups="stock.group_tracking_lot"/>
                <fieldname="owner_id"groups="stock.group_tracking_owner"/>
                <fieldname="available_quantity"/>
                <fieldname="quantity"/>
                <fieldname="product_uom_id"groups="uom.group_uom"/>
                <fieldname='company_id'groups="base.group_multi_company"/>
            </tree>
        </field>
    </record>

    <recordmodel="ir.ui.view"id="view_stock_quant_pivot">
        <fieldname="name">stock.quant.pivot</field>
        <fieldname="model">stock.quant</field>
        <fieldname="arch"type="xml">
            <pivotstring="Inventory"sample="1">
                <fieldname="product_id"type="row"/>
                <fieldname="location_id"type="col"/>
                <fieldname="quantity"type="measure"/>
            </pivot>
        </field>
    </record>

    <recordid="stock_quant_view_graph"model="ir.ui.view">
        <fieldname="name">stock.quant.graph</field>
        <fieldname="model">stock.quant</field>
        <fieldname="arch"type="xml">
            <graphstring="StockQuant"sample="1">
                <fieldname="location_id"/>
                <fieldname="quantity"type="measure"/>
            </graph>
        </field>
    </record>

    <recordmodel="ir.actions.server"id="action_view_quants"><!--Menu+python-->
        <fieldname="name">Inventory</field>
        <fieldname="model_id"ref="model_stock_quant"/>
        <fieldname="state">code</field>
        <fieldname="groups_id"eval="[(4,ref('stock.group_stock_user'))]"/>
        <fieldname="code">
            action=model.with_context(
                search_default_internal_loc=1,
                search_default_productgroup=1,
                search_default_locationgroup=1,
            ).action_view_quants()
        </field>
    </record>

    <recordmodel="ir.actions.act_window"id="dashboard_open_quants"><!--Usedindashboard-->
        <fieldname="name">UpdateQuantity</field>
        <fieldname="context">{'search_default_internal_loc':1,'search_default_productgroup':1,'search_default_locationgroup':1,'inventory_mode':True}</field>
        <fieldname="res_model">stock.quant</field>
        <fieldname="view_id"ref="view_stock_quant_tree_editable"/>
    </record>
    <recordmodel="ir.actions.act_window"id="location_open_quants"><!--Usedinlocation-->
        <fieldname="context">{'search_default_productgroup':1}</field>
        <fieldname="domain">[('location_id','child_of',active_ids)]</field>
        <fieldname="name">CurrentStock</field>
        <fieldname="res_model">stock.quant</field>
    </record>

    <recordid="quant_package_search_view"model="ir.ui.view">
        <fieldname="name">stock.quant.package.search</field>
        <fieldname="model">stock.quant.package</field>
        <fieldeval="10"name="priority"/>
        <fieldname="arch"type="xml">
            <searchstring="Package">
                <fieldname="name"string="PackageName"/>
                <fieldname="location_id"/>
                <fieldname="packaging_id"/>
                <group expand='0'string='Groupby...'>
                   <filterstring='Location'name="location"domain="[]"context="{'group_by':'location_id'}"/>
                   <filterstring='Packaging'name="packaging"domain="[]"context="{'group_by':'packaging_id'}"/>
               </group>
            </search>
        </field>
    </record>

    <recordmodel="ir.ui.view"id="view_quant_package_form">
        <fieldname="name">stock.quant.package.form</field>
        <fieldname="model">stock.quant.package</field>
        <fieldeval="10"name="priority"/>
        <fieldname="arch"type="xml">
            <formstring="Package">
                <header>
                    <buttonname="unpack"string="Unpack"type="object"/>
                </header>
                <sheet>
                    <divclass="oe_button_box"name="button_box">
                        <buttonclass="oe_stat_button"name="action_view_picking"
                        string="PackageTransfers"type="object"
                        widget="statinfo"icon="fa-arrows-v"/>
                    </div>
                    <divclass="oe_title">
                        <labelfor="name"string="PackageReference"class="oe_edit_only"/>
                        <h1><fieldname="name"class="oe_inline"/></h1>
                    </div>
                    <group>
                        <groupid='stock.package_location_group'>
                            <fieldname='company_id'groups="base.group_multi_company"/>
                            <fieldname='owner_id'groups="stock.group_tracking_owner"/>
                            <fieldname="location_id"options="{'no_create':True}"/>
                        </group>
                    </group>
                    <separatorstring="Content"/>
                    <fieldname="quant_ids">
                        <tree>
                            <fieldname="product_id"/>
                            <fieldname="lot_id"groups="stock.group_production_lot"/>
                            <fieldname="quantity"/>
                            <fieldname="product_uom_id"groups="uom.group_uom"/>
                        </tree>
                    </field>
                </sheet>
            </form>
        </field>
    </record>

    <recordmodel="ir.ui.view"id="view_quant_package_tree">
        <fieldname="name">stock.quant.package.tree</field>
        <fieldname="model">stock.quant.package</field>
        <fieldeval="10"name="priority"/>
        <fieldname="arch"type="xml">
            <treestring="Package"sample="1">
                <fieldname="display_name"/>
                <fieldname="location_id"options="{'no_create':True}"/>
                <fieldname="company_id"groups="base.group_multi_company"/>
            </tree>
        </field>
    </record>

    <recordmodel="ir.ui.view"id="view_quant_package_kanban">
        <fieldname="name">stock.quant.package.kanban</field>
        <fieldname="model">stock.quant.package</field>
        <fieldname="arch"type="xml">
            <kanbansample="1">
                <templates>
                <fieldname="name"/>
                    <tt-name="kanban-box">
                        <divclass="oe_kanban_global_click">
                            <divclass="o_kanban_record_topmb0">
                                <strongclass="o_kanban_record_title"><fieldname="name"/></strong>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <recordmodel="ir.actions.act_window"id="action_package_view">
        <fieldname="context">{}</field>
        <fieldname="name">Packages</field>
        <fieldname="res_model">stock.quant.package</field>
        <fieldname="view_mode">kanban,tree,form</field>
        <fieldname="help"type="html">
            <pclass="o_view_nocontent_smiling_face">
                Createanewpackage
            </p><p>
                Packagesareusuallycreatedviatransfers(duringpackoperation)andcancontaindifferentproducts.
                Oncecreated,thewholepackagecanbemovedatonce,orproductscanbeunpackedandmovedassingleunitsagain.
            </p>
        </field>
    </record>

    <menuitemid="menu_package"name="Packages"parent="menu_stock_inventory_control"action="action_package_view"groups="stock.group_tracking_lot"sequence="102"/>
    <menuitemid="menu_valuation"name="InventoryReport"
              parent="stock.menu_warehouse_report"sequence="100"
              action="action_view_quants"/>
</flectra>
