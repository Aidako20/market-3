<?xmlversion="1.0"encoding="UTF-8"?>
<flectra>
    <data>
        <templateid="label_transfer_template_view_zpl">
            <tt-set="uom_categ_unit"t-value="env.ref('uom.product_uom_categ_unit')"/>
            <tt-foreach="docs"t-as="picking">

                <tt-set="picking_qty_done"t-value="any(picking.move_lines.move_line_ids.mapped('qty_done'))"/>
                <tt-foreach="picking.move_lines"t-as="move">
                    <tt-foreach="move.move_line_ids"t-as="move_line">
                        <tt-if="move_line.product_uom_id.category_id==uom_categ_unit">
                            <tt-if="picking_qty_done">
                                <tt-set="qty"t-value="int(move_line.qty_done)"/>
                            </t>
                            <tt-else="">
                                <tt-set="qty"t-value="int(move_line.product_uom_qty)"/>
                            </t>
                        </t>
                        <tt-else="">
                            <tt-set="qty"t-value="1"/>
                        </t>
                        <tt-foreach="range(qty)"t-as="item">
                            <tt-translation="off">
^XA
^FO100,50
^A0N,44,33^FD<tt-esc="move_line.product_id.display_name"/>^FS
^FO100,100
<tt-if="move_line.product_id.tracking!='none'and(move_line.lot_idormove_line.lot_name)">
^A0N,44,33^FDLN/SN:<tt-esc="move_line.lot_id.nameormove_line.lot_name"/>^FS
^FO100,150^BY3
^BCN,100,Y,N,N
^FD<tt-esc="move_line.lot_id.nameormove_line.lot_name"/>^FS
</t>
<tt-if="move_line.product_id.tracking=='none'andmove_line.product_id.barcode">
^BCN,100,Y,N,N
^FD<tt-esc="move_line.product_id.barcode"/>^FS
</t>
^XZ
                            </t>
                        </t>
                    </t>
                </t>
            </t>
        </template>

        <templateid="label_transfer_template_view_pdf">
            <tt-call="web.basic_layout">
                <divclass="page">
                    <tt-set="uom_categ_unit"t-value="env.ref('uom.product_uom_categ_unit')"/>
                    <tt-foreach="docs"t-as="picking">
                        <tt-set="picking_qty_done"t-value="any(picking.move_lines.move_line_ids.mapped('qty_done'))"/>
                        <tt-foreach="picking.move_lines"t-as="move">
                            <tt-foreach="move.move_line_ids"t-as="move_line">
                                <tt-if="move_line.product_uom_id.category_id==uom_categ_unit">
                                    <tt-if="picking_qty_done">
                                        <tt-set="qty"t-value="int(move_line.qty_done)"/>
                                    </t>
                                    <tt-else="">
                                        <tt-set="qty"t-value="int(move_line.product_uom_qty)"/>
                                    </t>
                                </t>
                                <tt-else="">
                                    <tt-set="qty"t-value="1"/>
                                </t>
                                <tt-foreach="range(qty)"t-as="item">
                                    <tt-translation="off">
                                        <divstyle="display:inline-table;height:10rem;width:32%;">
                                            <tableclass="tabletable-bordered"style="border:2pxsolidblack;"t-if="picking.move_lines">
                                                <tr>
                                                    <thclass="table-activetext-left"style="height:4rem;">
                                                        <spant-esc="move.product_id.display_name"/>
                                                    </th>
                                                </tr>
                                                <tt-if="move_line.product_id.tracking!='none'">
                                                    <tr>
                                                        <tdclass="text-centeralign-middle">
                                                            <tt-if="move_line.lot_nameormove_line.lot_id">
                                                                <imgt-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s'%('Code128',move_line.lot_name,600,150)"style="width:100%;height:4rem"alt="Barcode"/>
                                                                <spant-esc="move_line.lot_nameormove_line.lot_id.name"/>
                                                            </t>
                                                            <tt-else="">
                                                                <spanclass="text-muted">Nobarcodeavailable</span>
                                                            </t>
                                                        </td>
                                                    </tr>
                                                </t>
                                                <tt-if="move_line.product_id.tracking=='none'">
                                                    <tr>
                                                        <tdclass="text-centeralign-middle"style="height:6rem;">
                                                            <tt-if="move_line.product_id.barcode">
                                                                    <imgt-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s'%('Code128',move_line.product_id.barcode,600,150)"style="width:100%;height:4rem"alt="Barcode"/>
                                                                    <spant-esc="move_line.product_id.barcode"/>
                                                            </t>
                                                            <tt-else="">
                                                                <spanclass="text-muted">Nobarcodeavailable</span>
                                                            </t>
                                                        </td>
                                                    </tr>
                                                </t>
                                            </table>
                                        </div>
                                    </t>
                                </t>
                            </t>
                        </t>
                    </t>
                </div>
            </t>
        </template>

        <templateid="label_picking_type_view">
            <tt-foreach="docs"t-as="operation">
                <tt-translation="off">
^XA
^FO100,50
^A0N,44,33^FD<tt-esc="operation.name"/>^FS
<tt-if="operation.barcode">
^FO100,100
^BCN,100,Y,N,N
^FD<tt-esc="operation.barcode"/>^FS
</t>
^XZ
                </t>
            </t>
        </template>
    </data>
</flectra>
