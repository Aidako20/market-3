<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <templateid="stock_report_delivery_document_inherit_product_expiry"inherit_id="stock.report_delivery_document">
        <xpathexpr="//t[@name='lot_serial']"position="after">
            <tt-set="has_expiry_date"t-value="False"/>
            <tt-set="has_expiry_date"
               t-value="o.move_line_ids.filtered(lambdaml:ml.lot_id.expiration_date)"
               groups="product_expiry.group_expiry_date_on_delivery_slip"/>
            <tname="expiry_date"t-if="has_expiry_date">
                <th>ExpirationDate</th>
            </t>
        </xpath>
    </template>

    <templateid="stock_report_delivery_has_serial_move_line_inherit_product_expiry"inherit_id="stock.stock_report_delivery_has_serial_move_line">
        <xpathexpr="//t[@name='move_line_lot']"position="after">
            <tt-if="has_expiry_date">
                <td><spant-field="move_line.lot_id.expiration_date"t-options='{"widget":"date"}'/></td>
            </t>
        </xpath>
    </template>
</flectra>
