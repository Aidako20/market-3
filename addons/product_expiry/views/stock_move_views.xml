<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <recordid="view_stock_move_operations_expiry"model="ir.ui.view">
        <fieldname="name">stock.move.operations.inherit.form</field>
        <fieldname="model">stock.move</field>
        <fieldname="inherit_id"ref="stock.view_stock_move_operations"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//field[@name='product_id']"position="after">
                <fieldname="picking_code"invisible="1"/>
                <fieldname="use_expiration_date"invisible="1"/>
            </xpath>
        </field>
    </record>

    <recordid="view_stock_move_line_operation_tree_expiry"model="ir.ui.view">
        <fieldname="name">stock.move.line.inherit.tree</field>
        <fieldname="model">stock.move.line</field>
        <fieldname="inherit_id"ref="stock.view_stock_move_line_operation_tree"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//field[@name='lot_name']"position="after">
                <fieldname="picking_type_use_existing_lots"invisible="1"/>
                <fieldname="expiration_date"force_save="1"attrs="{
                    'column_invisible':['|',('parent.use_expiration_date','!=',True),('parent.picking_code','!=','incoming')],
                    'readonly':[('picking_type_use_existing_lots','=',True)],
                }"/>
            </xpath>
        </field>
    </record>

    <recordid="view_stock_move_line_detailed_operation_tree_expiry"model="ir.ui.view">
        <fieldname="name">stock.move.line.operations.inherit.tree</field>
        <fieldname="model">stock.move.line</field>
        <fieldname="inherit_id"ref="stock.view_stock_move_line_detailed_operation_tree"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//field[@name='lot_name']"position="after">
                <fieldname="picking_type_use_existing_lots"invisible="1"/>
                <fieldname="expiration_date"force_save="1"attrs="{
                    'column_invisible':[('parent.picking_type_code','!=','incoming')],
                    'readonly':[('picking_type_use_existing_lots','=',True)],
                }"/>
            </xpath>
        </field>
    </record>
</flectra>
