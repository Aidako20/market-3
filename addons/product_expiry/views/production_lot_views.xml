<?xmlversion="1.0"encoding='UTF-8'?>
<flectra>
    <recordid="view_move_form_expiry"model="ir.ui.view">
        <fieldname="name">stock.production.lot.inherit.form</field>
        <fieldname="model">stock.production.lot</field>
        <fieldname="inherit_id"ref="stock.view_production_lot_form"/>
        <fieldname="arch"type="xml">
        <xpathexpr="//page[@name='description']"position="before">
            <pagestring="Dates"name="expiration_dates"attrs="{'invisible':[('use_expiration_date','=',False)]}">
                <fieldname="use_expiration_date"invisible="1"/>
                <group>
                    <group>
                        <fieldname="expiration_date"/>
                        <fieldname="removal_date"/>
                    </group>
                    <group>
                        <fieldname="use_date"/>
                        <fieldname="alert_date"/>
                    </group>
                </group>
            </page>
        </xpath>
        <xpathexpr="//div[hasclass('oe_title')]"position="inside">
            <fieldname="product_expiry_alert"invisible="1"/>
            <spanclass="badgebadge-danger"attrs="{'invisible':[('product_expiry_alert','=',False)]}">ExpirationAlert</span>
        </xpath>
        </field>
    </record>

    <recordid="search_product_lot_filter_inherit_product_expiry"model="ir.ui.view">
        <fieldname="name">stock.production.lot.search.inherit</field>
        <fieldname="model">stock.production.lot</field>
        <fieldname="inherit_id"ref="stock.search_product_lot_filter"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//field[@name='product_id']"position="after">
                <filterstring="ExpirationAlerts"name="expiration_alerts"domain="[('alert_date','&lt;=',time.strftime('%Y-%m-%d%H:%M:%S'))]"/>
            </xpath>
        </field>
     </record>

    <recordid="view_production_lot_view_tree"model="ir.ui.view">
        <fieldname="name">stock.production.lot.tree.inherit.product.expiry</field>
        <fieldname="model">stock.production.lot</field>
        <fieldname="inherit_id"ref="stock.view_production_lot_tree"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//field[@name='create_date']"position="after">
                <fieldname="product_qty"invisible="1"/>
                <fieldname="alert_date"optional="hide"widget='remaining_days'attrs="{'invisible':[('product_qty','&lt;=',0)]}"/>
                <fieldname="use_date"optional="hide"/>
                <fieldname="removal_date"optional="hide"/>
                <fieldname="expiration_date"optional="hide"/>
            </xpath>
        </field>
    </record>
</flectra>
