flectra.define('test_website.custom_snippets',function(require){
'usestrict';

vartour=require('web_tour.tour');

/**
 *Thepurposeofthistouristocheckthecustomsnippetsflow:
 *
 *->gotoeditmode
 *->dragabannerintopagecontent
 *->customizebanner(settext)
 *->savebannerascustomsnippet
 *->confirmname(removeinmasterwhenimplicitdefaultnamefeatureisimplemented)
 *->confirmsave&reload(removeinmasterbecausereloadisnotneededanymore)
 *->ensurecustomsnippetisavailable
 *->dragcustomsnippet
 *->ensureblockappearsasbanner
 *->ensureblockappearsascustombanner
 *->deletecustomsnippet
 *->confirmdelete
 *->ensureitwasdeleted
 */

tour.register('test_custom_snippet',{
    url:'/',
    test:true
},[
    {
        content:"entereditmode",
        trigger:"a[data-action=edit]"
    },
    {
        content:"dropasnippet",
        trigger:"#oe_snippets.oe_snippet[name='Banner'].oe_snippet_thumbnail:not(.o_we_already_dragging)",
        extra_trigger:"body.editor_enable.editor_has_snippets",
        moveTrigger:".oe_drop_zone",
        run:"drag_and_drop#wrap",
    },
    {
        content:"customizesnippet",
        trigger:"#wrapwrap.s_bannerh1",
        run:"text",
        consumeEvent:"input",
    },
    {
        content:"savecustomsnippet",
        trigger:".snippet-option-SnippetSavewe-button",
    },
    {
        content:"confirmsavename",
        trigger:".modal-dialogbuttonspan:contains('Save')",
    },
    {
        content:"confirmsaveandreload",
        trigger:".modal-dialogbuttonspan:contains('SaveandReload')",
    },
    {
        content:"ensurecustomsnippetappeared",
        trigger:"#oe_snippets.oe_snippet[name='CustomBanner']",
        run:function(){},//check
    },
    {
        content:"dropcustomsnippet",
        trigger:".oe_snippet[name='CustomBanner'].oe_snippet_thumbnail:not(.o_we_already_dragging)",
        extra_trigger:"body.editor_enable.editor_has_snippets",
        moveTrigger:".oe_drop_zone",
        run:"drag_and_drop#wrap",
    },
    {
        content:"ensurebannersectionexists",
        trigger:"#wrapsection[data-name='Banner']",
        run:function(){},//check
    },
    {
        content:"ensurecustombannersectionexists",
        trigger:"#wrapsection[data-name='CustomBanner']",
        run:function(){},//check
    },
    {
        content:"deletecustomsnippet",
        trigger:".oe_snippet[name='CustomBanner']we-button.o_delete_btn",
        extra_trigger:".oe_snippet[name='CustomBanner'].oe_snippet_thumbnail:not(.o_we_already_dragging)",
    },
    {
        content:"confirmdelete",
        trigger:".modal-dialogbutton:has(span:contains('Yes'))",
    },
    {
        content:"ensurecustomsnippetdisappeared",
        trigger:"#oe_snippets",
        extra_trigger:"#oe_snippets:not(:has(.oe_snippet[name='CustomBanner']))",
        run:function(){},//check
    },
]);

});
