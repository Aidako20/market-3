<flectra>
    <!--Badgeviews-->
    <recordid="gamification_badge_view_search"model="ir.ui.view">
        <fieldname="name">gamification.badge.view.search</field>
        <fieldname="model">gamification.badge</field>
        <fieldname="arch"type="xml">
            <searchstring="SearchBadge">
                <fieldname="name"/>
                <separator/>
                <filterstring="Archived"name="inactive"domain="[('active','=',False)]"/>
            </search>
        </field>
    </record>

    <recordid="badge_list_action"model="ir.actions.act_window">
        <fieldname="name">Badges</field>
        <fieldname="res_model">gamification.badge</field>
        <fieldname="view_mode">kanban,tree,form</field>
        <fieldname="search_view_id"ref="gamification_badge_view_search"/>
        <fieldname="help"type="html">
            <pclass="o_view_nocontent_smiling_face">
                Createanewbadge
            </p><p>
                Abadgeisasymbolictokengrantedtoauserasasignofreward.
                Itcanbedeservedautomaticallywhensomeconditionsaremetormanuallybyusers.
                Somebadgesareharderthanotherstogetwithspecificconditions.
            </p>
        </field>
    </record>

    
    <recordid="badge_list_view"model="ir.ui.view">
        <fieldname="name">BadgeList</field>
        <fieldname="model">gamification.badge</field>
        <fieldname="arch"type="xml">
            <treestring="BadgeList">
                <fieldname="name"/>
                <fieldname="granted_count"/>
                <fieldname="stat_this_month"/>
                <fieldname="stat_my"/>
                <fieldname="rule_auth"/>
            </tree>
        </field>
    </record>

    <recordid="badge_form_view"model="ir.ui.view">
        <fieldname="name">BadgeForm</field>
        <fieldname="model">gamification.badge</field>
        <fieldname="arch"type="xml">
            <formstring="Badge">
                <header>
                    <buttonstring="GrantthisBadge"type="action"name="%(action_grant_wizard)d"class="oe_highlight"attrs="{'invisible':[('remaining_sending','=',0)]}"/>
                </header>
                <sheet>
                    <divclass="oe_button_box"name="button_box"/>
                    <widgetname="web_ribbon"title="Archived"bg_color="bg-danger"attrs="{'invisible':[('active','=',True)]}"/>
                    <fieldname="image_1920"widget="image"class="oe_avatar"options="{'preview_image':'image_128'}"/>
                    <divclass="oe_title">
                        <labelfor="name"class="oe_edit_only"/>
                        <h1>
                            <fieldname="name"placeholder="BadgeName"/>
                        </h1>
                    </div>
                    <group>
                        <fieldname="description"nolabel="1"placeholder="BadgeDescription"/>
                    </group>
                    <groupstring="Granting">
                        <divclass="oe_grey"colspan="2">
                            Securityrulestodefinewhoisallowedtomanuallygrantbadges.Notenforcedforadministrator.
                        </div>
                        <group>
                            <fieldname="active"invisible="1"/>
                            <fieldname="rule_auth"widget="radio"/>
                            <fieldname="rule_auth_user_ids"attrs="{'invisible':[('rule_auth','!=','users')]}"widget="many2many_tags"/>
                            <fieldname="rule_auth_badge_ids"attrs="{'invisible':[('rule_auth','!=','having')]}"widget="many2many_tags"/>
                            <fieldname="rule_max"attrs="{'invisible':[('rule_auth','=','nobody')]}"/>
                            <fieldname="rule_max_number"attrs="{'invisible':['|',('rule_max','=',False),('rule_auth','=','nobody')]}"/>
                            <labelfor="stat_my_monthly_sending"/>
                            <div>
                                <fieldname="stat_my_monthly_sending"attrs="{'invisible':[('rule_auth','=','nobody')]}"/>
                                <divattrs="{'invisible':[('remaining_sending','=',-1)]}"class="oe_grey">
                                    Youcanstillgrant<fieldname="remaining_sending"class="oe_inline"/>badgesthismonth
                                </div>
                                <divattrs="{'invisible':[('remaining_sending','!=',-1)]}"class="oe_grey">
                                    Nomonthlysendinglimit
                                </div>
                            </div>
                        </group>
                    </group>
                    <groupstring="Rewardsforchallenges">
                        <fieldname="challenge_ids"mode="kanban"widget="many2many"nolabel="1"context="{'default_reward_id':active_id}"/>
                        <fieldname="level"/>
                    </group>
                    <groupid="badge_statistics"string="Statistics">
                        <group>
                            <fieldname="granted_count"/>
                            <fieldname="stat_this_month"/>
                            <fieldname="granted_users_count"/>
                        </group>
                        <group>
                            <fieldname="stat_my"/>
                            <fieldname="stat_my_this_month"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>


    <recordid="badge_kanban_view"model="ir.ui.view">
        <fieldname="name">BadgeKanbanView</field>
        <fieldname="model">gamification.badge</field>
        <fieldname="arch"type="xml">
            <kanbanclass="o_kanban_badge">
                <fieldname="id"/>
                <fieldname="name"/>
                <fieldname="description"/>
                <fieldname="stat_my"/>
                <fieldname="granted_count"/>
                <fieldname="stat_this_month"/>
                <fieldname="unique_owner_ids"/>
                <fieldname="stat_my_monthly_sending"/>
                <fieldname="remaining_sending"/>
                <fieldname="rule_max_number"/>
                <templates>
                    <tt-name="kanban-box">
                        <divt-attf-class="o_kanban_gamificationoe_kanban_global_click#{record.stat_my.raw_value?'oe_kanban_color_5':'oe_kanban_color_white'}">
                            <divclass="o_kanban_image">
                                <imgt-att-src="kanban_image('gamification.badge','image_1024',record.id.raw_value)"t-att-title="record.name.value"t-att-alt="record.name.value"/>
                            </div>
                            <divclass="oe_kanban_details">
                                <strongclass="o_kanban_record_title"><fieldname="name"/></strong>
                                <spanclass="oe_grey">
                                    <tt-if="record.remaining_sending.value!=-1">
                                        <tt-esc="record.stat_my_monthly_sending.value"/>/<tt-esc="record.rule_max_number.value"/>
                                    </t>
                                    <tt-if="record.remaining_sending.value==-1">
                                        <tt-esc="record.stat_my_monthly_sending.value"/>/âˆž
                                    </t>
                                </span>
                                <divt-if="record.remaining_sending.value==0"class="oe_grey">Cannotgrant</div>
                                <div>
                                    <strong><tt-esc="record.granted_count.raw_value"/></strong>granted,
                                    <strong><tt-esc="record.stat_this_month.raw_value"/></strong>thismonth
                                </div>
                                <divt-if="record.description.value"class="o_kanban_badge_description">
                                    <em><fieldname="description"/></em>
                                    <div>
                                        <tt-foreach="record.unique_owner_ids.raw_value.slice(0,11)"t-as="owner">
                                            <imgclass="oe_kanban_avataro_image_24_cover"t-att-src="kanban_image('res.users','image_128',owner)"t-att-data-member_id="owner"alt="Owner"/>
                                        </t>
                                    </div>
                                </div>
                                <divt-if="record.remaining_sending.value!=0and!selection_mode"class="o_kanban_button">
                                    <buttontype="action"name="%(action_grant_wizard)d"class="oe_highlightbtnbtn-primary">Grant</button>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>


    <!--Badgeuserviewss-->

    <recordid="badge_user_kanban_view"model="ir.ui.view">
        <fieldname="name">BadgeUserKanbanView</field>
        <fieldname="model">gamification.badge.user</field>
        <fieldname="arch"type="xml">
            <kanbanclass="oe_background_grey">
                <fieldname="badge_name"/>
                <fieldname="badge_id"/>
                <fieldname="user_id"/>
                <fieldname="comment"/>
                <fieldname="create_date"/>
                <templates>
                    <tt-name="kanban-box">
                        <divclass="oe_kanban_cardoe_kanban_global_clickoe_kanban_badgeoe_kanban_color_whiteo_kanban_gamification">
                            <divclass="o_kanban_content">
                                <divclass="o_kanban_image">
                                    <atype="open"><imgt-att-src="kanban_image('gamification.badge','image_1024',record.badge_id.raw_value)"t-att-title="record.badge_name.value"t-att-alt="record.badge_name.value"/></a>
                                </div>
                                <divclass="oe_kanban_details">
                                    <h4class="mt0mb0">
                                        <aclass="o_kanban_record_title"type="open"><tt-esc="record.badge_name.raw_value"/></a>
                                    </h4>
                                    <tt-if="record.comment.raw_value">
                                        <pclass="o_kanban_record_subtitle"><em><fieldname="comment"/></em></p>
                                    </t>
                                    <p>Grantedby<atype="open"><fieldname="create_uid"/></a>the<tt-esc="moment(record.create_date.raw_value).format('L')"/></p>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>
</flectra>
