<?xmlversion="1.0"encoding="utf-8"?>
<flectra><data>

    <recordmodel="ir.ui.view"id="mailing_mailing_view_search_sms">
        <fieldname="name">mailing.mailing.search</field>
        <fieldname="model">mailing.mailing</field>
        <fieldname="inherit_id"ref="mass_mailing.view_mail_mass_mailing_search"/>
        <fieldname="mode">primary</field>
        <fieldname="arch"type="xml">
            <xpathexpr="//filter[@name='assigned_to_me']"position="attributes">
                <attributename="string">MySMSMarketing</attribute>
            </xpath>
        </field>
    </record>

    <recordid="mailing_mailing_view_form_sms"model="ir.ui.view">
        <fieldname="name">mailing.mailing.view.form.inherit.sms</field>
        <fieldname="model">mailing.mailing</field>
        <fieldname="inherit_id"ref="mass_mailing.view_mail_mass_mailing_form"/>
        <fieldname="arch"type="xml">
            <!--Buttons/Actions-->
            <xpathexpr="//button[@name='action_put_in_queue']"position="attributes">
                <attributename="attrs">{'invisible':['|',('state','in',('in_queue','done')),('mailing_type','!=','mail')]}</attribute>
            </xpath>
            <xpathexpr="//button[@name='action_put_in_queue']"position="after">
                <buttonname="action_put_in_queue_sms"type="object"
                    class="oe_highlight"string="PutinQueue"
                    attrs="{'invisible':['|',('mailing_type','=','mail'),('state','in',('in_queue','done'))]}"
                    confirm="ThiswillscheduleanSMSmarketingtoallrecipients.Doyoustillwanttoproceed?"/>
                <buttonname="action_send_now_sms"type="object"
                    string="SendNow"
                    attrs="{'invisible':['|',('mailing_type','=','mail'),('state','in',('done'))]}"
                    confirm="ThiswillsendSMStoallrecipientsnow.Doyoustillwanttoproceed?"/>
            </xpath>
            <!--Headers/Warnings-->
            <xpathexpr="//header"position="after">
                <fieldname="sms_has_insufficient_credit"invisible="1"/>
                <divclass="alertalert-warningtext-centero-hidden-ios"attrs="{'invisible':[('sms_has_insufficient_credit','=',False)]}"role="alert">
                    <buttonclass="btn-linkpy-0"
                            name="action_buy_sms_credits"
                            type="object">
                        <strong>
                            Itappearsyoudon'thaveenoughIAPcredits.Clickheretobuycredits.
                        </strong>
                    </button>
                </div>
                <fieldname="sms_has_unregistered_account"invisible="1"/>
                <divclass="alertalert-warningtext-centero-hidden-ios"attrs="{'invisible':[('sms_has_unregistered_account','=',False)]}"role="alert">
                    <buttonclass="btn-linkpy-0"
                            name="action_buy_sms_credits"
                            type="object">
                        <strong>
                            ItappearsyourSMSaccountisnotregistered.Clickheretosetupyouraccount.
                        </strong>
                    </button>
                </div>
            </xpath>
            <xpathexpr="//span[@name='ignored_text']"position="attributes">
                <attributename="attrs">{'invisible':[('mailing_type','!=','mail')]}</attribute>
            </xpath>
            <xpathexpr="//span[@name='ignored_text']"position="after">
                <spanname="ignored_text_sms"attrs="{'invisible':[('mailing_type','!=','sms')]}">SMSTextMessagehavebeenignoredandwillnotbesent.</span>
            </xpath>
            <xpathexpr="//span[@name='scheduled_text']"position="attributes">
                <attributename="attrs">{'invisible':[('mailing_type','!=','mail')]}</attribute>
            </xpath>
            <xpathexpr="//span[@name='scheduled_text']"position="after">
                <spanname="scheduled_text_sms"attrs="{'invisible':[('mailing_type','!=','sms')]}">SMSTextMessageareinqueueandwillbesentsoon.</span>
            </xpath>
            <xpathexpr="//span[@name='sent']"position="attributes">
                <attributename="attrs">{'invisible':[('mailing_type','!=','mail')]}</attribute>
            </xpath>
            <xpathexpr="//span[@name='sent']"position="after">
                <spanname="sent_sms"attrs="{'invisible':[('mailing_type','!=','sms')]}">SMSTextMessagehavebeensent.</span>
            </xpath>
            <xpathexpr="//span[@name='failed_text']"position="attributes">
                <attributename="attrs">{'invisible':[('mailing_type','!=','mail')]}</attribute>
            </xpath>
            <xpathexpr="//span[@name='failed_text']"position="after">
                <spanname="failed_text_sms"attrs="{'invisible':[('mailing_type','!=','sms')]}">SMSTextMessagecouldnotbesent.</span>
            </xpath>
            <xpathexpr="//span[@name='next_departure_text']"position='attributes'>
                <attributename="attrs">{'invisible':[('mailing_type','!=','mail')]}</attribute>
            </xpath>
            <xpathexpr="//span[@name='next_departure_text']"position='after'>
                <spanname="next_departure_text"attrs="{'invisible':[('mailing_type','!=','sms')]}">ThisSMSmarketingisscheduledfor</span>
            </xpath>
            <!--StatButtons-->
            <xpathexpr="//button[@name='action_view_opened']"position="attributes">
                <attributename="attrs">{'invisible':['|',('mailing_type','!=','mail'),('state','in',('draft','test'))]}</attribute>
            </xpath>
            <xpathexpr="//button[@name='action_view_replied']"position="attributes">
                <attributename="attrs">{'invisible':['|',('mailing_type','!=','mail'),('state','in',('draft','test'))]}</attribute>
            </xpath>
            <!--Form-->
            <xpathexpr="//field[@name='subject']"position="attributes">
                <attributename="attrs">{'invisible':[('mailing_type','!=','mail')],'readonly':[('state','in',('sending','done'))],'required':[('mailing_type','=','mail')]}</attribute>
                <!--overridedinxmlviewtopreventremaininghelperchanges(onmass_mailingmodule)whenmass_mailing_smsuninstalled-->
                <attributename="help">ForanEmail,SubjectyourRecipientswillseeintheirinbox.
                    ForanSMSTextMessage,internalTitleoftheMessage.</attribute>
            </xpath>
            <xpathexpr="//field[@name='subject']"position="after">
                <fieldname="sms_subject"string="Title"attrs="{'invisible':[('mailing_type','!=','sms')],'readonly':[('state','in',('sending','done'))],'required':[('mailing_type','=','sms')]}"/>
            </xpath>
            <xpathexpr="//field[@name='preview']"position="attributes">
                <attributename="attrs">{'readonly':[('state','in',('sending','done'))],'invisible':[('mailing_type','!=','mail')]}</attribute>
            </xpath>
            <xpathexpr="//page[@name='mail_body']"position="attributes">
                <attributename="attrs">{'invisible':[('mailing_type','!=','mail')]}</attribute>
            </xpath>
            <xpathexpr="//page[@name='mail_body']"position="after">
                <pagestring="SMSContent"name="sms_body"attrs="{'invisible':[('mailing_type','!=','sms')]}">
                    <fieldname="body_plaintext"widget="sms_widget"
                        attrs="{'required':[('mailing_type','=','sms')],'readonly':[('state','in',('sending','done'))]}"
                        options='{"enable_emojis":True}'/>
                    <group>
                        <fieldname="sms_force_send"invisible="1"/>
                    </group>
                </page>
            </xpath>
            <xpathexpr="//field[@name='user_id']"position="after">
                <fieldname="sms_allow_unsubscribe"attrs="{'invisible':[('mailing_type','!=','sms')]}"/>
            </xpath>

            <xpathexpr="//field[@name='contact_list_ids']"position="attributes">
                <attributename="context">
                    {'mailing_sms':context.get('mailing_sms')}
                </attribute>
            </xpath>
            <!--Optionpagetweaks-->
            <xpathexpr="//field[@name='email_from']"position="attributes">
                <attributename="attrs">{
                    'invisible':[('mailing_type','!=','mail')],
                    'readonly':[('state','in',('sending','done'))]}
                </attribute>
            </xpath>
            <xpathexpr="//label[@for='reply_to']"position="attributes">
                <attributename="attrs">{'invisible':[('mailing_type','!=','mail')]}</attribute>
            </xpath>
            <xpathexpr="//div[@name='reply_to_details']"position="attributes">
                <attributename="attrs">{'invisible':[('mailing_type','!=','mail')]}</attribute>
            </xpath>
            <xpathexpr="//label[@for='attachment_ids']"position="attributes">
                <attributename="attrs">{'invisible':[('mailing_type','!=','mail')]}</attribute>
            </xpath>
            <xpathexpr="//div[@name='attachment_ids_details']"position="attributes">
                <attributename="attrs">{'invisible':[('mailing_type','!=','mail')]}</attribute>
            </xpath>
            <xpathexpr="//field[@name='mail_server_id']"position="attributes">
                <attributename="attrs">{'invisible':[('mailing_type','!=','mail')]}</attribute>
            </xpath>
        </field>
    </record>

    <recordid="mailing_mailing_view_form_mixed"model="ir.ui.view">
        <!--Viewallowigntodisplaythemailingtypeandthereforechoosing
        thewayofmailing:notprioritizedone,usedinsomespecificcases
        like"contactingpeople"withoutpredefiningmailorsms-->
        <fieldname="name">mailing.mailing.view.form.mixed</field>
        <fieldname="model">mailing.mailing</field>
        <fieldname="mode">primary</field>
        <fieldname="priority">30</field>
        <fieldname="inherit_id"ref="mass_mailing_sms.mailing_mailing_view_form_sms"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//field[@name='mailing_type']"position="attributes">
                <attributename="invisible">0</attribute>
            </xpath>
        </field>
    </record>

    <recordid="mailing_mailing_view_kanban_sms"model="ir.ui.view">
        <fieldname="name">mailing.mailing.view.kanban.inherit.sms</field>
        <fieldname="model">mailing.mailing</field>
        <fieldname="inherit_id"ref="mass_mailing.view_mail_mass_mailing_kanban"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//field[@name='active']"position="after">
                <fieldname="sms_has_insufficient_credit"/>
                <fieldname="sms_has_unregistered_account"/>
            </xpath>
            <xpathexpr="//div[@name='stat_opened']"position="attributes">
                <attributename="attrs">{'invisible':[('mailing_type','!=','mail')]}</attribute>
            </xpath>
            <xpathexpr="//div[@name='stat_replied']"position="attributes">
                <attributename="attrs">{'invisible':[('mailing_type','!=','mail')]}</attribute>
            </xpath>
            <xpathexpr="//div[@name='div_responsible_avatar']"position="after">
                <divclass="alertalert-warningmb-0mt-3o-hidden-ios"role="alert"attrs="{'invisible':[('sms_has_insufficient_credit','=',False)]}">
                    <aname="action_buy_sms_credits"type="object">Insufficientcredits</a>
                </div>
                <divclass="alertalert-warningmb-0mt-3"role="alert"attrs="{'invisible':[('sms_has_unregistered_account','=',False)]}">
                    <aname="action_buy_sms_credits"type="object">Unregisteredaccount</a>
                </div>
            </xpath>
        </field>
    </record>

    <recordid="mailing_mailing_view_tree_sms"model="ir.ui.view">
        <fieldname="name">mailing.mailing.view.tree.sms</field>
        <fieldname="model">mailing.mailing</field>
        <fieldname="priority">20</field>
        <fieldname="arch"type="xml">
            <treestring="SMSMarketing"sample="1">
                <fieldname="subject"/>
                <fieldname="mailing_type"invisible="1"/>
                <fieldname="mailing_model_id"string="Recipients"/>
                <fieldname="user_id"widget="many2one_avatar_user"/>
                <fieldname="schedule_date"string="Scheduled"widget="remaining_days"/>
                <fieldname="sent_date"widget="date"/>
                <fieldname="state"decoration-info="state=='draft'orstate=='in_queue'"decoration-success="state=='sending'orstate=='done'"widget="badge"/>
                <fieldname="campaign_id"string="Campaign"groups="mass_mailing.group_mass_mailing_campaign"/>
                <fieldname="sent"/>
                <fieldname="clicked"/>
                <fieldname="bounced"/>
            </tree>
        </field>
    </record>

    <recordid="mailing_mailing_action_sms"model="ir.actions.act_window">
        <fieldname="name">SMSMarketing</field>
        <fieldname="res_model">mailing.mailing</field>
        <fieldname="view_mode">kanban,tree,form,graph</field>
        <fieldname="search_view_id"ref="mailing_mailing_view_search_sms"/>
        <fieldname="domain">[('mailing_type','=','sms')]</field>
        <fieldname="context">{
                'search_default_assigned_to_me':1,
                'default_user_id':uid,
                'default_mailing_type':'sms',
                'mailing_sms':True
        }</field>
        <fieldname="help"type="html">
          <pclass="o_view_nocontent_smiling_face">
            CreateanewSMSMarketing
          </p><p>
            YoucaneasilysendSMStoanycontactsavedinotherFlectraapps.
          </p>
        </field>
    </record>
    <recordid="mailing_mailing_action_sms_view_kanban"model="ir.actions.act_window.view">
        <fieldname="sequence">1</field>
        <fieldname="view_mode">kanban</field>
        <fieldname="view_id"ref="mailing_mailing_view_kanban_sms"/>
        <fieldname="act_window_id"ref="mailing_mailing_action_sms"/>
    </record>
    <recordid="mailing_mailing_action_sms_view_tree"model="ir.actions.act_window.view">
        <fieldname="sequence">2</field>
        <fieldname="view_mode">tree</field>
        <fieldname="view_id"ref="mailing_mailing_view_tree_sms"/>
        <fieldname="act_window_id"ref="mailing_mailing_action_sms"/>
    </record>

    <!--SMSMarketing/SMSMarketing-->
    <recordid="mass_mailing_sms_menu_mass_sms"model="ir.ui.menu">
        <fieldname="action"ref="mailing_mailing_action_sms"/>
    </record>

</data></flectra>
