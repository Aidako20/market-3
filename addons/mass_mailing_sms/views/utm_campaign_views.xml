<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <recordmodel="ir.ui.view"id="utm_campaign_view_form">
        <fieldname="name">utm.campaign.view.form</field>
        <fieldname="model">utm.campaign</field>
        <fieldname="inherit_id"ref="utm.utm_campaign_view_form"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//header"position="inside">
                <buttonname="action_create_mass_sms"type="object" class="oe_highlight"string="SendSMS"/>
            </xpath>
            <xpathexpr="//div[hasclass('oe_button_box')]"position="inside">
                <buttonname="action_redirect_to_mailing_sms"
                 type="object"
                 class="oe_stat_buttonorder-11"
                 attrs="{'invisible':[('mailing_sms_count','=',0)]}"
                 icon="fa-mobile">
                    <fieldname="mailing_sms_count"widget="statinfo"string="SMS"/>
                </button>
            </xpath>
            <xpathexpr="//notebook"position="inside">
                <pagestring="SMS"name="sms"attrs="{'invisible':[('mailing_sms_count','=',0)]}">
                    <group>
                        <fieldname="mailing_sms_ids"readonly="1"nolabel="1">
                            <tree>
                                <fieldname="subject"/>
                                <fieldname="sent_date"/>
                                <fieldname="state"/>
                                <fieldname="bounced"/>
                                <fieldname="delivered"/>
                                <buttonname="action_duplicate"type="object"string="Duplicate"/>
                            </tree>
                        </field>
                    </group>
                </page>
            </xpath>
        </field>
    </record>

    <recordmodel="ir.ui.view"id="utm_campaign_view_kanban">
        <fieldname="name">utm.campaign.view.kanban</field>
        <fieldname="model">utm.campaign</field>
        <fieldname="inherit_id"ref="utm.utm_campaign_view_kanban"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//field[@name='user_id']"position="after">
                <fieldname="mailing_sms_count"/>
            </xpath>
            <xpathexpr="//ul[@id='o_utm_actions']">
                <aname="action_redirect_to_mailing_sms"type="object"
                    t-attf-class="oe_mailings#{record.mailing_sms_count.raw_value===0?'text-muted':''}">
                    <tt-raw="record.mailing_sms_count.raw_value"/>SMS
                </a>
            </xpath>
        </field>
    </record>

    <menuitemname="Campaigns"id="menu_email_campaigns"
        parent="mass_mailing_sms_menu_root"sequence="5"
        action="mass_mailing.action_view_utm_campaigns"
        groups="mass_mailing.group_mass_mailing_campaign"/>
</flectra>
