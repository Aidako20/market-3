<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <recordid="mailing_contact_view_search"model="ir.ui.view">
        <fieldname="name">mailing.contact.view.search.inherit.sms</field>
        <fieldname="model">mailing.contact</field>
        <fieldname="inherit_id"ref="mass_mailing.mailing_contact_view_search"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//field[@name='name']"position="after">
                <fieldname="mobile"/>
                <fieldname="phone_sanitized"invisible="1"/>
            </xpath>
            <xpathexpr="//filter[@name='filter_not_optout']"position="after">
                <separator/>
                <filterstring="ValidSMSRecipients"
                    name="filter_valid_sms_recipient"
                    domain="[('opt_out','=',False),('phone_sanitized_blacklisted','=',False),('phone_sanitized','!=',False)]"
                    invisible="notcontext.get('default_list_ids')"/>
                <separator/>
                <filterstring="ExcludeBlacklistedPhone"
                    name="filter_not_phone_bl"
                    domain="[('phone_sanitized_blacklisted','=',False)]"/>
            </xpath>
        </field>
    </record>

    <recordid="mailing_contact_view_tree"model="ir.ui.view">
        <fieldname="name">mailing.contact.view.tree.inherit.sms</field>
        <fieldname="model">mailing.contact</field>
        <fieldname="inherit_id"ref="mass_mailing.mailing_contact_view_tree"/>
        <fieldname="priority">20</field>
        <fieldname="arch"type="xml">
            <xpathexpr="//field[@name='is_blacklisted']"position="after">
                <fieldname="mobile"class="o_force_ltr"/>
                <fieldname="phone_sanitized"invisible="1"/>
                <fieldname="phone_sanitized_blacklisted"/>
            </xpath>
        </field>
    </record>

    <recordid="mailing_contact_view_form"model="ir.ui.view">
        <fieldname="name">mailing.contact.view.form.inherit.sms</field>
        <fieldname="model">mailing.contact</field>
        <fieldname="inherit_id"ref="mass_mailing.mailing_contact_view_form"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//div[@name='email_details']"position="after">
                <labelfor="mobile"class="oe_inline"/>
                <divclass="o_rowo_row_readonly"name="phone_details">
                    <buttonname="phone_action_blacklist_remove"class="fafa-bantext-danger"
                        title="ThisphonenumberisblacklistedforSMSMarketing.Clicktounblacklist."
                        type="object"context="{'default_phone':mobile}"groups="base.group_user"
                        attrs="{'invisible':[('mobile_blacklisted','=',False)]}"/>
                    <fieldname="mobile"widget="phone"options="{'enable_sms':True}"/>
                    <fieldname="phone_sanitized"invisible="1"/>
                    <fieldname="mobile_blacklisted"invisible="1"/>
                </div>
            </xpath>
        </field>
    </record>

    <recordid="mailing_contact_view_kanban"model="ir.ui.view">
        <fieldname="name">mailing.contact.view.kanban.inherit.sms</field>
        <fieldname="model">mailing.contact</field>
        <fieldname="inherit_id"ref="mass_mailing.mailing_contact_view_kanban"/>
        <fieldname="arch"type="xml">
            <xpathexpr="//field[@name='email']"position="after">
                <fieldname="mobile"widget="phone"/>
                <fieldname="phone_sanitized"invisible="1"/>
            </xpath>
            <xpathexpr="//t[@t-esc='record.email.value']"position="after">
                <tt-esc="record.mobile.value"/>
            </xpath>
        </field>
    </record>

    <recordid="mailing_contact_action_sms"model="ir.actions.act_window">
        <fieldname="name">Contacts</field>
        <fieldname="res_model">mailing.contact</field>
        <fieldname="view_mode">tree,form</field>
        <fieldname="context">{'mailing_sms':True,'search_default_filter_not_phone_bl':1,}</field>
        <fieldname="view_id"ref="mailing_contact_view_tree"/>
        <fieldname="help"type="html">
            <pclass="o_view_nocontent_smiling_face">
                Createanewcontact
            </p>
        </field>
    </record>

    <!--SMSMarketing/ContactsLists/ContactsLists-->
    <recordid="mass_mailing_sms.mailing_contact_menu_sms"model="ir.ui.menu">
        <fieldname="action"ref="mailing_contact_action_sms"/>
    </record>

</flectra>
