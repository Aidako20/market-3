<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
    <templateid="website_sale_stock_modal"inherit_id="sale_product_configurator.configure_optional_products"name="StocksModal">
        <xpathexpr="//input[@type='text'][hasclass('quantity')]"position="attributes">
          <attributename='t-att-data-max'>max(product.sudo().virtual_available-product.cart_qty,1)ifhandle_stockandproduct.type=="product"andproduct.inventory_availabilityin["always","threshold"]elseNone</attribute>
        </xpath>
        <xpathexpr="//div[hasclass('css_quantity')]"position="after">
          <tt-if="handle_stock">
            <divclass='availability_messages'/>
          </t>
        </xpath>
    </template>
</flectra>