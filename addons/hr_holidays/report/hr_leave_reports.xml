<?xmlversion="1.0"?>
<flectra>

    <recordid="view_hr_holidays_filter_report"model="ir.ui.view">
        <fieldname="name">hr.holidays.filter</field>
        <fieldname="model">hr.leave.report</field>
        <fieldname="arch"type="xml">
            <searchstring="SearchTimeOff">
                <fieldname="name"/>
                <filterdomain="[('state','in',('confirm','validate1'))]"string="ToApprove"name="approve"/>
                <filterstring="ApprovedRequests"domain="[('state','=','validate')]"name="validated"/>
                <separator/>
                <filtername="active_types"string="ActiveTypes"domain="[('holiday_status_id.active','=',True)]"help="Filtersonlyonrequeststhatbelongtoantimeofftypethatis'active'(activefieldisTrue)"/>
                <separator/>
                <filterstring="MyDepartmentTimeOff"name="department"domain="[('department_id.manager_id.user_id','=',uid)]"help="MyDepartmentTimeOff"/>
                <filtername="my_team_leaves"string="MyTeamTimeOff"domain="[('employee_id.parent_id.user_id','=',uid)]"groups="hr_holidays.group_hr_holidays_manager"help="TimeOffofYourTeamMember"/>
                <separator/>
                <filtername="year"string="CurrentYear"
                    domain="[('holiday_status_id.active','=',True)]"help="ActiveTimeOff"/>
                <separator/>
                <filterstring="MyRequests"name="my_leaves"domain="[('employee_id.user_id','=',uid)]"/>
                <separator/>
                <fieldname="employee_id"/>
                <fieldname="department_id"operator="child_of"/>
                <fieldname="holiday_status_id"/>
                <groupexpand="0"string="GroupBy">
                    <filtername="group_employee"string="Employee"context="{'group_by':'employee_id'}"/>
                    <filtername="group_type"string="Type"context="{'group_by':'holiday_status_id'}"/>
                    <separator/>
                    <filtername="group_date_from"string="StartDate"context="{'group_by':'date_from'}"/>
                </group>
            </search>
        </field>
    </record>

    <recordid="hr_leave_report_tree"model="ir.ui.view">
        <fieldname="name">report.hr.holidays.report.leave_all.tree</field>
        <fieldname="model">hr.leave.report</field>
        <fieldname="arch"type="xml">
            <treecreate="0"edit="0"delete="0">
                <fieldname="employee_id"/>
                <fieldname="number_of_days"string="NumberofDays"sum="RemainingDays"/>
                <fieldname="leave_type"/>
                <fieldname="date_from"/>
                <fieldname="date_to"/>
                <fieldname="state"/>
                <fieldname="name"/>
            </tree>
        </field>
    </record>

    <!--TODO:Seeifweneedtokeepthis-->
    <recordid="hr_leave_report_kanban"model="ir.ui.view">
        <fieldname="name">report.hr.holidays.report.leave_all.kanban</field>
        <fieldname="model">hr.leave.report</field>
        <fieldname="arch"type="xml">
            <kanbanclass="o_kanban_mobile"create="0">
                <fieldname="employee_id"/>
                <fieldname="date_from"/>
                <fieldname="date_to"/>
                <fieldname="name"/>
                <fieldname="number_of_days"/>
                <templates>
                    <tt-name="kanban-box">
                        <divt-attf-class="oe_kanban_global_click">
                            <div>
                                <span>
                                    <imgt-att-src="kanban_image('hr.employee','image_128',record.employee_id.raw_value)"t-att-title="record.employee_id.value"t-att-alt="record.employee_id.value"class="oe_kanban_avataro_image_40_coverfloat-leftmr4"/>
                                </span>
                                <span>
                                    <div>
                                        <strongclass="o_kanban_record_title"><tt-esc="record.employee_id.value"/></strong>
                                        <spanclass="float-right">
                                            <fieldname="state"widget="label_selection"options="{'classes':{'draft':'default','validate':'success','confirm':'default','cancel':'danger'}}"/>
                                        </span>
                                    </div>
                                    <divclass="text-mutedo_kanban_record_subtitle">
                                        <tt-esc="record.name.value"/>
                                    </div>
                                </span>
                            </div>
                            <hrclass="mt4mb8"/>
                            <divclass="o_kanban_record_bottommt8mb4">
                                <divt-attf-class="oe_kanban_bottom_left#{record.date_from.value?'mt8mb4':''}">
                                    <tableclass="text-right"t-if="record.date_from.value">
                                        <tr>
                                            <tdstyle="padding-bottom:4px"><smallclass="text-muted">from</small></td>
                                            <tdstyle="padding:004px4px"><tt-esc="record.date_from.value"/></td>
                                        </tr>
                                        <tr>
                                            <td><smallclass="text-muted">to</small></td>
                                            <tdstyle="padding-left:4px"><tt-esc="record.date_to.value"/></td>
                                        </tr>
                                    </table>
                                </div>
                                <divt-attf-class="oe_kanban_bottom_right#{record.date_from.value?'mt8':''}">
                                    <spanclass="badgebadge-pill"><tt-esc="record.number_of_days.value"/>days</span>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <recordid="act_hr_employee_holiday_request"model="ir.actions.server">
        <fieldname="name">TimeoffAnalysis</field>
        <fieldname="model_id"ref="hr_holidays.model_hr_leave_report"/>
        <fieldname="binding_model_id"ref="hr.model_hr_employee"/>
        <fieldname="state">code</field>
        <fieldname="groups_id"eval="[(4,ref('base.group_user'))]"/>
        <fieldname="code">
        action=model.action_time_off_analysis()
        </field>
    </record>

</flectra>
