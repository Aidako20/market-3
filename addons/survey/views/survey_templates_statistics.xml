<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
<data>
    <templateid="survey_page_statistics"name="Survey:resultstatisticspage">
        <tt-call="survey.layout">
            <tt-call="survey.survey_button_form_view"/>
            <tt-set="page_record_limit"t-value="10"/><!--Changethisrecord_limittochangenumberofrecord perpage-->
            <divclass="containero_survey_result">
                <tt-call="survey.survey_page_statistics_header"/>
                <tt-call="survey.survey_page_statistics_inner"/>
            </div>
        </t>
    </template>

    <templateid="survey_page_statistics_header"name="Survey:resultstatisticsheader">
        <divclass="py-5mt32">
            <h1>
                <spant-field="survey.title"/>
                <spanstyle="font-size:1.5em;"
                    t-attf-class="fafa-bar-chart-o#{'fa-bar-chart-o'ifsurvey.scoring_type=='no_scoring'else'fa-trophy'ifsurvey.certificationelse'fa-question-circle-o'}float-right"role="img"aria-label="Chart"title="Chart"/>
            </h1>
            <divt-field="survey.description"class="oe_no_empty"/>
            <h2t-if="notquestion_and_page_data">
                Sorry,nooneansweredthissurveyyet.
            </h2>
        </div>
    </template>

    <templateid="survey_page_statistics_inner"name="Survey:resultstatisticscontent">
        <divt-if="survey.session_show_leaderboard"class="o_survey_session_leaderboardmb-5mt-1">
            <h2class="mt16text-uppercasetext-muted">Leaderboard</h2>
            <tt-call="survey.user_input_session_leaderboard"/>
        </div>
        <divt-if="question_and_page_data"class="cardd-print-none">
            <divclass="card-header"><spanclass="fafa-filter"></span> Filters<spant-if="search_filters"class="float-righttext-primaryclear_survey_filter"><iclass="fafa-times"></i>ClearAllFilters</span></div>
            <divclass="card-body">
                <spant-att-class="'badgeonly_left_radiusfilter-all%s'%'badge-secondary'ifsearch_finishedelse'badge-primaryo_active_filter'">Allsurveys</span>
                <spant-att-class="'badgeonly_right_radiusfilter-finished%s'%'badge-secondary'ifnotsearch_finishedelse'badge-primaryo_active_filter'">Finishedsurveys</span>
                <spant-foreach="search_filters"t-as="filter_data">
                    <spanclass="badgebadge-primaryonly_left_radius"><iclass="fafa-filter"role="img"aria-label="Filter"title="Filter"></i></span><spanclass="badgebadge-primaryno_radius"t-esc="filter_data['question']"></span><spanclass="badgebadge-successonly_right_radius"t-esc="filter_data['answers']"></span>
                </span>
            </div>
        </div>
        <divt-if="survey.scoring_typein['scoring_with_answers','scoring_without_answers']">
            <h2class="mt16text-uppercasetext-muted">ResultsOverview</h2>
            <div>Successrate:<markclass="font-weight-bold"><tt-esc="survey_data['global_success_rate']"></t>%</mark></div>
            <divclass="survey_graph"data-graph-type="pie"t-att-data-graph-data="survey_data['global_success_graph']">
                <!--canvaselementfordrawingpiechart-->
                <canvas/>
            </div>
            <hr/>
        </div>

        <divt-foreach="question_and_page_data"t-as='question_data'>
            <tt-set="question"t-value="question_data['question']"/>
            <tt-if="question_data['is_page']">
                <h2class="mt16text-uppercasetext-muted"t-field="question.title"/>
                <divt-field="question.description"class="oe_no_empty"/>
                <hrclass="mt-2pb-1mb-1"/>
            </t>
            <divt-else=""class="ml-4mt-4">
                <tt-call="survey.survey_page_statistics_question"/>
            </div>
        </div>
    </template>

    <templateid="survey_page_statistics_question"name="Question:resultstatistics">
        <tt-set="question_scoring"t-value="survey.scoring_typein['scoring_with_answers','scoring_without_answers']"/>
        <tt-set="comment_lines"t-value="question_data['comment_line_ids']"/>
        <tt-set="graph_data"t-value="question_data['graph_data']"/>
        <tt-set="table_data"t-value="question_data['table_data']"/>

        <div>
        <divclass="d-flexalign-items-startmb-2">
            <divclass="mr-auto">
                <h5t-field="question.title"class="mb-1"/>
                <divt-if="question_scoring">
                    <tt-if="question.question_typein['simple_choice','multiple_choice']">
                        <tt-if="len(question_data['right_answers'])>=1">
                            <spant-if="len(question_data['right_answers'])==1">Rightanswer:</span>
                            <spant-if="len(question_data['right_answers'])>1">Rightanswers:</span>
                            <strong>
                                <tt-foreach="question_data['right_answers']"t-as="answer">
                                    <spant-if="answer_index!=0">,</span><spant-esc="answer.value"/>
                                </t>
                            </strong>
                        </t>
                    </t>
                    <tt-elif="question.is_scored_question">
                        <span>Rightanswer:</span>
                        <strong>
                            <tt-if="question.question_type=='numerical_box'">
                                <spant-esc="question.answer_numerical_box"/>
                            </t>
                            <tt-if="question.question_type=='date'">
                                <spant-field="question.answer_date"/>
                            </t>
                            <tt-if="question.question_type=='datetime'">
                                <spant-field="question.answer_datetime"/>
                            </t>
                        </strong><br/>
                        <span>Score:</span>
                        <strong>
                            <spant-esc="question.answer_score"/>
                        </strong>
                    </t>
                </div>
            </div>
            <!--Questioninfo-->
            <spanclass="badgebadge-info"t-field='question.question_type'/>
            <tt-if="question.question_type=='matrix'">
                <spanclass="badgebadge-infoml-2"t-field='question.matrix_subtype'/>
            </t>
            <!--Scoringinfo-->
            <tt-if="question_scoring">
                <tt-if="question.question_typein['simple_choice','multiple_choice']orquestion.is_scored_question">
                    <spanclass="badgebadge-successml-3"><spant-esc="question_data['right_inputs_count']"></span>Correct</span>
                </t>
                <tt-if="question.question_typein['simple_choice','multiple_choice']">
                    <spanclass="badgebadge-warningml-1"t-if="question.question_type=='multiple_choice'">
                        <spant-esc="question_data['partial_inputs_count']"></span>Partial
                    </span>
                </t>
            </t>
            <!--Inputsinfo-->
            <spanclass="badgebadge-infoml-3"><spant-esc="len(question_data['answer_input_done_ids'])"></span>Answered</span>
            <spanclass="badgebadge-infoml-1"><spant-esc="len(question_data['answer_input_skipped_ids'])"></span>Skipped</span>
        </div>

        <!--QuestionDescription-->
        <divclass="ml-3text-muted"t-field="question.description"/>
            <tt-if="question.question_typein['text_box','char_box','datetime']">
                <tt-call="survey.question_result_text"/>
            </t>
            <tt-elif="question.question_typein['numerical_box','date']">
                <tt-call="survey.question_result_number_or_date"></t>
            </t>
            <tt-elif="question.question_typein['simple_choice','multiple_choice']">
                <tt-call="survey.question_result_choice"></t>
            </t>
            <tt-elif="question.question_typein['matrix']">
                <tt-call="survey.question_result_matrix"></t>
            </t>
        </div>
    </template>

    <templateid="question_result_text"name="Question:textresult(text_box,char_box,datetime)">
        <tableclass="tabletable-hovertable-sm"t-att-id="'survey_table_question_%d'%question.id">
            <thead>
                <tr>
                    <th>#</th>
                    <th>UserResponses</th>
                </tr>
            </thead>
            <tbody>
                <tt-foreach="table_data"t-as="input_line">
                    <trt-if="notinput_line.skipped"t-att-class="'d-none'ifinput_line_index>=page_record_limitelse''">
                        <td>
                            <tt-if="no_print_url"><tt-esc="input_line_index+1"></t></t>
                            <tt-else="">
                                <at-att-href="input_line.user_input_id.get_print_url()">
                                    <tt-esc="input_line_index+1"></t>
                                </a>
                            </t>
                        </td>
                        <td>
                            <tt-if="question.question_type=='text_box'">
                                <spant-if="no_print_url"t-field="input_line.value_text_box"/>
                                <at-else=""t-att-href="input_line.user_input_id.get_print_url()"t-field="input_line.value_text_box"></a>
                            </t>
                            <tt-if="question.question_type=='char_box'">
                                <spant-if="no_print_url"t-field="input_line.value_char_box"/>
                                <at-else=""t-att-href="input_line.user_input_id.get_print_url()"t-field="input_line.value_char_box"></a>
                            </t>
                            <tt-if="question.question_type=='datetime'">
                                <spant-if="no_print_url"t-field="input_line.value_datetime"/>
                                <at-else=""t-att-href="input_line.user_input_id.get_print_url()"t-field="input_line.value_datetime"></a>
                            </t>
                        </td>
                    </tr>
                </t>
            </tbody>
        </table>
        <tt-call="survey.question_table_pagination"/>
    </template>

    <templateid="question_result_number_or_date"name="Question:numberordateresult(numerical_boxordate)">
        <tt-if="question.question_type=='numerical_box'">
            <spanclass="float-rightmt8">
                <spanclass="badgebadge-secondaryonly_left_radius">Maximum</span><spanclass="badgebadge-successonly_right_radius"t-esc="question_data['numerical_max']"></span>
                <spanclass="badgebadge-secondaryonly_left_radius">Minimum</span><spanclass="badgebadge-dangeronly_right_radius"t-esc="question_data['numerical_min']"></span>
                <spanclass="badgebadge-secondaryonly_left_radius">Average</span><spanclass="badgebadge-warningonly_right_radius"t-esc="question_data['numerical_average']"></span>
            </span>
        </t>

        <ulclass="navnav-tabsd-print-none"role="tablist">
            <liclass="nav-item">
                <at-att-href="'#survey_stats_question_%d'%question.id"
                    t-att-aria-controls="'survey_stats_question_%d'%question.id"
                    class="nav-linkactive"data-toggle="tab"role="tab">
                    <iclass="fafa-list-ol"></i>MostCommon
                </a>
            </li>
            <liclass="nav-item">
                <at-att-href="'#survey_data_question_%d'%question.id"
                    t-att-aria-controls="'survey_data_question_%d'%question.id"
                    class="nav-link"data-toggle="tab"role="tab">
                    <iclass="fafa-list-alt"></i>AllData
                </a>
            </li>
        </ul>
        <divclass="tab-content">
            <divrole="tabpanel"class="tab-paneactivewith-3d-shadowwith-transitions"t-att-id="'survey_stats_question_%d'%question.id">
                <tableclass="tabletable-hovertable-sm">
                    <thead>
                        <tr>
                            <th>UserResponses</th>
                            <th>Occurrence</th>
                        </tr>
                    </thead>
                    <tbody>
                        <trt-foreach="question_data['common_lines']"t-as="common_line">
                            <td>
                                <spant-if="question.question_type=='numerical_box'"t-esc="common_line[0]"/>
                                <spant-if="question.question_type=='date'"t-esc="common_line[0]"t-options='{"widget":"date"}'/>
                            </td>
                            <td><spant-esc="common_line[1]"></span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <divrole="tabpanel"class="tab-pane"t-att-id="'survey_data_question_%d'%question.id">
                <tableclass="tabletable-hovertable-sm"t-att-id="'survey_table_question_%d'%question.id">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>UserResponses</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tt-foreach="table_data"t-as="input_line">
                            <trt-if="notinput_line.skipped"t-att-class="'d-none'ifinput_line_index>=page_record_limitelse''">
                                <td>
                                    <tt-if="no_print_url"><tt-esc="input_line_index+1"></t></t>
                                    <tt-else="">
                                        <at-att-href="input_line.user_input_id.get_print_url()">
                                            <tt-esc="input_line_index+1"></t>
                                        </a>
                                    </t>
                                </td>
                                <td>
                                    <at-if="question.question_type=='numerical_box'"t-att-href="input_line.user_input_id.get_print_url()"t-field="input_line.value_numerical_box"/>
                                    <at-if="question.question_type=='date'"t-att-href="input_line.user_input_id.get_print_url()"t-field="input_line.value_date"/>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                </table>
               <tt-call="survey.question_table_pagination"/>
            </div>
        </div>
    </template>

    <templateid="question_result_choice"name="Question:choiceresult(simple_choice,multiple_choice)">
        <ulclass="navnav-tabsd-print-none"role="tablist">
            <liclass="nav-item">
                <at-att-href="'#survey_graph_question_%d'%question.id"
                    t-att-aria-controls="'survey_graph_question_%d'%question.id"
                    class="nav-linkactive"data-toggle="tab"role="tab">
                    <iclass="fafa-bar-chart-o"></i>
                    <spant-if="question.question_type=='simple_choice'">PieGraph</span>
                    <spant-else="">Graph</span>
                </a>
            </li>
            <liclass="nav-item">
                <at-att-href="'#survey_data_question_%d'%question.id"
                    t-att-aria-controls="'survey_data_question_%d'%question.id"
                    class="nav-link"data-toggle="tab"role="tab">
                    <iclass="fafa-list-alt"></i>Data
                </a>
            </li>
        </ul>
        <divclass="tab-content">
            <divrole="tabpanel"class="tab-paneactivesurvey_graph"
                t-att-id="'survey_graph_question_%d'%question.id"
                t-att-data-question_id="question.id"
                t-att-data-graph-type="'pie'ifquestion.question_type=='simple_choice'else'bar'"
                t-att-data-graph-data="graph_data">
                <!--canvaselementfordrawingbarchart-->
                <canvas/>
            </div>
            <divrole="tabpanel"class="tab-pane"t-att-id="'survey_data_question_%d'%question.id">
                <tableclass="tabletable-hovertable-sm">
                    <thead>
                        <tr>
                            <th>Answer</th>
                            <th>UserChoice</th>
                            <tht-if="question_scoring">Score</th>
                        </tr>
                    </thead>
                    <tbody>
                        <trt-foreach="table_data"t-as="choice_data">
                            <td>
                                <pt-esc="choice_data['value']"></p>
                            </td>
                            <tdclass="survey_answer">
                                <spant-esc="round(choice_data['count']*100.0/(len(question_data['answer_line_done_ids'])or1),2)"></span>%
                                <spant-esc="'%sVotes'%choice_data['count']"class="badgebadge-primary"/>
                                <it-if="choice_data['suggested_answer'].id"
                                    class="fafa-filtertext-primarysurvey_filter"
                                    t-att-data-question_id="question.id"
                                    t-att-data-answer_id="choice_data['suggested_answer'].id"
                                    role="img"aria-label="Filterquestion"title="Filterquestion"/>
                            </td>
                            <tdt-if="question_scoring"t-esc="choice_data['suggested_answer'].answer_score"/>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <divt-if="comment_lines"t-call="survey.question_result_comments"/>
    </template>

    <templateid="question_result_matrix"name="Question:matrixresult(matrix)">
        <tt-set="graph_data"t-value="question_data['graph_data']"/>
        <tt-set="table_data"t-value="question_data['table_data']"/>
        <ulclass="navnav-tabsd-print-none"role="tablist">
            <liclass="nav-item">
                <at-att-href="'#survey_graph_question_%d'%question.id"
                    t-att-aria-controls="'survey_graph_question_%d'%question.id"
                    class="nav-linkactive"data-toggle="tab"role="tab">
                    <iclass="fafa-bar-chart"></i>Graph
                </a>
            </li>
            <liclass="nav-item">
                <at-att-href="'#survey_data_question_%d'%question.id"
                    t-att-aria-controls="'survey_data_question_%d'%question.id"
                    class="nav-link"data-toggle="tab"role="tab">
                    <iclass="fafa-list-alt"></i>Data
                </a>
            </li>
        </ul>
        <divclass="tab-content">
            <divrole="tabpanel"class="tab-paneactivewith-3d-shadowwith-transitionssurvey_graph"
                t-att-id="'survey_graph_question_%d'%question.id"
                t-att-data-question_id="question.id"
                data-graph-type="multi_bar"
                t-att-data-graph-data="graph_data">
                <!--canvaselementfordrawingMultibarchart-->
                <canvas/>
            </div>
            <divrole="tabpanel"class="tab-pane"t-att-id="'survey_data_question_%d'%question.id">
                <tableclass="tabletable-hovertable-smtext-right">
                    <theadt-if="table_data">
                        <tr>
                            <th></th>
                            <thclass="text-right"t-foreach="table_data[0]['columns']"t-as="column_data">
                                <spant-esc="column_data['suggested_answer'].value"></span>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <trt-foreach="table_data"t-as="choice_data">
                            <td>
                                <spant-esc="choice_data['row'].value"></span>
                            </td>
                            <tdclass="survey_answer"t-foreach="choice_data['columns']"t-as="column_data">
                                <spant-esc="round(column_data['count']*100.0/(len(question_data['answer_input_done_ids'])or1),2)"></span>%
                                <spanclass="badgebadge-primary"t-esc="column_data['count']"></span>
                                <iclass="fafa-filtertext-primarysurvey_filter"
                                    t-att-data-question_id="question.id"
                                    t-att-data-row_id="choice_data['row'].id"
                                    t-att-data-answer_id="column_data['suggested_answer'].id"role="img"aria-label="Surveyfilter"title="Surveyfilter"></i>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        <divt-if="comment_lines"t-call="survey.question_result_comments"/>
        </div>
    </template>

    <templateid="question_result_comments"name="Question:comments">
        <tableclass="tabletable-hovertable-sm"t-att-id="'survey_table_question_%d'%question.id">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Comment</th>
                </tr>
            </thead>
            <tbody>
                <trt-foreach="comment_lines"t-as="input_line">
                    <td>
                        <tt-if="no_print_url"><tt-esc="input_line_index+1"></t></t>
                        <tt-else="">
                            <at-att-href="input_line.user_input_id.get_print_url()">
                                <tt-esc="input_line_index+1"></t>
                            </a>
                        </t>
                    </td>
                    <td>
                        <spant-field="input_line.value_char_box"></span><br/>
                    </td>
                </tr>
            </tbody>
        </table>
    </template>

    <templateid="question_table_pagination"name="Survey:statisticstablepagination">
        <ult-att-id="'pagination_%d'%question.id"class="pagination"t-att-data-question_id="question.id"t-att-data-record_limit="page_record_limit">
            <tt-if="len(table_data)>page_record_limit">
                <tt-set="total"t-value="ceil(len(table_data)/page_record_limit)+1"/>
                <lit-foreach="range(1,total)"t-as="num"
                    t-att-class="'page-itemo_survey_js_results_pagination%s'%('active'ifnum==1else'')">
                    <ahref="#"class="page-link"t-esc="num"></a>
                </li>
            </t>
        </ul>
    </template>
</data>
</flectra>
