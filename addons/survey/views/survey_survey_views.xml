<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
<data>
    <recordmodel="ir.ui.view"id="survey_form">
        <fieldname="name">Formviewforsurvey</field>
        <fieldname="model">survey.survey</field>
        <fieldname="arch"type="xml">
            <formstring="Survey"class="o_survey_form">
                <fieldname="id"invisible="1"/>
                <fieldname="session_state"invisible="1"/>
                <header>
                    <buttonname="action_open"string="StartSurvey"type="object"class="oe_highlight"attrs="{'invisible':['|',('state','!=','draft'),('id','=',False)]}"/>
                    <buttonname="action_send_survey"string="Share"type="object"class="oe_highlight"states="open"/>
                    <buttonname="action_result_survey"string="Seeresults"type="object"class="oe_highlight"
                      attrs="{'invisible':['|',('state','=','draft'),('answer_done_count','&lt;=',0)]}"/>
                    <buttonname="action_start_session"string="CreateLiveSession"type="object"
                        attrs="{'invisible':['|',('session_state','!=',False),'|',('state','!=','open'),('certification','=',True)]}"/>
                    <buttonname="action_open_session_manager"string="OpenSessionManager"type="object"
                        attrs="{'invisible':['|',('session_state','=',False),('state','=','draft')]}"/>
                    <buttonname="action_end_session"string="CloseLiveSession"type="object"
                        attrs="{'invisible':['|',('session_state','notin',['ready','in_progress']),('state','=','draft')]}"/>
                    <buttonname="action_draft"string="Settodraft"type="object"states="closed"/>
                    <buttonname="action_test_survey"string="Test"type="object"attrs="{'invisible':['|',('state','=','closed'),('id','=',False)]}"/>
                    <buttonname="action_print_survey"string="Print"type="object"attrs="{'invisible':[('id','=',False)]}"/>
                    <buttonname="action_close"string="Close"type="object"states="open"/>
                    <fieldname="state"widget="statusbar"/>
                </header>
                <sheet>
                    <divclass="oe_button_box"name="button_box">
                        <buttonname="action_survey_user_input"
                            type="object"
                            class="oe_stat_button"
                            attrs="{'invisible':[('access_mode','=','public')]}"
                            icon="fa-envelope-o">
                            <fieldstring="Registered"name="answer_count"widget="statinfo"/>
                        </button>
                        <buttonname="action_survey_user_input_certified"
                            type="object"
                            class="oe_stat_button"
                            attrs="{'invisible':[('certification','=',False)]}"
                            icon="fa-trophy">
                            <fieldstring="Certified"name="success_count"widget="statinfo"/>
                        </button>
                        <buttonname="action_survey_user_input_completed"
                            type="object"
                            class="oe_stat_button"
                            icon="fa-pencil-square-o">
                            <fieldstring="Answers"name="answer_done_count"widget="statinfo"/>
                        </button>
                    </div>
                    <widgetname="web_ribbon"title="Archived"bg_color="bg-danger"attrs="{'invisible':[('active','=',True)]}"/>
                    <fieldname="background_image"widget="image"class="oe_avatar"/>
                    <divclass="oe_title"style="width:100%;">
                        <labelfor="title"class="oe_edit_only"/>
                        <h1><fieldname="title"placeholder="e.g.SatisfactionSurvey"/></h1>
                    </div>
                    <group>
                        <group>
                            <fieldname="active"invisible="1"/>
                            <fieldname="has_conditional_questions"invisible="1"/>
                        </group>
                    </group>
                    <notebook>
                        <pagestring="Questions"name="questions">
                            <fieldname="question_and_page_ids"nolabel="1"widget="question_page_one2many"mode="tree,kanban"context="{'default_survey_id':active_id,'default_questions_selection':questions_selection}">
                                <treedecoration-bf="is_page"editable="bottom">
                                    <fieldname="sequence"widget="handle"/>
                                    <fieldname="title"widget="survey_description_page"/>
                                    <fieldname="question_type"/>
                                    <fieldname="is_page"invisible="1"/>
                                    <fieldname="questions_selection"invisible="1"/>
                                    <fieldname="survey_id"invisible="1"/>
                                    <fieldname="triggering_question_id"invisible="1"/>
                                    <fieldname="random_questions_count"attrs="{'column_invisible':[('parent.questions_selection','=','all')],'invisible':[('is_page','=',False)]}"/>
                                    <buttonicon="fa-code-fork"attrs="{'invisible':[('triggering_question_id','=',False)]}"
                                        title="Thisquestiondependsonanotherquestion'sanswer."class="icon_rotates"/>
                                    <control>
                                        <createname="add_section_control"string="Addasection"context="{'default_is_page':True,'default_questions_selection':'all'}"/>
                                        <createname="add_question_control"string="Addaquestion"/>
                                    </control>
                                </tree>
                            </field>
                        </page>
                        <pagestring="Description"name="description">
                            <fieldname="description"nolabel="1"></field>
                        </page>
                        <pagestring="Options"name="options">
                            <groupname="options">
                                <groupstring="Questions"name="questions">
                                    <fieldname="questions_layout"widget="radio"
                                        attrs="{'readonly':[('session_state','in',['ready','in_progress'])]}"/>
                                    <fieldname="progression_mode"widget="radio"/>
                                    <labelfor="is_time_limited"string="SurveyTimeLimit"/>
                                    <div>
                                        <fieldname="is_time_limited"nolabel="1"/>
                                        <fieldname="time_limit"widget="float_time"attrs="{'invisible':[('is_time_limited','=',False)]}"nolabel="1"class="oe_inline"/><spanattrs="{'invisible':[('is_time_limited','=',False)]}">minutes</span>
                                    </div>
                                    <fieldname="questions_selection"widget="radio"/>
                                    <fieldname="users_can_go_back"string="BackButton"attrs="{'invisible':[('questions_layout','=','one_page')]}"/>
                                </group>
                                <groupstring="Candidates"name="candidates">
                                    <fieldname="access_mode"/>
                                    <fieldname="users_login_required"/>
                                    <labelfor="is_attempts_limited"string="AttemptsLimit"
                                           attrs="{'invisible':['|',('has_conditional_questions','=',True),'&amp;',('access_mode','=','public'),('users_login_required','=',False)]}"/>
                                    <divattrs="{'invisible':['|',('has_conditional_questions','=',True),'&amp;',('access_mode','=','public'),('users_login_required','=',False)]}">
                                        <fieldname="is_attempts_limited"nolabel="1"/>
                                        <fieldname="attempts_limit"attrs="{'invisible':[('is_attempts_limited','=',False)]}"nolabel="1"class="oe_inline"/><spanattrs="{'invisible':[('is_attempts_limited','=',False)]}">attempts</span>
                                    </div>
                                </group>
                                <groupstring="Scoring"name="scoring">
                                    <fieldname="scoring_type"widget="radio"/>
                                    <fieldname="scoring_success_min"attrs="{'invisible':[('scoring_type','=','no_scoring')]}"/>
                                    <fieldname="certification"attrs="{'invisible':[('scoring_type','=','no_scoring')]}"/>
                                    <fieldname="certification_mail_template_id"attrs="{'invisible':[('certification','=',False)]}"/>
                                    <labelfor="certification_report_layout"string="CertificationTemplate"attrs="{'invisible':[('certification','=',False)]}"/>
                                    <divattrs="{'invisible':[('certification','=',False)]}"class="d-flex">
                                        <fieldname="certification_report_layout"class="oe_inline"/>
                                        <buttonname="action_survey_preview_certification_template"
                                            string="Preview"type="object"
                                            icon="fa-external-link" target="_blank"class="btn-linkpt-0"/>
                                    </div>
                                    <fieldname="certification_give_badge"attrs="{'invisible':['|',('certification','=',False),('users_login_required','=',False)]}"/>
                                    <fieldname="certification_badge_id"attrs="{'invisible':['|',('certification_give_badge','=',False),('certification_badge_id','!=',False)]}"
                                           domain="[('survey_id','=',active_id),('survey_id','!=',False)]"
                                           context="{'default_name':title,
                                                   'default_description':'Congratulations,youhavesucceededthiscertification',
                                                   'default_rule_auth':'nobody',
                                                   'default_level':None,
                                                   'form_view_ref':'survey.gamification_badge_form_view_simplified',
                                                   'default_website_published':True}"/>
                                    <fieldname="certification_badge_id_dummy"attrs="{'invisible':['|',('certification_give_badge','=',False),('certification_badge_id','=',False)]}"
                                           options="{'no_create':True}"
                                           context="{'form_view_ref':'survey.gamification_badge_form_view_simplified'}"/>
                                </group>
                                <groupstring="LiveSession">
                                    <fieldname="session_speed_rating"/>
                                    <divclass="o_td_label">
                                        <labelfor="session_code"string="SessionCode"class="oe_edit_onlyo_form_label"/>
                                        <labelfor="session_link"string="SessionLink"class="oe_read_onlyo_form_label"/>
                                    </div>
                                    <divclass="d-flex">
                                        <fieldname="session_code"nolabel="1"class="mr-2oe_edit_only"/>
                                        <fieldname="session_link"nolabel="1"widget="CopyClipboardChar"class="oe_read_only"/>
                                    </div>
                                </group>
                            </group>
                        </page>
                    </notebook>
                </sheet>
                <divclass="oe_chatter">
                    <fieldname="message_follower_ids"/>
                    <fieldname="activity_ids"/>
                    <fieldname="message_ids"/>
                </div>
            </form>
        </field>
    </record>
    <recordmodel="ir.ui.view"id="survey_tree">
        <fieldname="name">Treeviewforsurvey</field>
        <fieldname="model">survey.survey</field>
        <fieldname="arch"type="xml">
            <treestring="Survey"sample="1">
                <fieldname="active"invisible="1"/>
                <fieldname="certification"invisible="1"/>
                <fieldname="title"/>
                <fieldname="state"widget="badge"decoration-info="state=='draft'"decoration-success="state=='open'"/>
                <fieldname="answer_count"/>
                <fieldname="answer_done_count"/>
                <fieldname="success_count"/>
                <fieldname="success_ratio"/>
                <fieldname="answer_score_avg"/>
                <buttonname="certification"type="button"disabled="disabled"
                    icon="fa-trophy"title="Certification"aria-label="Certification"
                    attrs="{'invisible':[('certification','=',False)]}"/>
                <!--Tweakasiconsaren'tdirectlysupportedinxml-->
            </tree>
        </field>
    </record>
    <recordmodel="ir.ui.view"id="survey_kanban">
        <fieldname="name">Kanbanviewforsurvey</field>
        <fieldname="model">survey.survey</field>
        <fieldname="arch"type="xml">
            <kanbansample="1">
                <fieldname="state"/>
                <fieldname="title"/>
                <fieldname="answer_done_count"/>
                <fieldname="certification"/>
                <fieldname="scoring_type"/>
                <fieldname="color"/>
                <fieldname="access_mode"/>
                <fieldname="activity_ids"/>
                <fieldname="activity_state"/>
                <fieldname="success_count"/>
                <fieldname="success_ratio"/>
                <templates>
                    <divt-name="kanban-box"
                        t-attf-class="oe_kanban_color_#{kanban_getcolor(record.color.raw_value)}oe_kanban_cardoe_kanban_global_clicko_kanban_card_survey
                            #{record.certification.raw_value?'o_kanban_card_survey_successed':''}">
                        <divclass="o_dropdown_kanbandropdown"t-if="widget.editable">

                            <arole="button"class="dropdown-toggleo-no-caretbtn"data-toggle="dropdown"data-display="static"href="#"aria-label="Dropdownmenu"title="Dropdownmenu">
                                <spanclass="fafa-ellipsis-v"/>
                            </a>
                            <divclass="dropdown-menu"role="menu">
                                <arole="menuitem"type="edit"class="dropdown-item">EditSurvey</a>
                                <at-if="record.state.raw_value!='closed'"role="menuitem"type="object"class="dropdown-item"name="action_send_survey">Share</a>
                                <at-if="widget.deletable"role="menuitem"type="delete"class="dropdown-item">Delete</a>
                                <divrole="separator"class="dropdown-divider"/>
                                <divrole="separator"class="dropdown-item-text">Color</div>
                                <ulclass="oe_kanban_colorpicker"data-field="color"/>
                            </div>
                        </div>
                        <divclass="o_kanban_record_top">
                                <h4class="o_kanban_record_titlep-0mb4"><fieldname="title"/></h4>
                        </div>
                        <divclass="row">
                            <divclass="col-10p-0pb-1">
                                <divclass="containero_kanban_card_content"t-if="record.answer_done_count.raw_value!=0orrecord.state.raw_value!='draft'">
                                    <divclass="rowmt-4ml-5">
                                        <divclass="col-4p-0">
                                            <aname="action_result_survey"type="object"class="d-flexflex-columnalign-items-center">
                                                <spanclass="font-weight-bold"><fieldname="answer_done_count"/></span>
                                                <spanclass="text-muted">Answers</span>
                                            </a>
                                        </div>
                                        <divclass="col-4p-0border-left"t-if="record.scoring_type.raw_value!='no_scoring'">
                                            <aname="action_survey_user_input_certified"type="object"class="d-flexflex-columnalign-items-center">
                                                <spanclass="font-weight-bold"><fieldname="success_count"/></span>
                                                <spanclass="text-muted"t-if="!record.certification.raw_value">Passed</span>
                                                <spanclass="text-muted"t-else="">Certified</span>
                                            </a>
                                        </div>
                                        <divclass="col-4p-0border-left"t-if="record.scoring_type.raw_value!='no_scoring'">
                                            <aname="action_survey_user_input_completed"type="object"class="d-flexflex-columnalign-items-center">
                                                <spanclass="font-weight-bold"><tt-esc="Math.round(record.success_ratio.raw_value)"></t>%</span>
                                                <spanclass="text-muted">Success</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <divclass="col-2align-self-end">
                                <divclass="o_kanban_record_bottom">
                                    <divclass="oe_kanban_bottom_left"/>
                                    <divclass="oe_kanban_bottom_right">
                                        <fieldname="activity_ids"widget="kanban_activity"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </templates>
            </kanban>
        </field>
    </record>
    <recordid="survey_survey_view_search"model="ir.ui.view">
        <fieldname="name">survey.survey.search</field>
        <fieldname="model">survey.survey</field>
        <fieldname="arch"type="xml">
            <searchstring="Survey">
                <fieldstring="Survey"name="title"/>
                <filterstring="Certification"name="certification"domain="[('certification','=',True)]"/>
                <separator/>
                <filterstring="Archived"name="inactive"domain="[('active','=',False)]"/>
                <separator/>
                <filterinvisible="1"string="LateActivities"name="activities_overdue"
                    domain="[('my_activity_date_deadline','&lt;',context_today().strftime('%Y-%m-%d'))]"
                    help="Showallrecordswhichhasnextactiondateisbeforetoday"/>
                <filterinvisible="1"string="TodayActivities"name="activities_today"
                    domain="[('my_activity_date_deadline','=',context_today().strftime('%Y-%m-%d'))]"/>
                <filterinvisible="1"string="UpcomingActivities"name="activities_upcoming_all"
                    domain="[('my_activity_date_deadline','&gt;',context_today().strftime('%Y-%m-%d'))]"/>
                <groupexpand="0"string="GroupBy">
                    <filterstring="State"name="groupby_state"context="{'group_by':'state'}"/>
                </group>
            </search>
        </field>
    </record>

    <recordmodel="ir.actions.act_window"id="action_survey_form">
        <fieldname="name">Surveys</field>
        <fieldname="res_model">survey.survey</field>
        <fieldname="view_mode">kanban,tree,form,activity</field>
        <fieldname="context">{'search_default_groupby_state':1}</field>
        <fieldname="help"type="html">
          <pclass="o_view_nocontent_smiling_face">
            Addanewsurvey
          </p><p>
            Youcancreatesurveysfordifferentpurposes:customeropinion,servicesfeedback,recruitmentinterviews,employee'speriodicalevaluations,marketingcampaigns,etc.
          </p><p>
            Designeasilyyoursurvey,sendinvitationsandanalyzeanswers.
          </p>
        </field>
    </record>

    <menuitemname="Surveys"id="menu_survey_form"action="action_survey_form"parent="menu_surveys"sequence="1"/>

</data>
</flectra>
