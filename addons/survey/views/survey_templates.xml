<?xmlversion="1.0"encoding="utf-8"?>
<flectra>
<data>
    <!--Mainsurveylayout-->
    <templateid="survey.layout"name="SurveyLayout"inherit_id="web.frontend_layout"primary="True">
        <xpathexpr="//div[@id='wrapwrap']"position="before">
            <!--TODODBEFixme:Ifoneday,thereisasurvey_livechatbridgemodule,putthisinthatmodule-->
            <tt-set="no_livechat"t-value="True"/>
        </xpath>
        <xpathexpr="//div[@id='wrapwrap']"position="attributes">
            <attributename="t-att-style"add="(('height:100%;overflow:auto;background:url('+'/survey/get_background_image/%s/%s'%(survey.access_token,answer.access_token)+')no-repeatfixedcenter;box-shadow:inset00010000pxrgba(255,255,255,.7);background-size:cover;')ifsurveyandsurvey.background_imageandanswerelse'height:100%;overflow:auto;')"/>
        </xpath>
        <xpathexpr="//head/t[@t-call-assets][last()]"position="after">
            <tt-call-assets="survey.survey_assets"lazy_load="True"/>
        </xpath>
        <xpathexpr="//header"position="before">
            <tt-set="no_header"t-value="True"/>
            <tt-set="no_footer"t-value="True"/>
        </xpath>
        <xpathexpr="//header"position="after">
            <divid="wrap"class="oe_structureoe_empty"/>
        </xpath>
        <xpathexpr="//footer"position="after">
            <divclass="py-3m-0p-0text-right">
                <divclass="o_survey_progress_wrapperd-inline-blockpr-5text-left">
                    <tt-call="survey.survey_progression"
                        t-if="surveyandsurvey.questions_layout!='one_page'andanswerandanswer.state=='in_progress'and(notquestionornotquestion.is_page)andnotsurvey_form_readonly">
                        <tt-if="survey.questions_layout=='page_per_section'">
                            <tt-set="page_ids"t-value="survey.page_ids.ids"/>
                            <tt-set="page_number"t-value="page_ids.index(page.id)+(1ifsurvey.progression_mode=='number'else0)"/>
                        </t>
                        <tt-else="">
                            <tt-if="notanswer.is_session_answerandsurvey.questions_selection=='random'">
                                <tt-set="page_ids"t-value="answer.predefined_question_ids.ids"/>
                            </t>
                            <tt-else="">
                                <tt-set="page_ids"t-value="survey.question_ids.ids"/>
                            </t>
                            <tt-set="page_number"t-value="page_ids.index(question.id)"/>
                        </t>
                    </t>
                </div>
                <divclass="o_survey_brand_messagefloat-rightroundedmr-3border">
                    <divclass="px-2py-2d-inline-block"t-call="web.brand_promotion_message">
                        <tt-set="_message"></t>
                        <tt-set="_utm_medium"t-valuef="survey"/>
                    </div>
                    <divclass="o_survey_navigation_wrapperd-inline-block"t-call="survey.survey_navigation">
                    </div>
                </div>
            </div>
        </xpath>
    </template>

    <!--Mainsurveytemplate-->
    <templateid="survey_page_fill"name="Survey:mainpage(takesurvey)">
        <tt-call="survey.layout">
            <tt-if="answer.test_entry"t-call="survey.survey_button_form_view"/>
            <divclass="wrapo_survey_wrapd-flex">
                <divclass="containero_survey_formd-flexflex-columnmb-5">
                    <tt-call="survey.survey_fill_header"/>
                    <tt-call="survey.survey_fill_form"/>
                </div>
            </div>
        </t>
    </template>

    <templateid="survey_fill_header"name="Survey:mainpageheader">
        <divclass="o_survey_navpt16mb-2">
            <divclass="containerm-0p-0">
                <divclass="row">
                    <div class="col-lg-10">
                        <h1t-if="answer.state=='new'orsurvey.questions_layout!='page_per_question'"
                            t-esc="survey.title"class="o_survey_main_titlept-4"></h1>
                    </div>
                    <divclass="o_survey_timercol-lg-2pt-4">
                        <h1class="o_survey_timer_containertimertext-right">
                        </h1>
                    </div>
                </div>
            </div>
            <divt-att-class="'o_survey_breadcrumb_containermt8'+('d-none'ifanswer.state!='in_progress'else'')"
                 t-if="notsurvey.has_conditional_questionsandsurvey.questions_layout=='page_per_section'andanswer.state!='done'"
                t-att-data-can-go-back="survey.users_can_go_back"
                t-att-data-pages="json.dumps(breadcrumb_pages)"/>
        </div>
    </template>

    <templateid="survey_fill_form"name="Survey:mainpagecontent">
        <tt-set="survey_form_readonly"t-value="answer.state=='done'"/>
        <formrole="form"method="post"t-att-name="survey.id"
                class="d-flexflex-grow-1align-items-center"
                t-att-data-answer-token="answer.access_token"
                t-att-data-survey-token="survey.access_token"
                t-att-data-users-can-go-back="survey.users_can_go_backandnotanswer.is_session_answer"
                t-att-data-session-in-progress="answer.is_session_answer"
                t-att-data-is-start-screen="answer.state=='new'"
                t-att-data-readonly="survey_form_readonly"
                t-att-data-has-answered="bool(has_answered)"
                t-att-data-is-page-description="bool(questionandquestion.is_pageandnotis_html_empty(question.description))"
                t-att-data-questions-layout="survey.questions_layout"
                t-att-data-triggered-questions-by-answer="json.dumps(triggered_questions_by_answer)"
                t-att-data-selected-answers="json.dumps(selected_answers)">
            <inputtype="hidden"name="csrf_token"t-att-value="request.csrf_token()"/>
            <inputtype="hidden"name="token"t-att-value="answer.access_token"/>
            <divclass="o_survey_erroralertalert-dangerd-none"role="alert">
                <p>Therewasanerrorduringthevalidationofthesurvey.</p>
            </div>

            <divclass="o_survey_form_contentw-100">
                <tt-if="answer.state=='new'"t-call="survey.survey_fill_form_start"/>
                <tt-elif="answer.state=='in_progress'"t-call="survey.survey_fill_form_in_progress"/>
                <tt-else=""t-call="survey.survey_fill_form_done"/>
            </div>
        </form>

        <!--Modalusedtodisplayerrormessage,i.c.o.ajaxerror-->
        <divrole="dialog"class="modalfade"id="MasterTabErrorModal">
            <divclass="modal-dialog">
                <divclass="modal-content">
                    <headerclass="modal-header">
                        <h4class="modal-title">Aproblemhasoccured</h4>
                        <buttontype="button"class="close"data-dismiss="modal"aria-label="Close">Ã—</button>
                    </header>
                    <mainclass="modal-body"><p>Totakethissurvey,pleasecloseallothertabson<strongclass="text-danger"></strong>.</p></main>
                    <footerclass="modal-footer"><buttontype="button"class="btnbtn-primary"data-dismiss="modal">Continuehere</button></footer>
                </div>
            </div>
        </div>
    </template>

    <templateid="survey_fill_form_start"name="Survey:startformcontent">
        <divclass="wrapo_survey_start">
            <divclass='mb32'>
                <divt-field='survey.description'class="oe_no_emptypb-5text-break"/>
                <tt-if="answer.is_session_answer">
                    <divclass="font-weight-bold">
                        Thesessionwillbeginautomaticallywhenthehoststarts.
                    </div>
                </t>
                <tt-else="">
                    <divt-if="survey.is_time_limited">
                        <p>
                            <span>Timelimitforthissurvey:</span>
                            <spanclass="font-weight-boldtext-danger"t-field="survey.time_limit"t-options="{'widget':'duration','unit':'minute'}"></span>
                        </p>
                    </div>
                    <buttontype="submit"value="start"class="btnbtn-primarybtn-lg">
                        <tt-if="survey.certification">
                            StartCertification
                        </t>
                        <tt-else="">
                            StartSurvey
                        </t>
                    </button>
                    <spanclass="o_survey_enterfont-weight-boldtext-mutedml-2">orpressEnter</span>
                </t>
            </div>
        </div>
    </template>

    <templateid="survey_fill_form_in_progress"name="Survey:formwithquestions">
        <divclass="o_survey_form_content_datad-none"
            t-att-data-question-time-limit-reached="answer.question_time_limit_reached"
            t-att-data-has-answered="bool(has_answered)"
            t-att-data-is-page-description="bool(questionandquestion.is_pageandnotis_html_empty(question.description))"
            t-att-data-server-time="server_time"
            t-att-data-timer="timer_start"
            t-att-data-time-limit-minutes="time_limit_minutes"/>
        <tt-if="survey.questions_layout=='one_page'">
            <tt-foreach='survey.question_and_page_ids't-as='question'>
                <h2t-if="question.is_page"t-field='question.title'class="o_survey_titlepb16text-break"/>
                <divt-if="question.is_page"t-field='question.description'class="text-break"/>
                <tt-if="notquestion.is_pageandquestioninanswer.predefined_question_ids"t-call="survey.question_container"/>
            </t>

            <divclass="text-centermt16mb256">
                <buttontype="submit"value="finish"class="btnbtn-primary">
                    Submit</button><spanclass="font-weight-boldtext-mutedml-2d-noned-md-inline">orpressEnter</span>
            </div>
        </t>

        <tt-if="survey.questions_layout=='page_per_section'">
            <h2t-field='page.title'class="o_survey_titlepb16text-break"/>
            <divt-field='page.description'class="oe_no_emptytext-break"/>

            <inputtype="hidden"name="page_id"t-att-value="page.id"/>
            <tt-foreach='page.question_ids't-as='question'>
                <tt-if="questioninanswer.predefined_question_ids"t-call="survey.question_container"/>
            </t>

            <divclass="row">
                <divclass="col-12text-centermt16">
                    <buttontype="submit"t-att-value="'next'ifnotsurvey_lastelse'finish'"class="btnbtn-primary">
                        <tt-if="notsurvey_last">Continue</t>
                        <tt-else="">Submit</t>
                    </button><spanclass="font-weight-boldtext-mutedml-2d-noned-md-inline">orpressEnter</span>
                </div>
            </div>
        </t>

        <!--Ifwehaveachoicequestionandlessthan6options,wewantminimizeddisplay.
        Minimizeddisplaymeanswedisplaythechoicesvertically(insteadofoptimizedbasedonscreenspace).
        Anexceptionismadeforoptionswithimages,wherewealwayswanttooptimizescreenspace.
        Numeric,dateanddatetimequestionsarealsodisplayed"minimized",withasmallerscreenwidth.-->
        <tt-set="minimized_display"t-value="survey.questions_layout=='page_per_question'andlen(question.suggested_answer_ids)&lt;=5andnotany(suggestion.value_imageforsuggestioninquestion.suggested_answer_ids)"/>
        <divt-if="survey.questions_layout=='page_per_question'"
            t-attf-class="o_survey_page_per_questiono_survey_#{question.question_type}#{'o_survey_minimized_display'ifminimized_displayelse''}">
            <inputtype="hidden"name="question_id"t-att-value="question.id"/>
            <!--Userhasalreadyansweredforthissession-->
            <tt-if="answer.is_session_answerand(has_answeredoranswer.question_time_limit_reached)">
                <fieldsetdisabled="disabled">
                    <tt-set="survey_form_readonly"t-value="True"/>
                    <divclass="mt-5">
                        <tt-call="survey.question_container"/>
                    </div>
                </fieldset>
                <divt-if="answer.question_time_limit_reachedandnothas_answered"class="font-weight-bold">Sorry,youhavenotbeenfastenough.</div>
                <divt-else=""class="font-weight-bold">Wehaveregisteredyouranswer!Pleasewaitforthehosttogotothenextquestion.</div>
            </t>
            <tt-elif="answer.is_session_answerandquestion.is_pageandnotis_html_empty(question.description)">
                <divclass="font-weight-boldmt-5">Payattentiontothehostscreenuntilthenextquestion.</div>
            </t>
            <tt-else="">
                <divclass="mt-5">
                    <tt-call="survey.question_container"/>
                </div>

                <divclass="row">
                    <divclass="col-12text-centermt16">
                        <buttontype="submit"t-att-value="'next'ifnotsurvey_lastelse'finish'"class="btnbtn-primary">
                            <tt-if="answer.is_session_answerorsurvey_last">Submit</t>
                            <tt-else="">Continue</t>
                        </button>
                        <spanclass="font-weight-boldtext-mutedml-2d-noned-md-inline">orpressEnter</span>
                    </div>
                </div>
            </t>
        </div>
    </template>

    <!--Finished(takenandfinished)surveypage-->
    <templateid="survey_fill_form_done"name="Survey:finished">
        <divclass="wrap">
            <divclass="o_survey_finishedmt32mb32">
                <h1>Thankyou!</h1>
                <divt-field="survey.description_done"class="oe_no_empty"/>
                <divclass="row">
                    <divclass="col">
                        <tt-if="survey.scoring_type!='no_scoring'andsurvey.scoring_success_min">
                            <div>Youscored<tt-esc="answer.scoring_percentage"/>%</div>
                            <tt-if="answer.scoring_success">
                                <div>Congratulations,youhavepassedthetest!</div>

                                <divt-if="survey.certification"class="mt16mb16">
                                    <arole="button"
                                        class="btnbtn-primarybtn-lg"
                                        t-att-href="'/survey/%s/get_certification'%survey.id">
                                        <iclass="fafa-fwfa-trophy"role="img"aria-label="Downloadcertification"title="Downloadcertification"/>
                                        Downloadcertification
                                    </a>
                                </div>
                            </t>
                            <tt-else="">
                                <div>Unfortunately,youhavefailedthetest.</div>
                            </t>
                        </t>
                        <tt-call="survey.survey_button_retake"/>
                        <divt-if="survey.scoring_type!='scoring_without_answers'">
                            Ifyouwish,youcan<at-att-href="'/survey/print/%s?answer_token=%s&amp;review=True'%(survey.access_token,answer.access_token)">reviewyouranswers</a>
                        </div>
                    </div>
                    <divclass="col-6text-center"t-if="survey.certification_give_badgeandanswer.scoring_success">
                        <imgt-att-src="'/web/image/gamification.badge/%s/image_128'%survey.certification_badge_id.id"/>
                        <div>Youreceivedthebadge<spanclass="font-weight-bold"t-esc="survey.certification_badge_id.name"/>!</div>
                    </div>
                </div>
            </div>
            <divclass="containero_survey_resultp-4"t-if="graph_data">
                <divclass="tab-content">
                    <divrole="tabpanel"class="tab-paneactivesurvey_graph"
                         t-att-data-scoring_percentage="answer.scoring_percentage"
                         t-att-id="'survey_graph_question_%d'%answer.id"
                         t-att-data-question_id="answer.id"
                         data-graph-type="doughnut"
                         t-att-data-graph-data="graph_data">
                        <canvasid="doughnut_chart"></canvas>
                        <spanclass="o_overall_performance"></span>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <!--Questionwidgets-->
    <templateid="question_container"name="Survey:questioncontainer">
        <tt-set="display_question"
           t-value="survey.questions_layout=='page_per_question'
                    orsurvey.questions_selection=='random'
                    or(survey.questions_layout=='one_page'andnotquestion.is_conditional)
                    or(survey.questions_layout=='page_per_section'and(notquestion.is_conditionalortriggering_answer_by_question[question.id]inselected_answers))"/>

        <tt-set="answer_lines"t-value="answer.user_input_line_ids.filtered(lambdaline:line.question_id==question)"/>
        <!--UseKeyselectionifnumberofchoicesis<26tokeepZforotherchoiceifany-->
        <tt-set="letters"t-value="'ABCDEFGHIJKLMNOPQRSTUVWXYZ'"/>
        <tt-set="useKeySelection"t-value="len(question.suggested_answer_ids)&lt;len(letters)andsurvey.questions_layout=='page_per_question'"/>
        <!--Extra'right'marginisaddedonlayoutsthatarenot"page_per_question"toalignwithchoicesquestions,sinceallchoiceshaveamr-2class(pixelperfectyay...)-->
        <tt-set="extra_right_margin"t-value="survey.questions_layout!='page_per_question'andquestion.question_typenotin['simple_choice','multiple_choice']"/>
        <divt-att-class="'js_question-wrapperpb-4%s%s'%('d-none'ifnotdisplay_questionelse'','mr-2'ifextra_right_marginelse'')"
             t-att-id="question.id"t-att-data-required="question.constr_mandatory"
             t-att-data-constr-error-msg="question.constr_error_msg"
             t-att-data-validation-error-msg="question.validation_error_msg">
            <divclass="mb-4">
                <h3t-if="nothide_question_title">
                    <spant-field='question.title'class="text-break"/>
                    <spant-if="question.constr_mandatory"class="text-danger">*</span>
                </h3>
                <divt-if="notis_html_empty(question.description)"t-field='question.description'class="text-mutedoe_no_emptymt-1text-break"/>
            </div>
            <tt-if="question.question_type=='text_box'"><tt-call="survey.question_text_box"/></t>
            <tt-if="question.question_type=='char_box'"><tt-call="survey.question_char_box"/></t>
            <tt-if="question.question_type=='numerical_box'"><tt-call="survey.question_numerical_box"/></t>
            <tt-if="question.question_type=='date'"><tt-call="survey.question_date"/></t>
            <tt-if="question.question_type=='datetime'"><tt-call="survey.question_datetime"/></t>
            <tt-if="question.question_type=='simple_choice'"><tt-call="survey.question_simple_choice"/></t>
            <tt-if="question.question_type=='multiple_choice'"><tt-call="survey.question_multiple_choice"/></t>
            <tt-if="question.question_type=='matrix'"><tt-call="survey.question_matrix"/></t>
            <divclass="o_survey_question_erroroverflow-hiddenborder-0py-0px-3alertalert-danger"role="alert"></div>
        </div>
    </template>

    <templateid="question_text_box"name="Question:freetextbox">
        <divclass="o_survey_comment_containerp-0">
            <textareaclass="form-controlo_survey_question_text_boxbg-transparenttext-darkrounded-0p-0"rows="3"t-att-name="question.id"
                      t-att-data-question-type="question.question_type"><tt-if="answer_lines"t-esc="answer_lines[0].value_text_boxorNone"/></textarea>
        </div>
    </template>

    <templateid="question_char_box"name="Question:textbox">
        <divclass="o_survey_comment_containerp-0">
            <inputt-att-type="'email'ifquestion.validation_emailelse'text'"
               class="form-controlo_survey_question_text_boxbg-transparenttext-darkrounded-0p-0"t-att-name="question.id"
               t-att-value="answer_lines[0].value_char_boxifanswer_lineselseNone"
               t-att-data-question-type="question.question_type"
               t-att-data-validation-length-min="question.validation_length_minifquestion.validation_requiredelseFalse"
               t-att-data-validation-length-max="question.validation_length_maxifquestion.validation_requiredelseFalse"/>
        </div>
    </template>

    <templateid="question_numerical_box"name="Question:numericalbox">
        <inputtype="number"step="any"class="form-controlo_survey_question_numerical_boxbg-transparenttext-darkrounded-0p-0"
               t-att-name="question.id"t-att-value="answer_lines[0].value_numerical_boxifanswer_lineselseNone"
               t-att-data-question-type="question.question_type"
               t-att-data-validation-float-min="question.validation_min_float_valueifquestion.validation_requiredelseFalse"
               t-att-data-validation-float-max="question.validation_max_float_valueifquestion.validation_requiredelseFalse"/>
    </template>

    <templateid="question_date"name="Question:datebox">
        <divclass="input-groupo_survey_form_date"t-attf-id="datetimepicker_#{question.id}"data-target-input="nearest"
                t-att-data-mindate="question.validation_min_date"
                t-att-data-maxdate="question.validation_max_date">
            <inputtype="text"class="form-controldatetimepicker-inputo_survey_question_datebg-transparenttext-darkrounded-0p-0"
                   t-attf-data-target="#datetimepicker_#{question.id}"t-att-name="question.id"
                   t-att-value="format_date(answer_lines[0].value_date)ifanswer_lineselseNone"
                   t-att-data-question-type="question.question_type"/>
            <divt-if="notsurvey_form_readonly"class="input-group-appendposition-absolute"t-attf-data-target="#datetimepicker_#{question.id}"data-toggle="datetimepicker">
                <divclass="input-group-texttext-primaryborder-0bg-transparentp-0"><iclass="fafa-calendar"></i></div>
            </div>
        </div>
    </template>

    <templateid="question_datetime"name="Question:datetimebox">
        <divclass="input-groupo_survey_form_date"t-attf-id="datetimepicker_#{question.id}"data-target-input="nearest"
                t-att-data-mindate="question.validation_min_datetime"
                t-att-data-maxdate="question.validation_max_datetime">
            <inputtype="text"class="form-controldatetimepicker-inputo_survey_question_datetimebg-transparenttext-darkrounded-0p-0"
                   t-attf-data-target="#datetimepicker_#{question.id}"t-att-name="question.id"
                   t-att-value="format_datetime(answer_lines[0].value_datetime)ifanswer_lineselseNone"
                   t-att-data-question-type="question.question_type"/>
            <divt-if="notsurvey_form_readonly"class="input-group-appendposition-absolute"t-attf-data-target="#datetimepicker_#{question.id}"data-toggle="datetimepicker">
                <divclass="input-group-texttext-primaryborder-0bg-transparentp-0"><iclass="fafa-calendar"></i></div>
            </div>
        </div>
    </template>

    <templateid="question_suggested_value_image"name="Imagefromthequestionsuggestedanswer">
        <tt-if="question.allow_value_imageandlabel.value_image">
            <!--Directlyusefieldorrouteiftheuserdoesn'thaveaccessrights-->
            <divt-if="notenv.user.has_group('survey.group_survey_user')"
                class="d-flexmy-3justify-content-center">
                <imgt-att-src="'/survey/get_question_image/%s/%s/%s/%s'%(survey.access_token,answer.access_token,question.id,label.id)"/>
            </div>
            <divt-else="" t-field="label.value_image"
                class="d-flexmy-3justify-content-center"
                t-options="{'widget':'image','alt-field':'name','itemprop':'image'}"/>
        </t>
    </template>

    <templateid="question_simple_choice"name="Question:simplechoice">
        <tt-set="answer_line"t-value="answer_lines.filtered(lambdaline:line.suggested_answer_id)"/>
        <tt-set="comment_line"t-value="answer_lines.filtered(lambdaline:line.value_char_box)"/>
        <divclass="rowo_survey_form_choice"
             t-att-data-name="question.id"
             data-question-type="simple_choice_radio">
            <tt-set="item_idx"t-value="0"/>
            <divt-attf-class="col-lg-12d-flexflex-wrap">
                <tt-set="has_correct_answer"t-value="scoring_display_correctionandany(label.is_correctforlabelinquestion.suggested_answer_ids)"/>
                <tt-foreach='question.suggested_answer_ids't-as='label'>
                    <tt-set="item_idx"t-value="label_index"/>
                    <tt-set="answer_selected"t-value="answer_lineandanswer_line.suggested_answer_id.id==label.id"/>
                    <tt-set="is_correct"t-value="label.is_correct"/>

                    <!--Usedforprintmodewithcorrections-->
                    <tt-set="answer_class"t-if="nothas_correct_answer"t-value="''"/>
                    <tt-set="answer_class"t-elif="is_correct"t-value="'bg-success'"/>
                    <tt-set="answer_class"t-elif="notis_correct"t-value="'bg-danger'"/>

                    <labelt-att-for="str(question.id)+'_'+str(label.id)"
                           t-att-class="'o_survey_choice_btnmr-2mb-2py-1px-3rounded%s%s'%(answer_class,'o_survey_selected'ifanswer_selectedelse'')">
                        <tt-call="survey.survey_selection_key">
                            <tt-set="selection_key_class"t-value="'position-relativeo_survey_radio_btnfloat-leftd-flex'"/>
                        </t>
                        <spanclass="ml-2text-break"t-field='label.value'/>
                        <inputt-att-id="str(question.id)+'_'+str(label.id)"type="radio"t-att-value='label.id'class="o_survey_form_choice_iteminvisibleposition-absolute"
                               t-att-name='question.id'
                               t-att-checked="answer_lineandanswer_line.suggested_answer_id.id==label.idand'checked'orNone"
                               t-att-data-selection-key="letters[item_idx]ifuseKeySelectionelse''"/>
                        <iclass="fafa-check-circlefloat-rightmt-1position-relative"></i>
                        <iclass="fafa-circle-thinfloat-rightmt-1position-relative"></i>
                        <tt-call="survey.question_suggested_value_image"/>
                    </label>
                </t>
            </div>
            <divt-if='question.comments_allowedandquestion.comment_count_as_answer'class="js_commentscol-lg-12">
                <divclass="d-flexflex-wrap">
                    <labelt-att-class="'o_survey_choice_btnmr-2py-1px-3rounded%s'%('o_survey_selected'ifcomment_lineelse'')">
                        <tt-set="item_idx"t-value="item_idx+1"/>
                        <tt-call="survey.survey_selection_key">
                            <tt-set="selection_key_class"t-value="'position-relativeo_survey_radio_btnfloat-leftd-flex'"/>
                        </t>
                        <inputtype="radio"class="o_survey_form_choice_itemo_survey_js_form_other_commentinvisibleposition-absolute"value="-1"
                               t-att-name='question.id'
                               t-att-checked="comment_lineand'checked'orNone"
                               t-att-data-selection-key="letters[item_idx]ifuseKeySelectionelse''"/>
                        <spanclass="ml-2"t-field="question.comments_message"/>
                        <iclass="fafa-check-circlefloat-rightmt-1position-relative"></i>
                        <iclass="fafa-circle-thinfloat-rightmt-1position-relative"></i>
                    </label>
                </div>
                <divt-attf-class="o_survey_comment_containermt-3py-0px-1 #{'d-none'ifnotcomment_lineelse''}">
                    <textareatype="text"class="form-controlo_survey_question_text_boxbg-transparenttext-darkrounded-0p-0"
                              t-att-disabled="Noneifcomment_lineelse'disabled'"><tt-esc="comment_line.value_char_boxifcomment_lineelse''"/></textarea>
                </div>
            </div>
            <divt-if='question.comments_allowedandnotquestion.comment_count_as_answer'class="col-lg-12o_survey_comment_containermx-1mt-3pl-3pr-4">
                <textareatype="text"class="form-controlo_survey_commento_survey_question_text_boxbg-transparenttext-darkrounded-0p-0"
                          t-att-placeholder="question.comments_messageifnotsurvey_form_readonlyelse''"><tt-esc="comment_line.value_char_boxifcomment_lineelse''"/></textarea>
            </div>
        </div>
    </template>

    <templateid="question_multiple_choice"name="Question:multiplechoice">
        <tt-set="comment_line"t-value="answer_lines.filtered(lambdaline:line.value_char_box)"/>
        <divclass="rowo_survey_form_choiceo_survey_question_multiple_choice"
             t-att-data-name="question.id"
             t-att-data-question-type="question.question_type">
            <tt-set="item_idx"t-value="0"/>
            <divclass="d-flexflex-wrapcol-lg-12">
                <tt-set="has_correct_answer"t-value="scoring_display_correctionandany(label.is_correctforlabelinquestion.suggested_answer_ids)"/>
                <tt-foreach='question.suggested_answer_ids't-as='label'>
                    <tt-set="item_idx"t-value="label_index"/>
                    <tt-set="answer_line"t-value="answer_lines.filtered(lambdaline:line.suggested_answer_id==label)"/>
                    <tt-set="answer_selected"t-value="answer_lineandanswer_line.suggested_answer_id.id==label.id"/>
                    <tt-set="is_correct"t-value="label.is_correct"/>

                    <!--Usedforprintmodewithcorrections-->
                    <tt-set="answer_class"t-if="nothas_correct_answer"t-value="''"/>
                    <tt-set="answer_class"t-elif="is_correct"t-value="'bg-success'"/>
                    <tt-set="answer_class"t-elif="notis_correct"t-value="'bg-danger'"/>

                    <labelt-att-class="'o_survey_choice_btnmr-2py-1px-3rounded%s%s'%(answer_class,'o_survey_selected'ifanswer_lineelse'')">
                        <tt-call="survey.survey_selection_key">
                            <tt-set="selection_key_class"t-value="'position-relativefloat-leftd-flex'"/>
                        </t>
                        <inputtype="checkbox"t-att-value='label.id'class="o_survey_form_choice_iteminvisibleposition-absolute"
                               t-att-name="question.id"
                               t-att-checked="'checked'ifanswer_lineelseNone"
                               t-att-data-selection-key="letters[item_idx]ifuseKeySelectionelse''"/>
                        <spanclass="ml-2text-break"t-field='label.value'/>
                        <iclass="fafa-check-squarefloat-rightmt-1position-relative"></i>
                        <iclass="fafa-square-ofloat-rightmt-1position-relative"></i>
                        <tt-call="survey.question_suggested_value_image"/>
                    </label>
                </t>
            </div>
            <divt-if='question.comments_allowedandquestion.comment_count_as_answer'class="js_ck_commentscol-lg-12">
                <divclass="d-flexflex-wrap">
                    <labelt-att-class="'o_survey_choice_btnmr-2py-1px-3rounded%s'%('o_survey_selected'ifcomment_lineelse'')">
                        <tt-set="item_idx"t-value="item_idx+1"/>
                        <tt-call="survey.survey_selection_key">
                            <tt-set="selection_key_class"t-value="'position-relativefloat-leftd-flex'"/>
                        </t>
                        <inputtype="checkbox"class="o_survey_form_choice_itemo_survey_js_form_other_commentinvisibleposition-absolute"value="-1"
                               t-att-name="question.id"
                               t-att-checked="comment_lineand'checked'orNone"
                               t-att-data-selection-key="letters[item_idx]ifuseKeySelectionelse''"/>
                        <spanclass="ml-2"t-field="question.comments_message"/>
                        <iclass="fafa-check-squarefloat-rightmt-1position-relative"></i>
                        <iclass="fafa-square-ofloat-rightmt-1position-relative"></i>
                    </label>
                </div>
                <divt-attf-class="o_survey_comment_containermt-3py-0px-1#{'d-none'ifnotcomment_lineelse''}">
                    <textareatype="text"class="form-controlo_survey_question_text_boxbg-transparenttext-darkrounded-0p-0"
                              t-att-disabled="Noneifcomment_lineelse'disabled'"><tt-esc="comment_line.value_char_boxifcomment_lineelse''"/></textarea>
                </div>
            </div>
            <divt-if='question.comments_allowedandnotquestion.comment_count_as_answer'class="col-lg-12o_survey_comment_containermx-1mt-3py-0pl-3pr-4">
                <textareatype="text"class="form-controlo_survey_commento_survey_question_text_boxbg-transparenttext-darkrounded-0p-0"
                          t-att-placeholder="question.comments_messageifnotsurvey_form_readonlyelse''"><tt-esc="comment_line.value_char_boxifcomment_lineelse''"/></textarea>
            </div>
        </div>
    </template>

    <templateid="question_matrix"name="Question:matrix">
        <tt-set="comment_line"t-value="answer_lines.filtered(lambdaline:line.value_char_box)"/>
        <tableclass="tabletable-hovero_survey_question_matrixtext-whitetext-centermb-0"
               t-att-data-name="question.id"
               t-att-data-question-type="question.question_type"
               t-att-data-sub-questions="question.matrix_row_ids.ids">
            <thead>
                <tr>
                    <thclass="border-0"></th>
                    <thclass="border-0font-weight-normal"t-foreach="question.suggested_answer_ids"t-as="col_label"><spant-field="col_label.value"/></th>
                </tr>
            </thead>
            <tbody>
                <tt-set="item_idx"t-value="0"/>
                <!--Formatrix,wehaveanextracheckbecausewehaverows*columnstotaloptions-->
                <tt-set="useKeySelection"t-value="useKeySelectionand(len(question.suggested_answer_ids)*len(question.matrix_row_ids))&lt;len(letters)"/>
                <trclass="bg-whitetext-white"t-foreach="question.matrix_row_ids"t-as="row_label"t-att-id="row_label.id">
                    <thclass="border-0font-weight-normaltext-left"><spant-field="row_label.value"/></th>
                    <tt-foreach="question.suggested_answer_ids"t-as="col_label">
                        <tt-set="answer"t-value="answer_lines.filtered(lambdaline:line.suggested_answer_id==col_labelandline.matrix_row_id==row_label)"/>
                        <tdt-att-class="'o_survey_matrix_btntext-primaryborder-0position-relative%s'
                        %('o_survey_selected'ifanswerelse'')">
                            <inputt-att-type="'checkbox'ifquestion.matrix_subtype=='multiple'else'radio'"
                                   t-att-name="'%s_%s'%(question.id,row_label.id)"t-att-value='col_label.id'
                                   t-att-checked="'checked'ifanswerelseNone"
                                   t-att-data-row-id="row_label.id"
                                   t-att-data-selection-key="letters[item_idx]ifuseKeySelectionelse''"
                                   class="o_survey_form_choice_itemd-none"/>
                            <it-att-class="'o_survey_matrix_empty_checkboxfafa-%sposition-relative'
                            %('square-o'ifquestion.matrix_subtype=='multiple'else'circle-thin')"></i>
                            <it-att-class="'fafa-%sposition-relative'
                            %('check-square'ifquestion.matrix_subtype=='multiple'else'check-circle')"></i>
                            <tt-call="survey.survey_selection_key">
                                <tt-set="selection_key_class"
                                   t-value="'position-absolutefloat-rightfont-weight-bold%s'%('o_survey_radio_btn'ifquestion.matrix_subtype!='multiple'else'')"/>
                            </t>
                            <tt-set="item_idx"t-value="item_idx+1"/>
                        </td>
                    </t>
                </tr>
            </tbody>
        </table>
        <divt-if='question.comments_allowed'>
            <textareatype="text"class="form-controlo_survey_question_text_boxo_survey_commentbg-transparenttext-darkrounded-0p-0mt-3"
                      t-att-placeholder="question.comments_messageifnotsurvey_form_readonlyelse''"
                      t-att-name="'%s_%s'%(question.id,'comment')"><tt-esc="comment_line.value_char_boxifcomment_lineelse''"/></textarea>
        </div>
    </template>

    <templateid="survey_selection_key">
        <divt-if="useKeySelection"t-att-class="'o_survey_choice_keybg-whiterounded%s'%selection_key_class">
             <spanclass="o_survey_keytext-centerposition-absolutebg-whiterounded-leftpy-0pl-2"><spanclass="text-primarytext-centertext-centerw-100position-relative">Key</span></span>
             <spanclass="text-primarytext-centerw-100position-relative"t-esc="letters[item_idx]"/>
        </div>
    </template>

    <templateid="survey_progression"name="Survey:Progression">
        <tt-if="len(page_ids)>1andnotsurvey.has_conditional_questions">
            <tt-set="percentage"t-value="round(100*(page_number/len(page_ids)))"/>
            <tt-if="survey.progression_mode=='percent'">
                <spanclass="o_survey_progress_percent"t-esc="percentage"/>%completed
            </t>
            <tt-else="">
                <spanclass="o_survey_progress_number"t-esc="page_number"/>of<spant-esc="len(page_ids)"/>
                <spant-if="survey.questions_layout=='page_per_question'">answered</span>
                <spant-else="">pages</span>
            </t>
            <divclass="o_survey_progressprogressflex-grow-1">
                <divclass="progress-barbg-primary"t-att-style="'width:'+str(percentage)+'%'"/>
            </div>
        </t>
    </template>
</data>
</flectra>
