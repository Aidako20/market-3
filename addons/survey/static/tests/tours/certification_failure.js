flectra.define('survey.tour_test_certification_failure',function(require){
'usestrict';

varSurveyFormWidget=require('survey.form');
/**
 *Speedupfade-infade-outtoavoiduselessdelayintests.
 */
SurveyFormWidget.include({
    _submitForm:function(){
        this.fadeInOutDelay=0;
        returnthis._super.apply(this,arguments);
    }
});

/**
 *Thistourwilltestthat,forthedemocertificationallowing2attempts,ausercan
 *tryandfailtwiceandwillnolongerbeabletotakethecertification.
 */

vartour=require('web_tour.tour');

varfailSteps=[{//Page-1
    content:"ClickingonStartCertification",
    trigger:'button.btn.btn-primary.btn-lg:contains("StartCertification")',
},{//Question:DowesellAcousticBlocScreens?
    content:"Selectinganswer'No'",
    trigger:'div.js_question-wrapper:contains("DowesellAcousticBlocScreens")label:contains("No")',
},{//Question:Selectalltheexistingproducts
    content:"Tickinganswer'Fanta'",
    trigger:'div.js_question-wrapper:contains("Selectalltheexistingproducts")label:contains("Fanta")'
},{
    content:"Tickinganswer'Drawer'",
    trigger:'div.js_question-wrapper:contains("Selectalltheexistingproducts")label:contains("Drawer")'
},{
    content:"Tickinganswer'Conferencechair'",
    trigger:'div.js_question-wrapper:contains("Selectalltheexistingproducts")label:contains("Conferencechair")'
},{//Question:SelectalltheavailablecustomizationsforourCustomizableDesk
    content:"Tickinganswer'Color'",
    trigger:'div.js_question-wrapper:contains("SelectalltheavailablecustomizationsforourCustomizableDesk")label:contains("Color")'
},{
    content:"Tickinganswer'Height'",
    trigger:'div.js_question-wrapper:contains("SelectalltheavailablecustomizationsforourCustomizableDesk")label:contains("Height")'
},{//Question:HowmanyversionsoftheCornerDeskdowehave?
    content:"Selectinganswer'2'",
    trigger:'div.js_question-wrapper:contains("HowmanyversionsoftheCornerDeskdowehave")label:contains("2")',
},{//Question:Doyouthinkwehavemissingproductsinourcatalog?(notrated)
    content:"Missingproducts",
    trigger:'div.js_question-wrapper:contains("Doyouthinkwehavemissingproductsinourcatalog")textarea',
    run:"textIdon'tknowproductsenoughtobeabletoanswerthat",
},{//Page-2Question:HowmuchdowesellourCableManagementBox?
    content:"Selectinganswer'$80'",
    trigger:'div.js_question-wrapper:contains("HowmuchdowesellourCableManagementBox")label:contains("$80")',
},{//Question:Selectalltheproductsthatsellfor$100ormore
    content:"Tickinganswer'CornerDeskRightSit'",
    trigger:'div.js_question-wrapper:contains("Selectalltheproductsthatsellfor$100ormore")label:contains("CornerDeskRightSit")'
},{
    content:"Tickinganswer'DeskCombination'",
    trigger:'div.js_question-wrapper:contains("Selectalltheproductsthatsellfor$100ormore")label:contains("DeskCombination")'
},{
    content:"Tickinganswer'OfficeChairBlack'",
    trigger:'div.js_question-wrapper:contains("Selectalltheproductsthatsellfor$100ormore")label:contains("OfficeChairBlack")'
},{//Question:Whatdoyouthinkaboutourprices(notrated)?
    trigger:'div.js_question-wrapper:contains("Whatdoyouthinkaboutourprices")label:contains("Correctlypriced")',
},{//Page-3Question:Howmanydaysisourmoney-backguarantee?
    content:"Inputtinganswer'60'",
    trigger:'div.js_question-wrapper:contains("Howmanydaysisourmoney-backguarantee")input',
    run:'text60'
},{//Question:Ifacustomerpurchasesaproducton6January2020,whatisthelatestdayweexpecttoshipit?
    content:"Inputtinganswer'01/06/2020'",
    trigger:'div.js_question-wrapper:contains("Ifacustomerpurchasesaproducton6January2020,whatisthelatestdayweexpecttoshipit")input',
    run:'text01/06/2020'
},{//Question:Ifacustomerpurchasesa1yearwarrantyon6January2020,whendoweexpectthewarrantytoexpire?
    content:"Inputtinganswer'01/06/202100:00:01'",
    trigger:'div.js_question-wrapper:contains("Ifacustomerpurchasesa1yearwarrantyon6January2020,whendoweexpectthewarrantytoexpire")input',
    run:'text01/06/202100:00:01'
},{//Question:Whatdaytoyouthinkisbestforustostarthavinganannualsale(notrated)?
    trigger:'div.js_question-wrapper:contains("Whatdaytoyouthinkisbestforustostarthavinganannualsale(notrated)")input',
},{//Question:Whatdayandtimedoyouthinkmostcustomersaremostlikelytocallcustomerservice(notrated)?
    trigger:'div.js_question-wrapper:contains("Whatdayandtimedoyouthinkmostcustomersaremostlikelytocallcustomerservice(notrated)")input',
},{//Question:Howmanychairsdoyouthinkweshouldaimtosellinayear(notrated)?
    content:"Inputtinganswer'0'",
    trigger:'div.js_question-wrapper:contains("Howmanychairsdoyouthinkweshouldaimtosellinayear(notrated)")input',
    run:'text0'
},{
    content:"FinishSurvey",
    trigger:'button[type="submit"]',
}];

varretrySteps=[{
    trigger:'a:contains("Retry")'
}];

varlastSteps=[{
    trigger:'h1:contains("Thankyou!")',
    run:function(){
        if($('a:contains("Retry")').length===0){
            $('h1:contains("Thankyou!")').addClass('tour_success');
        }
    }
},{
    trigger:'h1.tour_success',
}];

tour.register('test_certification_failure',{
    test:true,
    url:'/survey/start/4ead4bc8-b8f2-4760-a682-1fde8daaaaac'
},[].concat(failSteps,retrySteps,failSteps,lastSteps));

});
